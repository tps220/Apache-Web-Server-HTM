\hypertarget{group__apr__lib}{}\section{General Purpose Library Routines}
\label{group__apr__lib}\index{General Purpose Library Routines@{General Purpose Library Routines}}
Collaboration diagram for General Purpose Library Routines\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{group__apr__lib}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__apr__lib_ga0c9dd98f46b90b5bcd4cbf75e252d0da}{H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN}~8192
\item 
\#define \hyperlink{group__apr__lib_gaa3b0264aadbd9f8d805252fb1ca1cd0e}{apr\+\_\+killpg}(\hyperlink{pcregrep_8txt_a4242e9148f20c002763bf4ba53b26ad6}{x},  \hyperlink{group__MOD__CACHE_gad4d47f76a849e2c428e3dd7f8c4eab1f}{y})~(killpg ((\hyperlink{pcregrep_8txt_a4242e9148f20c002763bf4ba53b26ad6}{x}), (\hyperlink{group__MOD__CACHE_gad4d47f76a849e2c428e3dd7f8c4eab1f}{y})))
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t} \hyperlink{group__apr__lib_ga5e9986deebda40f2d1cf8364fa03c3c5}{apr\+\_\+vformatter\+\_\+buff\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__lib_gafc328be562cbf80885289214b616e86f}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (const char $\ast$) apr\+\_\+filepath\+\_\+name\+\_\+get(const char $\ast$\hyperlink{group__APR__Util__DBM_gaf694cab4f4f6cd4b594af3c43cef1d0a}{pathname})
\item 
\hyperlink{group__apr__lib_gabfb3aa49508166a7d0cc70945b0164b7}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int}) apr\+\_\+vformatter(\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int}($\ast$flush\+\_\+func)(\hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga11dc1bdeac74315dbed17465c98879e9}{b})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t} $\ast$ \hyperlink{group__apr__lib_ga0823c5d125363d133fed61fb69c69cdd}{c}
\item 
\hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t} const char $\ast$ \hyperlink{group__apr__lib_ga0675cea1fc084bc705a06e8f2a1ccc98}{fmt}
\item 
\hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t} const char va\+\_\+list \hyperlink{group__apr__lib_gaaa28ecbd6731301051402d429bfb8540}{ap}
\item 
char $\ast$ \hyperlink{group__apr__lib_gac94b4a094f5865d6a5d4a7b04929e528}{pwbuf}
\item 
char \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} $\ast$ \hyperlink{group__apr__lib_ga423d6c42d72a554fc31208493f49913e}{bufsize}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This is collection of oddballs that didn\textquotesingle{}t fit anywhere else, and might move to more appropriate headers with the release of A\+PR 1.\+0. 

\subsection{Macro Definition Documentation}
\index{General Purpose Library Routines@{General Purpose Library Routines}!apr\+\_\+killpg@{apr\+\_\+killpg}}
\index{apr\+\_\+killpg@{apr\+\_\+killpg}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{apr\+\_\+killpg}{apr_killpg}}]{\setlength{\rightskip}{0pt plus 5cm}\#define apr\+\_\+killpg(
\begin{DoxyParamCaption}
\item[{}]{{\bf x}, }
\item[{}]{{\bf y}}
\end{DoxyParamCaption}
)~(killpg (({\bf x}), ({\bf y})))}\hypertarget{group__apr__lib_gaa3b0264aadbd9f8d805252fb1ca1cd0e}{}\label{group__apr__lib_gaa3b0264aadbd9f8d805252fb1ca1cd0e}
apr\+\_\+killpg Small utility macros to make things easier to read. Not usually a goal, to be sure.. \index{General Purpose Library Routines@{General Purpose Library Routines}!H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN@{H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN}}
\index{H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN@{H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN}{HUGE_STRING_LEN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define H\+U\+G\+E\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+L\+EN~8192}\hypertarget{group__apr__lib_ga0c9dd98f46b90b5bcd4cbf75e252d0da}{}\label{group__apr__lib_ga0c9dd98f46b90b5bcd4cbf75e252d0da}
A constant representing a \textquotesingle{}large\textquotesingle{} string. 

\subsection{Typedef Documentation}
\index{General Purpose Library Routines@{General Purpose Library Routines}!apr\+\_\+vformatter\+\_\+buff\+\_\+t@{apr\+\_\+vformatter\+\_\+buff\+\_\+t}}
\index{apr\+\_\+vformatter\+\_\+buff\+\_\+t@{apr\+\_\+vformatter\+\_\+buff\+\_\+t}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{apr\+\_\+vformatter\+\_\+buff\+\_\+t}{apr_vformatter_buff_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf apr\+\_\+vformatter\+\_\+buff\+\_\+t} {\bf apr\+\_\+vformatter\+\_\+buff\+\_\+t}}\hypertarget{group__apr__lib_ga5e9986deebda40f2d1cf8364fa03c3c5}{}\label{group__apr__lib_ga5e9986deebda40f2d1cf8364fa03c3c5}
\begin{DoxySeeAlso}{See also}
\hyperlink{structapr__vformatter__buff__t}{apr\+\_\+vformatter\+\_\+buff\+\_\+t} 
\end{DoxySeeAlso}


\subsection{Function Documentation}
\index{General Purpose Library Routines@{General Purpose Library Routines}!A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+R\+E(const char $\ast$) apr\+\_\+filepath\+\_\+name\+\_\+get(const char $\ast$pathname)}{APR_DECLARE(const char *) apr_filepath_name_get(const char *pathname)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{}
\end{DoxyParamCaption}
) const}\hypertarget{group__apr__lib_gafc328be562cbf80885289214b616e86f}{}\label{group__apr__lib_gafc328be562cbf80885289214b616e86f}
return the final element of the pathname 
\begin{DoxyParams}{Parameters}
{\em pathname} & The path to get the final element of \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the final element of the path 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}

\begin{DoxyPre}
For example:
                "/foo/bar/gum"    -> "gum"
                "/foo/bar/gum/"   -> ""
                "gum"             -> "gum"
                "bs\(\backslash\)\(\backslash\)path\(\backslash\)\(\backslash\)stuff" -> "stuff"
\end{DoxyPre}

\end{DoxyRemark}
Skip the common prefix {\itshape prefix} from the C string {\itshape str}, and return a pointer to the next character after the prefix. Return {\ttfamily N\+U\+LL} if {\itshape str} does not start with {\itshape prefix}.

\begin{DoxySince}{Since}
New in 1.\+6.
\end{DoxySince}
Get the value associated with a given key from the table. After this call, the data is still in the table. 
\begin{DoxyParams}{Parameters}
{\em t} & The table to search for the key \\
\hline
{\em key} & The key to search for (case does not matter) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value associated with the key, or N\+U\+LL if the key does not exist.
\end{DoxyReturn}
Get values associated with a given key from the table. If more than one value exists, return a comma separated list of values. After this call, the data is still in the table. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate the combined value from, if necessary \\
\hline
{\em t} & The table to search for the key \\
\hline
{\em key} & The key to search for (case does not matter) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value associated with the key, or N\+U\+LL if the key does not exist. 
\end{DoxyReturn}
\index{General Purpose Library Routines@{General Purpose Library Routines}!A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+R\+E(int) apr\+\_\+vformatter(int($\ast$flush\+\_\+func)(apr\+\_\+vformatter\+\_\+buff\+\_\+t $\ast$b)}{APR_DECLARE(int) apr_vformatter(int(*flush_func)(apr_vformatter_buff_t *b)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__apr__lib_gabfb3aa49508166a7d0cc70945b0164b7}{}\label{group__apr__lib_gabfb3aa49508166a7d0cc70945b0164b7}
apr\+\_\+vformatter() is a generic printf-\/style formatting routine with some extensions. 
\begin{DoxyParams}{Parameters}
{\em flush\+\_\+func} & The function to call when the buffer is full \\
\hline
{\em c} & The buffer to write to \\
\hline
{\em fmt} & The format string \\
\hline
{\em ap} & The arguments to use to fill out the format string.\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}

\begin{DoxyPre}
The extensions are:\end{DoxyPre}

\end{DoxyRemark}

\begin{DoxyItemize}
\item 
\begin{DoxyPre}\%pA takes a struct in\_addr *, and prints it as a.b.c.d\end{DoxyPre}

\item 
\begin{DoxyPre}\%pI takes an \hyperlink{structapr__sockaddr__t}{apr\_sockaddr\_t} * and prints it as a.b.c.d:port or
[ipv6-address]:port\end{DoxyPre}

\item 
\begin{DoxyPre}\%pT takes an apr\_os\_thread\_t * and prints it in decimal
('0' is printed if !APR\_HAS\_THREADS)\end{DoxyPre}

\item 
\begin{DoxyPre}\%pt takes an apr\_os\_thread\_t * and prints it in hexadecimal
('0' is printed if !APR\_HAS\_THREADS)\end{DoxyPre}

\item 
\begin{DoxyPre}\%pm takes an apr\_status\_t * and prints the appropriate error
string (from apr\_strerror) corresponding to that error code.\end{DoxyPre}

\item 
\begin{DoxyPre}\%pp takes a void * and outputs it in hex\end{DoxyPre}

\item 
\begin{DoxyPre}\%pB takes a apr\_uint32\_t * as bytes and outputs it's apr\_strfsize\end{DoxyPre}

\item 
\begin{DoxyPre}\%pF same as above, but takes a apr\_off\_t *\end{DoxyPre}

\item 
\begin{DoxyPre}\%pS same as above, but takes a apr\_size\_t *\end{DoxyPre}

\end{DoxyItemize}


\begin{DoxyPre}\%pA, \%pI, \%pT, \%pp are available from APR 1.0.0 onwards (and in 0.9.x).
\%pt is only available from APR 1.2.0 onwards.
\%pm, \%pB, \%pF and \%pS are only available from APR 1.3.0 onwards.\end{DoxyPre}



\begin{DoxyPre}The \%p hacks are to force gcc's printf warning code to skip
over a pointer argument without complaining.  This does
mean that the ANSI-style \%p (output a void * in hex format) won't
work as expected at all, but that seems to be a fair trade-off
for the increased robustness of having printf-warnings work.\end{DoxyPre}



\begin{DoxyPre}Additionally, apr\_vformatter allows for arbitrary output methods
using the apr\_vformatter\_buff and flush\_func.\end{DoxyPre}



\begin{DoxyPre}The apr\_vformatter\_buff has two elements curpos and endpos.
curpos is where apr\_vformatter will write the next byte of output.
It proceeds writing output to curpos, and updating curpos, until
either the end of output is reached, or curpos == endpos (i.e. the
buffer is full).\end{DoxyPre}



\begin{DoxyPre}If the end of output is reached, apr\_vformatter returns the
number of bytes written.\end{DoxyPre}



\begin{DoxyPre}When the buffer is full, the flush\_func is called.  The flush\_func
can return -1 to indicate that no further output should be attempted,
and apr\_vformatter will return immediately with -1.  Otherwise
the flush\_func should flush the buffer in whatever manner is
appropriate, re \hyperlink{structapr__pool__t}{apr\_pool\_t} nitialize curpos and endpos, and return 0.\end{DoxyPre}



\begin{DoxyPre}Note that flush\_func is only invoked as a result of attempting to
write another byte at curpos when curpos >= endpos.  So for
example, it's possible when the output exactly matches the buffer
space available that curpos == endpos will be true when
apr\_vformatter returns.\end{DoxyPre}



\begin{DoxyPre}apr\_vformatter does not call out to any other code, it is entirely
self-contained.  This allows the callers to do things which are
otherwise "unsafe".  For example, apr\_psprintf uses the "scratch"
space at the unallocated end of a block, and doesn't actually
complete the allocation until apr\_vformatter returns.  apr\_psprintf
would be completely broken if apr\_vformatter were to call anything
that used this same pool.  Similarly http\_bprintf() uses the "scratch"
space at the end of its output buffer, and doesn't actually note
that the space is in use until it either has to flush the buffer
or until apr\_vformatter returns.
\end{DoxyPre}


Display a prompt and read in the password from stdin. 
\begin{DoxyParams}{Parameters}
{\em prompt} & The prompt to display \\
\hline
{\em pwbuf} & Buffer to store the password \\
\hline
{\em bufsize} & The length of the password buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
If the password entered must be truncated to fit in the provided buffer, A\+P\+R\+\_\+\+E\+N\+A\+M\+E\+T\+O\+O\+L\+O\+NG will be returned. Note that the bufsize paramater is passed by reference for no reason; its value will never be modified by the apr\+\_\+password\+\_\+get() function. 
\end{DoxyRemark}
The problem with trying to output the entire iovec is that we cannot maintain the behaviour that a real writev would have. If we iterate over the iovec one at a time, we lose the atomic properties of \hyperlink{apr__arch__os2calls_8h_a3d0f3996136a9b5ab46431c60c746efd}{writev()}. The other option is to combine the entire iovec into one buffer that we could then send in one call to write(). This is not reasonable since we do not know how much data an iovec could contain.

The only reasonable option, that maintains the semantics of a real \hyperlink{apr__arch__os2calls_8h_a3d0f3996136a9b5ab46431c60c746efd}{writev()}, is to only write the first iovec. Callers of file\+\_\+writev() must deal with partial writes as they normally would. If you want to ensure an entire iovec is written, use apr\+\_\+file\+\_\+writev\+\_\+full().
\begin{DoxyCode}
23 \{
24     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
25 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{General Purpose Library Routines@{General Purpose Library Routines}!ap@{ap}}
\index{ap@{ap}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{ap}{ap}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+vformatter\+\_\+buff\+\_\+t} const char va\+\_\+list ap}\hypertarget{group__apr__lib_gaaa28ecbd6731301051402d429bfb8540}{}\label{group__apr__lib_gaaa28ecbd6731301051402d429bfb8540}
\index{General Purpose Library Routines@{General Purpose Library Routines}!bufsize@{bufsize}}
\index{bufsize@{bufsize}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{bufsize}{bufsize}}]{\setlength{\rightskip}{0pt plus 5cm}char {\bf apr\+\_\+size\+\_\+t}$\ast$ bufsize}\hypertarget{group__apr__lib_ga423d6c42d72a554fc31208493f49913e}{}\label{group__apr__lib_ga423d6c42d72a554fc31208493f49913e}
\index{General Purpose Library Routines@{General Purpose Library Routines}!c@{c}}
\index{c@{c}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{c}{c}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+vformatter\+\_\+buff\+\_\+t}$\ast$ c}\hypertarget{group__apr__lib_ga0823c5d125363d133fed61fb69c69cdd}{}\label{group__apr__lib_ga0823c5d125363d133fed61fb69c69cdd}
\index{General Purpose Library Routines@{General Purpose Library Routines}!fmt@{fmt}}
\index{fmt@{fmt}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{fmt}{fmt}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+vformatter\+\_\+buff\+\_\+t} const char$\ast$ fmt}\hypertarget{group__apr__lib_ga0675cea1fc084bc705a06e8f2a1ccc98}{}\label{group__apr__lib_ga0675cea1fc084bc705a06e8f2a1ccc98}
\index{General Purpose Library Routines@{General Purpose Library Routines}!pwbuf@{pwbuf}}
\index{pwbuf@{pwbuf}!General Purpose Library Routines@{General Purpose Library Routines}}
\subsubsection[{\texorpdfstring{pwbuf}{pwbuf}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ pwbuf}\hypertarget{group__apr__lib_gac94b4a094f5865d6a5d4a7b04929e528}{}\label{group__apr__lib_gac94b4a094f5865d6a5d4a7b04929e528}
