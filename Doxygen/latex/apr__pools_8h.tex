\hypertarget{apr__pools_8h}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/include/apr\+\_\+pools.h File Reference}
\label{apr__pools_8h}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/include/apr\+\_\+pools.\+h@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/include/apr\+\_\+pools.\+h}}


A\+PR memory allocation.  


{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+errno.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+general.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+want.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+allocator.\+h\char`\"{}}\\*
Include dependency graph for apr\+\_\+pools.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{apr__pools_8h__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{apr__pools_8h_a26faf43e3f61783d8b7aa928c0a41a11}{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}
\item 
\#define \hyperlink{group__apr__pools_ga89ce1d55c7f0c39ea87c88eabd655394}{A\+P\+R\+\_\+\+P\+O\+O\+L\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+A\+C\+C\+E\+S\+S\+OR}(\hyperlink{pcre_8txt_a2463fbbe8b0c90b90db12195e1edaa5d}{type})
\item 
\#define \hyperlink{group__apr__pools_ga43a8a52f68f8b7d3b7694c254da4a074}{A\+P\+R\+\_\+\+P\+O\+O\+L\+\_\+\+I\+M\+P\+L\+E\+M\+E\+N\+T\+\_\+\+A\+C\+C\+E\+S\+S\+OR}(\hyperlink{pcre_8txt_a2463fbbe8b0c90b90db12195e1edaa5d}{type})
\item 
\#define \hyperlink{group__apr__pools_gac81cff34d0ff4be52fa924663478eade}{A\+P\+R\+\_\+\+P\+O\+O\+L\+\_\+\+\_\+\+F\+I\+L\+E\+\_\+\+L\+I\+N\+E\+\_\+\+\_\+}~\+\_\+\+\_\+\+F\+I\+L\+E\+\_\+\+\_\+ \char`\"{}\+:\char`\"{} \hyperlink{apr__version_8h_ae90215615972dfa4108018304361ef0b}{A\+P\+R\+\_\+\+S\+T\+R\+I\+N\+G\+I\+FY}(\+\_\+\+\_\+\+L\+I\+N\+E\+\_\+\+\_\+)
\item 
\#define \hyperlink{group__apr__pools_gaa7c40921aae156b665e82b0a66991a39}{apr\+\_\+pool\+\_\+create}(newpool,  \hyperlink{group__apr__pools_ga3eb8c52002440da9a3eed11d54d08dd5}{parent})~apr\+\_\+pool\+\_\+create\+\_\+ex(newpool, \hyperlink{group__apr__pools_ga3eb8c52002440da9a3eed11d54d08dd5}{parent}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL})
\item 
\#define \hyperlink{group__apr__pools_gac5b45d10dd235432a214079792714226}{apr\+\_\+pool\+\_\+create\+\_\+core}(newpool)~apr\+\_\+pool\+\_\+create\+\_\+unmanaged\+\_\+ex(newpool, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL})
\item 
\#define \hyperlink{group__apr__pools_ga03a06feb239bed9edd79a4f59679d56b}{apr\+\_\+pool\+\_\+create\+\_\+unmanaged}(newpool)~apr\+\_\+pool\+\_\+create\+\_\+unmanaged\+\_\+ex(newpool, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL})
\item 
\#define \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\+\_\+pcalloc}(\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p},  \hyperlink{README_8txt_a870076999eb1486aa63d2e2cf5cdfa55}{size})~memset(apr\+\_\+palloc(\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p}, \hyperlink{README_8txt_a870076999eb1486aa63d2e2cf5cdfa55}{size}), 0, \hyperlink{README_8txt_a870076999eb1486aa63d2e2cf5cdfa55}{size})
\item 
\#define \hyperlink{group__PoolDebug_ga2f4a522b89e7bf12e17bf8427ec1a50f}{apr\+\_\+pool\+\_\+join}(\hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a},  \hyperlink{group__APR__Util__Bucket__Brigades_ga11dc1bdeac74315dbed17465c98879e9}{b})
\item 
\#define \hyperlink{group__PoolDebug_gaf225c04d565ebc6c37bbf018d6e407d5}{apr\+\_\+pool\+\_\+lock}(\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool},  \hyperlink{group__APR__Util__RMM_ga0353fe7d0bd33c38d9a7a57a73b6407e}{lock})
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} \hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}
\item 
typedef \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int}($\ast$ \hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}) (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} retcode)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__pools_ga95a4b4050d59535eea61951c649d49e6}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}) apr\+\_\+pool\+\_\+initialize(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{group__apr__pools_gac01d61b42e8b6e65b0da64d18ce146ac}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) apr\+\_\+pool\+\_\+terminate(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} \hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t} \hyperlink{structapr__allocator__t}{apr\+\_\+allocator\+\_\+t} $\ast$\hyperlink{group__apr__pools_ga3d4c7b6ba19a3b46b6fecdee3d867787}{allocator} \hyperlink{group__apr__pools_gae343a929da26c12e60a11b0ea647ea90}{\+\_\+\+\_\+attribute\+\_\+\+\_\+} ((nonnull(1)))
\item 
\hyperlink{group__apr__pools_ga4f2ec0d4771217976fecfeef29780ab0}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{structapr__allocator__t}{apr\+\_\+allocator\+\_\+t} $\ast$) apr\+\_\+pool\+\_\+allocator\+\_\+get(\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool}) \hyperlink{group__APR__Util__Bucket__Brigades_gae0af316ed59541b70389da41aaeef4b6}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}((nonnull(1)))
\item 
\hyperlink{group__apr__pools_ga7cb63e2c63fd7769ce05b8bd5d82b833}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$) apr\+\_\+palloc(\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool} \hyperlink{group__apr__pools_gab07c79075d4123104a7c152ad13cd63f}{\+\_\+\+\_\+attribute\+\_\+\+\_\+} ((nonnull(2)))
\item 
\hyperlink{group__apr__pools_gaba3977fd7aba8ec156375bf8e6bcf061}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}) apr\+\_\+pool\+\_\+abort\+\_\+get(\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool}) \hyperlink{group__APR__Util__Bucket__Brigades_gae0af316ed59541b70389da41aaeef4b6}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}((nonnull(1)))
\item 
\hyperlink{group__apr__pools_ga423b5a3ecdf41b53559f971f5777cbc4}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$) apr\+\_\+pool\+\_\+parent\+\_\+get(\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool}) \hyperlink{group__APR__Util__Bucket__Brigades_gae0af316ed59541b70389da41aaeef4b6}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}((nonnull(1)))
\item 
const char \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool} \hyperlink{group__apr__pools_ga8402402afc75175228d3d177681189b1}{\+\_\+\+\_\+attribute\+\_\+\+\_\+} ((nonnull(1, 2, 3)))
\item 
\hyperlink{group__PoolCleanup_ga18235426bac93f23261221f9b3733bfd}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD} (\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}) apr\+\_\+pool\+\_\+cleanup\+\_\+null(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$\hyperlink{structdata}{data})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$ \hyperlink{group__apr__pools_ga3eb8c52002440da9a3eed11d54d08dd5}{parent}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} \hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t} \hyperlink{group__apr__pools_gaf5a8821081b4fed18bef302377c796e4}{abort\+\_\+fn}
\item 
\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t} \hyperlink{structapr__allocator__t}{apr\+\_\+allocator\+\_\+t} $\ast$ \hyperlink{group__apr__pools_ga3d4c7b6ba19a3b46b6fecdee3d867787}{allocator}
\item 
\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t} \hyperlink{structapr__allocator__t}{apr\+\_\+allocator\+\_\+t} const char $\ast$ \hyperlink{group__apr__pools_ga6ff83cbf1d5de0befaa318c392539164}{file\+\_\+line}
\item 
\hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} \hyperlink{group__apr__pools_ga5f598d678d0ca77c25732a145c68d3c7}{size}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$ \hyperlink{group__apr__pools_ga2e9e9d1380aacd6ec8b616ae04374821}{b}
\item 
const char $\ast$ \hyperlink{group__apr__pools_gacd3d88da3c0e0313c3645ff34f62f542}{key}
\item 
const char \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$ \hyperlink{group__apr__pools_ga36572a384d49086c60d5aeec6fea04fc}{cleanup} )(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$)
\item 
const char \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$) \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$poo \hyperlink{group__apr__pools_ga4ac3dbc221e1d805779ab73b97a3566e}{\+\_\+\+\_\+attribute\+\_\+\+\_\+} )((nonnull(2, 4)))
\item 
const \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$ \hyperlink{group__PoolCleanup_ga759cdc4d96e9faaa06ff1cc8ec7962f6}{data}
\item 
const \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$ \hyperlink{group__PoolCleanup_ga329cbf0c5d8e0c61c40f78cdf67d4471}{plain\+\_\+cleanup} )(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$)
\item 
const \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$) \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$ \hyperlink{group__PoolCleanup_ga09accdea610fa869f6e853529fd584f1}{child\+\_\+cleanup} )(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$)) \hyperlink{group__APR__Util__Bucket__Brigades_gae0af316ed59541b70389da41aaeef4b6}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}((nonnull(3
\item 
const \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$) \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$ \hyperlink{group__PoolCleanup_ga8f8e9a6584250688c1f6d72252321b54}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} )(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) apr\+\_\+pool\+\_\+pre\+\_\+cleanup\+\_\+register(\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A\+PR memory allocation. 

Resource allocation routines...

designed so that we don\textquotesingle{}t have to keep track of E\+V\+E\+R\+Y\+T\+H\+I\+NG so that it can be explicitly freed later (a fundamentally unsound strategy --- particularly in the presence of die()).

Instead, we maintain pools, and allocate items (both memory and I/O handlers) from the pools --- currently there are two, one for per-\/transaction info, and one for config info. When a transaction is over, we can delete everything in the per-\/transaction \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} without fear, and without thinking too hard about it either.

Note that most operations on pools are not thread-\/safe\+: a single pool should only be accessed by a single thread at any given time. The one exception to this rule is creating a subpool of a given pool\+: one or more threads can safely create subpools at the same time that another thread accesses the parent pool. 

\subsection{Macro Definition Documentation}
\index{apr\+\_\+pools.\+h@{apr\+\_\+pools.\+h}!A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}}
\index{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}!apr\+\_\+pools.\+h@{apr\+\_\+pools.\+h}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}{APR_WANT_MEMFUNC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}\hypertarget{apr__pools_8h_a26faf43e3f61783d8b7aa928c0a41a11}{}\label{apr__pools_8h_a26faf43e3f61783d8b7aa928c0a41a11}
for no good reason? 