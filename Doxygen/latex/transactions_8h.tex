\hypertarget{transactions_8h}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/modules/cache/transactions.h File Reference}
\label{transactions_8h}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/cache/transactions.\+h@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/cache/transactions.\+h}}
{\ttfamily \#include $<$pthread.\+h$>$}\\*
{\ttfamily \#include $<$immintrin.\+h$>$}\\*
{\ttfamily \#include $<$x86intrin.\+h$>$}\\*
Include dependency graph for transactions.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{transactions_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=230pt]{transactions_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{transactions_8h_afd4c45a86f1dfadb867aa1ee4049c76c}{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T}~pthread\+\_\+mutex\+\_\+t
\item 
\#define \hyperlink{transactions_8h_aa9b81260db51f9f41552857be8944750}{I\+S\+\_\+\+L\+O\+C\+K\+ED}(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock})~$\ast$((volatile \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int}$\ast$)(\&\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock})) != 0
\item 
\#define \hyperlink{transactions_8h_abc659bdb3eca954695ead2a5707d2e13}{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT}(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock})~pthread\+\_\+mutex\+\_\+init(\&(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock}), \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL})
\item 
\#define \hyperlink{transactions_8h_a5e1685a71e0c0286959feb9566bde42f}{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK}(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock})~pthread\+\_\+mutex\+\_\+lock(\&(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock}))
\item 
\#define \hyperlink{transactions_8h_a9342e0d6cf2d302bf049d067b6a68578}{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK}(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock})~pthread\+\_\+mutex\+\_\+unlock(\&(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock}))
\item 
\#define \hyperlink{transactions_8h_a835f94f8c1bb5f8a9470c3356e6233cf}{T\+M\+\_\+\+B\+E\+G\+IN}
\item 
\#define \hyperlink{transactions_8h_a13a5d474cb5c9b5c6f3bd33ad11fe2aa}{T\+M\+\_\+\+E\+ND}
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{transactions_8h_a8d68983215cef87d76daa2e99b6812f0}{capacity\+\_\+abort}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{transactions_8h_a91c7ced92c76a271a36873de50037669}{conflict\+\_\+abort}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{transactions_8h_aea9f1acd38b1f906b9593245287212b8}{other\+\_\+abort}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{transactions_8h_aa9ec6846d47794438cd364ba0e5273a7}{gl\+\_\+abort}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{transactions_8h_aad979d03d5746cb3daed59e9a06ac5af}{gl\+\_\+count}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{transactions_8h_ac1c38d6ff621c33e427cd4fad720a624}{htm\+\_\+count}
\item 
\hyperlink{transactions_8h_afd4c45a86f1dfadb867aa1ee4049c76c}{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T} \hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{transactions.\+h@{transactions.\+h}!I\+S\+\_\+\+L\+O\+C\+K\+ED@{I\+S\+\_\+\+L\+O\+C\+K\+ED}}
\index{I\+S\+\_\+\+L\+O\+C\+K\+ED@{I\+S\+\_\+\+L\+O\+C\+K\+ED}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{I\+S\+\_\+\+L\+O\+C\+K\+ED}{IS_LOCKED}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+S\+\_\+\+L\+O\+C\+K\+ED(
\begin{DoxyParamCaption}
\item[{}]{{\bf plock}}
\end{DoxyParamCaption}
)~$\ast$((volatile {\bf int}$\ast$)(\&{\bf plock})) != 0}\hypertarget{transactions_8h_aa9b81260db51f9f41552857be8944750}{}\label{transactions_8h_aa9b81260db51f9f41552857be8944750}
\index{transactions.\+h@{transactions.\+h}!T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT}}
\index{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT}{THREAD_MUTEX_INIT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+IT(
\begin{DoxyParamCaption}
\item[{}]{{\bf plock}}
\end{DoxyParamCaption}
)~pthread\+\_\+mutex\+\_\+init(\&({\bf plock}), {\bf N\+U\+LL})}\hypertarget{transactions_8h_abc659bdb3eca954695ead2a5707d2e13}{}\label{transactions_8h_abc659bdb3eca954695ead2a5707d2e13}
\index{transactions.\+h@{transactions.\+h}!T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK}}
\index{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK}{THREAD_MUTEX_LOCK}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK(
\begin{DoxyParamCaption}
\item[{}]{{\bf plock}}
\end{DoxyParamCaption}
)~pthread\+\_\+mutex\+\_\+lock(\&({\bf plock}))}\hypertarget{transactions_8h_a5e1685a71e0c0286959feb9566bde42f}{}\label{transactions_8h_a5e1685a71e0c0286959feb9566bde42f}
\index{transactions.\+h@{transactions.\+h}!T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T}}
\index{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T}{THREAD_MUTEX_T}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T~pthread\+\_\+mutex\+\_\+t}\hypertarget{transactions_8h_afd4c45a86f1dfadb867aa1ee4049c76c}{}\label{transactions_8h_afd4c45a86f1dfadb867aa1ee4049c76c}
\index{transactions.\+h@{transactions.\+h}!T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK}}
\index{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK@{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK}{THREAD_MUTEX_UNLOCK}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK(
\begin{DoxyParamCaption}
\item[{}]{{\bf plock}}
\end{DoxyParamCaption}
)~pthread\+\_\+mutex\+\_\+unlock(\&({\bf plock}))}\hypertarget{transactions_8h_a9342e0d6cf2d302bf049d067b6a68578}{}\label{transactions_8h_a9342e0d6cf2d302bf049d067b6a68578}
\index{transactions.\+h@{transactions.\+h}!T\+M\+\_\+\+B\+E\+G\+IN@{T\+M\+\_\+\+B\+E\+G\+IN}}
\index{T\+M\+\_\+\+B\+E\+G\+IN@{T\+M\+\_\+\+B\+E\+G\+IN}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{T\+M\+\_\+\+B\+E\+G\+IN}{TM_BEGIN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+M\+\_\+\+B\+E\+G\+IN}\hypertarget{transactions_8h_a835f94f8c1bb5f8a9470c3356e6233cf}{}\label{transactions_8h_a835f94f8c1bb5f8a9470c3356e6233cf}
{\bfseries Value\+:}
\begin{DoxyCode}
\{                                               \hyperlink{group__MOD__WATCHDOG_gaf0b5a943e734de7ea24142e2c81d82ef}{\(\backslash\)}
\hyperlink{group__MOD__WATCHDOG_gaf0b5a943e734de7ea24142e2c81d82ef}{        int} tries = 5;                           \hyperlink{util__expr__scan_8c_a8fdafe3be7e00ce3d4f0cb50a9a5eb39}{\(\backslash\)}
\hyperlink{util__expr__scan_8c_a8fdafe3be7e00ce3d4f0cb50a9a5eb39}{        while}(1)\{                                  \hyperlink{util__expr__scan_8c_a8fdafe3be7e00ce3d4f0cb50a9a5eb39}{\(\backslash\)}
\hyperlink{util__expr__scan_8c_a8fdafe3be7e00ce3d4f0cb50a9a5eb39}{            while}(\hyperlink{transactions_8h_aa9b81260db51f9f41552857be8944750}{IS\_LOCKED}(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock}))\{                 \(\backslash\)
                \_\_asm\_\_ ( \textcolor{stringliteral}{"pause;"} );               \(\backslash\)
            \}                                       \hyperlink{group__MOD__WATCHDOG_gaf0b5a943e734de7ea24142e2c81d82ef}{\(\backslash\)}
\hyperlink{group__MOD__WATCHDOG_gaf0b5a943e734de7ea24142e2c81d82ef}{            int} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status} = \_xbegin();                    \hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{\(\backslash\)}
\hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{            if}(status == \_XBEGIN\_STARTED)\{            \hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{\(\backslash\)}
\hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{                if}(\hyperlink{transactions_8h_aa9b81260db51f9f41552857be8944750}{IS\_LOCKED}(\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock}))\{               \(\backslash\)
                    \_xabort(30);                    \(\backslash\)
                \}                                   \(\backslash\)
                break;                              \(\backslash\)
            \}                                       \hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{\(\backslash\)}
\hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{            if}(status & \_XABORT\_CODE(30))\{            \hyperlink{transactions_8h_aa9ec6846d47794438cd364ba0e5273a7}{\(\backslash\)}
\hyperlink{transactions_8h_aa9ec6846d47794438cd364ba0e5273a7}{                gl\_abort}++;                         \(\backslash\)
            \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(status & \_XABORT\_CAPACITY)\{   \hyperlink{transactions_8h_a8d68983215cef87d76daa2e99b6812f0}{\(\backslash\)}
\hyperlink{transactions_8h_a8d68983215cef87d76daa2e99b6812f0}{                capacity\_abort}++;                 \(\backslash\)
            \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(status & \_XABORT\_CONFLICT)\{   \hyperlink{transactions_8h_a91c7ced92c76a271a36873de50037669}{\(\backslash\)}
\hyperlink{transactions_8h_a91c7ced92c76a271a36873de50037669}{                conflict\_abort}++;                 \(\backslash\)
            \} \textcolor{keywordflow}{else}\{                                 \hyperlink{transactions_8h_aea9f1acd38b1f906b9593245287212b8}{\(\backslash\)}
\hyperlink{transactions_8h_aea9f1acd38b1f906b9593245287212b8}{                other\_abort}++;                       \(\backslash\)
            \}                                       \(\backslash\)
            tries--;                                \hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{\(\backslash\)}
\hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{            if}(tries <= 0)\{                           \(\backslash\)
                pthread\_mutex\_lock(&\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock});            \(\backslash\)
                break;                              \(\backslash\)
            \}                                       \(\backslash\)
        \}
\end{DoxyCode}
\index{transactions.\+h@{transactions.\+h}!T\+M\+\_\+\+E\+ND@{T\+M\+\_\+\+E\+ND}}
\index{T\+M\+\_\+\+E\+ND@{T\+M\+\_\+\+E\+ND}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{T\+M\+\_\+\+E\+ND}{TM_END}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+M\+\_\+\+E\+ND}\hypertarget{transactions_8h_a13a5d474cb5c9b5c6f3bd33ad11fe2aa}{}\label{transactions_8h_a13a5d474cb5c9b5c6f3bd33ad11fe2aa}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{if}(tries > 0)\{                              \(\backslash\)
            \_xend();                                \hyperlink{transactions_8h_ac1c38d6ff621c33e427cd4fad720a624}{\(\backslash\)}
\hyperlink{transactions_8h_ac1c38d6ff621c33e427cd4fad720a624}{            htm\_count}++;                           \(\backslash\)
        \} \textcolor{keywordflow}{else} \{                                    \(\backslash\)
            pthread\_mutex\_unlock(&\hyperlink{transactions_8h_af19066337b2ec2ac82407118f122548e}{plock});          \hyperlink{transactions_8h_aad979d03d5746cb3daed59e9a06ac5af}{\(\backslash\)}
\hyperlink{transactions_8h_aad979d03d5746cb3daed59e9a06ac5af}{            gl\_count}++;                             \(\backslash\)
        \}                                           \(\backslash\)
    \};
\end{DoxyCode}


\subsection{Variable Documentation}
\index{transactions.\+h@{transactions.\+h}!capacity\+\_\+abort@{capacity\+\_\+abort}}
\index{capacity\+\_\+abort@{capacity\+\_\+abort}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{capacity\+\_\+abort}{capacity_abort}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} capacity\+\_\+abort}\hypertarget{transactions_8h_a8d68983215cef87d76daa2e99b6812f0}{}\label{transactions_8h_a8d68983215cef87d76daa2e99b6812f0}
\index{transactions.\+h@{transactions.\+h}!conflict\+\_\+abort@{conflict\+\_\+abort}}
\index{conflict\+\_\+abort@{conflict\+\_\+abort}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{conflict\+\_\+abort}{conflict_abort}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} conflict\+\_\+abort}\hypertarget{transactions_8h_a91c7ced92c76a271a36873de50037669}{}\label{transactions_8h_a91c7ced92c76a271a36873de50037669}
\index{transactions.\+h@{transactions.\+h}!gl\+\_\+abort@{gl\+\_\+abort}}
\index{gl\+\_\+abort@{gl\+\_\+abort}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{gl\+\_\+abort}{gl_abort}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} gl\+\_\+abort}\hypertarget{transactions_8h_aa9ec6846d47794438cd364ba0e5273a7}{}\label{transactions_8h_aa9ec6846d47794438cd364ba0e5273a7}
\index{transactions.\+h@{transactions.\+h}!gl\+\_\+count@{gl\+\_\+count}}
\index{gl\+\_\+count@{gl\+\_\+count}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{gl\+\_\+count}{gl_count}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} gl\+\_\+count}\hypertarget{transactions_8h_aad979d03d5746cb3daed59e9a06ac5af}{}\label{transactions_8h_aad979d03d5746cb3daed59e9a06ac5af}
\index{transactions.\+h@{transactions.\+h}!htm\+\_\+count@{htm\+\_\+count}}
\index{htm\+\_\+count@{htm\+\_\+count}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{htm\+\_\+count}{htm_count}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} htm\+\_\+count}\hypertarget{transactions_8h_ac1c38d6ff621c33e427cd4fad720a624}{}\label{transactions_8h_ac1c38d6ff621c33e427cd4fad720a624}
\index{transactions.\+h@{transactions.\+h}!other\+\_\+abort@{other\+\_\+abort}}
\index{other\+\_\+abort@{other\+\_\+abort}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{other\+\_\+abort}{other_abort}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} other\+\_\+abort}\hypertarget{transactions_8h_aea9f1acd38b1f906b9593245287212b8}{}\label{transactions_8h_aea9f1acd38b1f906b9593245287212b8}
\index{transactions.\+h@{transactions.\+h}!plock@{plock}}
\index{plock@{plock}!transactions.\+h@{transactions.\+h}}
\subsubsection[{\texorpdfstring{plock}{plock}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+T} plock}\hypertarget{transactions_8h_af19066337b2ec2ac82407118f122548e}{}\label{transactions_8h_af19066337b2ec2ac82407118f122548e}
