\hypertarget{sockperf_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/test/sockperf.c File Reference}
\label{sockperf_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/test/sockperf.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/test/sockperf.\+c}}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+network\+\_\+io.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
Include dependency graph for sockperf.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sockperf_8c__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtestSet}{test\+Set}
\item 
struct \hyperlink{structtestResult}{test\+Result}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sockperf_8c_a0ea0040e87eeb2a4c9605ebc4959315e}{M\+A\+X\+\_\+\+I\+T\+E\+RS}~10
\item 
\#define \hyperlink{sockperf_8c_a85c439d7c508333242d12c0fb9cd242b}{T\+E\+S\+T\+\_\+\+S\+I\+ZE}~1024
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{sockperf_8c_a3c04138a5bfe5d72780bb7e82a18e627}{main} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__apr__getopt_ga6bdebf9385dc069c90aa21989641be02}{argc}, char $\ast$$\ast$\hyperlink{group__apr__getopt_ga675a108e956f4e2ea74dae8d26e6273e}{argv})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtestSet}{test\+Set} \hyperlink{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{test\+Runs} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{sockperf.\+c@{sockperf.\+c}!M\+A\+X\+\_\+\+I\+T\+E\+RS@{M\+A\+X\+\_\+\+I\+T\+E\+RS}}
\index{M\+A\+X\+\_\+\+I\+T\+E\+RS@{M\+A\+X\+\_\+\+I\+T\+E\+RS}!sockperf.\+c@{sockperf.\+c}}
\subsubsection[{\texorpdfstring{M\+A\+X\+\_\+\+I\+T\+E\+RS}{MAX_ITERS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+\_\+\+I\+T\+E\+RS~10}\hypertarget{sockperf_8c_a0ea0040e87eeb2a4c9605ebc4959315e}{}\label{sockperf_8c_a0ea0040e87eeb2a4c9605ebc4959315e}
\index{sockperf.\+c@{sockperf.\+c}!T\+E\+S\+T\+\_\+\+S\+I\+ZE@{T\+E\+S\+T\+\_\+\+S\+I\+ZE}}
\index{T\+E\+S\+T\+\_\+\+S\+I\+ZE@{T\+E\+S\+T\+\_\+\+S\+I\+ZE}!sockperf.\+c@{sockperf.\+c}}
\subsubsection[{\texorpdfstring{T\+E\+S\+T\+\_\+\+S\+I\+ZE}{TEST_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+S\+T\+\_\+\+S\+I\+ZE~1024}\hypertarget{sockperf_8c_a85c439d7c508333242d12c0fb9cd242b}{}\label{sockperf_8c_a85c439d7c508333242d12c0fb9cd242b}


\subsection{Function Documentation}
\index{sockperf.\+c@{sockperf.\+c}!main@{main}}
\index{main@{main}!sockperf.\+c@{sockperf.\+c}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$$\ast$argv)}{main(int argc, char **argv)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} main (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}\hypertarget{sockperf_8c_a3c04138a5bfe5d72780bb7e82a18e627}{}\label{sockperf_8c_a3c04138a5bfe5d72780bb7e82a18e627}

\begin{DoxyCode}
213 \{
214     \hyperlink{structapr__pool__t}{apr\_pool\_t} *\hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool};
215     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
216     \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
217     \textcolor{keywordtype}{int} nTests = \textcolor{keyword}{sizeof}(\hyperlink{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{testRuns}) / \textcolor{keyword}{sizeof}(\hyperlink{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{testRuns}[0]);
218     \textcolor{keyword}{struct }\hyperlink{structtestResult}{testResult} *\hyperlink{NON-AUTOTOOLS-BUILD_8txt_a9237582cb59392bdaeda6c248df4441c}{results};
219 
220     printf(\textcolor{stringliteral}{"APR Test Application: sockperf\(\backslash\)n"});
221 
222     apr\_initialize();
223     atexit(apr\_terminate);
224 
225     \hyperlink{group__apr__pools_gaa7c40921aae156b665e82b0a66991a39}{apr\_pool\_create}(&pool, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
226 
227     results = (\textcolor{keyword}{struct }\hyperlink{structtestResult}{testResult} *)\hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(pool, 
228                                         \textcolor{keyword}{sizeof}(*results) * nTests);
229 
230     \textcolor{keywordflow}{for} (i = 0; i < nTests; i++) \{
231         printf(\textcolor{stringliteral}{"Test -> %c\(\backslash\)n"}, \hyperlink{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{testRuns}[i].\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c});
232         results[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}].\hyperlink{structtestResult_ab27c1fa625ffceb52ab42419d4530184}{size} = \hyperlink{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{testRuns}[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}].\hyperlink{structtestSet_a3fd1a4c68f1cb020f0652534b07c25dd}{size} * (\hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t})
      \hyperlink{sockperf_8c_a85c439d7c508333242d12c0fb9cd242b}{TEST\_SIZE};
233         rv = runTest(&\hyperlink{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{testRuns}[i], &results[i], pool);
234         \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
235             \textcolor{comment}{/* error already reported */}
236             \hyperlink{group__APACHE__OS__NETWARE_gaac7f3a566d7243651a356db3fcfef6b1}{exit}(1);
237         \}
238     \}
239 
240     printf(\textcolor{stringliteral}{"Tests Complete!\(\backslash\)n"});
241     \textcolor{keywordflow}{for} (i = 0; i < nTests; i++) \{
242         \textcolor{keywordtype}{int} j;
243         \hyperlink{group__apr__time_gadb4bde16055748190eae190c55aa02bb}{apr\_time\_t} totTime = 0;
244         printf(\textcolor{stringliteral}{"%10d byte block:\(\backslash\)n"}, results[i].\hyperlink{group__APACHE__CORE__CONFIG_ga2bd3edb50f631a96f1b729fde236ff43}{size});
245         printf(\textcolor{stringliteral}{"\(\backslash\)t%2d iterations : "}, results[i].\hyperlink{structtestResult_a4c897ff41ed805006f004a102feadada}{iters});
246         \textcolor{keywordflow}{for} (j = 0; j < results[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}].\hyperlink{structtestResult_a4c897ff41ed805006f004a102feadada}{iters}; j++) \{
247             printf(\textcolor{stringliteral}{"%6"} \hyperlink{group__apr__time_gaad2d372b64a68d96b1e4c5f1173eb2c7}{APR\_TIME\_T\_FMT}, results[i].\hyperlink{structtestResult_add970ab6e22eca4b2c2d252a0292d62d}{msecs}[j]);
248             totTime += results[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}].\hyperlink{structtestResult_add970ab6e22eca4b2c2d252a0292d62d}{msecs}[j];
249         \}
250         printf(\textcolor{stringliteral}{"<\(\backslash\)n"});
251         printf(\textcolor{stringliteral}{"\(\backslash\)t  Average: %6"} \hyperlink{group__apr__time_gaad2d372b64a68d96b1e4c5f1173eb2c7}{APR\_TIME\_T\_FMT} \textcolor{stringliteral}{"\(\backslash\)n"},
252                totTime / results[i].\hyperlink{structtestResult_a4c897ff41ed805006f004a102feadada}{iters});
253     \}
254 
255     \textcolor{keywordflow}{return} 0;
256 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{sockperf.\+c@{sockperf.\+c}!test\+Runs@{test\+Runs}}
\index{test\+Runs@{test\+Runs}!sockperf.\+c@{sockperf.\+c}}
\subsubsection[{\texorpdfstring{test\+Runs}{testRuns}}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf test\+Set}  test\+Runs\mbox{[}$\,$\mbox{]}}\hypertarget{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}{}\label{sockperf_8c_a2be06ba71d15bde0b20c78b117638c90}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    \{ \textcolor{charliteral}{'a'}, 1, 3 \},
    \{ \textcolor{charliteral}{'b'}, 4, 3 \},
    \{ \textcolor{charliteral}{'c'}, 16, 5 \},
    \{ \textcolor{charliteral}{'d'}, 64, 5 \},
    \{ \textcolor{charliteral}{'e'}, 256, 10 \},
\}
\end{DoxyCode}
