\hypertarget{listen_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/server/listen.c File Reference}
\label{listen_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/server/listen.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/server/listen.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+network\+\_\+io.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+want.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ap\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}httpd.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+main.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+core.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ap\+\_\+listen.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+log.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mpm\+\_\+common.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
Include dependency graph for listen.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{listen_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{listen_8c_a88a4bf7f483aad3f3945773f3383e713}{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}
\item 
\#define \hyperlink{listen_8c_ae75325996d1b2cf6120dded4cb153a22}{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}~\hyperlink{group__APACHE__CORE__HTTPD_gaf1cdaac5f4562d9d20bae417471ad422}{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}
\item 
\#define \hyperlink{listen_8c_aa48e4c44e5c1a300d50d74a448331a2e}{I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY}(\hyperlink{group__apr__mcast_gaf32a3eae6659774e82d8fc61ebc0169d}{addr})
\item 
\#define \hyperlink{listen_8c_a88c3978d1c563816bdc750e8002ca373}{I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY}(\hyperlink{group__apr__mcast_gaf32a3eae6659774e82d8fc61ebc0169d}{addr})
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{listen_8c_ace56382e8c8bdfffe9ffc8dbab06d36c}{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int})
\item 
\hyperlink{group__APACHE__CORE__LISTEN_ga41a09cbeeecb4898dbae176a6e720c68}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{group__AP__EXPR_ga1ac0588c7c2ca64ea23710360d5f6f85}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int})
\item 
\hyperlink{group__hooks_ga2991c49e63464ffbc0a6d82f1878f0cd}{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{listen_8c_a3c3d35fe71135329f5cf444e02610da7}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD} (const char $\ast$)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{structap__listen__rec}{ap\+\_\+listen\+\_\+rec} $\ast$ \hyperlink{group__APACHE__CORE__LISTEN_ga56c54ed44b1a272142d9fe4dd5a81a82}{ap\+\_\+listeners} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{N\+U\+LL}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__APACHE__CORE__LISTEN_ga0d73e566cf6c3a900b04c72a5c67ead2}{ap\+\_\+num\+\_\+listen\+\_\+buckets}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__APACHE__CORE__LISTEN_ga6a0a7f2932b9eebc3f3667e885860e96}{ap\+\_\+have\+\_\+so\+\_\+reuseport} = -\/1
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{listen.\+c@{listen.\+c}!A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX@{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}}
\index{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX@{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}!listen.\+c@{listen.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}{APLOG_MODULE_INDEX}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX~{\bf A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}}\hypertarget{listen_8c_ae75325996d1b2cf6120dded4cb153a22}{}\label{listen_8c_ae75325996d1b2cf6120dded4cb153a22}
\index{listen.\+c@{listen.\+c}!A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}}
\index{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}!listen.\+c@{listen.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}{APR_WANT_STRFUNC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}\hypertarget{listen_8c_a88a4bf7f483aad3f3945773f3383e713}{}\label{listen_8c_a88a4bf7f483aad3f3945773f3383e713}
\index{listen.\+c@{listen.\+c}!I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY@{I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY}}
\index{I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY@{I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY}!listen.\+c@{listen.\+c}}
\subsubsection[{\texorpdfstring{I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY}{IS_IN6ADDR_ANY}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+S\+\_\+\+I\+N6\+A\+D\+D\+R\+\_\+\+A\+NY(
\begin{DoxyParamCaption}
\item[{}]{{\bf addr}}
\end{DoxyParamCaption}
)}\hypertarget{listen_8c_a88c3978d1c563816bdc750e8002ca373}{}\label{listen_8c_a88c3978d1c563816bdc750e8002ca373}
{\bfseries Value\+:}
\begin{DoxyCode}
((\hyperlink{group__MOD__PROXY_ga6d5ecaf37baca2c5cd2dfca34109da7e}{addr})->\hyperlink{group__apr__network__io_ga22f2baef89908641382fdf6fb41e8b83}{family} == \hyperlink{group__apr__network__io_gad09d9ea8995f50f35073ae0c77efb44f}{APR\_INET6} \(\backslash\)
                              && IN6\_IS\_ADDR\_UNSPECIFIED(&(\hyperlink{group__MOD__PROXY_ga6d5ecaf37baca2c5cd2dfca34109da7e}{addr})->sa.sin6.sin6\_addr))
\end{DoxyCode}
\index{listen.\+c@{listen.\+c}!I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY@{I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY}}
\index{I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY@{I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY}!listen.\+c@{listen.\+c}}
\subsubsection[{\texorpdfstring{I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY}{IS_INADDR_ANY}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+S\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+NY(
\begin{DoxyParamCaption}
\item[{}]{{\bf addr}}
\end{DoxyParamCaption}
)}\hypertarget{listen_8c_aa48e4c44e5c1a300d50d74a448331a2e}{}\label{listen_8c_aa48e4c44e5c1a300d50d74a448331a2e}
{\bfseries Value\+:}
\begin{DoxyCode}
((\hyperlink{group__MOD__PROXY_ga6d5ecaf37baca2c5cd2dfca34109da7e}{addr})->\hyperlink{group__apr__network__io_ga22f2baef89908641382fdf6fb41e8b83}{family} == \hyperlink{group__apr__network__io_gaa96e8e8dbf92bc77643a4032017b3d67}{APR\_INET} \(\backslash\)
                             && (\hyperlink{group__MOD__PROXY_ga6d5ecaf37baca2c5cd2dfca34109da7e}{addr})->sa.sin.sin\_addr.s\_addr == INADDR\_ANY)
\end{DoxyCode}


\subsection{Function Documentation}
\index{listen.\+c@{listen.\+c}!A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}!listen.\+c@{listen.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E(int)}{AP_DECLARE(int)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{}
\end{DoxyParamCaption}
)}\hypertarget{listen_8c_ace56382e8c8bdfffe9ffc8dbab06d36c}{}\label{listen_8c_ace56382e8c8bdfffe9ffc8dbab06d36c}

\begin{DoxyCode}
577 \{
578     \hyperlink{structserver__rec}{server\_rec} *ls;
579     \hyperlink{structserver__addr__rec}{server\_addr\_rec} *\hyperlink{group__MOD__PROXY_ga6d5ecaf37baca2c5cd2dfca34109da7e}{addr};
580     \hyperlink{structap__listen__rec}{ap\_listen\_rec} *\hyperlink{group__APACHE__OS__UNIX_gad86a53a31ae797d73195f2f01d5e84bd}{lr};
581     \textcolor{keywordtype}{int} num\_listeners = 0;
582     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \hyperlink{group__APACHE__CORE__HTTPD_ga1491042fd5b61bf39023b8df4c736128}{proto};
583     \textcolor{keywordtype}{int} \hyperlink{pcregrep_8txt_a1fdac88190c7a3aca2735f0bf49094dd}{found};
584 
585     \textcolor{keywordflow}{for} (ls = \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}; ls; ls = ls->\hyperlink{structserver__rec_a8bbf4ea1c54cdba1cb7e00f9d978f540}{next}) \{
586         proto = ap\_get\_server\_protocol(ls);
587         \textcolor{keywordflow}{if} (!proto) \{
588             found = 0;
589             \textcolor{comment}{/* No protocol was set for this vhost,}
590 \textcolor{comment}{             * use the default for this listener.}
591 \textcolor{comment}{             */}
592             \textcolor{keywordflow}{for} (addr = ls->\hyperlink{structserver__rec_a8caec41019feeb054418b6af738cdf67}{addrs}; addr && !found; addr = addr->\hyperlink{structserver__addr__rec_a5b8b246fe0879f9f40d0d7492e9ce8e2}{next}) \{
593                 \textcolor{keywordflow}{for} (lr = \hyperlink{group__APACHE__CORE__LISTEN_ga56c54ed44b1a272142d9fe4dd5a81a82}{ap\_listeners}; \hyperlink{group__APACHE__OS__UNIX_gad86a53a31ae797d73195f2f01d5e84bd}{lr}; lr = lr->\hyperlink{structap__listen__rec_a4240c0e22e20ef521ba64dc91dbaba10}{next}) \{
594                     \textcolor{keywordflow}{if} (apr\_sockaddr\_equal(lr->\hyperlink{structap__listen__rec_aeb6a228184b3338fc4130859ccaac7ea}{bind\_addr}, addr->
      \hyperlink{structserver__addr__rec_ad25f9e42277e5f540f98ad1998d7548b}{host\_addr}) &&
595                         lr->\hyperlink{structap__listen__rec_aeb6a228184b3338fc4130859ccaac7ea}{bind\_addr}->\hyperlink{structapr__sockaddr__t_a174c19138de9c208f13ed71b5892e505}{port} == addr->\hyperlink{structserver__addr__rec_a498bb8ff02743204f9c00865a089de9a}{host\_port}) \{
596                         ap\_set\_server\_protocol(ls, lr->\hyperlink{structap__listen__rec_a70ffffc8d550a4d8dc790951d7613876}{protocol});
597                         found = 1;
598                         \textcolor{keywordflow}{break};
599                     \}
600                 \}
601             \}
602 
603             \textcolor{keywordflow}{if} (!found) \{
604                 \textcolor{comment}{/* TODO: set protocol defaults per-Port, eg 25=smtp */}
605                 ap\_set\_server\_protocol(ls, \textcolor{stringliteral}{"http"});
606             \}
607         \}
608     \}
609 
610     \textcolor{keywordflow}{if} (open\_listeners(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}->\hyperlink{structserver__rec_a3b662494b2e2b691143ffb85b1c1d658}{process}->\hyperlink{structprocess__rec_a10adc2d7a7a46a5285e6033cad375f24}{pool})) \{
611         \textcolor{keywordflow}{return} 0;
612     \}
613 
614     \textcolor{keywordflow}{for} (lr = \hyperlink{group__APACHE__CORE__LISTEN_ga56c54ed44b1a272142d9fe4dd5a81a82}{ap\_listeners}; \hyperlink{group__APACHE__OS__UNIX_gad86a53a31ae797d73195f2f01d5e84bd}{lr}; lr = lr->\hyperlink{structap__listen__rec_a4240c0e22e20ef521ba64dc91dbaba10}{next}) \{
615         num\_listeners++;
616         found = 0;
617         \textcolor{keywordflow}{for} (ls = \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}; ls && !\hyperlink{pcregrep_8txt_a1fdac88190c7a3aca2735f0bf49094dd}{found}; ls = ls->\hyperlink{structserver__rec_a8bbf4ea1c54cdba1cb7e00f9d978f540}{next}) \{
618             \textcolor{keywordflow}{for} (addr = ls->\hyperlink{structserver__rec_a8caec41019feeb054418b6af738cdf67}{addrs}; addr && !found; addr = addr->\hyperlink{structserver__addr__rec_a5b8b246fe0879f9f40d0d7492e9ce8e2}{next}) \{
619                 \textcolor{keywordflow}{if} (apr\_sockaddr\_equal(lr->\hyperlink{structap__listen__rec_aeb6a228184b3338fc4130859ccaac7ea}{bind\_addr}, addr->\hyperlink{structserver__addr__rec_ad25f9e42277e5f540f98ad1998d7548b}{host\_addr}) &&
620                     lr->\hyperlink{structap__listen__rec_aeb6a228184b3338fc4130859ccaac7ea}{bind\_addr}->\hyperlink{structapr__sockaddr__t_a174c19138de9c208f13ed71b5892e505}{port} == addr->\hyperlink{structserver__addr__rec_a498bb8ff02743204f9c00865a089de9a}{host\_port}) \{
621                     found = 1;
622                     ap\_apply\_accept\_filter(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}->\hyperlink{structserver__rec_a3b662494b2e2b691143ffb85b1c1d658}{process}->\hyperlink{structprocess__rec_a10adc2d7a7a46a5285e6033cad375f24}{pool}, lr, ls);
623                 \}
624             \}
625         \}
626 
627         \textcolor{keywordflow}{if} (!found) \{
628             ap\_apply\_accept\_filter(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}->\hyperlink{structserver__rec_a3b662494b2e2b691143ffb85b1c1d658}{process}->\hyperlink{structprocess__rec_a10adc2d7a7a46a5285e6033cad375f24}{pool}, lr, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
629         \}
630     \}
631 
632     \textcolor{keywordflow}{return} num\_listeners;
633 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{listen_8c_ace56382e8c8bdfffe9ffc8dbab06d36c_cgraph}
\end{center}
\end{figure}


\index{listen.\+c@{listen.\+c}!A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD@{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD@{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}!listen.\+c@{listen.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+T\+D(const char $\ast$)}{AP_DECLARE_NONSTD(const char *)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{}
\end{DoxyParamCaption}
)}\hypertarget{listen_8c_a3c3d35fe71135329f5cf444e02610da7}{}\label{listen_8c_a3c3d35fe71135329f5cf444e02610da7}

\begin{DoxyCode}
815 \{
816     \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__VHOST_ga8c8ad0616f1a1fed66e67a90a116a76c}{host}, *\hyperlink{group__apr__network__io_gac03f4c1705dcf958f913d4fdcaab00b5}{scope\_id}, *\hyperlink{group__APACHE__CORE__HTTPD_ga1491042fd5b61bf39023b8df4c736128}{proto};
817     \hyperlink{group__apr__network__io_gaa670a71960f6eb4fe0d0de2a1e7aba03}{apr\_port\_t} \hyperlink{group__APACHE__CORE__VHOST_ga225c76c246a5cc263c5a2628eb99353e}{port};
818     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
819     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err} = ap\_check\_cmd\_context(\hyperlink{group__APACHE__CORE__DAEMON_ga504a7f40c3261db3e10e1d2776642dd6}{cmd}, \hyperlink{group__ap__check__cmd__context_ga8f2f401b1d57a151c5ba871088ba097e}{GLOBAL\_ONLY});
820 
821     \textcolor{keywordflow}{if} (err != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
822         \textcolor{keywordflow}{return} \hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err};
823     \}
824 
825     \textcolor{keywordflow}{if} (argc < 1 || argc > 2) \{
826         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Listen requires 1 or 2 arguments."};
827     \}
828 
829     rv = apr\_parse\_addr\_port(&host, &scope\_id, &port, \hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv}[0], \hyperlink{group__APACHE__CORE__DAEMON_ga504a7f40c3261db3e10e1d2776642dd6}{cmd}->pool);
830     \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
831         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Invalid address or port"};
832     \}
833 
834     \textcolor{keywordflow}{if} (host && !strcmp(host, \textcolor{stringliteral}{"*"})) \{
835         host = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
836     \}
837 
838     \textcolor{keywordflow}{if} (scope\_id) \{
839         \textcolor{comment}{/* XXX scope id support is useful with link-local IPv6 addresses */}
840         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Scope id is not supported"};
841     \}
842 
843     \textcolor{keywordflow}{if} (!port) \{
844         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Port must be specified"};
845     \}
846 
847     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc} != 2) \{
848         \textcolor{keywordflow}{if} (port == 443) \{
849             proto = \textcolor{stringliteral}{"https"};
850         \} \textcolor{keywordflow}{else} \{
851             proto = \textcolor{stringliteral}{"http"};
852         \}
853     \}
854     \textcolor{keywordflow}{else} \{
855         proto = apr\_pstrdup(\hyperlink{group__APACHE__CORE__DAEMON_ga504a7f40c3261db3e10e1d2776642dd6}{cmd}->pool, \hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv}[1]);
856         ap\_str\_tolower(proto);
857     \}
858 
859     \textcolor{keywordflow}{return} alloc\_listener(\hyperlink{group__APACHE__CORE__DAEMON_ga504a7f40c3261db3e10e1d2776642dd6}{cmd}->server->process, host, port, proto, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
860 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{listen_8c_a3c3d35fe71135329f5cf444e02610da7_cgraph}
\end{center}
\end{figure}


