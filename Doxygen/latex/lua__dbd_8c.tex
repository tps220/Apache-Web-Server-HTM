\hypertarget{lua__dbd_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/modules/lua/lua\+\_\+dbd.c File Reference}
\label{lua__dbd_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/lua/lua\+\_\+dbd.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/lua/lua\+\_\+dbd.\+c}}
{\ttfamily \#include \char`\"{}mod\+\_\+lua.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lua\+\_\+dbd.\+h\char`\"{}}\\*
Include dependency graph for lua\+\_\+dbd.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{lua__dbd_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{lua__dbd_8c_a8a924a2ae75955f480f27c800e6eca36}{A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+LE} (lua)
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_abf27b336b52586b161d51fe89262c56f}{lua\+\_\+db\+\_\+close} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_ad997e33a339ab9c76686400c96f6b746}{lua\+\_\+db\+\_\+gc} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a2828dc702e1dd3b6ee4b566e3876d874}{lua\+\_\+db\+\_\+active} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a736068a2c1c5ef1f7f290fbba4919671}{lua\+\_\+db\+\_\+query} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a7f7d258fd595be1e37da6db62243fd62}{lua\+\_\+db\+\_\+escape} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a76fb43685342aea7d448c0e517d6d9f6}{lua\+\_\+db\+\_\+get\+\_\+row} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a0dcb52a2ca220180e7fcebc24bc29067}{lua\+\_\+db\+\_\+select} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344}{lua\+\_\+db\+\_\+prepared\+\_\+select} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_abc27e046d61d88a6d607f7d0e59b55f4}{lua\+\_\+db\+\_\+prepared\+\_\+query} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_ad94ffb0c1715dbc3608178c80ffa8957}{lua\+\_\+db\+\_\+prepare} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_a46ee364a00615b5ae4d6ec05322257c0}{lua\+\_\+db\+\_\+prepared} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{lua__dbd_8c_aa9e1b942d64e0cb3ce05ba6c8715661f}{lua\+\_\+db\+\_\+acquire} (lua\+\_\+\+State $\ast$\hyperlink{pcregrep_8txt_a680bac11554b63e0cc253f8e132350d4}{L})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+LE@{A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+LE}}
\index{A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+LE@{A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+LE}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+L\+E(lua)}{APLOG_USE_MODULE(lua)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+L\+O\+G\+\_\+\+U\+S\+E\+\_\+\+M\+O\+D\+U\+LE (
\begin{DoxyParamCaption}
\item[{lua}]{}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a8a924a2ae75955f480f27c800e6eca36}{}\label{lua__dbd_8c_a8a924a2ae75955f480f27c800e6eca36}
Licensed to the \hyperlink{namespaceApache}{Apache} Software Foundation (A\+SF) under one or more contributor license agreements. See the N\+O\+T\+I\+CE file distributed with this work for additional information regarding copyright ownership. The A\+SF licenses this file to You under the \hyperlink{namespaceApache}{Apache} License, Version 2.\+0 (the \char`\"{}\+License\char`\"{}); you may not use this file except in compliance with the License. You may obtain a copy of the License at

\href{http://www.apache.org/licenses/LICENSE-2.0}{\tt http\+://www.\+apache.\+org/licenses/\+L\+I\+C\+E\+N\+S\+E-\/2.\+0}

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \char`\"{}\+A\+S I\+S\char`\"{} B\+A\+S\+IS, W\+I\+T\+H\+O\+UT W\+A\+R\+R\+A\+N\+T\+I\+ES OR C\+O\+N\+D\+I\+T\+I\+O\+NS OF A\+NY K\+I\+ND, either express or implied. See the License for the specific language governing permissions and limitations under the License. \index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+acquire@{lua\+\_\+db\+\_\+acquire}}
\index{lua\+\_\+db\+\_\+acquire@{lua\+\_\+db\+\_\+acquire}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+acquire(lua\+\_\+\+State $\ast$\+L)}{lua_db_acquire(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+acquire (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_aa9e1b942d64e0cb3ce05ba6c8715661f}{}\label{lua__dbd_8c_aa9e1b942d64e0cb3ce05ba6c8715661f}

\begin{DoxyCode}
726 \{
727     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
728     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type};
729     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{pcretest_8txt_a10a3a3b838670cc298974841b7588803}{arguments};
730     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{group__APACHE__CORE__PROTO_ga11614f44ef4d939bdd984953346a7572}{error} = 0;
731     \hyperlink{structrequest__rec}{request\_rec}     *\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r};
732     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db = 0;
733     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
734     \hyperlink{structap__dbd__t}{ap\_dbd\_t}        *dbdhandle = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
735     \hyperlink{structapr__pool__t}{apr\_pool\_t}      *\hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
736     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
737 
738     r = ap\_lua\_check\_request\_rec(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1);
739     \textcolor{keywordflow}{if} (r) \{
740         type = luaL\_optstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 2, \textcolor{stringliteral}{"mod\_dbd"}); \textcolor{comment}{/* Defaults to mod\_dbd */}
741         
742         \textcolor{keywordflow}{if} (!strcmp(type, \textcolor{stringliteral}{"mod\_dbd"})) \{
743 
744             lua\_settop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
745             lua\_ap\_dbd\_open = \hyperlink{group__APR__Util__Opt_ga35f2df25ca06248d2fdd3e7463446418}{APR\_RETRIEVE\_OPTIONAL\_FN}(ap\_dbd\_open);
746             \textcolor{keywordflow}{if} (lua\_ap\_dbd\_open)
747                 dbdhandle = (\hyperlink{structap__dbd__t}{ap\_dbd\_t} *) lua\_ap\_dbd\_open(
748                         r->\hyperlink{structrequest__rec_a4a8059930ce9409cb885fdeef6921b7b}{server}->process->pool, r->\hyperlink{structrequest__rec_a4a8059930ce9409cb885fdeef6921b7b}{server});
749 
750             \textcolor{keywordflow}{if} (dbdhandle) \{
751                 db = lua\_push\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, r, \hyperlink{lua__dbd_8h_aa65a91f6a2986b128d89604ab3e783cf}{LUA\_DBTYPE\_MOD\_DBD}, dbdhandle->
      \hyperlink{structap__dbd__t_a851280460a614980589795f12140d7f5}{pool});
752                 db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver} = dbdhandle->\hyperlink{structap__dbd__t_aae4c35411195f3a7700b0e0414c689ee}{driver};
753                 db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle} = dbdhandle->\hyperlink{structap__dbd__t_af825005efce580e86b16ae2031b5218a}{handle};
754                 db->\hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle} = dbdhandle;
755                 \textcolor{keywordflow}{return} 1;
756             \}
757             \textcolor{keywordflow}{else} \{
758                 lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
759                 \textcolor{keywordflow}{if} ( lua\_ap\_dbd\_open == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL} )
760                     lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L},
761                                     \textcolor{stringliteral}{"mod\_dbd doesn't seem to have been loaded."});
762                 \textcolor{keywordflow}{else}
763                     lua\_pushliteral(
764                         \hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L},
765                         \textcolor{stringliteral}{"Could not acquire connection from mod\_dbd. If your database is running, this may
       indicate a permission problem."});
766                 \textcolor{keywordflow}{return} 2;
767             \}
768         \}
769         \textcolor{keywordflow}{else} \{
770             rc = \hyperlink{group__apr__pools_gaa7c40921aae156b665e82b0a66991a39}{apr\_pool\_create}(&pool, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
771             \textcolor{keywordflow}{if} (rc != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
772                 lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
773                 lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"Could not allocate memory for database!"});
774                 \textcolor{keywordflow}{return} 2;
775             \}
776             apr\_pool\_tag(pool, \textcolor{stringliteral}{"lua\_dbd\_pool"});
777             apr\_dbd\_init(pool);
778             dbdhandle = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(pool, \textcolor{keyword}{sizeof}(\hyperlink{structap__dbd__t}{ap\_dbd\_t}));
779             rc = apr\_dbd\_get\_driver(pool, type, &dbdhandle->\hyperlink{structap__dbd__t_aae4c35411195f3a7700b0e0414c689ee}{driver});
780             \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
781                 luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3, LUA\_TSTRING);
782                 arguments = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
783                 lua\_settop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
784                 
785                 \textcolor{keywordflow}{if} (*arguments) \{
786                     rc = apr\_dbd\_open\_ex(dbdhandle->\hyperlink{structap__dbd__t_aae4c35411195f3a7700b0e0414c689ee}{driver}, pool, 
787                             arguments, &dbdhandle->\hyperlink{structap__dbd__t_af825005efce580e86b16ae2031b5218a}{handle}, &error);
788                     \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
789                         db = lua\_push\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, r, \hyperlink{lua__dbd_8h_aed8f4097d7b1c2231e9713b2496efe2a}{LUA\_DBTYPE\_APR\_DBD}, pool);
790                         db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver} = dbdhandle->\hyperlink{structap__dbd__t_aae4c35411195f3a7700b0e0414c689ee}{driver};
791                         db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle} = dbdhandle->\hyperlink{structap__dbd__t_af825005efce580e86b16ae2031b5218a}{handle};
792                         db->\hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle} = dbdhandle;
793                         \textcolor{keywordflow}{return} 1;
794                     \}
795                     \textcolor{keywordflow}{else} \{
796                         lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
797                         \textcolor{keywordflow}{if} (error) \{
798                             lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, error);
799                             \textcolor{keywordflow}{return} 2;
800                         \}
801 
802                         \textcolor{keywordflow}{return} 1;
803                     \}
804                 \}
805 
806                 lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
807                 lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L},
808                                 \textcolor{stringliteral}{"No database connection string was specified."});
809                 apr\_pool\_destroy(pool);
810                 \textcolor{keywordflow}{return} (2);
811             \}
812             \textcolor{keywordflow}{else} \{
813                 lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
814                 \textcolor{keywordflow}{if} (\hyperlink{group__APR__STATUS__IS_gacab882e24f5d6491777e8ef7763d02fb}{APR\_STATUS\_IS\_ENOTIMPL}(rc)) \{
815                     lua\_pushfstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
816                          \textcolor{stringliteral}{"driver for %s not available"}, type);
817                 \}
818                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{group__APR__STATUS__IS_gae87f4877aa35535eb3546b499ef9d9f3}{APR\_STATUS\_IS\_EDSOOPEN}(rc)) \{
819                     lua\_pushfstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
820                                 \textcolor{stringliteral}{"can't find driver for %s"}, type);
821                 \}
822                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{group__APR__STATUS__IS_gafab6c5fe2f9b906d533d253097a16e09}{APR\_STATUS\_IS\_ESYMNOTFOUND}(rc)) \{
823                     lua\_pushfstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
824                                 \textcolor{stringliteral}{"driver for %s is invalid or corrupted"},
825                                 type);
826                 \}
827                 \textcolor{keywordflow}{else} \{
828                     lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
829                                 \textcolor{stringliteral}{"mod\_lua not compatible with APR in get\_driver"});
830                 \}
831                 lua\_pushinteger(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, rc);
832                 apr\_pool\_destroy(pool);
833                 \textcolor{keywordflow}{return} 3;
834             \}
835         \}
836 
837         lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
838         \textcolor{keywordflow}{return} 1;
839     \}
840 
841     \textcolor{keywordflow}{return} 0;
842 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{lua__dbd_8c_aa9e1b942d64e0cb3ce05ba6c8715661f_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+active@{lua\+\_\+db\+\_\+active}}
\index{lua\+\_\+db\+\_\+active@{lua\+\_\+db\+\_\+active}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+active(lua\+\_\+\+State $\ast$\+L)}{lua_db_active(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+active (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a2828dc702e1dd3b6ee4b566e3876d874}{}\label{lua__dbd_8c_a2828dc702e1dd3b6ee4b566e3876d874}

\begin{DoxyCode}
126 \{
127     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~*/}
128     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db = 0;
129     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
130     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~*/}
131 
132     db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
133     \textcolor{keywordflow}{if} (db && db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
134         rc = apr\_dbd\_check\_conn(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle});
135         \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
136             lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1);
137             \textcolor{keywordflow}{return} 1;
138         \}
139     \}
140 
141     lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
142     \textcolor{keywordflow}{return} 1;
143 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=281pt]{lua__dbd_8c_a2828dc702e1dd3b6ee4b566e3876d874_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+close@{lua\+\_\+db\+\_\+close}}
\index{lua\+\_\+db\+\_\+close@{lua\+\_\+db\+\_\+close}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+close(lua\+\_\+\+State $\ast$\+L)}{lua_db_close(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+close (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_abf27b336b52586b161d51fe89262c56f}{}\label{lua__dbd_8c_abf27b336b52586b161d51fe89262c56f}

\begin{DoxyCode}
60 \{
61     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~*/}
62     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db;
63     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
64     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~*/}
65     
66     db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
67     \textcolor{keywordflow}{if} (db && db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
68         \textcolor{keywordflow}{if} (db->\hyperlink{structlua__db__handle_ac281c2727713e84a8632568f6112cd02}{type} == \hyperlink{lua__dbd_8h_aed8f4097d7b1c2231e9713b2496efe2a}{LUA\_DBTYPE\_APR\_DBD}) \{
69             rc = apr\_dbd\_close(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle});
70             \textcolor{keywordflow}{if} (db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}) apr\_pool\_destroy(db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool});
71         \}
72         \textcolor{keywordflow}{else} \{
73             lua\_ap\_dbd\_close = \hyperlink{group__APR__Util__Opt_ga35f2df25ca06248d2fdd3e7463446418}{APR\_RETRIEVE\_OPTIONAL\_FN}(ap\_dbd\_close);
74             \textcolor{keywordflow}{if} (lua\_ap\_dbd\_close != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL})
75                 \textcolor{keywordflow}{if} (db->\hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle}) lua\_ap\_dbd\_close(db->\hyperlink{structlua__db__handle_a2ecfc8b18f0f4f5dbb37c42bc1d505fd}{server}, db->
      \hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle});
76         \}
77 
78         db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
79         db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
80         db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive} = 0;
81         db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
82     \}
83 
84     lua\_settop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
85     lua\_pushnumber(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, rc);
86     \textcolor{keywordflow}{return} 1;
87 \} 
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{lua__dbd_8c_abf27b336b52586b161d51fe89262c56f_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+escape@{lua\+\_\+db\+\_\+escape}}
\index{lua\+\_\+db\+\_\+escape@{lua\+\_\+db\+\_\+escape}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+escape(lua\+\_\+\+State $\ast$\+L)}{lua_db_escape(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+escape (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a7f7d258fd595be1e37da6db62243fd62}{}\label{lua__dbd_8c_a7f7d258fd595be1e37da6db62243fd62}

\begin{DoxyCode}
194 \{
195     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~*/}
196     \hyperlink{structlua__db__handle}{lua\_db\_handle}    *db = 0;
197     \textcolor{keyword}{const} \textcolor{keywordtype}{char}       *\hyperlink{group__APR__Util__DBD_ga4e2545dd013163aa26d4aa994db42fb6}{statement};
198     \textcolor{keyword}{const} \textcolor{keywordtype}{char}       *escaped = 0;
199     \hyperlink{structrequest__rec}{request\_rec}      *\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r};
200     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~*/}
201 
202     r = ap\_lua\_check\_request\_rec(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 2);
203     \textcolor{keywordflow}{if} (r) \{
204         luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3, LUA\_TSTRING);
205         statement = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
206         db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
207         \textcolor{keywordflow}{if} (db && db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
208             apr\_dbd\_init(r->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool});
209             escaped = apr\_dbd\_escape(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, r->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, statement,
210                                      db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle});
211             \textcolor{keywordflow}{if} (escaped) \{
212                 lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, escaped);
213                 \textcolor{keywordflow}{return} 1;
214             \}
215         \}
216         \textcolor{keywordflow}{else} \{
217             lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
218         \}
219         \textcolor{keywordflow}{return} (1);
220     \}
221 
222     \textcolor{keywordflow}{return} 0;
223 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=286pt]{lua__dbd_8c_a7f7d258fd595be1e37da6db62243fd62_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+gc@{lua\+\_\+db\+\_\+gc}}
\index{lua\+\_\+db\+\_\+gc@{lua\+\_\+db\+\_\+gc}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+gc(lua\+\_\+\+State $\ast$\+L)}{lua_db_gc(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+gc (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_ad997e33a339ab9c76686400c96f6b746}{}\label{lua__dbd_8c_ad997e33a339ab9c76686400c96f6b746}

\begin{DoxyCode}
95 \{
96     \textcolor{comment}{/*~~~~~~~~~~~~~~~~*/}
97     \hyperlink{structlua__db__handle}{lua\_db\_handle}    *db;
98     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~*/}
99 
100     db = lua\_touserdata(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1);
101     \textcolor{keywordflow}{if} (db && db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
102         \textcolor{keywordflow}{if} (db->\hyperlink{structlua__db__handle_ac281c2727713e84a8632568f6112cd02}{type} == \hyperlink{lua__dbd_8h_aed8f4097d7b1c2231e9713b2496efe2a}{LUA\_DBTYPE\_APR\_DBD}) \{
103             apr\_dbd\_close(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle});
104             \textcolor{keywordflow}{if} (db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}) apr\_pool\_destroy(db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool});
105         \}
106         \textcolor{keywordflow}{else} \{
107             lua\_ap\_dbd\_close = \hyperlink{group__APR__Util__Opt_ga35f2df25ca06248d2fdd3e7463446418}{APR\_RETRIEVE\_OPTIONAL\_FN}(ap\_dbd\_close);
108             \textcolor{keywordflow}{if} (lua\_ap\_dbd\_close != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL})
109                 \textcolor{keywordflow}{if} (db->\hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle}) lua\_ap\_dbd\_close(db->\hyperlink{structlua__db__handle_a2ecfc8b18f0f4f5dbb37c42bc1d505fd}{server}, db->
      \hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle});
110         \}
111         db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
112         db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
113         db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive} = 0;
114         db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
115     \}
116     lua\_settop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
117     \textcolor{keywordflow}{return} 0;
118 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{lua__dbd_8c_ad997e33a339ab9c76686400c96f6b746_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+get\+\_\+row@{lua\+\_\+db\+\_\+get\+\_\+row}}
\index{lua\+\_\+db\+\_\+get\+\_\+row@{lua\+\_\+db\+\_\+get\+\_\+row}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+get\+\_\+row(lua\+\_\+\+State $\ast$\+L)}{lua_db_get_row(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+get\+\_\+row (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a76fb43685342aea7d448c0e517d6d9f6}{}\label{lua__dbd_8c_a76fb43685342aea7d448c0e517d6d9f6}

\begin{DoxyCode}
231 \{
232     \textcolor{keywordtype}{int} row\_no,\hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x},alpha = 0;
233     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *entry, *rowname;
234     \hyperlink{group__APR__Util__DBD_gab890e4650a1de51725142318825103a5}{apr\_dbd\_row\_t}   *\hyperlink{group__APR__Util__DBD_ga98834f9ea71a411bba8858886c6454ed}{row} = 0;
235     \hyperlink{structlua__db__result__set}{lua\_db\_result\_set} *\hyperlink{group__APR__Util__DBD_ga3bb17d78322a086f98b82abd8bb9a8cd}{res} = lua\_get\_result\_set(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
236     
237     row\_no = luaL\_optinteger(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 2, 0);
238     \textcolor{keywordflow}{if} (lua\_isboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3)) \{
239         alpha = lua\_toboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
240     \}
241     lua\_settop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L},0);
242     
243     \textcolor{comment}{/* Fetch all rows at once? */}
244     
245     \textcolor{keywordflow}{if} (row\_no == 0) \{
246         row\_no = 1;
247         lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
248         \textcolor{keywordflow}{while} (apr\_dbd\_get\_row(res->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver}, res->\hyperlink{structlua__db__result__set_a7c0855626d660e95ea027955e132f9c2}{pool}, res->\hyperlink{structlua__db__result__set_a50834f059df4bede2b7f8ac193369f3c}{results},
249                             &row, -1) != -1)
250          \{
251             lua\_pushinteger(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, row\_no);
252             lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
253             \textcolor{keywordflow}{for} (x = 0; x < res->\hyperlink{structlua__db__result__set_ac7cec3e26d666243ff37e16dcab7741c}{cols}; x++) \{
254                 entry = apr\_dbd\_get\_entry(res->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver}, row, x);
255                 \textcolor{keywordflow}{if} (entry) \{
256                     \textcolor{keywordflow}{if} (alpha == 1) \{
257                         rowname = apr\_dbd\_get\_name(res->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver}, 
258                                 res->\hyperlink{structlua__db__result__set_a50834f059df4bede2b7f8ac193369f3c}{results}, x);
259                         lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, rowname ? rowname : \textcolor{stringliteral}{"(oob)"});
260                     \}
261                     \textcolor{keywordflow}{else} \{
262                         lua\_pushinteger(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, x + 1);
263                     \}
264                     lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, entry);
265                     lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
266                 \}
267             \}
268             lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
269             row\_no++;
270         \}
271         \textcolor{keywordflow}{return} 1;
272     \}
273     
274     \textcolor{comment}{/* Just fetch a single row */}
275     \textcolor{keywordflow}{if} (apr\_dbd\_get\_row(res->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver}, res->\hyperlink{structlua__db__result__set_a7c0855626d660e95ea027955e132f9c2}{pool}, res->\hyperlink{structlua__db__result__set_a50834f059df4bede2b7f8ac193369f3c}{results},
276                             &row, row\_no) != -1)
277          \{
278         
279         lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
280         \textcolor{keywordflow}{for} (x = 0; x < res->\hyperlink{structlua__db__result__set_ac7cec3e26d666243ff37e16dcab7741c}{cols}; x++) \{
281             entry = apr\_dbd\_get\_entry(res->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver}, row, x);
282             \textcolor{keywordflow}{if} (entry) \{
283                 \textcolor{keywordflow}{if} (alpha == 1) \{
284                     rowname = apr\_dbd\_get\_name(res->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver}, 
285                             res->\hyperlink{structlua__db__result__set_a50834f059df4bede2b7f8ac193369f3c}{results}, x);
286                     lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, rowname ? rowname : \textcolor{stringliteral}{"(oob)"});
287                 \}
288                 \textcolor{keywordflow}{else} \{
289                     lua\_pushinteger(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, x + 1);
290                 \}
291                 lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, entry);
292                 lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
293             \}
294         \}
295         \textcolor{keywordflow}{return} 1;
296     \}
297     \textcolor{keywordflow}{return} 0;
298 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{lua__dbd_8c_a76fb43685342aea7d448c0e517d6d9f6_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+prepare@{lua\+\_\+db\+\_\+prepare}}
\index{lua\+\_\+db\+\_\+prepare@{lua\+\_\+db\+\_\+prepare}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+prepare(lua\+\_\+\+State $\ast$\+L)}{lua_db_prepare(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+prepare (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_ad94ffb0c1715dbc3608178c80ffa8957}{}\label{lua__dbd_8c_ad94ffb0c1715dbc3608178c80ffa8957}

\begin{DoxyCode}
544 \{
545     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
546     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db = 0;
547     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
548     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{group__APR__Util__DBD_ga4e2545dd013163aa26d4aa994db42fb6}{statement}, *at;
549     \hyperlink{structrequest__rec}{request\_rec}     *\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r};
550     \hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}* st;
551     \textcolor{keywordtype}{int} need = 0;
552     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
553     
554     r = ap\_lua\_check\_request\_rec(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 2);
555     \textcolor{keywordflow}{if} (r) \{
556         \hyperlink{group__APR__Util__DBD_ga1f1179c6480a2ee0134f2cb881106cd3}{apr\_dbd\_prepared\_t} *pstatement = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
557         luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3, LUA\_TSTRING);
558         statement = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
559         
560         \textcolor{comment}{/* Count number of variables in statement */}
561         at = \hyperlink{group__APACHE__CORE__DAEMON_ga6016b58857e4c0b11e39913bdf4ff910}{ap\_strchr\_c}(statement,\textcolor{charliteral}{'%'});
562         \textcolor{keywordflow}{while} (at != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
563             \textcolor{keywordflow}{if} (at[1] == \textcolor{charliteral}{'%'}) \{
564                 at++;
565             \}
566             \textcolor{keywordflow}{else} \{
567                 need++;
568             \}
569             at = \hyperlink{group__APACHE__CORE__DAEMON_ga6016b58857e4c0b11e39913bdf4ff910}{ap\_strchr\_c}(at+1,\textcolor{charliteral}{'%'});
570         \}
571         
572         
573         db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
574         rc = apr\_dbd\_prepare(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, r->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, statement, 
575                     \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, &pstatement);
576         \textcolor{keywordflow}{if} (rc != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
577             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
578             \textcolor{keyword}{const} \textcolor{keywordtype}{char}  *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err} = apr\_dbd\_error(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, rc);
579             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
580 
581             lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
582             \textcolor{keywordflow}{if} (err) \{
583                 lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, err);
584                 \textcolor{keywordflow}{return} 2;
585             \}
586             \textcolor{keywordflow}{return} 1;
587         \}
588         
589         \textcolor{comment}{/* Push the prepared statement table */}
590         lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
591         st = lua\_newuserdata(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{keyword}{sizeof}(\hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}));
592         st->\hyperlink{structlua__db__prepared__statement_ad29b98c7951db2947945a6cd2c0733e1}{statement} = pstatement;
593         st->\hyperlink{structlua__db__prepared__statement_a696bd485fc4b6ab3e9b6474a332db6c8}{variables} = need;
594         st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db} = db;
595         
596         lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"select"});
597         lua\_pushcfunction(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \hyperlink{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344}{lua\_db\_prepared\_select});
598         lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -4);
599         lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"query"});
600         lua\_pushcfunction(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \hyperlink{lua__dbd_8c_abc27e046d61d88a6d607f7d0e59b55f4}{lua\_db\_prepared\_query});
601         lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -4);
602         lua\_rawseti(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -2, 0);
603         \textcolor{keywordflow}{return} 1;
604     \}
605     \textcolor{keywordflow}{return} 0;
606 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{lua__dbd_8c_ad94ffb0c1715dbc3608178c80ffa8957_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{lua__dbd_8c_ad94ffb0c1715dbc3608178c80ffa8957_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+prepared@{lua\+\_\+db\+\_\+prepared}}
\index{lua\+\_\+db\+\_\+prepared@{lua\+\_\+db\+\_\+prepared}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+prepared(lua\+\_\+\+State $\ast$\+L)}{lua_db_prepared(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+prepared (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a46ee364a00615b5ae4d6ec05322257c0}{}\label{lua__dbd_8c_a46ee364a00615b5ae4d6ec05322257c0}

\begin{DoxyCode}
617 \{
618     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
619     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db = 0;
620     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{group__APACHE__CORE__HTTPD_ga7bb5e40c10df6a41df64bda1f4bb3e26}{tag};
621     \hyperlink{structrequest__rec}{request\_rec}     *\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r};
622     \hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}* st;
623     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
624     
625     r = ap\_lua\_check\_request\_rec(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 2);
626     \textcolor{keywordflow}{if} (r) \{
627         \hyperlink{group__APR__Util__DBD_ga1f1179c6480a2ee0134f2cb881106cd3}{apr\_dbd\_prepared\_t} *pstatement = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
628         db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
629         luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3, LUA\_TSTRING);
630         tag = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
631         
632         \textcolor{comment}{/* Look for the statement */}
633         pstatement = apr\_hash\_get(db->\hyperlink{structlua__db__handle_a67c707584b3125e5771b5b1aaad0b2e5}{dbdhandle}->\hyperlink{structap__dbd__t_ad8f9283ad51cb317aabd04784498cb92}{prepared}, tag, 
634                 \hyperlink{group__apr__hash_ga3ba32541f2717b394000f87f38c7e12d}{APR\_HASH\_KEY\_STRING});
635         
636         \textcolor{keywordflow}{if} (pstatement == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
637             lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
638             lua\_pushfstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
639                     \textcolor{stringliteral}{"Could not find any prepared statement called %s!"}, tag);
640             \textcolor{keywordflow}{return} 2;
641         \}
642         
643         
644         \textcolor{comment}{/* Push the prepared statement table */}
645         lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
646         st = lua\_newuserdata(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{keyword}{sizeof}(\hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}));
647         st->\hyperlink{structlua__db__prepared__statement_ad29b98c7951db2947945a6cd2c0733e1}{statement} = pstatement;
648         st->\hyperlink{structlua__db__prepared__statement_a696bd485fc4b6ab3e9b6474a332db6c8}{variables} = -1; \textcolor{comment}{/* we don't know :( */}
649         st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db} = db;
650         lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"select"});
651         lua\_pushcfunction(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \hyperlink{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344}{lua\_db\_prepared\_select});
652         lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -4);
653         lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"query"});
654         lua\_pushcfunction(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \hyperlink{lua__dbd_8c_abc27e046d61d88a6d607f7d0e59b55f4}{lua\_db\_prepared\_query});
655         lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -4);
656         lua\_rawseti(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -2, 0);
657         \textcolor{keywordflow}{return} 1;
658     \}
659     \textcolor{keywordflow}{return} 0;
660 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{lua__dbd_8c_a46ee364a00615b5ae4d6ec05322257c0_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=292pt]{lua__dbd_8c_a46ee364a00615b5ae4d6ec05322257c0_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+prepared\+\_\+query@{lua\+\_\+db\+\_\+prepared\+\_\+query}}
\index{lua\+\_\+db\+\_\+prepared\+\_\+query@{lua\+\_\+db\+\_\+prepared\+\_\+query}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+prepared\+\_\+query(lua\+\_\+\+State $\ast$\+L)}{lua_db_prepared_query(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+prepared\+\_\+query (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_abc27e046d61d88a6d607f7d0e59b55f4}{}\label{lua__dbd_8c_abc27e046d61d88a6d607f7d0e59b55f4}

\begin{DoxyCode}
474 \{
475     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
476     \hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}  *st = 0;
477     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
478     \textcolor{keyword}{const} \textcolor{keywordtype}{char}       **vars;
479     \textcolor{keywordtype}{int}              \hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x}, have;
480     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~*/}
481     
482     \textcolor{comment}{/* Fetch the prepared statement and the vars passed */}
483     luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1, LUA\_TTABLE);
484     lua\_rawgeti(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1, 0);
485     luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -1, LUA\_TUSERDATA);
486     st = (\hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}*) lua\_topointer(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -1);
487     
488     \textcolor{comment}{/* Check if we got enough variables passed on to us.}
489 \textcolor{comment}{     * This, of course, only works for prepared statements made through lua. */}
490     have = lua\_gettop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}) - 2;
491     \textcolor{keywordflow}{if} (st->\hyperlink{structlua__db__prepared__statement_a696bd485fc4b6ab3e9b6474a332db6c8}{variables} != -1 && have < st->\hyperlink{README_8txt_a26f943ceba1bb0103c879f267b2863cb}{variables} ) \{
492         lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
493         lua\_pushfstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
494                 \textcolor{stringliteral}{"Error in executing prepared statement: Expected %d arguments, got %d."}, 
495                 st->\hyperlink{structlua__db__prepared__statement_a696bd485fc4b6ab3e9b6474a332db6c8}{variables}, have);
496         \textcolor{keywordflow}{return} 2;
497     \}
498     vars = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}, have*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char} *));
499     \textcolor{keywordflow}{for} (x = 0; x < have; x++) \{
500         vars[\hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x}] = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, x + 2);
501     \}
502 
503     \textcolor{comment}{/* Fire off the query */}
504     \textcolor{keywordflow}{if} (st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db} && st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
505 
506         \textcolor{comment}{/*~~~~~~~~~~~~~~*/}
507         \textcolor{keywordtype}{int} affected = 0;
508         \textcolor{comment}{/*~~~~~~~~~~~~~~*/}
509 
510         rc = apr\_dbd\_pquery(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}, st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->
      \hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle},
511                                 &affected, st->\hyperlink{structlua__db__prepared__statement_ad29b98c7951db2947945a6cd2c0733e1}{statement}, have, vars);
512         \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
513             lua\_pushinteger(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, affected);
514             \textcolor{keywordflow}{return} 1;
515         \}
516         \textcolor{keywordflow}{else} \{
517 
518             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
519             \textcolor{keyword}{const} \textcolor{keywordtype}{char}  *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err} = apr\_dbd\_error(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->
      \hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, rc);
520             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
521 
522             lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
523             \textcolor{keywordflow}{if} (err) \{
524                 lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, err);
525                 \textcolor{keywordflow}{return} 2;
526             \}
527             \textcolor{keywordflow}{return} 1;
528         \}
529     \}
530 
531     lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
532     lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
533             \textcolor{stringliteral}{"Database connection seems to be closed, please reacquire it."});
534     \textcolor{keywordflow}{return} (2);
535 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{lua__dbd_8c_abc27e046d61d88a6d607f7d0e59b55f4_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+prepared\+\_\+select@{lua\+\_\+db\+\_\+prepared\+\_\+select}}
\index{lua\+\_\+db\+\_\+prepared\+\_\+select@{lua\+\_\+db\+\_\+prepared\+\_\+select}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+prepared\+\_\+select(lua\+\_\+\+State $\ast$\+L)}{lua_db_prepared_select(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+prepared\+\_\+select (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344}{}\label{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344}

\begin{DoxyCode}
383 \{
384     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
385     \hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}  *st = 0;
386     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
387     \textcolor{keyword}{const} \textcolor{keywordtype}{char}       **vars;
388     \textcolor{keywordtype}{int}              \hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x}, have;
389     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~*/}
390     
391     \textcolor{comment}{/* Fetch the prepared statement and the vars passed */}
392     luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1, LUA\_TTABLE);
393     lua\_rawgeti(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 1, 0);
394     luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -1, LUA\_TUSERDATA);
395     st = (\hyperlink{structlua__db__prepared__statement}{lua\_db\_prepared\_statement}*) lua\_topointer(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -1);
396     
397     \textcolor{comment}{/* Check if we got enough variables passed on to us.}
398 \textcolor{comment}{     * This, of course, only works for prepared statements made through lua. */}
399     have = lua\_gettop(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}) - 2;
400     \textcolor{keywordflow}{if} (st->\hyperlink{structlua__db__prepared__statement_a696bd485fc4b6ab3e9b6474a332db6c8}{variables} != -1 && have < st->\hyperlink{README_8txt_a26f943ceba1bb0103c879f267b2863cb}{variables} ) \{
401         lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
402         lua\_pushfstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
403                 \textcolor{stringliteral}{"Error in executing prepared statement: Expected %d arguments, got %d."}, 
404                 st->\hyperlink{structlua__db__prepared__statement_a696bd485fc4b6ab3e9b6474a332db6c8}{variables}, have);
405         \textcolor{keywordflow}{return} 2;
406     \}
407     vars = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}, have*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char} *));
408     \textcolor{keywordflow}{for} (x = 0; x < have; x++) \{
409         vars[\hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x}] = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, x + 2);
410     \}
411 
412     \textcolor{comment}{/* Fire off the query */}
413     \textcolor{keywordflow}{if} (st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db} && st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
414 
415         \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
416         \textcolor{keywordtype}{int} cols;
417         \hyperlink{group__APR__Util__DBD_ga6765891011818912e1b52fef773bfce6}{apr\_dbd\_results\_t}   *\hyperlink{NON-AUTOTOOLS-BUILD_8txt_a9237582cb59392bdaeda6c248df4441c}{results} = 0;
418         \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
419 
420         rc = apr\_dbd\_pselect(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}, st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->
      \hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle},
421                                 &results, st->\hyperlink{structlua__db__prepared__statement_ad29b98c7951db2947945a6cd2c0733e1}{statement}, 0, have, vars);
422         \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
423 
424             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~*/}
425             \hyperlink{structlua__db__result__set}{lua\_db\_result\_set} *resultset;
426             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~*/}
427 
428             cols = apr\_dbd\_num\_cols(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, results);
429             lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
430             resultset = lua\_newuserdata(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{keyword}{sizeof}(\hyperlink{structlua__db__result__set}{lua\_db\_result\_set}));
431             resultset->\hyperlink{structlua__db__result__set_ac7cec3e26d666243ff37e16dcab7741c}{cols} = cols;
432             resultset->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver} = st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver};
433             resultset->\hyperlink{structlua__db__result__set_a7c0855626d660e95ea027955e132f9c2}{pool} = st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool};
434             resultset->\hyperlink{structlua__db__result__set_ac148b93b6d46bb3ec85b08a31b9ff943}{rows} = apr\_dbd\_num\_tuples(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, results);
435             resultset->\hyperlink{structlua__db__result__set_a50834f059df4bede2b7f8ac193369f3c}{results} = \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a9237582cb59392bdaeda6c248df4441c}{results};
436             luaL\_newmetatable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"lua\_apr.dbselect"});
437             lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"\_\_call"});
438             lua\_pushcfunction(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \hyperlink{lua__dbd_8c_a76fb43685342aea7d448c0e517d6d9f6}{lua\_db\_get\_row});
439             lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
440             lua\_setmetatable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
441             lua\_rawseti(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -2, 0);
442             \textcolor{keywordflow}{return} 1;
443             
444         \}
445         \textcolor{keywordflow}{else} \{
446 
447             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
448             \textcolor{keyword}{const} \textcolor{keywordtype}{char}  *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err} = apr\_dbd\_error(st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, st->\hyperlink{structlua__db__prepared__statement_aa0e4fb9c42fa26d8c00eec7a2450ec32}{db}->
      \hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, rc);
449             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
450 
451             lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
452             \textcolor{keywordflow}{if} (err) \{
453                 lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, err);
454                 \textcolor{keywordflow}{return} 2;
455             \}
456             \textcolor{keywordflow}{return} 1;
457         \}
458     \}
459 
460     lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
461     lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 
462             \textcolor{stringliteral}{"Database connection seems to be closed, please reacquire it."});
463     \textcolor{keywordflow}{return} (2);
464 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=320pt]{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{lua__dbd_8c_a6d26da9532ecd489c2efd88cd3c8e344_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+query@{lua\+\_\+db\+\_\+query}}
\index{lua\+\_\+db\+\_\+query@{lua\+\_\+db\+\_\+query}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+query(lua\+\_\+\+State $\ast$\+L)}{lua_db_query(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+query (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a736068a2c1c5ef1f7f290fbba4919671}{}\label{lua__dbd_8c_a736068a2c1c5ef1f7f290fbba4919671}

\begin{DoxyCode}
153 \{
154     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~*/}
155     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db = 0;
156     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
157     \textcolor{keywordtype}{int}              \hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x} = 0;
158     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{group__APR__Util__DBD_ga4e2545dd013163aa26d4aa994db42fb6}{statement};
159     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~*/}
160     luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3, LUA\_TSTRING);
161     statement = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
162     db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
163     \textcolor{keywordflow}{if} (db && db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive})
164         rc = apr\_dbd\_query(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, &x, statement);
165     \textcolor{keywordflow}{else} \{
166         rc = 0;
167         x = -1;
168     \}
169 
170     \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
171         lua\_pushnumber(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, x);
172     \textcolor{keywordflow}{else} \{
173 
174         \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
175         \textcolor{keyword}{const} \textcolor{keywordtype}{char}  *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err} = apr\_dbd\_error(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, rc);
176         \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
177 
178         lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
179         \textcolor{keywordflow}{if} (err) \{
180             lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, err);
181             \textcolor{keywordflow}{return} 2;
182         \}
183     \}
184 
185     \textcolor{keywordflow}{return} 1;
186 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{lua__dbd_8c_a736068a2c1c5ef1f7f290fbba4919671_icgraph}
\end{center}
\end{figure}


\index{lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}!lua\+\_\+db\+\_\+select@{lua\+\_\+db\+\_\+select}}
\index{lua\+\_\+db\+\_\+select@{lua\+\_\+db\+\_\+select}!lua\+\_\+dbd.\+c@{lua\+\_\+dbd.\+c}}
\subsubsection[{\texorpdfstring{lua\+\_\+db\+\_\+select(lua\+\_\+\+State $\ast$\+L)}{lua_db_select(lua_State *L)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} lua\+\_\+db\+\_\+select (
\begin{DoxyParamCaption}
\item[{lua\+\_\+\+State $\ast$}]{L}
\end{DoxyParamCaption}
)}\hypertarget{lua__dbd_8c_a0dcb52a2ca220180e7fcebc24bc29067}{}\label{lua__dbd_8c_a0dcb52a2ca220180e7fcebc24bc29067}

\begin{DoxyCode}
309 \{
310     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~*/}
311     \hyperlink{structlua__db__handle}{lua\_db\_handle}   *db = 0;
312     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t}     \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc} = 0;
313     \textcolor{keyword}{const} \textcolor{keywordtype}{char}      *\hyperlink{group__APR__Util__DBD_ga4e2545dd013163aa26d4aa994db42fb6}{statement};
314     \hyperlink{structrequest__rec}{request\_rec}     *\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r};
315     \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~*/}
316     r = ap\_lua\_check\_request\_rec(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 2);
317     \textcolor{keywordflow}{if} (r) \{
318         luaL\_checktype(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3, LUA\_TSTRING);
319         statement = lua\_tostring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 3);
320         db = lua\_get\_db\_handle(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
321         \textcolor{keywordflow}{if} (db && db->\hyperlink{structlua__db__handle_acbd7286b520f2cc264aee3346d611533}{alive}) \{
322 
323             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
324             \textcolor{keywordtype}{int} cols;
325             \hyperlink{group__APR__Util__DBD_ga6765891011818912e1b52fef773bfce6}{apr\_dbd\_results\_t}   *\hyperlink{NON-AUTOTOOLS-BUILD_8txt_a9237582cb59392bdaeda6c248df4441c}{results} = 0;
326             \hyperlink{structlua__db__result__set}{lua\_db\_result\_set}* resultset = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
327             \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
328 
329             rc = apr\_dbd\_select(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle},
330                                 &results, statement, 0);
331             \textcolor{keywordflow}{if} (rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
332                 
333                 cols = apr\_dbd\_num\_cols(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, results);
334                 
335                 \textcolor{keywordflow}{if} (cols > 0) \{
336                     lua\_newtable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
337                     resultset = lua\_newuserdata(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{keyword}{sizeof}(\hyperlink{structlua__db__result__set}{lua\_db\_result\_set}));
338                     resultset->\hyperlink{structlua__db__result__set_ac7cec3e26d666243ff37e16dcab7741c}{cols} = cols;
339                     resultset->\hyperlink{structlua__db__result__set_a1cc3e423226d7417726b1ad1359d56ba}{driver} = db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver};
340                     resultset->\hyperlink{structlua__db__result__set_a7c0855626d660e95ea027955e132f9c2}{pool} = db->\hyperlink{structlua__db__handle_a38b83f2e0af4f078f138f71d2f61001f}{pool};
341                     resultset->\hyperlink{structlua__db__result__set_ac148b93b6d46bb3ec85b08a31b9ff943}{rows} = apr\_dbd\_num\_tuples(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, results);
342                     resultset->\hyperlink{structlua__db__result__set_a50834f059df4bede2b7f8ac193369f3c}{results} = \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a9237582cb59392bdaeda6c248df4441c}{results};
343                     luaL\_newmetatable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"lua\_apr.dbselect"});
344                     lua\_pushliteral(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \textcolor{stringliteral}{"\_\_call"});
345                     lua\_pushcfunction(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, \hyperlink{lua__dbd_8c_a76fb43685342aea7d448c0e517d6d9f6}{lua\_db\_get\_row});
346                     lua\_rawset(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
347                     lua\_setmetatable(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -3);
348                     lua\_rawseti(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, -2, 0);
349                     \textcolor{keywordflow}{return} 1;
350                 \}
351                 \textcolor{keywordflow}{return} 0;
352             \}
353             \textcolor{keywordflow}{else} \{
354 
355                 \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
356                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}  *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err} = apr\_dbd\_error(db->\hyperlink{structlua__db__handle_a41a6a7301da29e09088888b8922d4edc}{driver}, db->\hyperlink{structlua__db__handle_a947c85f9e009b088d612137192fd81c6}{handle}, rc);
357                 \textcolor{comment}{/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/}
358 
359                 lua\_pushnil(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L});
360                 \textcolor{keywordflow}{if} (err) \{
361                     lua\_pushstring(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, err);
362                     \textcolor{keywordflow}{return} 2;
363                 \}
364             \}
365         \}
366 
367         lua\_pushboolean(\hyperlink{mod__lua_8h_a62f94dfc0036bec0c14106c2f15caf3e}{L}, 0);
368         \textcolor{keywordflow}{return} 1;
369     \}
370 
371     \textcolor{keywordflow}{return} 0;
372 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{lua__dbd_8c_a0dcb52a2ca220180e7fcebc24bc29067_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=281pt]{lua__dbd_8c_a0dcb52a2ca220180e7fcebc24bc29067_icgraph}
\end{center}
\end{figure}


