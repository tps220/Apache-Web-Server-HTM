\hypertarget{win32_2pipe_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/file\+\_\+io/win32/pipe.c File Reference}
\label{win32_2pipe_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/file\+\_\+io/win32/pipe.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/file\+\_\+io/win32/pipe.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+arch\+\_\+file\+\_\+io.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+file\+\_\+io.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+general.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+escape.\+h\char`\"{}}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+arch\+\_\+misc.\+h\char`\"{}}\\*
Include dependency graph for pipe.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{win32_2pipe_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{win32_2pipe_8c_aed937b76e97614c67336fb46c4cb3ae1}{F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME}~\char`\"{}\textbackslash{}\textbackslash{}\textbackslash{}\textbackslash{}.\textbackslash{}\textbackslash{}pipe\textbackslash{}\textbackslash{}apr-\/pipe-\/\%x.\%lx.\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__allocator_ga9cb19a118179bbd8625eacfec66a9ab8}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{win32_2pipe_8c_aa219e4d51886c299c5a2992047211c62}{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create} (\hyperlink{structapr__file__t}{apr\+\_\+file\+\_\+t} $\ast$$\ast$\hyperlink{group__apr__thread__proc_ga2e46fea00cc2238744ebca5061c62bcc}{in}, \hyperlink{structapr__file__t}{apr\+\_\+file\+\_\+t} $\ast$$\ast$\hyperlink{apr__sha1_8h_acc4166708bf1c388b137e1861496523e}{out}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{win32_2pipe_8c_a3c5b29f4c10b98d4e368ea7dbdaf799d}{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close} (\hyperlink{structapr__file__t}{apr\+\_\+file\+\_\+t} $\ast$\hyperlink{pcregrep_8txt_ac062b5382a17ef4e936c49bdd74c5563}{file})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{win32/pipe.\+c@{win32/pipe.\+c}!F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME@{F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME}}
\index{F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME@{F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME}!win32/pipe.\+c@{win32/pipe.\+c}}
\subsubsection[{\texorpdfstring{F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME}{FMT_PIPE_NAME}}]{\setlength{\rightskip}{0pt plus 5cm}\#define F\+M\+T\+\_\+\+P\+I\+P\+E\+\_\+\+N\+A\+ME~\char`\"{}\textbackslash{}\textbackslash{}\textbackslash{}\textbackslash{}.\textbackslash{}\textbackslash{}pipe\textbackslash{}\textbackslash{}apr-\/pipe-\/\%x.\%lx.\char`\"{}}\hypertarget{win32_2pipe_8c_aed937b76e97614c67336fb46c4cb3ae1}{}\label{win32_2pipe_8c_aed937b76e97614c67336fb46c4cb3ae1}


\subsection{Function Documentation}
\index{win32/pipe.\+c@{win32/pipe.\+c}!apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close@{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close}}
\index{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close@{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close}!win32/pipe.\+c@{win32/pipe.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close(apr\+\_\+file\+\_\+t $\ast$file)}{apr_file_socket_pipe_close(apr_file_t *file)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+close (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+file\+\_\+t} $\ast$}]{file}
\end{DoxyParamCaption}
)}\hypertarget{win32_2pipe_8c_a3c5b29f4c10b98d4e368ea7dbdaf799d}{}\label{win32_2pipe_8c_a3c5b29f4c10b98d4e368ea7dbdaf799d}

\begin{DoxyCode}
471 \{
472     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} stat;
473     \textcolor{keywordflow}{if} (!file->\hyperlink{structapr__file__t_a324c8ecdc7eb0c029f38ce5d6ebc5157}{pipe})
474         \textcolor{keywordflow}{return} apr\_file\_close(file);
475     \textcolor{keywordflow}{if} ((stat = socket\_pipe\_cleanup(file)) == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
476         apr\_pool\_cleanup\_kill(file->\hyperlink{structapr__file__t_a7945468597b5ce35db7dbffdfff7c861}{pool}, file, socket\_pipe\_cleanup);
477 
478         \textcolor{keywordflow}{if} (file->\hyperlink{structapr__file__t_a3d4f09cc6f89ac51cceb04be20e027db}{mutex}) \{
479             apr\_thread\_mutex\_destroy(file->\hyperlink{structapr__file__t_a3d4f09cc6f89ac51cceb04be20e027db}{mutex});
480         \}
481 
482         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
483     \}
484     \textcolor{keywordflow}{return} stat;
485 \}
\end{DoxyCode}
\index{win32/pipe.\+c@{win32/pipe.\+c}!apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create@{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create}}
\index{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create@{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create}!win32/pipe.\+c@{win32/pipe.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create(apr\+\_\+file\+\_\+t $\ast$$\ast$in, apr\+\_\+file\+\_\+t $\ast$$\ast$out, apr\+\_\+pool\+\_\+t $\ast$p)}{apr_file_socket_pipe_create(apr_file_t **in, apr_file_t **out, apr_pool_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+file\+\_\+socket\+\_\+pipe\+\_\+create (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+file\+\_\+t} $\ast$$\ast$}]{in, }
\item[{{\bf apr\+\_\+file\+\_\+t} $\ast$$\ast$}]{out, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{win32_2pipe_8c_aa219e4d51886c299c5a2992047211c62}{}\label{win32_2pipe_8c_aa219e4d51886c299c5a2992047211c62}

\begin{DoxyCode}
426 \{
427     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
428     SOCKET rd;
429     SOCKET wr;
430 
431     \textcolor{keywordflow}{if} ((rv = create\_socket\_pipe(&rd, &wr)) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
432         \textcolor{keywordflow}{return} rv;
433     \}
434     (*in) = (\hyperlink{structapr__file__t}{apr\_file\_t} *)\hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(p, \textcolor{keyword}{sizeof}(\hyperlink{structapr__file__t}{apr\_file\_t}));
435     (*in)->pool = \hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p};
436     (*in)->fname = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
437     (*in)->pipe = 1;
438     (*in)->timeout = -1;
439     (*in)->ungetchar = -1;
440     (*in)->eof\_hit = 0;
441     (*in)->filePtr = 0;
442     (*in)->bufpos = 0;
443     (*in)->dataRead = 0;
444     (*in)->direction = 0;
445     (*in)->pOverlapped = (OVERLAPPED*)\hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(p, \textcolor{keyword}{sizeof}(OVERLAPPED));
446     (*in)->filehand = (HANDLE)rd;
447 
448     (*out) = (\hyperlink{structapr__file__t}{apr\_file\_t} *)\hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(p, \textcolor{keyword}{sizeof}(\hyperlink{structapr__file__t}{apr\_file\_t}));
449     (*out)->pool = \hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p};
450     (*out)->fname = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
451     (*out)->pipe = 1;
452     (*out)->timeout = -1;
453     (*out)->ungetchar = -1;
454     (*out)->eof\_hit = 0;
455     (*out)->filePtr = 0;
456     (*out)->bufpos = 0;
457     (*out)->dataRead = 0;
458     (*out)->direction = 0;
459     (*out)->pOverlapped = (OVERLAPPED*)\hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(p, \textcolor{keyword}{sizeof}(OVERLAPPED));
460     (*out)->filehand = (HANDLE)wr;
461 
462     apr\_pool\_cleanup\_register(p, (\textcolor{keywordtype}{void} *)(*in), socket\_pipe\_cleanup,
463                               apr\_pool\_cleanup\_null);
464     apr\_pool\_cleanup\_register(p, (\textcolor{keywordtype}{void} *)(*out), socket\_pipe\_cleanup,
465                               apr\_pool\_cleanup\_null);
466 
467     \textcolor{keywordflow}{return} rv;
468 \}
\end{DoxyCode}
