\hypertarget{h2__conn_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/modules/http2/h2\+\_\+conn.c File Reference}
\label{h2__conn_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/http2/h2\+\_\+conn.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/http2/h2\+\_\+conn.\+c}}
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$apr\+\_\+strings.\+h$>$}\\*
{\ttfamily \#include $<$ap\+\_\+mpm.\+h$>$}\\*
{\ttfamily \#include $<$httpd.\+h$>$}\\*
{\ttfamily \#include $<$http\+\_\+core.\+h$>$}\\*
{\ttfamily \#include $<$http\+\_\+config.\+h$>$}\\*
{\ttfamily \#include $<$http\+\_\+log.\+h$>$}\\*
{\ttfamily \#include $<$http\+\_\+connection.\+h$>$}\\*
{\ttfamily \#include $<$http\+\_\+protocol.\+h$>$}\\*
{\ttfamily \#include $<$http\+\_\+request.\+h$>$}\\*
{\ttfamily \#include $<$mpm\+\_\+common.\+h$>$}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+private.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+ctx.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+filter.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+mplx.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+session.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+stream.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+h2.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+task.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+workers.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+conn.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}h2\+\_\+version.\+h\char`\"{}}\\*
Include dependency graph for h2\+\_\+conn.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__conn_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__conn_8c_af8d2bc363df1fa1966633e06a98def37}{h2\+\_\+conn\+\_\+child\+\_\+init} (\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool}, \hyperlink{structserver__rec}{server\+\_\+rec} $\ast$\hyperlink{pcretest_8txt_a062597889ba244b72877454b1d3adecf}{s})
\item 
\hyperlink{h2__conn_8h_a3f91054864ff9a434a21e6248adb644a}{h2\+\_\+mpm\+\_\+type\+\_\+t} \hyperlink{h2__conn_8c_af3ecd218bc99f8681d93c0b451ce05d4}{h2\+\_\+conn\+\_\+mpm\+\_\+type} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
const char $\ast$ \hyperlink{h2__conn_8c_ace2f166f1592c925318d033f430405b2}{h2\+\_\+conn\+\_\+mpm\+\_\+name} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{h2__conn_8c_a896134af41db3903a8339bcc4716c9e2}{h2\+\_\+mpm\+\_\+supported} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__conn_8c_a47877e270c6b649518c2e1c927441c90}{h2\+\_\+conn\+\_\+setup} (\hyperlink{structh2__ctx}{h2\+\_\+ctx} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga0525238c5b09cb4ac5067ddec654d09c}{ctx}, \hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_aef720ae5f62fa015619d00171d917416}{c}, \hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__conn_8c_ad13eeae0e8121a9c190f729e9904af4b}{h2\+\_\+conn\+\_\+run} (struct \hyperlink{structh2__ctx}{h2\+\_\+ctx} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga0525238c5b09cb4ac5067ddec654d09c}{ctx}, \hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_aef720ae5f62fa015619d00171d917416}{c})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__conn_8c_a2f4d600f45ab5ac86f3491ba0bc73c3b}{h2\+\_\+conn\+\_\+pre\+\_\+close} (struct \hyperlink{structh2__ctx}{h2\+\_\+ctx} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga0525238c5b09cb4ac5067ddec654d09c}{ctx}, \hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_aef720ae5f62fa015619d00171d917416}{c})
\item 
\hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$ \hyperlink{h2__conn_8c_a1e38739f4ba1fd9f06d27ee6beadaf3a}{h2\+\_\+slave\+\_\+create} (\hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$master, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} slave\+\_\+id, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__apr__pools_ga3eb8c52002440da9a3eed11d54d08dd5}{parent})
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__conn_8c_a0e096c2944414bec2df50f380399c6ad}{h2\+\_\+slave\+\_\+destroy} (\hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$slave)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__conn_8c_a23c91ac1bf6c3e0df5dbcd48b6397296}{h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection} (\hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$slave, \hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__CONNECTION_ga37491385bd0907d7a64ed8a3ec309aaa}{csd})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+conn\+\_\+child\+\_\+init@{h2\+\_\+conn\+\_\+child\+\_\+init}}
\index{h2\+\_\+conn\+\_\+child\+\_\+init@{h2\+\_\+conn\+\_\+child\+\_\+init}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+conn\+\_\+child\+\_\+init(apr\+\_\+pool\+\_\+t $\ast$pool, server\+\_\+rec $\ast$s)}{h2_conn_child_init(apr_pool_t *pool, server_rec *s)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+conn\+\_\+child\+\_\+init (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{pool, }
\item[{{\bf server\+\_\+rec} $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_af8d2bc363df1fa1966633e06a98def37}{}\label{h2__conn_8c_af8d2bc363df1fa1966633e06a98def37}

\begin{DoxyCode}
110 \{
111     \textcolor{keyword}{const} \hyperlink{structh2__config}{h2\_config} *config = \hyperlink{h2__config_8c_a0c0f1e9706b7426cb14a63a08420e03d}{h2\_config\_sget}(s);
112     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status} = \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
113     \textcolor{keywordtype}{int} minw, maxw;
114     \textcolor{keywordtype}{int} max\_threads\_per\_child = 0;
115     \textcolor{keywordtype}{int} idle\_secs = 0;
116 
117     check\_modules(1);
118     ap\_mpm\_query(\hyperlink{group__APACHE__CORE__MPM_ga870486c242624daffe1d0a325130520f}{AP\_MPMQ\_MAX\_THREADS}, &max\_threads\_per\_child);
119     
120     status = ap\_mpm\_query(\hyperlink{group__APACHE__CORE__MPM_ga4205e6b9586698b6ab394cd0fba29d63}{AP\_MPMQ\_IS\_ASYNC}, &async\_mpm);
121     \textcolor{keywordflow}{if} (status != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
122         \textcolor{comment}{/* some MPMs do not implemnent this */}
123         async\_mpm = 0;
124         status = \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
125     \}
126 
127     \hyperlink{h2__config_8c_ae1cd55fcfb57d06ac17cd6d4f401ee70}{h2\_config\_init}(pool);
128     
129     minw = \hyperlink{h2__config_8c_a22d672856fe674becba5e4e07ba0ae04}{h2\_config\_geti}(config, \hyperlink{h2__config_8h_a9ba9f682e77cb3b39514432a14fce8d4ab136fa77d3393729e7ee07fe6292611c}{H2\_CONF\_MIN\_WORKERS});
130     maxw = \hyperlink{h2__config_8c_a22d672856fe674becba5e4e07ba0ae04}{h2\_config\_geti}(config, \hyperlink{h2__config_8h_a9ba9f682e77cb3b39514432a14fce8d4a7aa13156a45c9dcf0812c6935a1d253a}{H2\_CONF\_MAX\_WORKERS});    
131     \textcolor{keywordflow}{if} (minw <= 0) \{
132         minw = max\_threads\_per\_child;
133     \}
134     \textcolor{keywordflow}{if} (maxw <= 0) \{
135         \textcolor{comment}{/* As a default, this seems to work quite well under mpm\_event. }
136 \textcolor{comment}{         * For people enabling http2 under mpm\_prefork, start 4 threads unless }
137 \textcolor{comment}{         * configured otherwise. People get unhappy if their http2 requests are }
138 \textcolor{comment}{         * blocking each other. */}
139         maxw = \hyperlink{h2_8h_a2a958f7e028c93d4bd205cf6cd3d96ae}{H2MAX}(3 * minw / 2, 4);
140     \}
141     
142     idle\_secs = \hyperlink{h2__config_8c_a22d672856fe674becba5e4e07ba0ae04}{h2\_config\_geti}(config, 
      \hyperlink{h2__config_8h_a9ba9f682e77cb3b39514432a14fce8d4a359d3737dd5dc7881a3366a95b92d012}{H2\_CONF\_MAX\_WORKER\_IDLE\_SECS});
143     \hyperlink{group__APACHE__CORE__LOG_ga5e6676c87418af7a1d323a116c78ecb4}{ap\_log\_error}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga5e4f134ae2203dd339774d9549d814db}{APLOG\_TRACE3}, 0, s,
144                  \textcolor{stringliteral}{"h2\_workers: min=%d max=%d, mthrpchild=%d, idle\_secs=%d"}, 
145                  minw, maxw, max\_threads\_per\_child, idle\_secs);
146     workers = \hyperlink{h2__workers_8c_a7087d26a8f57ff45f6a423a319938aa5}{h2\_workers\_create}(s, pool, minw, maxw, idle\_secs);
147  
148     ap\_register\_input\_filter(\textcolor{stringliteral}{"H2\_IN"}, \hyperlink{h2__filter_8c_a0788dd6606d9941cac959ffe21789175}{h2\_filter\_core\_input},
149                              \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, \hyperlink{group__APACHE__CORE__FILTER_gga6dc4721ae075c103a3f3a93775d139faa7ae402ebd5ae1d7453806499e9e06d6a}{AP\_FTYPE\_CONNECTION});
150    
151     status = \hyperlink{h2__mplx_8c_ad78ddeaf1a56fdeda73ed9153cb4843d}{h2\_mplx\_child\_init}(pool, s);
152 
153     \textcolor{keywordflow}{if} (status == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
154         status = \hyperlink{unix_2sockets_8c_ad975e4f99f233d8156a9e8e1a153199d}{apr\_socket\_create}(&dummy\_socket, \hyperlink{group__apr__network__io_gaa96e8e8dbf92bc77643a4032017b3d67}{APR\_INET}, SOCK\_STREAM,
155                                    \hyperlink{group__IP__Proto_gad231c935f9f9746ca43b46cdcf80338e}{APR\_PROTO\_TCP}, pool);
156     \}
157 
158     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
159 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__conn_8c_af8d2bc363df1fa1966633e06a98def37_cgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+conn\+\_\+mpm\+\_\+name@{h2\+\_\+conn\+\_\+mpm\+\_\+name}}
\index{h2\+\_\+conn\+\_\+mpm\+\_\+name@{h2\+\_\+conn\+\_\+mpm\+\_\+name}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+conn\+\_\+mpm\+\_\+name(void)}{h2_conn_mpm_name(void)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ h2\+\_\+conn\+\_\+mpm\+\_\+name (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_ace2f166f1592c925318d033f430405b2}{}\label{h2__conn_8c_ace2f166f1592c925318d033f430405b2}

\begin{DoxyCode}
168 \{
169     check\_modules(0);
170     \textcolor{keywordflow}{return} mpm\_module? mpm\_module->\hyperlink{structmodule__struct_a88f43c2576387678ac534313fd0e7ece}{name} : \textcolor{stringliteral}{"unknown"};
171 \}
\end{DoxyCode}
\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+conn\+\_\+mpm\+\_\+type@{h2\+\_\+conn\+\_\+mpm\+\_\+type}}
\index{h2\+\_\+conn\+\_\+mpm\+\_\+type@{h2\+\_\+conn\+\_\+mpm\+\_\+type}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+conn\+\_\+mpm\+\_\+type(void)}{h2_conn_mpm_type(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf h2\+\_\+mpm\+\_\+type\+\_\+t} h2\+\_\+conn\+\_\+mpm\+\_\+type (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_af3ecd218bc99f8681d93c0b451ce05d4}{}\label{h2__conn_8c_af3ecd218bc99f8681d93c0b451ce05d4}

\begin{DoxyCode}
162 \{
163     check\_modules(0);
164     \textcolor{keywordflow}{return} mpm\_type;
165 \}
\end{DoxyCode}
\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+conn\+\_\+pre\+\_\+close@{h2\+\_\+conn\+\_\+pre\+\_\+close}}
\index{h2\+\_\+conn\+\_\+pre\+\_\+close@{h2\+\_\+conn\+\_\+pre\+\_\+close}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+conn\+\_\+pre\+\_\+close(struct h2\+\_\+ctx $\ast$ctx, conn\+\_\+rec $\ast$c)}{h2_conn_pre_close(struct h2_ctx *ctx, conn_rec *c)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+conn\+\_\+pre\+\_\+close (
\begin{DoxyParamCaption}
\item[{struct {\bf h2\+\_\+ctx} $\ast$}]{ctx, }
\item[{{\bf conn\+\_\+rec} $\ast$}]{c}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_a2f4d600f45ab5ac86f3491ba0bc73c3b}{}\label{h2__conn_8c_a2f4d600f45ab5ac86f3491ba0bc73c3b}
The connection is about to close. If we have not send a G\+O\+A\+W\+AY yet, this is the last chance. 
\begin{DoxyCode}
262 \{
263     \hyperlink{structh2__session}{h2\_session} *session = \hyperlink{h2__ctx_8c_a4492438caa1970d89e5a8631eb9c8994}{h2\_ctx\_session\_get}(ctx);
264     \textcolor{keywordflow}{if} (session) \{
265         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status} = \hyperlink{h2__session_8c_a77565c06a2d392e20a290becdb7e7941}{h2\_session\_pre\_close}(session, async\_mpm
      );
266         \textcolor{keywordflow}{return} (status == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})? \hyperlink{group__APACHE__CORE__DAEMON_gabe6b865c045f3e7c6892ef4f15ff5779}{DONE} : \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
267     \}
268     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__DAEMON_gabe6b865c045f3e7c6892ef4f15ff5779}{DONE};
269 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{h2__conn_8c_a2f4d600f45ab5ac86f3491ba0bc73c3b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{h2__conn_8c_a2f4d600f45ab5ac86f3491ba0bc73c3b_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+conn\+\_\+run@{h2\+\_\+conn\+\_\+run}}
\index{h2\+\_\+conn\+\_\+run@{h2\+\_\+conn\+\_\+run}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+conn\+\_\+run(struct h2\+\_\+ctx $\ast$ctx, conn\+\_\+rec $\ast$c)}{h2_conn_run(struct h2_ctx *ctx, conn_rec *c)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+conn\+\_\+run (
\begin{DoxyParamCaption}
\item[{struct {\bf h2\+\_\+ctx} $\ast$}]{ctx, }
\item[{{\bf conn\+\_\+rec} $\ast$}]{c}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_ad13eeae0e8121a9c190f729e9904af4b}{}\label{h2__conn_8c_ad13eeae0e8121a9c190f729e9904af4b}
Run the H\+T\+T\+P/2 connection in synchronous fashion. Return when the H\+T\+T\+P/2 session is done and the connection will close or a fatal error occurred.


\begin{DoxyParams}{Parameters}
{\em ctx} & the http2 context to run \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS when session is done. 
\end{DoxyReturn}

\begin{DoxyCode}
210 \{
211     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
212     \textcolor{keywordtype}{int} mpm\_state = 0;
213     \hyperlink{structh2__session}{h2\_session} *session = \hyperlink{h2__ctx_8c_a4492438caa1970d89e5a8631eb9c8994}{h2\_ctx\_session\_get}(ctx);
214     
215     \hyperlink{group__APACHE__CORE__DAEMON_gace52c7d9cc135b00b6e686236c0095a7}{ap\_assert}(session);
216     \textcolor{keywordflow}{do} \{
217         \textcolor{keywordflow}{if} (c->\hyperlink{structconn__rec_a1cfa5dbd0193d91302d8ae0953bcbda1}{cs}) \{
218             c->\hyperlink{structconn__rec_a1cfa5dbd0193d91302d8ae0953bcbda1}{cs}->\hyperlink{structconn__state__t_ac4c63ee776308f35af33715ecd20ce93}{sense} = \hyperlink{group__APACHE__CORE__DAEMON_ggaae1efcb45706e72ff21b849a79ffbd58a76476bf036964da89040adfd4675c3c5}{CONN\_SENSE\_DEFAULT};
219             c->\hyperlink{structconn__rec_a1cfa5dbd0193d91302d8ae0953bcbda1}{cs}->\hyperlink{structconn__state__t_a36f60000f8a31c0088dfdbf4f8ba272c}{state} = \hyperlink{group__APACHE__CORE__DAEMON_gga60b752d9a3496ccdcf3c877bd2819d04ad9a37837199d377aba66188b91a3eda2}{CONN\_STATE\_HANDLER};
220         \}
221     
222         status = \hyperlink{h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77}{h2\_session\_process}(session, async\_mpm);
223         
224         \textcolor{keywordflow}{if} (\hyperlink{group__APR__STATUS__IS_gaf4232cd96b47b76aec9607b1a78e694f}{APR\_STATUS\_IS\_EOF}(status)) \{
225             \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gadfcef90537539cf2b7d35cfbbbafeb93}{APLOG\_DEBUG}, status, c, 
226                           \hyperlink{h2__session_8h_a28df7ff9f5f9745ac52f65e5f216ed1f}{H2\_SSSN\_LOG}(\hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03045), session, 
227                           \textcolor{stringliteral}{"process, closing conn"}));
228             c->\hyperlink{structconn__rec_a1e310dc6cfa709f96db50472a0d2382b}{keepalive} = \hyperlink{group__APACHE__CORE__DAEMON_gga0fc39bb8f47f9c1f418f28354416db79ac991e8ec951fe03c8c2f36495859034d}{AP\_CONN\_CLOSE};
229         \}
230         \textcolor{keywordflow}{else} \{
231             c->\hyperlink{structconn__rec_a1e310dc6cfa709f96db50472a0d2382b}{keepalive} = \hyperlink{group__APACHE__CORE__DAEMON_gga0fc39bb8f47f9c1f418f28354416db79a874db49e8429c46e82d463014736da01}{AP\_CONN\_KEEPALIVE};
232         \}
233         
234         \textcolor{keywordflow}{if} (ap\_mpm\_query(\hyperlink{group__APACHE__CORE__MPM_ga23b4d0d157612a17d54685fcd97d0341}{AP\_MPMQ\_MPM\_STATE}, &mpm\_state)) \{
235             \textcolor{keywordflow}{break};
236         \}
237     \} \textcolor{keywordflow}{while} (!async\_mpm
238              && c->\hyperlink{structconn__rec_a1e310dc6cfa709f96db50472a0d2382b}{keepalive} == \hyperlink{group__APACHE__CORE__DAEMON_gga0fc39bb8f47f9c1f418f28354416db79a874db49e8429c46e82d463014736da01}{AP\_CONN\_KEEPALIVE} 
239              && mpm\_state != \hyperlink{group__APACHE__CORE__MPM_gafca606af8b4b151e421cd073c8467b5e}{AP\_MPMQ\_STOPPING});
240     
241     \textcolor{keywordflow}{if} (c->\hyperlink{structconn__rec_a1cfa5dbd0193d91302d8ae0953bcbda1}{cs}) \{
242         \textcolor{keywordflow}{switch} (session->\hyperlink{structh2__session_abe17a5d4b3c3f9e796b73ec004edb72f}{state}) \{
243             \textcolor{keywordflow}{case} \hyperlink{h2_8h_ae2ebe57b68f1b311a5abbdb970061f23a0a3db723fb0e2dab7d44851002954e2e}{H2\_SESSION\_ST\_INIT}:
244             \textcolor{keywordflow}{case} \hyperlink{h2_8h_ae2ebe57b68f1b311a5abbdb970061f23a2f00d4a59e5b5367f1af3a0e60926fea}{H2\_SESSION\_ST\_CLEANUP}:
245             \textcolor{keywordflow}{case} \hyperlink{h2_8h_ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a}{H2\_SESSION\_ST\_DONE}:
246             \textcolor{keywordflow}{case} \hyperlink{h2_8h_ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f}{H2\_SESSION\_ST\_IDLE}:
247                 c->\hyperlink{structconn__rec_a1cfa5dbd0193d91302d8ae0953bcbda1}{cs}->\hyperlink{structconn__state__t_a36f60000f8a31c0088dfdbf4f8ba272c}{state} = \hyperlink{group__APACHE__CORE__DAEMON_gga60b752d9a3496ccdcf3c877bd2819d04aae6598a74e7d75f2edcfaf6174fbb84d}{CONN\_STATE\_WRITE\_COMPLETION};
248                 \textcolor{keywordflow}{break};
249             \textcolor{keywordflow}{case} \hyperlink{h2_8h_ae2ebe57b68f1b311a5abbdb970061f23afac442216da590ca0627605c1560bc32}{H2\_SESSION\_ST\_BUSY}:
250             \textcolor{keywordflow}{case} \hyperlink{h2_8h_ae2ebe57b68f1b311a5abbdb970061f23aed0488740dd43777c78552ce5381f4fe}{H2\_SESSION\_ST\_WAIT}:
251             \textcolor{keywordflow}{default}:
252                 c->\hyperlink{structconn__rec_a1cfa5dbd0193d91302d8ae0953bcbda1}{cs}->\hyperlink{structconn__state__t_a36f60000f8a31c0088dfdbf4f8ba272c}{state} = \hyperlink{group__APACHE__CORE__DAEMON_gga60b752d9a3496ccdcf3c877bd2819d04ad9a37837199d377aba66188b91a3eda2}{CONN\_STATE\_HANDLER};
253                 \textcolor{keywordflow}{break};
254                 
255         \}
256     \}
257     
258     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__DAEMON_gabe6b865c045f3e7c6892ef4f15ff5779}{DONE};
259 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__conn_8c_ad13eeae0e8121a9c190f729e9904af4b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{h2__conn_8c_ad13eeae0e8121a9c190f729e9904af4b_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+conn\+\_\+setup@{h2\+\_\+conn\+\_\+setup}}
\index{h2\+\_\+conn\+\_\+setup@{h2\+\_\+conn\+\_\+setup}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+conn\+\_\+setup(h2\+\_\+ctx $\ast$ctx, conn\+\_\+rec $\ast$c, request\+\_\+rec $\ast$r)}{h2_conn_setup(h2_ctx *ctx, conn_rec *c, request_rec *r)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+conn\+\_\+setup (
\begin{DoxyParamCaption}
\item[{struct {\bf h2\+\_\+ctx} $\ast$}]{ctx, }
\item[{{\bf conn\+\_\+rec} $\ast$}]{c, }
\item[{{\bf request\+\_\+rec} $\ast$}]{r}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_a47877e270c6b649518c2e1c927441c90}{}\label{h2__conn_8c_a47877e270c6b649518c2e1c927441c90}
Setup the connection and our context for H\+T\+T\+P/2 processing


\begin{DoxyParams}{Parameters}
{\em ctx} & the http2 context to setup \\
\hline
{\em c} & the connection H\+T\+T\+P/2 is starting on \\
\hline
{\em r} & the upgrade request that still awaits an answer, optional \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
186 \{
187     \hyperlink{structh2__session}{h2\_session} *session;
188     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
189     
190     \textcolor{keywordflow}{if} (!workers) \{
191         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga57ad94ed8c92c4306de90479251a5d58}{APLOG\_ERR}, 0, c, 
      \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(02911) 
192                       \textcolor{stringliteral}{"workers not initialized"});
193         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga18f5678bea0c2c704a2b6a186c9e158b}{APR\_EGENERAL};
194     \}
195     
196     \textcolor{keywordflow}{if} (r) \{
197         status = \hyperlink{h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d}{h2\_session\_rcreate}(&session, r, ctx, workers);
198     \}
199     \textcolor{keywordflow}{else} \{
200         status = \hyperlink{h2__session_8c_affefcf731ecfbf2bad38b18e8f96c2c2}{h2\_session\_create}(&session, c, ctx, workers);
201     \}
202 
203     \textcolor{keywordflow}{if} (status == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
204         \hyperlink{h2__ctx_8c_a3ae901af878bd8671fcf597b93579ce4}{h2\_ctx\_session\_set}(ctx, session);
205     \}
206     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
207 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__conn_8c_a47877e270c6b649518c2e1c927441c90_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{h2__conn_8c_a47877e270c6b649518c2e1c927441c90_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+mpm\+\_\+supported@{h2\+\_\+mpm\+\_\+supported}}
\index{h2\+\_\+mpm\+\_\+supported@{h2\+\_\+mpm\+\_\+supported}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+mpm\+\_\+supported(void)}{h2_mpm_supported(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} h2\+\_\+mpm\+\_\+supported (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_a896134af41db3903a8339bcc4716c9e2}{}\label{h2__conn_8c_a896134af41db3903a8339bcc4716c9e2}

\begin{DoxyCode}
174 \{
175     check\_modules(0);
176     \textcolor{keywordflow}{return} mpm\_supported;
177 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=297pt]{h2__conn_8c_a896134af41db3903a8339bcc4716c9e2_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+slave\+\_\+create@{h2\+\_\+slave\+\_\+create}}
\index{h2\+\_\+slave\+\_\+create@{h2\+\_\+slave\+\_\+create}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+slave\+\_\+create(conn\+\_\+rec $\ast$master, int slave\+\_\+id, apr\+\_\+pool\+\_\+t $\ast$parent)}{h2_slave_create(conn_rec *master, int slave_id, apr_pool_t *parent)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf conn\+\_\+rec}$\ast$ h2\+\_\+slave\+\_\+create (
\begin{DoxyParamCaption}
\item[{{\bf conn\+\_\+rec} $\ast$}]{master, }
\item[{{\bf int}}]{slave\+\_\+id, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{parent}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_a1e38739f4ba1fd9f06d27ee6beadaf3a}{}\label{h2__conn_8c_a1e38739f4ba1fd9f06d27ee6beadaf3a}

\begin{DoxyCode}
272 \{
273     \hyperlink{structapr__allocator__t}{apr\_allocator\_t} *\hyperlink{group__apr__pools_ga3d4c7b6ba19a3b46b6fecdee3d867787}{allocator};
274     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
275     \hyperlink{structapr__pool__t}{apr\_pool\_t} *\hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool};
276     \hyperlink{structconn__rec}{conn\_rec} *\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c};
277     \textcolor{keywordtype}{void} *cfg;
278     \hyperlink{structmodule__struct}{module} *mpm;
279     
280     \hyperlink{group__APACHE__CORE__DAEMON_gace52c7d9cc135b00b6e686236c0095a7}{ap\_assert}(master);
281     \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga5e4f134ae2203dd339774d9549d814db}{APLOG\_TRACE3}, 0, master,
282                   \textcolor{stringliteral}{"h2\_stream(%ld-%d): create slave"}, master->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, slave\_id);
283     
284     \textcolor{comment}{/* We create a pool with its own allocator to be used for}
285 \textcolor{comment}{     * processing a request. This is the only way to have the processing}
286 \textcolor{comment}{     * independant of its parent pool in the sense that it can work in}
287 \textcolor{comment}{     * another thread. Also, the new allocator needs its own mutex to}
288 \textcolor{comment}{     * synchronize sub-pools.}
289 \textcolor{comment}{     */}
290     apr\_allocator\_create(&allocator);
291     apr\_allocator\_max\_free\_set(allocator, \hyperlink{group__APACHE__MPM_gaaa1d8831ca72b470dd2b7d43fa8393d6}{ap\_max\_mem\_free});
292     status = apr\_pool\_create\_ex(&pool, parent, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, allocator);
293     \textcolor{keywordflow}{if} (status != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
294         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga57ad94ed8c92c4306de90479251a5d58}{APLOG\_ERR}, status, master, 
295                       \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(10004) \textcolor{stringliteral}{"h2\_session(%ld-%d): create slave pool"},
296                       master->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, slave\_id);
297         \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
298     \}
299     apr\_allocator\_owner\_set(allocator, pool);
300     apr\_pool\_tag(pool, \textcolor{stringliteral}{"h2\_slave\_conn"});
301  
302     c = (\hyperlink{structconn__rec}{conn\_rec} *) apr\_palloc(pool, \textcolor{keyword}{sizeof}(\hyperlink{structconn__rec}{conn\_rec}));
303     \textcolor{keywordflow}{if} (c == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
304         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga57ad94ed8c92c4306de90479251a5d58}{APLOG\_ERR}, 
      \hyperlink{group__APR__Error_ga6a453e60000000609a95817efabebf4f}{APR\_ENOMEM}, master, 
305                       \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(02913) \textcolor{stringliteral}{"h2\_session(%ld-%d): create slave"},
306                       master->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, slave\_id);
307         apr\_pool\_destroy(pool);
308         \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
309     \}
310     
311     memcpy(c, master, \textcolor{keyword}{sizeof}(\hyperlink{structconn__rec}{conn\_rec}));
312         
313     c->\hyperlink{structconn__rec_acc75f0de138c66d0dc80a59ea4a61094}{master}                 = master;
314     c->\hyperlink{structconn__rec_a1dc5f31c7afc4a6f9c4ede0daea8cd1d}{pool}                   = \hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool};   
315     c->\hyperlink{structconn__rec_ad7095a63f14895cb234525086dd48e0c}{conn\_config}            = ap\_create\_conn\_config(pool);
316     c->\hyperlink{structconn__rec_a7ca7fb2d3bb81f91764bc960686a4fcf}{notes}                  = apr\_table\_make(pool, 5);
317     c->\hyperlink{structconn__rec_a27bcfa99aac415734fedbb540ab7a3e7}{input\_filters}          = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
318     c->\hyperlink{structconn__rec_a41ce808290656ac63a859b7145b0602c}{output\_filters}         = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
319     c->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc}           = apr\_bucket\_alloc\_create(pool);
320     c->\hyperlink{structconn__rec_adce1899d39e3d6ae4d08a3ff248e49e8}{data\_in\_input\_filters}  = 0;
321     c->\hyperlink{structconn__rec_a148edf3d5ae7140635f46d719aba83fd}{data\_in\_output\_filters} = 0;
322     \textcolor{comment}{/* prevent mpm\_event from making wrong assumptions about this connection,}
323 \textcolor{comment}{     * like e.g. using its socket for an async read check. */}
324     c->\hyperlink{structconn__rec_a005d7cb5ec440aa54aeb06330936c2af}{clogging\_input\_filters} = 1;
325     c->\hyperlink{structconn__rec_a0c921a26d4cef13e36814064603e4613}{log}                    = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
326     c->\hyperlink{structconn__rec_a8f009e9adfaeecd2b9faaf91b017cfae}{log\_id}                 = apr\_psprintf(pool, \textcolor{stringliteral}{"%ld-%d"}, 
327                                              master->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, slave\_id);
328     \textcolor{comment}{/* Simulate that we had already a request on this connection. */}
329     c->\hyperlink{structconn__rec_abe600faf0135f597e31dbdc226b6d622}{keepalives}             = 1;
330     c->\hyperlink{structconn__rec_aead9e56515e09e4f4b32a543e988e123}{aborted}                = 0;
331     \textcolor{comment}{/* We cannot install the master connection socket on the slaves, as}
332 \textcolor{comment}{     * modules mess with timeouts/blocking of the socket, with}
333 \textcolor{comment}{     * unwanted side effects to the master connection processing.}
334 \textcolor{comment}{     * Fortunately, since we never use the slave socket, we can just install}
335 \textcolor{comment}{     * a single, process-wide dummy and everyone is happy.}
336 \textcolor{comment}{     */}
337     \hyperlink{group__APACHE__CORE__CONFIG_ga96c3eadc9e6ab6756d05bdcc068a8a10}{ap\_set\_module\_config}(c->\hyperlink{structconn__rec_ad7095a63f14895cb234525086dd48e0c}{conn\_config}, &
      \hyperlink{group__APACHE__CORE__HTTPD_gafebd5dacd393edc6b65481d68544c59a}{core\_module}, dummy\_socket);
338     \textcolor{comment}{/* TODO: these should be unique to this thread */}
339     c->\hyperlink{structconn__rec_af0e434bcb2a0a47c13e94069431fb281}{sbh}                    = master->\hyperlink{structconn__rec_af0e434bcb2a0a47c13e94069431fb281}{sbh};
340     \textcolor{comment}{/* TODO: not all mpm modules have learned about slave connections yet.}
341 \textcolor{comment}{     * copy their config from master to slave.}
342 \textcolor{comment}{     */}
343     \textcolor{keywordflow}{if} ((mpm = h2\_conn\_mpm\_module()) != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
344         cfg = \hyperlink{group__APACHE__CORE__CONFIG_ga1093a5908a384eacc929b028c79f2a02}{ap\_get\_module\_config}(master->\hyperlink{structconn__rec_ad7095a63f14895cb234525086dd48e0c}{conn\_config}, mpm);
345         \hyperlink{group__APACHE__CORE__CONFIG_ga96c3eadc9e6ab6756d05bdcc068a8a10}{ap\_set\_module\_config}(c->\hyperlink{structconn__rec_ad7095a63f14895cb234525086dd48e0c}{conn\_config}, mpm, cfg);
346     \}
347 
348     \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gaaa69603638ba4a5d83b8727a1ca5b76a}{APLOG\_TRACE2}, 0, c, 
349                   \textcolor{stringliteral}{"h2\_stream(%ld-%d): created slave"}, master->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, slave\_id);
350     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c};
351 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__conn_8c_a1e38739f4ba1fd9f06d27ee6beadaf3a_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+slave\+\_\+destroy@{h2\+\_\+slave\+\_\+destroy}}
\index{h2\+\_\+slave\+\_\+destroy@{h2\+\_\+slave\+\_\+destroy}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+slave\+\_\+destroy(conn\+\_\+rec $\ast$slave)}{h2_slave_destroy(conn_rec *slave)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+slave\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf conn\+\_\+rec} $\ast$}]{slave}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_a0e096c2944414bec2df50f380399c6ad}{}\label{h2__conn_8c_a0e096c2944414bec2df50f380399c6ad}

\begin{DoxyCode}
354 \{
355     \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, slave,
356                   \textcolor{stringliteral}{"h2\_stream(%s): destroy slave"}, 
357                   apr\_table\_get(slave->\hyperlink{structconn__rec_a7ca7fb2d3bb81f91764bc960686a4fcf}{notes}, \hyperlink{h2_8h_abdc568586ef6962e5de3b1f1b1037a30}{H2\_TASK\_ID\_NOTE}));
358     slave->\hyperlink{structconn__rec_af0e434bcb2a0a47c13e94069431fb281}{sbh} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
359     apr\_pool\_destroy(slave->\hyperlink{structconn__rec_a1dc5f31c7afc4a6f9c4ede0daea8cd1d}{pool});
360 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{h2__conn_8c_a0e096c2944414bec2df50f380399c6ad_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}!h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection@{h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection}}
\index{h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection@{h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection}!h2\+\_\+conn.\+c@{h2\+\_\+conn.\+c}}
\subsubsection[{\texorpdfstring{h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection(conn\+\_\+rec $\ast$slave, apr\+\_\+socket\+\_\+t $\ast$csd)}{h2_slave_run_pre_connection(conn_rec *slave, apr_socket_t *csd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+slave\+\_\+run\+\_\+pre\+\_\+connection (
\begin{DoxyParamCaption}
\item[{{\bf conn\+\_\+rec} $\ast$}]{slave, }
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{csd}
\end{DoxyParamCaption}
)}\hypertarget{h2__conn_8c_a23c91ac1bf6c3e0df5dbcd48b6397296}{}\label{h2__conn_8c_a23c91ac1bf6c3e0df5dbcd48b6397296}

\begin{DoxyCode}
363 \{
364     \textcolor{keywordflow}{return} ap\_run\_pre\_connection(slave, csd);
365 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{h2__conn_8c_a23c91ac1bf6c3e0df5dbcd48b6397296_icgraph}
\end{center}
\end{figure}


