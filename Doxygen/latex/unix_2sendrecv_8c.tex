\hypertarget{unix_2sendrecv_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/network\+\_\+io/unix/sendrecv.c File Reference}
\label{unix_2sendrecv_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/network\+\_\+io/unix/sendrecv.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/network\+\_\+io/unix/sendrecv.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+arch\+\_\+networkio.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+support.\+h\char`\"{}}\\*
Include dependency graph for sendrecv.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sendrecv_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sendrecv_8c_a943268245cf59f6ff8cf1458c9a9ba8d}{apr\+\_\+socket\+\_\+send} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, const char $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gae92da6cbed6002407731bd51f7c6b984}{buf}, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} $\ast$\hyperlink{group__APR__Util__XML_ga1e9401816e3a1cf930f448db46978ea7}{len})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sendrecv_8c_aa6ee00191f197f64b5a5409f4aff53d1}{apr\+\_\+socket\+\_\+recv} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, char $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gae92da6cbed6002407731bd51f7c6b984}{buf}, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} $\ast$\hyperlink{group__APR__Util__XML_ga1e9401816e3a1cf930f448db46978ea7}{len})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sendrecv_8c_a03ae34bc5712dac2b3fdee39e5f87be3}{apr\+\_\+socket\+\_\+sendto} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{structapr__sockaddr__t}{apr\+\_\+sockaddr\+\_\+t} $\ast$\hyperlink{group__apr__network__io_ga40101ce9c63cc7ab2b80f6f8c0e7086c}{where}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{pcre_8txt_ad7a10cd81a384ff727296d05bb827806}{flags}, const char $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gae92da6cbed6002407731bd51f7c6b984}{buf}, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} $\ast$\hyperlink{group__APR__Util__XML_ga1e9401816e3a1cf930f448db46978ea7}{len})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sendrecv_8c_a80880312b41e86c9c266ede1a504e2ca}{apr\+\_\+socket\+\_\+recvfrom} (\hyperlink{structapr__sockaddr__t}{apr\+\_\+sockaddr\+\_\+t} $\ast$\hyperlink{pcregrep_8txt_a900bb06a4314d99c8ad08d1ceffd114e}{from}, \hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{pcre_8txt_ad7a10cd81a384ff727296d05bb827806}{flags}, char $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gae92da6cbed6002407731bd51f7c6b984}{buf}, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} $\ast$\hyperlink{group__APR__Util__XML_ga1e9401816e3a1cf930f448db46978ea7}{len})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sendrecv_8c_a99ece70c34a7a332daa3941de3950c64}{apr\+\_\+socket\+\_\+sendv} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, const struct iovec $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gacfa17e868d0d453ed6dc9cd153fdcb8e}{vec}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{group__APR__Util__Bucket__Brigades_gafab9e6114620026b2558f6ef267d9d8c}{nvec}, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} $\ast$\hyperlink{group__APR__Util__XML_ga1e9401816e3a1cf930f448db46978ea7}{len})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{unix/sendrecv.\+c@{unix/sendrecv.\+c}!apr\+\_\+socket\+\_\+recv@{apr\+\_\+socket\+\_\+recv}}
\index{apr\+\_\+socket\+\_\+recv@{apr\+\_\+socket\+\_\+recv}!unix/sendrecv.\+c@{unix/sendrecv.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+recv(apr\+\_\+socket\+\_\+t $\ast$sock, char $\ast$buf, apr\+\_\+size\+\_\+t $\ast$len)}{apr_socket_recv(apr_socket_t *sock, char *buf, apr_size_t *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+recv (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{char $\ast$}]{buf, }
\item[{{\bf apr\+\_\+size\+\_\+t} $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sendrecv_8c_aa6ee00191f197f64b5a5409f4aff53d1}{}\label{unix_2sendrecv_8c_aa6ee00191f197f64b5a5409f4aff53d1}

\begin{DoxyCode}
71 \{
72     \hyperlink{group__apr__platform_ga215ebb88932bee220b766263ebbfe6fa}{apr\_ssize\_t} rv;
73     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} arv;
74 
75     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} & \hyperlink{group__apr__sockopt_ga73b6c80791c5148c2a416e03a8a1ff8a}{APR\_INCOMPLETE\_READ}) \{
76         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} &= ~\hyperlink{group__apr__sockopt_ga73b6c80791c5148c2a416e03a8a1ff8a}{APR\_INCOMPLETE\_READ};
77         \textcolor{keywordflow}{goto} do\_select;
78     \}
79 
80     \textcolor{keywordflow}{do} \{
81         rv = \hyperlink{group__APACHE__CORE__PROTO_ga1a70a7c483d1279dc2cbfc7f098ce8db}{read}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}));
82     \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
83 
84     \textcolor{keywordflow}{while} ((rv == -1) && (errno == EAGAIN || errno == EWOULDBLOCK)
85                       && (sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0)) \{
86 do\_select:
87         arv = \hyperlink{group__apr__support_ga324ffc66a6d42df2325ce999001c1c36}{apr\_wait\_for\_io\_or\_timeout}(\hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, sock, 1);
88         \textcolor{keywordflow}{if} (arv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
89             *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
90             \textcolor{keywordflow}{return} arv;
91         \}
92         \textcolor{keywordflow}{else} \{
93             \textcolor{keywordflow}{do} \{
94                 rv = \hyperlink{group__APACHE__CORE__PROTO_ga1a70a7c483d1279dc2cbfc7f098ce8db}{read}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}));
95             \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
96         \}
97     \}
98     \textcolor{keywordflow}{if} (rv == -1) \{
99         (*len) = 0;
100         \textcolor{keywordflow}{return} errno;
101     \}
102     \textcolor{keywordflow}{if} ((sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0) && (rv < *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len})) \{
103         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} |= \hyperlink{group__apr__sockopt_ga73b6c80791c5148c2a416e03a8a1ff8a}{APR\_INCOMPLETE\_READ};
104     \}
105     (*len) = rv;
106     \textcolor{keywordflow}{if} (rv == 0) \{
107         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF};
108     \}
109     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
110 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{unix_2sendrecv_8c_aa6ee00191f197f64b5a5409f4aff53d1_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sendrecv_8c_aa6ee00191f197f64b5a5409f4aff53d1_icgraph}
\end{center}
\end{figure}


\index{unix/sendrecv.\+c@{unix/sendrecv.\+c}!apr\+\_\+socket\+\_\+recvfrom@{apr\+\_\+socket\+\_\+recvfrom}}
\index{apr\+\_\+socket\+\_\+recvfrom@{apr\+\_\+socket\+\_\+recvfrom}!unix/sendrecv.\+c@{unix/sendrecv.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+recvfrom(apr\+\_\+sockaddr\+\_\+t $\ast$from, apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+int32\+\_\+t flags, char $\ast$buf, apr\+\_\+size\+\_\+t $\ast$len)}{apr_socket_recvfrom(apr_sockaddr_t *from, apr_socket_t *sock, apr_int32_t flags, char *buf, apr_size_t *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+recvfrom (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+sockaddr\+\_\+t} $\ast$}]{from, }
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{flags, }
\item[{char $\ast$}]{buf, }
\item[{{\bf apr\+\_\+size\+\_\+t} $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sendrecv_8c_a80880312b41e86c9c266ede1a504e2ca}{}\label{unix_2sendrecv_8c_a80880312b41e86c9c266ede1a504e2ca}

\begin{DoxyCode}
149 \{
150     \hyperlink{group__apr__platform_ga215ebb88932bee220b766263ebbfe6fa}{apr\_ssize\_t} rv;
151     
152     from->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen} = \textcolor{keyword}{sizeof}(from->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa});
153 
154     \textcolor{keywordflow}{do} \{
155         rv = \hyperlink{apr__arch__os2calls_8h_a3102fdddc55c0c8906c40365b5b2fa71}{recvfrom}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}), \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags}, 
156                       (\textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr}*)&from->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}, &from->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen});
157     \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
158 
159     \textcolor{keywordflow}{while} ((rv == -1) && (errno == EAGAIN || errno == EWOULDBLOCK)
160                       && (sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0)) \{
161         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} arv = \hyperlink{group__apr__support_ga324ffc66a6d42df2325ce999001c1c36}{apr\_wait\_for\_io\_or\_timeout}(
      \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, sock, 1);
162         \textcolor{keywordflow}{if} (arv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
163             *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
164             \textcolor{keywordflow}{return} arv;
165         \} \textcolor{keywordflow}{else} \{
166             \textcolor{keywordflow}{do} \{
167                 rv = \hyperlink{apr__arch__os2calls_8h_a3102fdddc55c0c8906c40365b5b2fa71}{recvfrom}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}), 
      \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags},
168                               (\textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr}*)&from->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}, &from->
      \hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen});
169             \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
170         \}
171     \}
172     \textcolor{keywordflow}{if} (rv == -1) \{
173         (*len) = 0;
174         \textcolor{keywordflow}{return} errno;
175     \}
176 
177     \textcolor{comment}{/*}
178 \textcolor{comment}{     * Check if we have a valid address. recvfrom() with MSG\_PEEK may return}
179 \textcolor{comment}{     * success without filling in the address.}
180 \textcolor{comment}{     */}
181     \textcolor{keywordflow}{if} (from->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen} > \hyperlink{group__apr__general_gac16b1187b6ea63706c5dd48c88323dec}{APR\_OFFSETOF}(\textcolor{keyword}{struct} sockaddr\_in, sin\_port)) \{
182         \hyperlink{os2_2apr__arch__networkio_8h_a3ed59de41b95fa5b9ef695a2bccbdc3a}{apr\_sockaddr\_vars\_set}(from, from->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family,
183                               ntohs(from->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_port));
184     \}
185 
186     (*len) = rv;
187     \textcolor{keywordflow}{if} (rv == 0 && sock->\hyperlink{structapr__socket__t_a722ea4796e2227c8b0821d1d75ea0b07}{type} == SOCK\_STREAM) \{
188         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF};
189     \}
190 
191     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
192 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{unix_2sendrecv_8c_a80880312b41e86c9c266ede1a504e2ca_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=315pt]{unix_2sendrecv_8c_a80880312b41e86c9c266ede1a504e2ca_icgraph}
\end{center}
\end{figure}


\index{unix/sendrecv.\+c@{unix/sendrecv.\+c}!apr\+\_\+socket\+\_\+send@{apr\+\_\+socket\+\_\+send}}
\index{apr\+\_\+socket\+\_\+send@{apr\+\_\+socket\+\_\+send}!unix/sendrecv.\+c@{unix/sendrecv.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+send(apr\+\_\+socket\+\_\+t $\ast$sock, const char $\ast$buf, apr\+\_\+size\+\_\+t $\ast$len)}{apr_socket_send(apr_socket_t *sock, const char *buf, apr_size_t *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+send (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{const char $\ast$}]{buf, }
\item[{{\bf apr\+\_\+size\+\_\+t} $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sendrecv_8c_a943268245cf59f6ff8cf1458c9a9ba8d}{}\label{unix_2sendrecv_8c_a943268245cf59f6ff8cf1458c9a9ba8d}

\begin{DoxyCode}
32 \{
33     \hyperlink{group__apr__platform_ga215ebb88932bee220b766263ebbfe6fa}{apr\_ssize\_t} rv;
34     
35     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} & \hyperlink{group__apr__sockopt_ga0c1544983845bf747b4a2a3facfb45e9}{APR\_INCOMPLETE\_WRITE}) \{
36         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} &= ~\hyperlink{group__apr__sockopt_ga0c1544983845bf747b4a2a3facfb45e9}{APR\_INCOMPLETE\_WRITE};
37         \textcolor{keywordflow}{goto} do\_select;
38     \}
39 
40     \textcolor{keywordflow}{do} \{
41         rv = write(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}));
42     \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
43 
44     \textcolor{keywordflow}{while} (rv == -1 && (errno == EAGAIN || errno == EWOULDBLOCK) 
45                     && (sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0)) \{
46         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} arv;
47 do\_select:
48         arv = \hyperlink{group__apr__support_ga324ffc66a6d42df2325ce999001c1c36}{apr\_wait\_for\_io\_or\_timeout}(\hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, sock, 0);
49         \textcolor{keywordflow}{if} (arv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
50             *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
51             \textcolor{keywordflow}{return} arv;
52         \}
53         \textcolor{keywordflow}{else} \{
54             \textcolor{keywordflow}{do} \{
55                 rv = write(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}));
56             \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
57         \}
58     \}
59     \textcolor{keywordflow}{if} (rv == -1) \{
60         *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
61         \textcolor{keywordflow}{return} errno;
62     \}
63     \textcolor{keywordflow}{if} ((sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0) && (rv < *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len})) \{
64         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} |= \hyperlink{group__apr__sockopt_ga0c1544983845bf747b4a2a3facfb45e9}{APR\_INCOMPLETE\_WRITE};
65     \}
66     (*len) = rv;
67     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
68 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{unix_2sendrecv_8c_a943268245cf59f6ff8cf1458c9a9ba8d_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sendrecv_8c_a943268245cf59f6ff8cf1458c9a9ba8d_icgraph}
\end{center}
\end{figure}


\index{unix/sendrecv.\+c@{unix/sendrecv.\+c}!apr\+\_\+socket\+\_\+sendto@{apr\+\_\+socket\+\_\+sendto}}
\index{apr\+\_\+socket\+\_\+sendto@{apr\+\_\+socket\+\_\+sendto}!unix/sendrecv.\+c@{unix/sendrecv.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+sendto(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+sockaddr\+\_\+t $\ast$where, apr\+\_\+int32\+\_\+t flags, const char $\ast$buf, apr\+\_\+size\+\_\+t $\ast$len)}{apr_socket_sendto(apr_socket_t *sock, apr_sockaddr_t *where, apr_int32_t flags, const char *buf, apr_size_t *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+sendto (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+sockaddr\+\_\+t} $\ast$}]{where, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{flags, }
\item[{const char $\ast$}]{buf, }
\item[{{\bf apr\+\_\+size\+\_\+t} $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sendrecv_8c_a03ae34bc5712dac2b3fdee39e5f87be3}{}\label{unix_2sendrecv_8c_a03ae34bc5712dac2b3fdee39e5f87be3}

\begin{DoxyCode}
115 \{
116     \hyperlink{group__apr__platform_ga215ebb88932bee220b766263ebbfe6fa}{apr\_ssize\_t} rv;
117 
118     \textcolor{keywordflow}{do} \{
119         rv = \hyperlink{apr__arch__os2calls_8h_a41f9a86568fee1d3e923e08583a37e83}{sendto}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}), \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags}, 
120                     (\textcolor{keyword}{const} \textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr}*)&where->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}, 
121                     where->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen});
122     \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
123 
124     \textcolor{keywordflow}{while} ((rv == -1) && (errno == EAGAIN || errno == EWOULDBLOCK)
125                       && (sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0)) \{
126         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} arv = \hyperlink{group__apr__support_ga324ffc66a6d42df2325ce999001c1c36}{apr\_wait\_for\_io\_or\_timeout}(
      \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, sock, 0);
127         \textcolor{keywordflow}{if} (arv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
128             *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
129             \textcolor{keywordflow}{return} arv;
130         \} \textcolor{keywordflow}{else} \{
131             \textcolor{keywordflow}{do} \{
132                 rv = \hyperlink{apr__arch__os2calls_8h_a41f9a86568fee1d3e923e08583a37e83}{sendto}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, (*\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}), 
      \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags},
133                             (\textcolor{keyword}{const} \textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr}*)&where->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa},
134                             where->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen});
135             \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
136         \}
137     \}
138     \textcolor{keywordflow}{if} (rv == -1) \{
139         *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
140         \textcolor{keywordflow}{return} errno;
141     \}
142     *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = rv;
143     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
144 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{unix_2sendrecv_8c_a03ae34bc5712dac2b3fdee39e5f87be3_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{unix_2sendrecv_8c_a03ae34bc5712dac2b3fdee39e5f87be3_icgraph}
\end{center}
\end{figure}


\index{unix/sendrecv.\+c@{unix/sendrecv.\+c}!apr\+\_\+socket\+\_\+sendv@{apr\+\_\+socket\+\_\+sendv}}
\index{apr\+\_\+socket\+\_\+sendv@{apr\+\_\+socket\+\_\+sendv}!unix/sendrecv.\+c@{unix/sendrecv.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+sendv(apr\+\_\+socket\+\_\+t $\ast$sock, const struct iovec $\ast$vec, apr\+\_\+int32\+\_\+t nvec, apr\+\_\+size\+\_\+t $\ast$len)}{apr_socket_sendv(apr_socket_t *sock, const struct iovec *vec, apr_int32_t nvec, apr_size_t *len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+sendv (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{const struct iovec $\ast$}]{vec, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{nvec, }
\item[{{\bf apr\+\_\+size\+\_\+t} $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sendrecv_8c_a99ece70c34a7a332daa3941de3950c64}{}\label{unix_2sendrecv_8c_a99ece70c34a7a332daa3941de3950c64}

\begin{DoxyCode}
196 \{
197 \textcolor{preprocessor}{#ifdef HAVE\_WRITEV}
198     \hyperlink{group__apr__platform_ga215ebb88932bee220b766263ebbfe6fa}{apr\_ssize\_t} rv;
199     \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} requested\_len = 0;
200     \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\_int32\_t} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
201 
202     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{group__apr__file__io_gafab9e6114620026b2558f6ef267d9d8c}{nvec}; i++) \{
203         requested\_len += \hyperlink{group__apr__file__io_ga026ee9293cfdb03a3944adbd192f1ead}{vec}[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}].iov\_len;
204     \}
205 
206     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} & \hyperlink{group__apr__sockopt_ga0c1544983845bf747b4a2a3facfb45e9}{APR\_INCOMPLETE\_WRITE}) \{
207         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} &= ~\hyperlink{group__apr__sockopt_ga0c1544983845bf747b4a2a3facfb45e9}{APR\_INCOMPLETE\_WRITE};
208         \textcolor{keywordflow}{goto} do\_select;
209     \}
210 
211     \textcolor{keywordflow}{do} \{
212         rv = \hyperlink{apr__arch__os2calls_8h_a3d0f3996136a9b5ab46431c60c746efd}{writev}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__apr__file__io_ga026ee9293cfdb03a3944adbd192f1ead}{vec}, nvec);
213     \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
214 
215     \textcolor{keywordflow}{while} ((rv == -1) && (errno == EAGAIN || errno == EWOULDBLOCK) 
216                       && (sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0)) \{
217         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} arv;
218 do\_select:
219         arv = \hyperlink{group__apr__support_ga324ffc66a6d42df2325ce999001c1c36}{apr\_wait\_for\_io\_or\_timeout}(\hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, sock, 0);
220         \textcolor{keywordflow}{if} (arv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
221             *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
222             \textcolor{keywordflow}{return} arv;
223         \}
224         \textcolor{keywordflow}{else} \{
225             \textcolor{keywordflow}{do} \{
226                 rv = \hyperlink{apr__arch__os2calls_8h_a3d0f3996136a9b5ab46431c60c746efd}{writev}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__apr__file__io_ga026ee9293cfdb03a3944adbd192f1ead}{vec}, nvec);
227             \} \textcolor{keywordflow}{while} (rv == -1 && errno == EINTR);
228         \}
229     \}
230     \textcolor{keywordflow}{if} (rv == -1) \{
231         *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = 0;
232         \textcolor{keywordflow}{return} errno;
233     \}
234     \textcolor{keywordflow}{if} ((sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0) && (rv < requested\_len)) \{
235         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} |= \hyperlink{group__apr__sockopt_ga0c1544983845bf747b4a2a3facfb45e9}{APR\_INCOMPLETE\_WRITE};
236     \}
237     (*len) = rv;
238     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
239 \textcolor{preprocessor}{#else}
240     *\hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = \hyperlink{group__apr__file__io_ga026ee9293cfdb03a3944adbd192f1ead}{vec}[0].iov\_len;
241     \textcolor{keywordflow}{return} \hyperlink{unix_2sendrecv_8c_a943268245cf59f6ff8cf1458c9a9ba8d}{apr\_socket\_send}(sock, \hyperlink{group__apr__file__io_ga026ee9293cfdb03a3944adbd192f1ead}{vec}[0].iov\_base, \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len});
242 \textcolor{preprocessor}{#endif}
243 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sendrecv_8c_a99ece70c34a7a332daa3941de3950c64_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sendrecv_8c_a99ece70c34a7a332daa3941de3950c64_icgraph}
\end{center}
\end{figure}


