\hypertarget{unix_2sockopt_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/network\+\_\+io/unix/sockopt.c File Reference}
\label{unix_2sockopt_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/network\+\_\+io/unix/sockopt.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/network\+\_\+io/unix/sockopt.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+arch\+\_\+networkio.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
Include dependency graph for sockopt.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockopt_8c__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{unix_2sockopt_8c__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockopt_8c_a945bdbe807ec5635d65a6fd9ddb78c29}{apr\+\_\+socket\+\_\+timeout\+\_\+set} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__time_gaae2129185a395cc393f76fabf4f43e47}{apr\+\_\+interval\+\_\+time\+\_\+t} \hyperlink{pcretest_8txt_a9ffb27fb8e1f90c17b13303fee2fb883}{t})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockopt_8c_a08f5e505fa611005f56c12783269ffa9}{apr\+\_\+socket\+\_\+opt\+\_\+set} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{group__APR__Util__DBM__SDBM_ga7dabf0be7fe6c0e41bab93d005632e83}{opt}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{group__apr__thread__proc_gade8f959a935ed315f9f55422c7de9903}{on})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockopt_8c_aa32313b54afed590367c8571075d2bc1}{apr\+\_\+socket\+\_\+timeout\+\_\+get} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__time_gaae2129185a395cc393f76fabf4f43e47}{apr\+\_\+interval\+\_\+time\+\_\+t} $\ast$\hyperlink{pcretest_8txt_a9ffb27fb8e1f90c17b13303fee2fb883}{t})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockopt_8c_a1934c2d5943efc8ce925f376f3c2e17e}{apr\+\_\+socket\+\_\+opt\+\_\+get} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{group__APR__Util__DBM__SDBM_ga7dabf0be7fe6c0e41bab93d005632e83}{opt}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} $\ast$\hyperlink{group__apr__thread__proc_gade8f959a935ed315f9f55422c7de9903}{on})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockopt_8c_a2389de257444870974b5ded91cf7a10c}{apr\+\_\+socket\+\_\+atmark} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} $\ast$\hyperlink{group__apr__network__io_ga7e5b47c1636ba8b4dea046399d543b63}{atmark})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockopt_8c_a5d0408cab40ad5c229d1c3a9af546574}{apr\+\_\+gethostname} (char $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gae92da6cbed6002407731bd51f7c6b984}{buf}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{group__APR__Util__XML_ga1e9401816e3a1cf930f448db46978ea7}{len}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__Util__RMM_ga787b4ea953862721fc5e2d757cd26cfc}{cont})
\item 
\hyperlink{group__apr__network__io_ga9fc01ffaed8412193d2744f1fb632d88}{A\+P\+R\+\_\+\+P\+E\+R\+M\+S\+\_\+\+S\+E\+T\+\_\+\+I\+M\+P\+L\+E\+M\+E\+NT} (\hyperlink{apr__dbg__win32__handles_8h_aa4c7260d71388442407454f891a12db5}{socket})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{unix/sockopt.\+c@{unix/sockopt.\+c}!apr\+\_\+gethostname@{apr\+\_\+gethostname}}
\index{apr\+\_\+gethostname@{apr\+\_\+gethostname}!unix/sockopt.\+c@{unix/sockopt.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+gethostname(char $\ast$buf, apr\+\_\+int32\+\_\+t len, apr\+\_\+pool\+\_\+t $\ast$cont)}{apr_gethostname(char *buf, apr_int32_t len, apr_pool_t *cont)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+gethostname (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buf, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{len, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{cont}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockopt_8c_a5d0408cab40ad5c229d1c3a9af546574}{}\label{unix_2sockopt_8c_a5d0408cab40ad5c229d1c3a9af546574}

\begin{DoxyCode}
390 \{
391 \textcolor{preprocessor}{#ifdef BEOS\_R5}
392     \textcolor{keywordflow}{if} (gethostname(\hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}) == 0) \{
393 \textcolor{preprocessor}{#else}
394     \textcolor{keywordflow}{if} (gethostname(\hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len}) != 0) \{
395 \textcolor{preprocessor}{#endif  }
396         \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}[0] = \textcolor{charliteral}{'\(\backslash\)0'};
397         \textcolor{keywordflow}{return} errno;
398     \}
399     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{apr__strings_8c_a16d6b0bd660cc3f9910924c6b6f4af8e}{memchr}(\hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, \textcolor{charliteral}{'\(\backslash\)0'}, \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len})) \{ \textcolor{comment}{/* buffer too small */}
400         \textcolor{comment}{/* note... most platforms just truncate in this condition}
401 \textcolor{comment}{         *         linux+glibc return an error}
402 \textcolor{comment}{         */}
403         \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}[0] = \textcolor{charliteral}{'\(\backslash\)0'};
404         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga3db63b16c2b332efe441e2661f593377}{APR\_ENAMETOOLONG};
405     \}
406     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
407 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{unix_2sockopt_8c_a5d0408cab40ad5c229d1c3a9af546574_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{unix_2sockopt_8c_a5d0408cab40ad5c229d1c3a9af546574_icgraph}
\end{center}
\end{figure}


\index{unix/sockopt.\+c@{unix/sockopt.\+c}!apr\+\_\+socket\+\_\+atmark@{apr\+\_\+socket\+\_\+atmark}}
\index{apr\+\_\+socket\+\_\+atmark@{apr\+\_\+socket\+\_\+atmark}!unix/sockopt.\+c@{unix/sockopt.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+atmark(apr\+\_\+socket\+\_\+t $\ast$sock, int $\ast$atmark)}{apr_socket_atmark(apr_socket_t *sock, int *atmark)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+atmark (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf int} $\ast$}]{atmark}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockopt_8c_a2389de257444870974b5ded91cf7a10c}{}\label{unix_2sockopt_8c_a2389de257444870974b5ded91cf7a10c}

\begin{DoxyCode}
374 \{
375 \textcolor{preprocessor}{#ifndef BEOS\_R5}
376     \textcolor{keywordtype}{int} oobmark;
377 
378     \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a283e8988aa6e03e93cdc45dbc65848c8}{ioctl}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SIOCATMARK, (\textcolor{keywordtype}{void}*) &oobmark) < 0)
379         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga66e54f155b4a80ac7df9118af9bd896a}{apr\_get\_netos\_error}();
380 
381     *\hyperlink{group__apr__network__io_ga7e5b47c1636ba8b4dea046399d543b63}{atmark} = (oobmark != 0);
382 
383     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
384 \textcolor{preprocessor}{#else }\textcolor{comment}{/* BEOS\_R5 */}\textcolor{preprocessor}{}
385     \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
386 \textcolor{preprocessor}{#endif}
387 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=307pt]{unix_2sockopt_8c_a2389de257444870974b5ded91cf7a10c_icgraph}
\end{center}
\end{figure}


\index{unix/sockopt.\+c@{unix/sockopt.\+c}!apr\+\_\+socket\+\_\+opt\+\_\+get@{apr\+\_\+socket\+\_\+opt\+\_\+get}}
\index{apr\+\_\+socket\+\_\+opt\+\_\+get@{apr\+\_\+socket\+\_\+opt\+\_\+get}!unix/sockopt.\+c@{unix/sockopt.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+opt\+\_\+get(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+int32\+\_\+t opt, apr\+\_\+int32\+\_\+t $\ast$on)}{apr_socket_opt_get(apr_socket_t *sock, apr_int32_t opt, apr_int32_t *on)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+opt\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{opt, }
\item[{{\bf apr\+\_\+int32\+\_\+t} $\ast$}]{on}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockopt_8c_a1934c2d5943efc8ce925f376f3c2e17e}{}\label{unix_2sockopt_8c_a1934c2d5943efc8ce925f376f3c2e17e}

\begin{DoxyCode}
364 \{
365     \textcolor{keywordflow}{switch}(\hyperlink{group__apr__network__io_gac40a59a4a52d93ab3ec8dbbdf4d57e60}{opt}) \{
366         \textcolor{keywordflow}{default}:
367             *\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} = \hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__network__io_gac40a59a4a52d93ab3ec8dbbdf4d57e60}{opt});
368     \}
369     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
370 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{unix_2sockopt_8c_a1934c2d5943efc8ce925f376f3c2e17e_icgraph}
\end{center}
\end{figure}


\index{unix/sockopt.\+c@{unix/sockopt.\+c}!apr\+\_\+socket\+\_\+opt\+\_\+set@{apr\+\_\+socket\+\_\+opt\+\_\+set}}
\index{apr\+\_\+socket\+\_\+opt\+\_\+set@{apr\+\_\+socket\+\_\+opt\+\_\+set}!unix/sockopt.\+c@{unix/sockopt.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+opt\+\_\+set(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+int32\+\_\+t opt, apr\+\_\+int32\+\_\+t on)}{apr_socket_opt_set(apr_socket_t *sock, apr_int32_t opt, apr_int32_t on)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+opt\+\_\+set (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{opt, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{on}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockopt_8c_a08f5e505fa611005f56c12783269ffa9}{}\label{unix_2sockopt_8c_a08f5e505fa611005f56c12783269ffa9}

\begin{DoxyCode}
115 \{
116     \textcolor{keywordtype}{int} one;
117     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
118 
119     \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on})
120         one = 1;
121     \textcolor{keywordflow}{else}
122         one = 0;
123     \textcolor{keywordflow}{switch}(\hyperlink{group__apr__network__io_gac40a59a4a52d93ab3ec8dbbdf4d57e60}{opt}) \{
124     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga0c54c5b98593d9ad2f8cc8836da7eae5}{APR\_SO\_KEEPALIVE}:
125 \textcolor{preprocessor}{#ifdef SO\_KEEPALIVE}
126         \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} != \hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga0c54c5b98593d9ad2f8cc8836da7eae5}{APR\_SO\_KEEPALIVE})) \{
127             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_KEEPALIVE, (\textcolor{keywordtype}{void} *)&one, \textcolor{keyword}{
      sizeof}(\textcolor{keywordtype}{int})) == -1) \{
128                 \textcolor{keywordflow}{return} errno;
129             \}
130             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga0c54c5b98593d9ad2f8cc8836da7eae5}{APR\_SO\_KEEPALIVE}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
131         \}
132 \textcolor{preprocessor}{#else}
133         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
134 \textcolor{preprocessor}{#endif}
135         \textcolor{keywordflow}{break};
136     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga2b30d26f69059692e97a59ec1d6db73b}{APR\_SO\_DEBUG}:
137         \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} != \hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga2b30d26f69059692e97a59ec1d6db73b}{APR\_SO\_DEBUG})) \{
138             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_DEBUG, (\textcolor{keywordtype}{void} *)&one, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{
      int})) == -1) \{
139                 \textcolor{keywordflow}{return} errno;
140             \}
141             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga2b30d26f69059692e97a59ec1d6db73b}{APR\_SO\_DEBUG}, \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
142         \}
143         \textcolor{keywordflow}{break};
144     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga6d86c537799f60d68d2016563beef15b}{APR\_SO\_BROADCAST}:
145 \textcolor{preprocessor}{#ifdef SO\_BROADCAST}
146         \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} != \hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga6d86c537799f60d68d2016563beef15b}{APR\_SO\_BROADCAST})) \{
147             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_BROADCAST, (\textcolor{keywordtype}{void} *)&one, \textcolor{keyword}{
      sizeof}(\textcolor{keywordtype}{int})) == -1) \{
148                 \textcolor{keywordflow}{return} errno;
149             \}
150             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga6d86c537799f60d68d2016563beef15b}{APR\_SO\_BROADCAST}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
151         \}
152 \textcolor{preprocessor}{#else}
153         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
154 \textcolor{preprocessor}{#endif}
155         \textcolor{keywordflow}{break};
156     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga90434074950efa1383d7c5649026a159}{APR\_SO\_REUSEADDR}:
157         \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} != \hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga90434074950efa1383d7c5649026a159}{APR\_SO\_REUSEADDR})) \{
158             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_REUSEADDR, (\textcolor{keywordtype}{void} *)&one, \textcolor{keyword}{
      sizeof}(\textcolor{keywordtype}{int})) == -1) \{
159                 \textcolor{keywordflow}{return} errno;
160             \}
161             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga90434074950efa1383d7c5649026a159}{APR\_SO\_REUSEADDR}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
162         \}
163         \textcolor{keywordflow}{break};
164     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga0e7ef8d3785eec5210ede9fd309db35f}{APR\_SO\_SNDBUF}:
165 \textcolor{preprocessor}{#ifdef SO\_SNDBUF}
166         \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_SNDBUF, (\textcolor{keywordtype}{void} *)&
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
167             \textcolor{keywordflow}{return} errno;
168         \}
169 \textcolor{preprocessor}{#else}
170         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
171 \textcolor{preprocessor}{#endif}
172         \textcolor{keywordflow}{break};
173     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga4ab9494893075c8db6ac26a997f41f0e}{APR\_SO\_RCVBUF}:
174 \textcolor{preprocessor}{#ifdef SO\_RCVBUF}
175         \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_RCVBUF, (\textcolor{keywordtype}{void} *)&
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
176             \textcolor{keywordflow}{return} errno;
177         \}
178 \textcolor{preprocessor}{#else}
179         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
180 \textcolor{preprocessor}{#endif}
181         \textcolor{keywordflow}{break};
182     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}:
183         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}) != 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
184             \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
185                 \textcolor{keywordflow}{if} ((rv = sononblock(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes})) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) 
186                     \textcolor{keywordflow}{return} rv;
187             \}
188             \textcolor{keywordflow}{else} \{
189                 \textcolor{keywordflow}{if} ((rv = soblock(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes})) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
190                     \textcolor{keywordflow}{return} rv;
191             \}
192             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
193         \}
194         \textcolor{keywordflow}{break};
195     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga6a807e7b78937ab74a4fcd6e99d76669}{APR\_SO\_LINGER}:
196 \textcolor{preprocessor}{#ifdef SO\_LINGER}
197         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga6a807e7b78937ab74a4fcd6e99d76669}{APR\_SO\_LINGER}) != 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
198             \textcolor{keyword}{struct }linger li;
199             li.l\_onoff = \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on};
200             li.l\_linger = \hyperlink{group__apr__network__io_ga8311c84f6946742188a6b9a45e92ea8e}{APR\_MAX\_SECS\_TO\_LINGER};
201             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_LINGER, (\textcolor{keywordtype}{char} *) &li, \textcolor{keyword}{sizeof}(\textcolor{keyword}{
      struct} linger)) == -1) \{
202                 \textcolor{keywordflow}{return} errno;
203             \}
204             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga6a807e7b78937ab74a4fcd6e99d76669}{APR\_SO\_LINGER}, \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
205         \}
206 \textcolor{preprocessor}{#else}
207         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
208 \textcolor{preprocessor}{#endif}
209         \textcolor{keywordflow}{break};
210     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_gaa81adac9b40a87f1d4c0c2f037e9af78}{APR\_TCP\_DEFER\_ACCEPT}:
211 \textcolor{preprocessor}{#if defined(TCP\_DEFER\_ACCEPT)}
212         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_gaa81adac9b40a87f1d4c0c2f037e9af78}{APR\_TCP\_DEFER\_ACCEPT}) != 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
213             \textcolor{keywordtype}{int} optlevel = IPPROTO\_TCP;
214             \textcolor{keywordtype}{int} optname = TCP\_DEFER\_ACCEPT;
215 
216             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, optlevel, optname, 
217                            (\textcolor{keywordtype}{void} *)&\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
218                 \textcolor{keywordflow}{return} errno;
219             \}
220             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gaa81adac9b40a87f1d4c0c2f037e9af78}{APR\_TCP\_DEFER\_ACCEPT}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
221         \}
222 \textcolor{preprocessor}{#else}
223         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
224 \textcolor{preprocessor}{#endif}
225         \textcolor{keywordflow}{break};
226     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}:
227 \textcolor{preprocessor}{#if defined(TCP\_NODELAY)}
228         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}) != 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
229             \textcolor{keywordtype}{int} optlevel = IPPROTO\_TCP;
230             \textcolor{keywordtype}{int} optname = TCP\_NODELAY;
231 
232 \textcolor{preprocessor}{#if APR\_HAVE\_SCTP}
233             \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a89e0cf9d8e6d443c5d69d7f813ef9df7}{protocol} == IPPROTO\_SCTP) \{
234                 optlevel = IPPROTO\_SCTP;
235                 optname = SCTP\_NODELAY;
236             \}
237 \textcolor{preprocessor}{#endif}
238             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, optlevel, optname, (\textcolor{keywordtype}{void} *)&
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
239                 \textcolor{keywordflow}{return} errno;
240             \}
241             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
242         \}
243 \textcolor{preprocessor}{#else}
244         \textcolor{comment}{/* BeOS pre-BONE has TCP\_NODELAY set by default.}
245 \textcolor{comment}{         * As it can't be turned off we might as well check if they're asking}
246 \textcolor{comment}{         * for it to be turned on!}
247 \textcolor{comment}{         */}
248 \textcolor{preprocessor}{#ifdef BEOS}
249         \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} == 1)
250             \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
251         \textcolor{keywordflow}{else}
252 \textcolor{preprocessor}{#endif}
253         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
254 \textcolor{preprocessor}{#endif}
255         \textcolor{keywordflow}{break};
256     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga7679a9e3114815eb6c31d26db707975d}{APR\_TCP\_NOPUSH}:
257 \textcolor{preprocessor}{#if APR\_TCP\_NOPUSH\_FLAG}
258         \textcolor{comment}{/* TCP\_NODELAY and TCP\_CORK are mutually exclusive on Linux}
259 \textcolor{comment}{         * kernels < 2.6; on newer kernels they can be used together}
260 \textcolor{comment}{         * and TCP\_CORK takes preference, which is the desired}
261 \textcolor{comment}{         * behaviour.  On older kernels, TCP\_NODELAY must be toggled}
262 \textcolor{comment}{         * to "off" whilst TCP\_CORK is in effect. */}
263         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga7679a9e3114815eb6c31d26db707975d}{APR\_TCP\_NOPUSH}) != 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
264 \textcolor{preprocessor}{#ifndef HAVE\_TCP\_NODELAY\_WITH\_CORK}
265             \textcolor{keywordtype}{int} optlevel = IPPROTO\_TCP;
266             \textcolor{keywordtype}{int} optname = TCP\_NODELAY;
267 
268 \textcolor{preprocessor}{#if APR\_HAVE\_SCTP}
269             \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a89e0cf9d8e6d443c5d69d7f813ef9df7}{protocol} == IPPROTO\_SCTP) \{
270                 optlevel = IPPROTO\_SCTP;
271                 optname = SCTP\_NODELAY;
272             \}
273 \textcolor{preprocessor}{#endif}
274             \textcolor{comment}{/* OK we're going to change some settings here... */}
275             \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}) == 1 && 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
276                 \textcolor{comment}{/* Now toggle TCP\_NODELAY to off, if TCP\_CORK is being}
277 \textcolor{comment}{                 * turned on: */}
278                 \textcolor{keywordtype}{int} tmpflag = 0;
279                 \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, optlevel, optname,
280                                (\textcolor{keywordtype}{void}*)&tmpflag, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
281                     \textcolor{keywordflow}{return} errno;
282                 \}
283                 \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gac9ee12e841eefaf86fabaae4a298adea}{APR\_RESET\_NODELAY}, 1);
284                 \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}, 0);
285             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}) \{
286                 \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gac9ee12e841eefaf86fabaae4a298adea}{APR\_RESET\_NODELAY}, 0);
287             \}
288 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HAVE\_TCP\_NODELAY\_WITH\_CORK */}\textcolor{preprocessor}{}
289 
290             \textcolor{comment}{/* OK, now we can just set the TCP\_NOPUSH flag accordingly...*/}
291             \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, IPPROTO\_TCP, 
      \hyperlink{group__apr__platform_ga6e74a453e90a6495a981f5f312ec6beb}{APR\_TCP\_NOPUSH\_FLAG},
292                            (\textcolor{keywordtype}{void}*)&\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
293                 \textcolor{keywordflow}{return} errno;
294             \}
295             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga7679a9e3114815eb6c31d26db707975d}{APR\_TCP\_NOPUSH}, \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
296 \textcolor{preprocessor}{#ifndef HAVE\_TCP\_NODELAY\_WITH\_CORK}
297             \textcolor{keywordflow}{if} (!\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on} && \hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, 
      \hyperlink{group__apr__sockopt_gac9ee12e841eefaf86fabaae4a298adea}{APR\_RESET\_NODELAY})) \{
298                 \textcolor{comment}{/* Now, if TCP\_CORK was just turned off, turn}
299 \textcolor{comment}{                 * TCP\_NODELAY back on again if it was earlier toggled}
300 \textcolor{comment}{                 * to off: */}
301                 \textcolor{keywordtype}{int} tmpflag = 1;
302                 \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, optlevel, optname,
303                                (\textcolor{keywordtype}{void}*)&tmpflag, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
304                     \textcolor{keywordflow}{return} errno;
305                 \}
306                 \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gac9ee12e841eefaf86fabaae4a298adea}{APR\_RESET\_NODELAY},0);
307                 \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}, 1);
308             \}
309 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HAVE\_TCP\_NODELAY\_WITH\_CORK */}\textcolor{preprocessor}{}
310         \}
311 \textcolor{preprocessor}{#else}
312         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
313 \textcolor{preprocessor}{#endif}
314         \textcolor{keywordflow}{break};
315     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga73b6c80791c5148c2a416e03a8a1ff8a}{APR\_INCOMPLETE\_READ}:
316         \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga73b6c80791c5148c2a416e03a8a1ff8a}{APR\_INCOMPLETE\_READ}, 
      \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
317         \textcolor{keywordflow}{break};
318     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_gae1126f69a19a23c484e3292b016375df}{APR\_IPV6\_V6ONLY}:
319 \textcolor{preprocessor}{#if APR\_HAVE\_IPV6 && defined(IPV6\_V6ONLY)}
320         \textcolor{comment}{/* we don't know the initial setting of this option,}
321 \textcolor{comment}{         * so don't check sock->options since that optimization}
322 \textcolor{comment}{         * won't work}
323 \textcolor{comment}{         */}
324         \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, IPPROTO\_IPV6, 
      \hyperlink{win32_2sockopt_8c_a48fb8bf5da186346125c2750265b0c65}{IPV6\_V6ONLY},
325                        (\textcolor{keywordtype}{void} *)&\hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
326             \textcolor{keywordflow}{return} errno;
327         \}
328         \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gae1126f69a19a23c484e3292b016375df}{APR\_IPV6\_V6ONLY}, \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
329 \textcolor{preprocessor}{#else}
330         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
331 \textcolor{preprocessor}{#endif}
332         \textcolor{keywordflow}{break};
333     \textcolor{keywordflow}{case} \hyperlink{group__apr__sockopt_ga3e873ecb577af3c70736e762358858d9}{APR\_SO\_FREEBIND}:
334 \textcolor{preprocessor}{#if defined(IP\_FREEBIND)}
335         \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2ebd12809845fab1c8fe85b1337de183}{setsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_IP, IP\_FREEBIND,
336                        (\textcolor{keywordtype}{void} *)&one, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) == -1) \{
337             \textcolor{keywordflow}{return} errno;
338         \}
339         \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_ga3e873ecb577af3c70736e762358858d9}{APR\_SO\_FREEBIND}, \hyperlink{group__apr__network__io_gabc1e1b052bf705b27ebd2d24a96ec4d3}{on});
340 \textcolor{preprocessor}{#elif 0 }\textcolor{comment}{/* defined(IP\_BINDANY) ... */}\textcolor{preprocessor}{}
341         \textcolor{comment}{/* TODO: insert FreeBSD support here, note family specific}
342 \textcolor{comment}{         * options, IP\_BINDANY vs IPV6\_BINDANY */}
343 \textcolor{preprocessor}{#else}
344         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga939ddb834a30bc9a5a0a329b13000161}{APR\_ENOTIMPL};
345 \textcolor{preprocessor}{#endif}
346         \textcolor{keywordflow}{break};
347     \textcolor{keywordflow}{default}:
348         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_gae3ffc41994444e71ce522c036ca1d9a4}{APR\_EINVAL};
349     \}
350 
351     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}; 
352 \}         
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockopt_8c_a08f5e505fa611005f56c12783269ffa9_icgraph}
\end{center}
\end{figure}


\index{unix/sockopt.\+c@{unix/sockopt.\+c}!apr\+\_\+socket\+\_\+timeout\+\_\+get@{apr\+\_\+socket\+\_\+timeout\+\_\+get}}
\index{apr\+\_\+socket\+\_\+timeout\+\_\+get@{apr\+\_\+socket\+\_\+timeout\+\_\+get}!unix/sockopt.\+c@{unix/sockopt.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+timeout\+\_\+get(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+interval\+\_\+time\+\_\+t $\ast$t)}{apr_socket_timeout_get(apr_socket_t *sock, apr_interval_time_t *t)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+timeout\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+interval\+\_\+time\+\_\+t} $\ast$}]{t}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockopt_8c_aa32313b54afed590367c8571075d2bc1}{}\label{unix_2sockopt_8c_aa32313b54afed590367c8571075d2bc1}

\begin{DoxyCode}
356 \{
357     *\hyperlink{group__APACHE__CORE__DAEMON_gabfa74bb4f05f3b2de1a89160025e5400}{t} = sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout};
358     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
359 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockopt_8c_aa32313b54afed590367c8571075d2bc1_icgraph}
\end{center}
\end{figure}


\index{unix/sockopt.\+c@{unix/sockopt.\+c}!apr\+\_\+socket\+\_\+timeout\+\_\+set@{apr\+\_\+socket\+\_\+timeout\+\_\+set}}
\index{apr\+\_\+socket\+\_\+timeout\+\_\+set@{apr\+\_\+socket\+\_\+timeout\+\_\+set}!unix/sockopt.\+c@{unix/sockopt.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+timeout\+\_\+set(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+interval\+\_\+time\+\_\+t t)}{apr_socket_timeout_set(apr_socket_t *sock, apr_interval_time_t t)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+timeout\+\_\+set (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+interval\+\_\+time\+\_\+t}}]{t}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockopt_8c_a945bdbe807ec5635d65a6fd9ddb78c29}{}\label{unix_2sockopt_8c_a945bdbe807ec5635d65a6fd9ddb78c29}

\begin{DoxyCode}
76 \{
77     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} stat;
78 
79     \textcolor{comment}{/* If our new timeout is non-negative and our old timeout was}
80 \textcolor{comment}{     * negative, then we need to ensure that we are non-blocking.}
81 \textcolor{comment}{     * Conversely, if our new timeout is negative and we had}
82 \textcolor{comment}{     * non-negative timeout, we must make sure our socket is blocking.}
83 \textcolor{comment}{     * We want to avoid calling fcntl more than necessary on the}
84 \textcolor{comment}{     * socket.}
85 \textcolor{comment}{     */}
86     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__DAEMON_gabfa74bb4f05f3b2de1a89160025e5400}{t} >= 0 && sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} < 0) \{
87         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}) != 1) \{
88             \textcolor{keywordflow}{if} ((stat = sononblock(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes})) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
89                 \textcolor{keywordflow}{return} stat;
90             \}
91             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}, 1);
92         \}
93     \} 
94     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (t < 0 && sock->\hyperlink{group__APACHE__CORE__DAEMON_ga48b7aa88e5841c0fe69f7d9a88646af3}{timeout} >= 0) \{
95         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}) != 0) \{ 
96             \textcolor{keywordflow}{if} ((stat = soblock(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes})) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{ 
97                 \textcolor{keywordflow}{return} stat; 
98             \}
99             \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}, 0);
100         \} 
101     \}
102     \textcolor{comment}{/* must disable the incomplete read support if we disable}
103 \textcolor{comment}{     * a timeout}
104 \textcolor{comment}{     */}
105     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__DAEMON_gabfa74bb4f05f3b2de1a89160025e5400}{t} <= 0) \{
106         sock->\hyperlink{structapr__socket__t_a84cff6f5374094c92de81474b88256bf}{options} &= ~\hyperlink{group__apr__sockopt_ga73b6c80791c5148c2a416e03a8a1ff8a}{APR\_INCOMPLETE\_READ};
107     \}
108     sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} = \hyperlink{group__APACHE__CORE__DAEMON_gabfa74bb4f05f3b2de1a89160025e5400}{t};
109     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
110 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockopt_8c_a945bdbe807ec5635d65a6fd9ddb78c29_icgraph}
\end{center}
\end{figure}


