\hypertarget{sdbm__pair_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr-\/util/dbm/sdbm/sdbm\+\_\+pair.c File Reference}
\label{sdbm__pair_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr-\/util/dbm/sdbm/sdbm\+\_\+pair.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr-\/util/dbm/sdbm/sdbm\+\_\+pair.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+sdbm.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sdbm\+\_\+tune.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sdbm\+\_\+pair.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sdbm\+\_\+private.\+h\char`\"{}}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
Include dependency graph for sdbm\+\_\+pair.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sdbm__pair_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sdbm__pair_8c_adf66380397b684edaca19455d080b61b}{exhash}(\hyperlink{structitem}{item})~\hyperlink{sdbm__private_8h_a0576408541e7196b4e67f30b44e1f6c4}{sdbm\+\_\+hash}((\hyperlink{structitem}{item}).dptr, (\hyperlink{structitem}{item}).dsize)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{sdbm__pair_8c_abf9f37d8adeec418dbc49a4267b30531}{fitpair} (char $\ast$pag, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} need)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{sdbm__pair_8c_adb8c43dd1b2a8c406d89275eb28167ec}{putpair} (char $\ast$pag, \hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{apr__siphash_8h_adac0b6a30345ea1d0daa8a692b0b7ad9}{key}, \hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{group__apr__tables_ga4d708cd93abeca73400ed82977502830}{val})
\item 
\hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{sdbm__pair_8c_a94f4243a46a0738647f88df7b8398cde}{getpair} (char $\ast$pag, \hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{apr__siphash_8h_adac0b6a30345ea1d0daa8a692b0b7ad9}{key})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{sdbm__pair_8c_a5c80c1ce4df54c15d76eeaaf436e078d}{duppair} (char $\ast$pag, \hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{apr__siphash_8h_adac0b6a30345ea1d0daa8a692b0b7ad9}{key})
\item 
\hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{sdbm__pair_8c_ac62d1b8823e31206a1b10cb7f8c6a3fa}{getnkey} (char $\ast$pag, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__apr__poll_ga8c10598f743ada9822ab203974a58304}{num})
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{sdbm__pair_8c_a32361982ab1978c48617a2b216e1af1f}{delpair} (char $\ast$pag, \hyperlink{structapr__sdbm__datum__t}{apr\+\_\+sdbm\+\_\+datum\+\_\+t} \hyperlink{apr__siphash_8h_adac0b6a30345ea1d0daa8a692b0b7ad9}{key})
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{sdbm__pair_8c_adc7ee327beb88ce351dd7ccc8048d1af}{splpage} (char $\ast$pag, char $\ast$new, long sbit)
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{sdbm__pair_8c_acd55c92b3cdf4d9cd1d75a399e16f72b}{chkpage} (char $\ast$pag)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!exhash@{exhash}}
\index{exhash@{exhash}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{exhash}{exhash}}]{\setlength{\rightskip}{0pt plus 5cm}\#define exhash(
\begin{DoxyParamCaption}
\item[{}]{{\bf item}}
\end{DoxyParamCaption}
)~{\bf sdbm\+\_\+hash}(({\bf item}).dptr, ({\bf item}).dsize)}\hypertarget{sdbm__pair_8c_adf66380397b684edaca19455d080b61b}{}\label{sdbm__pair_8c_adf66380397b684edaca19455d080b61b}


\subsection{Function Documentation}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!chkpage@{chkpage}}
\index{chkpage@{chkpage}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{chkpage(char $\ast$pag)}{chkpage(char *pag)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} chkpage (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_acd55c92b3cdf4d9cd1d75a399e16f72b}{}\label{sdbm__pair_8c_acd55c92b3cdf4d9cd1d75a399e16f72b}

\begin{DoxyCode}
300 \{
301     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
302     \textcolor{keyword}{register} \textcolor{keywordtype}{int} off;
303     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
304 
305     \textcolor{keywordflow}{if} ((n = ino[0]) < 0 || n > \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ} / \textcolor{keyword}{sizeof}(short))
306         \textcolor{keywordflow}{return} 0;
307 
308     \textcolor{keywordflow}{if} (n > 0) \{
309         off = \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ};
310         \textcolor{keywordflow}{for} (ino++; n > 0; ino += 2) \{
311             \textcolor{keywordflow}{if} (ino[0] < 0 || ino[0] > off ||
312                 ino[1] < 0 || ino[1] > off ||
313                 ino[1] > ino[0])
314                 \textcolor{keywordflow}{return} 0;
315             off = ino[1];
316             n -= 2;
317         \}
318     \}
319     \textcolor{keywordflow}{return} 1;
320 \}
\end{DoxyCode}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!delpair@{delpair}}
\index{delpair@{delpair}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{delpair(char $\ast$pag, apr\+\_\+sdbm\+\_\+datum\+\_\+t key)}{delpair(char *pag, apr_sdbm_datum_t key)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} delpair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t}}]{key}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_a32361982ab1978c48617a2b216e1af1f}{}\label{sdbm__pair_8c_a32361982ab1978c48617a2b216e1af1f}

\begin{DoxyCode}
165 \{
166     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
167     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
168     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
169 
170     \textcolor{keywordflow}{if} ((n = ino[0]) == 0)
171         \textcolor{keywordflow}{return} 0;
172 
173     \textcolor{keywordflow}{if} ((i = seepair(pag, n, key.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr}, key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize})) == 0)
174         \textcolor{keywordflow}{return} 0;
175 \textcolor{comment}{/*}
176 \textcolor{comment}{ * found the key. if it is the last entry}
177 \textcolor{comment}{ * [i.e. i == n - 1] we just adjust the entry count.}
178 \textcolor{comment}{ * hard case: move all data down onto the deleted pair,}
179 \textcolor{comment}{ * shift offsets onto deleted offsets, and adjust them.}
180 \textcolor{comment}{ * [note: 0 < i < n]}
181 \textcolor{comment}{ */}
182     \textcolor{keywordflow}{if} (i < n - 1) \{
183         \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__CONFIG_ga1891337ee8668593918a50b9e04be486}{m};
184         \textcolor{keyword}{register} \textcolor{keywordtype}{char} *dst = pag + (i == 1 ? \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ} : ino[i - 1]);
185         \textcolor{keyword}{register} \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__PROTO_ga3250c7d76063d957a24f2ecbb3d93c2c}{src} = pag + ino[i + 1];
186         \textcolor{keyword}{register} \textcolor{keywordtype}{short} zoo = (short) (dst - src);
187 
188         \hyperlink{mod__macro_8c_a98d74a3e27c3b80effb0134b208bdf2a}{debug}((\textcolor{stringliteral}{"free-up %d "}, zoo));
189 \textcolor{comment}{/*}
190 \textcolor{comment}{ * shift data/keys down}
191 \textcolor{comment}{ */}
192         m = ino[i + 1] - ino[\hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n}];
193 
194 \textcolor{preprocessor}{#undef DUFF }\textcolor{comment}{/* just use memmove. it should be plenty fast. */}\textcolor{preprocessor}{}
195 \textcolor{preprocessor}{#ifdef DUFF}
196 \textcolor{preprocessor}{#define MOVB    *--dst = *--src}
197 
198         \textcolor{keywordflow}{if} (m > 0) \{
199             \textcolor{keyword}{register} \textcolor{keywordtype}{int} loop = (m + 8 - 1) >> 3;
200 
201             \textcolor{keywordflow}{switch} (m & (8 - 1)) \{
202             \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{do} \{
203                 MOVB;   \textcolor{keywordflow}{case} 7: MOVB;
204             \textcolor{keywordflow}{case} 6: MOVB;   \textcolor{keywordflow}{case} 5: MOVB;
205             \textcolor{keywordflow}{case} 4: MOVB;   \textcolor{keywordflow}{case} 3: MOVB;
206             \textcolor{keywordflow}{case} 2: MOVB;   \textcolor{keywordflow}{case} 1: MOVB;
207                 \} \textcolor{keywordflow}{while} (--loop);
208             \}
209         \}
210 \textcolor{preprocessor}{#else}
211         dst -= \hyperlink{group__APACHE__CORE__CONFIG_ga1891337ee8668593918a50b9e04be486}{m};
212         src -= \hyperlink{group__APACHE__CORE__CONFIG_ga1891337ee8668593918a50b9e04be486}{m};
213         \hyperlink{pcre__internal_8h_ad12df83f1d3a090b658adc645555ca79}{memmove}(dst, src, m);
214 \textcolor{preprocessor}{#endif}
215 
216 \textcolor{comment}{/*}
217 \textcolor{comment}{ * adjust offset index up}
218 \textcolor{comment}{ */}
219         \textcolor{keywordflow}{while} (i < n - 1) \{
220             ino[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}] = ino[i + 2] + zoo;
221             i++;
222         \}
223     \}
224     ino[0] -= 2;
225     \textcolor{keywordflow}{return} 1;
226 \}
\end{DoxyCode}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!duppair@{duppair}}
\index{duppair@{duppair}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{duppair(char $\ast$pag, apr\+\_\+sdbm\+\_\+datum\+\_\+t key)}{duppair(char *pag, apr_sdbm_datum_t key)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} duppair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t}}]{key}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_a5c80c1ce4df54c15d76eeaaf436e078d}{}\label{sdbm__pair_8c_a5c80c1ce4df54c15d76eeaaf436e078d}

\begin{DoxyCode}
135 \{
136     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
137     \textcolor{keywordflow}{return} ino[0] > 0 && seepair(pag, ino[0], key.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr}, key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize}) > 0;
138 \}
\end{DoxyCode}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!fitpair@{fitpair}}
\index{fitpair@{fitpair}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{fitpair(char $\ast$pag, int need)}{fitpair(char *pag, int need)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} fitpair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{{\bf int}}]{need}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_abf9f37d8adeec418dbc49a4267b30531}{}\label{sdbm__pair_8c_abf9f37d8adeec418dbc49a4267b30531}

\begin{DoxyCode}
66 \{
67     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
68     \textcolor{keyword}{register} \textcolor{keywordtype}{int} off;
69     \textcolor{keyword}{register} \textcolor{keywordtype}{int} avail;
70     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
71 
72     off = ((n = ino[0]) > 0) ? ino[\hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n}] : \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ};
73     avail = off - (n + 1) * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{short});
74     need += 2 * \textcolor{keyword}{sizeof}(short);
75 
76     \hyperlink{mod__macro_8c_a98d74a3e27c3b80effb0134b208bdf2a}{debug}((\textcolor{stringliteral}{"avail %d need %d\(\backslash\)n"}, avail, need));
77 
78     \textcolor{keywordflow}{return} need <= avail;
79 \}
\end{DoxyCode}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!getnkey@{getnkey}}
\index{getnkey@{getnkey}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{getnkey(char $\ast$pag, int num)}{getnkey(char *pag, int num)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t} getnkey (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{{\bf int}}]{num}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_ac62d1b8823e31206a1b10cb7f8c6a3fa}{}\label{sdbm__pair_8c_ac62d1b8823e31206a1b10cb7f8c6a3fa}

\begin{DoxyCode}
144 \{
145     \hyperlink{structapr__sdbm__datum__t}{apr\_sdbm\_datum\_t} \hyperlink{group__MOD__CACHE_ga11d8023381192746eb96be162398fe1c}{key};
146     \textcolor{keyword}{register} \textcolor{keywordtype}{int} off;
147     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
148 
149     \hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num} = \hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num} * 2 - 1;
150     \textcolor{keywordflow}{if} (ino[0] == 0 || \hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num} > ino[0])
151         \textcolor{keywordflow}{return} \hyperlink{sdbm__private_8h_ab62cb90b27e63fa840a7aebc2f211e17}{sdbm\_nullitem};
152 
153     off = (\hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num} > 1) ? ino[\hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num} - 1] : \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ};
154 
155     key.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr} = pag + ino[\hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num}];
156     key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize} = off - ino[\hyperlink{group__APACHE__CORE__DAEMON_ga86cf672daa4e0ad11ad10efc894d19c8}{num}];
157 
158     \textcolor{keywordflow}{return} \hyperlink{group__MOD__CACHE_ga11d8023381192746eb96be162398fe1c}{key};
159 \}
\end{DoxyCode}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!getpair@{getpair}}
\index{getpair@{getpair}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{getpair(char $\ast$pag, apr\+\_\+sdbm\+\_\+datum\+\_\+t key)}{getpair(char *pag, apr_sdbm_datum_t key)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t} getpair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t}}]{key}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_a94f4243a46a0738647f88df7b8398cde}{}\label{sdbm__pair_8c_a94f4243a46a0738647f88df7b8398cde}

\begin{DoxyCode}
114 \{
115     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
116     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
117     \hyperlink{structapr__sdbm__datum__t}{apr\_sdbm\_datum\_t} \hyperlink{group__APACHE__CORE__CONFIG_gae553dcb033cb5c1e269683855e4f676a}{val};
118     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
119 
120     \textcolor{keywordflow}{if} ((n = ino[0]) == 0)
121         \textcolor{keywordflow}{return} \hyperlink{sdbm__private_8h_ab62cb90b27e63fa840a7aebc2f211e17}{sdbm\_nullitem};
122 
123     \textcolor{keywordflow}{if} ((i = seepair(pag, n, key.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr}, key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize})) == 0)
124         \textcolor{keywordflow}{return} \hyperlink{sdbm__private_8h_ab62cb90b27e63fa840a7aebc2f211e17}{sdbm\_nullitem};
125 
126     val.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr} = pag + ino[i + 1];
127     val.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize} = ino[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}] - ino[i + 1];
128     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__CONFIG_gae553dcb033cb5c1e269683855e4f676a}{val};
129 \}
\end{DoxyCode}
\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!putpair@{putpair}}
\index{putpair@{putpair}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{putpair(char $\ast$pag, apr\+\_\+sdbm\+\_\+datum\+\_\+t key, apr\+\_\+sdbm\+\_\+datum\+\_\+t val)}{putpair(char *pag, apr_sdbm_datum_t key, apr_sdbm_datum_t val)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} putpair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t}}]{key, }
\item[{{\bf apr\+\_\+sdbm\+\_\+datum\+\_\+t}}]{val}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_adb8c43dd1b2a8c406d89275eb28167ec}{}\label{sdbm__pair_8c_adb8c43dd1b2a8c406d89275eb28167ec}

\begin{DoxyCode}
86 \{
87     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
88     \textcolor{keyword}{register} \textcolor{keywordtype}{int} off;
89     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) pag;
90 
91     off = ((n = ino[0]) > 0) ? ino[\hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n}] : \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ};
92 \textcolor{comment}{/*}
93 \textcolor{comment}{ * enter the key first}
94 \textcolor{comment}{ */}
95     off -= key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize};
96     (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) memcpy(pag + off, key.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr}, key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize});
97     ino[n + 1] = off;
98 \textcolor{comment}{/*}
99 \textcolor{comment}{ * now the data}
100 \textcolor{comment}{ */}
101     off -= val.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize};
102     (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) memcpy(pag + off, val.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr}, val.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize});
103     ino[n + 2] = off;
104 \textcolor{comment}{/*}
105 \textcolor{comment}{ * adjust item count}
106 \textcolor{comment}{ */}
107     ino[0] += 2;
108 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=197pt]{sdbm__pair_8c_adb8c43dd1b2a8c406d89275eb28167ec_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{sdbm__pair_8c_adb8c43dd1b2a8c406d89275eb28167ec_icgraph}
\end{center}
\end{figure}


\index{sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}!splpage@{splpage}}
\index{splpage@{splpage}!sdbm\+\_\+pair.\+c@{sdbm\+\_\+pair.\+c}}
\subsubsection[{\texorpdfstring{splpage(char $\ast$pag, char $\ast$new, long sbit)}{splpage(char *pag, char *new, long sbit)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} splpage (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pag, }
\item[{char $\ast$}]{new, }
\item[{long}]{sbit}
\end{DoxyParamCaption}
)}\hypertarget{sdbm__pair_8c_adc7ee327beb88ce351dd7ccc8048d1af}{}\label{sdbm__pair_8c_adc7ee327beb88ce351dd7ccc8048d1af}

\begin{DoxyCode}
258 \{
259     \hyperlink{structapr__sdbm__datum__t}{apr\_sdbm\_datum\_t} \hyperlink{group__MOD__CACHE_ga11d8023381192746eb96be162398fe1c}{key};
260     \hyperlink{structapr__sdbm__datum__t}{apr\_sdbm\_datum\_t} \hyperlink{group__APACHE__CORE__CONFIG_gae553dcb033cb5c1e269683855e4f676a}{val};
261 
262     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
263     \textcolor{keyword}{register} \textcolor{keywordtype}{int} off = \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ};
264     \textcolor{keywordtype}{char} cur[\hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ}];
265     \textcolor{keyword}{register} \textcolor{keywordtype}{short} *ino = (\textcolor{keywordtype}{short} *) cur;
266 
267     (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) memcpy(cur, pag, \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ});
268     (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) memset(pag, 0, \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ});
269     (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) memset(\textcolor{keyword}{new}, 0, \hyperlink{sdbm__private_8h_ae01c0d5cfeb1c7ac445b60febee0d7a3}{PBLKSIZ});
270 
271     n = ino[0];
272     \textcolor{keywordflow}{for} (ino++; n > 0; ino += 2) \{
273         key.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr} = cur + ino[0]; 
274         key.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize} = off - ino[0];
275         val.\hyperlink{structapr__sdbm__datum__t_a927c668d3912a4cc8466b0f551d00169}{dptr} = cur + ino[1];
276         val.\hyperlink{structapr__sdbm__datum__t_aedbd0295ba540695d5b407f1dec90eb5}{dsize} = ino[0] - ino[1];
277 \textcolor{comment}{/*}
278 \textcolor{comment}{ * select the page pointer (by looking at sbit) and insert}
279 \textcolor{comment}{ */}
280         (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) \hyperlink{sdbm__pair_8c_adb8c43dd1b2a8c406d89275eb28167ec}{putpair}((\hyperlink{sdbm__pair_8c_adf66380397b684edaca19455d080b61b}{exhash}(key) & sbit) ? \textcolor{keyword}{new} : pag, key, val);
281 
282         off = ino[1];
283         n -= 2;
284     \}
285 
286     \hyperlink{mod__macro_8c_a98d74a3e27c3b80effb0134b208bdf2a}{debug}((\textcolor{stringliteral}{"%d split %d/%d\(\backslash\)n"}, ((\textcolor{keywordtype}{short} *) cur)[0] / 2, 
287            ((\textcolor{keywordtype}{short} *) \textcolor{keyword}{new})[0] / 2,
288            ((\textcolor{keywordtype}{short} *) pag)[0] / 2));
289 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=283pt]{sdbm__pair_8c_adc7ee327beb88ce351dd7ccc8048d1af_cgraph}
\end{center}
\end{figure}


