\hypertarget{h2__alt__svc_8h}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/modules/http2/h2\+\_\+alt\+\_\+svc.h File Reference}
\label{h2__alt__svc_8h}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/http2/h2\+\_\+alt\+\_\+svc.\+h@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/http2/h2\+\_\+alt\+\_\+svc.\+h}}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__alt__svc_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structh2__alt__svc}{h2\+\_\+alt\+\_\+svc}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structh2__alt__svc}{h2\+\_\+alt\+\_\+svc} \hyperlink{h2__alt__svc_8h_aa58b33baee6e2bd9519833a55324910f}{h2\+\_\+alt\+\_\+svc}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__alt__svc_8h_acff22476f20f44751b541e0fa839b51b}{h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
\hyperlink{structh2__alt__svc}{h2\+\_\+alt\+\_\+svc} $\ast$ \hyperlink{h2__alt__svc_8h_ad3269f553e14a701ad442e813bee5167}{h2\+\_\+alt\+\_\+svc\+\_\+parse} (const char $\ast$\hyperlink{pcretest_8txt_a062597889ba244b72877454b1d3adecf}{s}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool})
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\index{h2\+\_\+alt\+\_\+svc.\+h@{h2\+\_\+alt\+\_\+svc.\+h}!h2\+\_\+alt\+\_\+svc@{h2\+\_\+alt\+\_\+svc}}
\index{h2\+\_\+alt\+\_\+svc@{h2\+\_\+alt\+\_\+svc}!h2\+\_\+alt\+\_\+svc.\+h@{h2\+\_\+alt\+\_\+svc.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+alt\+\_\+svc}{h2_alt_svc}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf h2\+\_\+alt\+\_\+svc} {\bf h2\+\_\+alt\+\_\+svc}}\hypertarget{h2__alt__svc_8h_aa58b33baee6e2bd9519833a55324910f}{}\label{h2__alt__svc_8h_aa58b33baee6e2bd9519833a55324910f}


\subsection{Function Documentation}
\index{h2\+\_\+alt\+\_\+svc.\+h@{h2\+\_\+alt\+\_\+svc.\+h}!h2\+\_\+alt\+\_\+svc\+\_\+parse@{h2\+\_\+alt\+\_\+svc\+\_\+parse}}
\index{h2\+\_\+alt\+\_\+svc\+\_\+parse@{h2\+\_\+alt\+\_\+svc\+\_\+parse}!h2\+\_\+alt\+\_\+svc.\+h@{h2\+\_\+alt\+\_\+svc.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+alt\+\_\+svc\+\_\+parse(const char $\ast$s, apr\+\_\+pool\+\_\+t $\ast$pool)}{h2_alt_svc_parse(const char *s, apr_pool_t *pool)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf h2\+\_\+alt\+\_\+svc}$\ast$ h2\+\_\+alt\+\_\+svc\+\_\+parse (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{s, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{pool}
\end{DoxyParamCaption}
)}\hypertarget{h2__alt__svc_8h_ad3269f553e14a701ad442e813bee5167}{}\label{h2__alt__svc_8h_ad3269f553e14a701ad442e813bee5167}
Parse an Alt-\/\+Svc specifier as described in \char`\"{}\+H\+T\+T\+P Alternative Services\char`\"{} (\href{https://tools.ietf.org/html/draft-ietf-httpbis-alt-svc-04}{\tt https\+://tools.\+ietf.\+org/html/draft-\/ietf-\/httpbis-\/alt-\/svc-\/04}) with the following changes\+:
\begin{DoxyItemize}
\item do not percent encode token values
\item do not use quotation marks 
\end{DoxyItemize}
\begin{DoxyCode}
45 \{
46     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__apr__strings_ga0234c8660bac5d4b5e016b1e715aed77}{sep} = \hyperlink{group__APACHE__CORE__DAEMON_ga6016b58857e4c0b11e39913bdf4ff910}{ap\_strchr\_c}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{charliteral}{'='});
47     \textcolor{keywordflow}{if} (sep) \{
48         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *alpn = apr\_pstrmemdup(pool, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, sep - \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
49         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__VHOST_ga8c8ad0616f1a1fed66e67a90a116a76c}{host} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
50         \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__VHOST_ga225c76c246a5cc263c5a2628eb99353e}{port} = 0;
51         \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s} = sep + 1;
52         sep = \hyperlink{group__APACHE__CORE__DAEMON_ga6016b58857e4c0b11e39913bdf4ff910}{ap\_strchr\_c}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{charliteral}{':'});  \textcolor{comment}{/* mandatory : */}
53         \textcolor{keywordflow}{if} (sep) \{
54             \textcolor{keywordflow}{if} (sep != \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}) \{    \textcolor{comment}{/* optional host */}
55                 host = apr\_pstrmemdup(pool, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, sep - \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
56             \}
57             \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s} = sep + 1;
58             \textcolor{keywordflow}{if} (*\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}) \{          \textcolor{comment}{/* must be a port number */}
59                 port = (\hyperlink{group__MOD__WATCHDOG_gaf0b5a943e734de7ea24142e2c81d82ef}{int})apr\_atoi64(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
60                 \textcolor{keywordflow}{if} (port > 0 && port < (0x1 << 16)) \{
61                     \hyperlink{structh2__alt__svc}{h2\_alt\_svc} *\hyperlink{pcre_8txt_a98d9d1d08c2c07470cdc46401df8d7f8}{as} = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(pool, \textcolor{keyword}{sizeof}(*as));
62                     as->\hyperlink{structh2__alt__svc_a4251ac7b55f03e778ea7be11e3d006bc}{alpn} = alpn;
63                     as->\hyperlink{structh2__alt__svc_a3c9356bc046c3f6d41f4b7f9f6331e89}{host} = \hyperlink{group__APACHE__CORE__VHOST_ga8c8ad0616f1a1fed66e67a90a116a76c}{host};
64                     as->\hyperlink{structh2__alt__svc_ad66fa5cd21dc292cf99ff80f1f7249a9}{port} = \hyperlink{group__APACHE__CORE__VHOST_ga225c76c246a5cc263c5a2628eb99353e}{port};
65                     \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_a98d9d1d08c2c07470cdc46401df8d7f8}{as};
66                 \}
67             \}
68         \}
69     \}
70     \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
71 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__alt__svc_8h_ad3269f553e14a701ad442e813bee5167_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+alt\+\_\+svc.\+h@{h2\+\_\+alt\+\_\+svc.\+h}!h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks@{h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks}}
\index{h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks@{h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks}!h2\+\_\+alt\+\_\+svc.\+h@{h2\+\_\+alt\+\_\+svc.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks(void)}{h2_alt_svc_register_hooks(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+alt\+\_\+svc\+\_\+register\+\_\+hooks (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{h2__alt__svc_8h_acff22476f20f44751b541e0fa839b51b}{}\label{h2__alt__svc_8h_acff22476f20f44751b541e0fa839b51b}

\begin{DoxyCode}
33 \{
34     ap\_hook\_post\_read\_request(h2\_alt\_svc\_handler, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, 
      \hyperlink{group__APR__Util__Hook_gab9a5d50c3478c4d640deccec6b0ce879}{APR\_HOOK\_MIDDLE});
35 \}
\end{DoxyCode}
