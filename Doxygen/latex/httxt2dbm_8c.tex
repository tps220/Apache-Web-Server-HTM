\hypertarget{httxt2dbm_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/support/httxt2dbm.c File Reference}
\label{httxt2dbm_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/support/httxt2dbm.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/support/httxt2dbm.\+c}}
{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+lib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+file\+\_\+io.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+file\+\_\+info.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+pools.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+getopt.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apu.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+dbm.\+h\char`\"{}}\\*
Include dependency graph for httxt2dbm.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{httxt2dbm_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{httxt2dbm_8c_a7721b0e41b22f0d1b4bfdeff2addffc3}{R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE}~1024
\item 
\#define \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL}~\hyperlink{group__apr__platform_ga20953ff75ca59692aac949acfdaa25f6}{A\+P\+R\+\_\+\+E\+O\+L\+\_\+\+S\+TR}
\item 
\#define \hyperlink{httxt2dbm_8c_a384cadd4eb2038ab1dbd66a383df9a9a}{A\+V\+A\+IL}~\char`\"{}available\char`\"{}
\item 
\#define \hyperlink{httxt2dbm_8c_a431e4f6be519be11cf7d02449924f11a}{U\+N\+A\+V\+A\+IL}~\char`\"{}unavailable\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{httxt2dbm_8c_a814244b02f6701fd8ead246678bb3dae}{main} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__apr__getopt_ga6bdebf9385dc069c90aa21989641be02}{argc}, const char $\ast$const \hyperlink{group__apr__getopt_ga675a108e956f4e2ea74dae8d26e6273e}{argv}\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{httxt2dbm.\+c@{httxt2dbm.\+c}!A\+V\+A\+IL@{A\+V\+A\+IL}}
\index{A\+V\+A\+IL@{A\+V\+A\+IL}!httxt2dbm.\+c@{httxt2dbm.\+c}}
\subsubsection[{\texorpdfstring{A\+V\+A\+IL}{AVAIL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+V\+A\+IL~\char`\"{}available\char`\"{}}\hypertarget{httxt2dbm_8c_a384cadd4eb2038ab1dbd66a383df9a9a}{}\label{httxt2dbm_8c_a384cadd4eb2038ab1dbd66a383df9a9a}
\index{httxt2dbm.\+c@{httxt2dbm.\+c}!NL@{NL}}
\index{NL@{NL}!httxt2dbm.\+c@{httxt2dbm.\+c}}
\subsubsection[{\texorpdfstring{NL}{NL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define NL~{\bf A\+P\+R\+\_\+\+E\+O\+L\+\_\+\+S\+TR}}\hypertarget{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{}\label{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}
\index{httxt2dbm.\+c@{httxt2dbm.\+c}!R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE@{R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE}}
\index{R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE@{R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE}!httxt2dbm.\+c@{httxt2dbm.\+c}}
\subsubsection[{\texorpdfstring{R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE}{REWRITE_MAX_TXT_MAP_LINE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+E\+W\+R\+I\+T\+E\+\_\+\+M\+A\+X\+\_\+\+T\+X\+T\+\_\+\+M\+A\+P\+\_\+\+L\+I\+NE~1024}\hypertarget{httxt2dbm_8c_a7721b0e41b22f0d1b4bfdeff2addffc3}{}\label{httxt2dbm_8c_a7721b0e41b22f0d1b4bfdeff2addffc3}
\index{httxt2dbm.\+c@{httxt2dbm.\+c}!U\+N\+A\+V\+A\+IL@{U\+N\+A\+V\+A\+IL}}
\index{U\+N\+A\+V\+A\+IL@{U\+N\+A\+V\+A\+IL}!httxt2dbm.\+c@{httxt2dbm.\+c}}
\subsubsection[{\texorpdfstring{U\+N\+A\+V\+A\+IL}{UNAVAIL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define U\+N\+A\+V\+A\+IL~\char`\"{}unavailable\char`\"{}}\hypertarget{httxt2dbm_8c_a431e4f6be519be11cf7d02449924f11a}{}\label{httxt2dbm_8c_a431e4f6be519be11cf7d02449924f11a}


\subsection{Function Documentation}
\index{httxt2dbm.\+c@{httxt2dbm.\+c}!main@{main}}
\index{main@{main}!httxt2dbm.\+c@{httxt2dbm.\+c}}
\subsubsection[{\texorpdfstring{main(int argc, const char $\ast$const argv[])}{main(int argc, const char *const argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} main (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{argc, }
\item[{const char $\ast$const}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{httxt2dbm_8c_a814244b02f6701fd8ead246678bb3dae}{}\label{httxt2dbm_8c_a814244b02f6701fd8ead246678bb3dae}

\begin{DoxyCode}
176 \{
177     \hyperlink{structapr__pool__t}{apr\_pool\_t} *\hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool};
178     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv = \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
179     \hyperlink{structapr__getopt__t}{apr\_getopt\_t} *\hyperlink{group__apr__network__io_gac40a59a4a52d93ab3ec8dbbdf4d57e60}{opt};
180     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *opt\_arg;
181     \textcolor{keywordtype}{char} ch;
182     \hyperlink{structapr__file__t}{apr\_file\_t} *\hyperlink{group__APACHE__CORE__MD5_ga3fb008193e92b33c1bb53a980b708b75}{infile};
183     \hyperlink{structapr__dbm__t}{apr\_dbm\_t} *outdbm;
184 
185     apr\_app\_initialize(&\hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc}, &\hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
186     atexit(apr\_terminate);
187 
188     \hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose} = 0;
189     \hyperlink{group__apr__file__io_ga34332e75afdd7ed8d280f2a09b4329ea}{format} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
190     \hyperlink{group__APACHE__CORE__DAEMON_gaf801cc3fb2a90cf95d512d76fb498c3f}{input} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
191     \hyperlink{pcregrep_8txt_acf47d950a4853a501d6b975b394de5e5}{output} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
192 
193     \hyperlink{group__apr__pools_gaa7c40921aae156b665e82b0a66991a39}{apr\_pool\_create}(&pool, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
194 
195     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc}) \{
196         shortname = apr\_filepath\_name\_get(\hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv}[0]);
197     \}
198     \textcolor{keywordflow}{else} \{
199         shortname = \textcolor{stringliteral}{"httxt2dbm"};
200     \}
201 
202     apr\_file\_open\_stderr(&errfile, pool);
203     rv = apr\_getopt\_init(&opt, pool, \hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc}, \hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv});
204 
205     \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
206         apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: apr\_getopt\_init failed."} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
207         \textcolor{keywordflow}{return} 1;
208     \}
209 
210     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc} <= 1) \{
211         \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
212         \textcolor{keywordflow}{return} 1;
213     \}
214 
215     \textcolor{keywordflow}{while} ((rv = apr\_getopt(opt, \textcolor{stringliteral}{"vf::i::o::"}, &ch, &opt\_arg)) == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
216         \textcolor{keywordflow}{switch} (ch) \{
217         \textcolor{keywordflow}{case} \textcolor{charliteral}{'v'}:
218             \textcolor{keywordflow}{if} (\hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose}) \{
219                 apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: -v can only be passed once"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} 
      \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
220                 \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
221                 \textcolor{keywordflow}{return} 1;
222             \}
223             \hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose} = 1;
224             \textcolor{keywordflow}{break};
225         \textcolor{keywordflow}{case} \textcolor{charliteral}{'f'}:
226             \textcolor{keywordflow}{if} (format) \{
227                 apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: -f can only be passed once"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} 
      \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
228                 \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
229                 \textcolor{keywordflow}{return} 1;
230             \}
231             \hyperlink{group__apr__file__io_ga34332e75afdd7ed8d280f2a09b4329ea}{format} = apr\_pstrdup(pool, opt\_arg);
232             \textcolor{keywordflow}{break};
233         \textcolor{keywordflow}{case} \textcolor{charliteral}{'i'}:
234             \textcolor{keywordflow}{if} (input) \{
235                 apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: -i can only be passed once"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} 
      \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
236                 \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
237                 \textcolor{keywordflow}{return} 1;
238             \}
239             \hyperlink{group__APACHE__CORE__DAEMON_gaf801cc3fb2a90cf95d512d76fb498c3f}{input} = apr\_pstrdup(pool, opt\_arg);
240             \textcolor{keywordflow}{break};
241         \textcolor{keywordflow}{case} \textcolor{charliteral}{'o'}:
242             \textcolor{keywordflow}{if} (output) \{
243                 apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: -o can only be passed once"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} 
      \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
244                 \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
245                 \textcolor{keywordflow}{return} 1;
246             \}
247             \hyperlink{pcregrep_8txt_acf47d950a4853a501d6b975b394de5e5}{output} = apr\_pstrdup(pool, opt\_arg);
248             \textcolor{keywordflow}{break};
249         \}
250     \}
251 
252     \textcolor{keywordflow}{if} (rv != \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF}) \{
253         apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: Parsing Arguments Failed"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
254         \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
255         \textcolor{keywordflow}{return} 1;
256     \}
257 
258     \textcolor{keywordflow}{if} (!input) \{
259         apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: No input file specified."} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
260         \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
261         \textcolor{keywordflow}{return} 1;
262     \}
263 
264     \textcolor{keywordflow}{if} (!output) \{
265         apr\_file\_printf(errfile, \textcolor{stringliteral}{"Error: No output DBM specified."} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
266         \hyperlink{pcre_8txt_aa9cd2818d74f0439394d545925927823}{usage}();
267         \textcolor{keywordflow}{return} 1;
268     \}
269 
270     \textcolor{keywordflow}{if} (!format) \{
271         \hyperlink{group__apr__file__io_ga34332e75afdd7ed8d280f2a09b4329ea}{format} = \textcolor{stringliteral}{"default"};
272     \}
273 
274     \textcolor{keywordflow}{if} (\hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose}) \{
275         apr\_file\_printf(errfile, \textcolor{stringliteral}{"DBM Format: %s"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL}, format);
276     \}
277 
278     \textcolor{keywordflow}{if} (!strcmp(input, \textcolor{stringliteral}{"-"})) \{
279         rv = apr\_file\_open\_stdin(&infile, pool);
280     \}
281     \textcolor{keywordflow}{else} \{
282         rv = apr\_file\_open(&infile, input, \hyperlink{group__apr__file__open__flags_ga0021db78d799d1c8825b701c7efee483}{APR\_READ}|\hyperlink{group__apr__file__open__flags_ga6edc818199e8b90e3dabf97c42a27158}{APR\_BUFFERED},
283                            \hyperlink{group__apr__file__permissions_ga8552adb50d545d5fc7faeabb4f4a388f}{APR\_OS\_DEFAULT}, pool);
284     \}
285 
286     \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
287         apr\_file\_printf(errfile,
288                         \textcolor{stringliteral}{"Error: Cannot open input file '%s': (%d) %pm"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL},
289                          input, rv, &rv);
290         \textcolor{keywordflow}{return} 1;
291     \}
292 
293     \textcolor{keywordflow}{if} (\hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose}) \{
294         apr\_file\_printf(errfile, \textcolor{stringliteral}{"Input File: %s"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL}, input);
295     \}
296 
297     rv = apr\_dbm\_open\_ex(&outdbm, format, output, \hyperlink{group__APR__Util__DBM_gabf461a27dab1f4cc7405e891d2ad6522}{APR\_DBM\_RWCREATE},
298                     \hyperlink{group__apr__file__permissions_ga8552adb50d545d5fc7faeabb4f4a388f}{APR\_OS\_DEFAULT}, pool);
299 
300     \textcolor{keywordflow}{if} (\hyperlink{group__APR__STATUS__IS_gacab882e24f5d6491777e8ef7763d02fb}{APR\_STATUS\_IS\_ENOTIMPL}(rv)) \{
301         apr\_file\_printf(errfile,
302                         \textcolor{stringliteral}{"Error: The requested DBM Format '%s' is not available."} 
      \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL},
303                          format);
304         \textcolor{keywordflow}{return} 1;
305     \}
306 
307     \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
308         apr\_file\_printf(errfile,
309                         \textcolor{stringliteral}{"Error: Cannot open output DBM '%s': (%d) %pm"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL},
310                          output, rv, &rv);
311         \textcolor{keywordflow}{return} 1;
312     \}
313 
314     \textcolor{keywordflow}{if} (\hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose}) \{
315         apr\_file\_printf(errfile, \textcolor{stringliteral}{"DBM File: %s"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL}, output);
316     \}
317 
318     rv = to\_dbm(outdbm, infile, pool);
319 
320     \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
321         apr\_file\_printf(errfile,
322                         \textcolor{stringliteral}{"Error: Converting to DBM: (%d) %pm"} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL},
323                          rv, &rv);
324         \textcolor{keywordflow}{return} 1;
325     \}
326 
327     apr\_dbm\_close(outdbm);
328 
329     \textcolor{keywordflow}{if} (\hyperlink{wintty_8c_ad023bbf13e60f8caee82c26f70e0f0a5}{verbose}) \{
330         apr\_file\_printf(errfile, \textcolor{stringliteral}{"Conversion Complete."} \hyperlink{httxt2dbm_8c_a4fc34b120ed3bd1120c1eb36abbcd6af}{NL});
331     \}
332 
333     \textcolor{keywordflow}{return} 0;
334 \}
\end{DoxyCode}
