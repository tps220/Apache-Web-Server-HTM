\hypertarget{h2__ngn__shed_8h}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/modules/http2/h2\+\_\+ngn\+\_\+shed.h File Reference}
\label{h2__ngn__shed_8h}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/http2/h2\+\_\+ngn\+\_\+shed.\+h@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/http2/h2\+\_\+ngn\+\_\+shed.\+h}}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} \hyperlink{h2__ngn__shed_8h_afbae935a32c267d7ac9f9643741e730a}{h2\+\_\+ngn\+\_\+shed}
\item 
typedef \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__ngn__shed_8h_a94c7aae975138184da327d3a9a15c55c}{h2\+\_\+shed\+\_\+ngn\+\_\+init}(\hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$engine, const char $\ast$id, const char $\ast$\hyperlink{pcre_8txt_a2463fbbe8b0c90b90db12195e1edaa5d}{type}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool}, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} req\+\_\+buffer\+\_\+size, \hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r}, \hyperlink{h2__mplx_8h_a0661c259e7e6e02bb650792200e3c6b3}{h2\+\_\+output\+\_\+consumed} $\ast$$\ast$pconsumed, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$$\ast$pbaton)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const char $\ast$ \hyperlink{h2__ngn__shed_8h_ada765812a034e97825703145c11f5b03}{h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id} (\hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$engine)
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{h2__ngn__shed_8h_a159f2c952b1b9eec4b79dae8f6a94364}{h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown} (\hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$engine)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__ngn__shed_8h_a38e6e88ce849aa8bb6d700e5bf2a02aa}{h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed} (\hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$engine, \hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_aef720ae5f62fa015619d00171d917416}{c}, \hyperlink{group__apr__platform_ga6938af9075cec15c88299109381aa984}{apr\+\_\+off\+\_\+t} \hyperlink{group__apr__random_ga393b167dab644f408202cbbcad070e6d}{bytes})
\item 
\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$ \hyperlink{h2__ngn__shed_8h_ab27e34aa7fb626f3b7ebebf99fabc0ea}{h2\+\_\+ngn\+\_\+shed\+\_\+create} (\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__XLATE_gabb3cd978f04c73d0b763c391e9bfde73}{pool}, \hyperlink{structconn__rec}{conn\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_aef720ae5f62fa015619d00171d917416}{c}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} default\+\_\+capactiy, \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\+\_\+size\+\_\+t} req\+\_\+buffer\+\_\+size)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__ngn__shed_8h_af9ff23e9852828fe5f3a273110c9f6c8}{h2\+\_\+ngn\+\_\+shed\+\_\+destroy} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__ngn__shed_8h_a88e30717d953a00815fa1acd60a5a74f}{h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$user\+\_\+ctx)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$ \hyperlink{h2__ngn__shed_8h_aaa422761ee11bef3236047b13d886c9c}{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed)
\item 
\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$ \hyperlink{h2__ngn__shed_8h_a65faf3cdb633ca671220547a17643917}{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed} (struct \hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$ngn)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__ngn__shed_8h_a62642a35c376dbb37bac12d78e253b24}{h2\+\_\+ngn\+\_\+shed\+\_\+abort} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__ngn__shed_8h_a5dede073dbda98e19da0bab089bbbace}{h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed, const char $\ast$ngn\+\_\+type, \hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r}, \hyperlink{h2__ngn__shed_8h_a94c7aae975138184da327d3a9a15c55c}{h2\+\_\+shed\+\_\+ngn\+\_\+init} $\ast$init\+\_\+cb)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__ngn__shed_8h_a68e79d7b6a3b3c86acc380416511786b}{h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed, \hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$pub\+\_\+ngn, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} capacity, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} want\+\_\+shutdown, \hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$$\ast$pr)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{h2__ngn__shed_8h_a109175d9466917558ff3702ea18b68a4}{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed, struct \hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$ngn, struct \hyperlink{structh2__task}{h2\+\_\+task} $\ast$task)
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{h2__ngn__shed_8h_ac223b15a49f204c91c9fa767e5af377c}{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn} (\hyperlink{structh2__ngn__shed}{h2\+\_\+ngn\+\_\+shed} $\ast$shed, struct \hyperlink{structh2__req__engine}{h2\+\_\+req\+\_\+engine} $\ast$ngn)
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed@{h2\+\_\+ngn\+\_\+shed}}
\index{h2\+\_\+ngn\+\_\+shed@{h2\+\_\+ngn\+\_\+shed}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed}{h2_ngn_shed}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf h2\+\_\+ngn\+\_\+shed} {\bf h2\+\_\+ngn\+\_\+shed}}\hypertarget{h2__ngn__shed_8h_afbae935a32c267d7ac9f9643741e730a}{}\label{h2__ngn__shed_8h_afbae935a32c267d7ac9f9643741e730a}
\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+shed\+\_\+ngn\+\_\+init@{h2\+\_\+shed\+\_\+ngn\+\_\+init}}
\index{h2\+\_\+shed\+\_\+ngn\+\_\+init@{h2\+\_\+shed\+\_\+ngn\+\_\+init}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+shed\+\_\+ngn\+\_\+init}{h2_shed_ngn_init}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf apr\+\_\+status\+\_\+t} h2\+\_\+shed\+\_\+ngn\+\_\+init({\bf h2\+\_\+req\+\_\+engine} $\ast$engine, const char $\ast$id, const char $\ast${\bf type}, {\bf apr\+\_\+pool\+\_\+t} $\ast${\bf pool}, {\bf apr\+\_\+size\+\_\+t} req\+\_\+buffer\+\_\+size, {\bf request\+\_\+rec} $\ast${\bf r}, {\bf h2\+\_\+output\+\_\+consumed} $\ast$$\ast$pconsumed, {\bf void} $\ast$$\ast$pbaton)}\hypertarget{h2__ngn__shed_8h_a94c7aae975138184da327d3a9a15c55c}{}\label{h2__ngn__shed_8h_a94c7aae975138184da327d3a9a15c55c}


\subsection{Function Documentation}
\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+abort@{h2\+\_\+ngn\+\_\+shed\+\_\+abort}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+abort@{h2\+\_\+ngn\+\_\+shed\+\_\+abort}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+abort(h2\+\_\+ngn\+\_\+shed $\ast$shed)}{h2_ngn_shed_abort(h2_ngn_shed *shed)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+ngn\+\_\+shed\+\_\+abort (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a62642a35c376dbb37bac12d78e253b24}{}\label{h2__ngn__shed_8h_a62642a35c376dbb37bac12d78e253b24}

\begin{DoxyCode}
141 \{
142     \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03394)
143                   \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): abort"}, shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id});
144     shed->\hyperlink{structh2__ngn__shed_ac42cfce26642653a9d2c6a7d1cabf740}{aborted} = 1;
145 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{h2__ngn__shed_8h_a62642a35c376dbb37bac12d78e253b24_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+create@{h2\+\_\+ngn\+\_\+shed\+\_\+create}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+create@{h2\+\_\+ngn\+\_\+shed\+\_\+create}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+create(apr\+\_\+pool\+\_\+t $\ast$pool, conn\+\_\+rec $\ast$c, int default\+\_\+capactiy, apr\+\_\+size\+\_\+t req\+\_\+buffer\+\_\+size)}{h2_ngn_shed_create(apr_pool_t *pool, conn_rec *c, int default_capactiy, apr_size_t req_buffer_size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf h2\+\_\+ngn\+\_\+shed}$\ast$ h2\+\_\+ngn\+\_\+shed\+\_\+create (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{pool, }
\item[{{\bf conn\+\_\+rec} $\ast$}]{c, }
\item[{{\bf int}}]{default\+\_\+capactiy, }
\item[{{\bf apr\+\_\+size\+\_\+t}}]{req\+\_\+buffer\+\_\+size}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_ab27e34aa7fb626f3b7ebebf99fabc0ea}{}\label{h2__ngn__shed_8h_ab27e34aa7fb626f3b7ebebf99fabc0ea}

\begin{DoxyCode}
112 \{
113     \hyperlink{structh2__ngn__shed}{h2\_ngn\_shed} *shed;
114     
115     shed = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(pool, \textcolor{keyword}{sizeof}(*shed));
116     shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c} = \hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c};
117     shed->\hyperlink{structh2__ngn__shed_a311ac8440bbee51245759028dd5ea110}{pool} = \hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool};
118     shed->\hyperlink{structh2__ngn__shed_a894b85c523bfe32849ac3022658f7966}{default\_capacity} = default\_capacity;
119     shed->\hyperlink{structh2__ngn__shed_a2458843bd55235ed2a09a56ee6ea6216}{req\_buffer\_size} = req\_buffer\_size;
120     shed->\hyperlink{structh2__ngn__shed_acd125c46e85c3a80bddffe88cdfe55cf}{ngns} = apr\_hash\_make(pool);
121     
122     \textcolor{keywordflow}{return} shed;
123 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{h2__ngn__shed_8h_ab27e34aa7fb626f3b7ebebf99fabc0ea_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+destroy@{h2\+\_\+ngn\+\_\+shed\+\_\+destroy}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+destroy@{h2\+\_\+ngn\+\_\+shed\+\_\+destroy}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+destroy(h2\+\_\+ngn\+\_\+shed $\ast$shed)}{h2_ngn_shed_destroy(h2_ngn_shed *shed)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+ngn\+\_\+shed\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_af9ff23e9852828fe5f3a273110c9f6c8}{}\label{h2__ngn__shed_8h_af9ff23e9852828fe5f3a273110c9f6c8}

\begin{DoxyCode}
388 \{
389     \hyperlink{group__APACHE__CORE__DAEMON_gace52c7d9cc135b00b6e686236c0095a7}{ap\_assert}(apr\_hash\_count(shed->\hyperlink{structh2__ngn__shed_acd125c46e85c3a80bddffe88cdfe55cf}{ngns}) == 0);
390 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_af9ff23e9852828fe5f3a273110c9f6c8_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn@{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn@{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn(h2\+\_\+ngn\+\_\+shed $\ast$shed, struct h2\+\_\+req\+\_\+engine $\ast$ngn)}{h2_ngn_shed_done_ngn(h2_ngn_shed *shed, struct h2_req_engine *ngn)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+ngn (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed, }
\item[{struct {\bf h2\+\_\+req\+\_\+engine} $\ast$}]{ngn}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_ac223b15a49f204c91c9fa767e5af377c}{}\label{h2__ngn__shed_8h_ac223b15a49f204c91c9fa767e5af377c}

\begin{DoxyCode}
342 \{
343     \textcolor{keywordflow}{if} (ngn->\hyperlink{structh2__req__engine_a101d67c6f32892e8cb93114290901372}{done}) \{
344         \textcolor{keywordflow}{return};
345     \}
346     
347     \textcolor{keywordflow}{if} (!shed->\hyperlink{structh2__ngn__shed_ac42cfce26642653a9d2c6a7d1cabf740}{aborted} && !\hyperlink{h2__ngn__shed_8c_a1cfc316b91d996cba9329dfb4579f369}{H2\_REQ\_ENTRIES\_EMPTY}(&ngn->entries)) \{
348         \hyperlink{structh2__ngn__entry}{h2\_ngn\_entry} *entry;
349         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c},
350                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): exit engine %s (%s), "}
351                       \textcolor{stringliteral}{"has still requests queued, shutdown=%d,"}
352                       \textcolor{stringliteral}{"assigned=%ld, live=%ld, finished=%ld"}, 
353                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id}, ngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type},
354                       ngn->\hyperlink{structh2__req__engine_a299d9d2ee463ed04588b9c3112a69e79}{shutdown}, 
355                       (\textcolor{keywordtype}{long})ngn->no\_assigned, (\textcolor{keywordtype}{long})ngn->no\_live,
356                       (\textcolor{keywordtype}{long})ngn->no\_finished);
357         \textcolor{keywordflow}{for} (entry = \hyperlink{h2__ngn__shed_8c_ae930812e245be15ec5ccf4c8ad5bfc0c}{H2\_REQ\_ENTRIES\_FIRST}(&ngn->entries);
358              entry != \hyperlink{h2__ngn__shed_8c_abc73a4e4f3e45e650e1aa0afba6bc763}{H2\_REQ\_ENTRIES\_SENTINEL}(&ngn->entries);
359              entry = \hyperlink{h2__ngn__shed_8c_a2f9032a5135cc45b948be0d7badea882}{H2\_NGN\_ENTRY\_NEXT}(entry)) \{
360             \hyperlink{structh2__task}{h2\_task} *task = entry->task;
361             \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c},
362                           \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): engine %s has queued task %s, "}
363                           \textcolor{stringliteral}{"frozen=%d, aborting"},
364                           shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id}, task->\hyperlink{structh2__task_ad51ebc1a6948a168b5b8c0b589e3d3cd}{id}, task->\hyperlink{structh2__task_a9b609f6afd847458e9ebe0fd1dc2a6b4}{frozen});
365             ngn\_done\_task(shed, ngn, task, 0, 1);
366             task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine} = task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
367         \}
368     \}
369     \textcolor{keywordflow}{if} (!shed->\hyperlink{structh2__ngn__shed_ac42cfce26642653a9d2c6a7d1cabf740}{aborted} && (ngn->no\_assigned > 1 || ngn->no\_live > 1)) \{
370         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c},
371                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): exit engine %s (%s), "}
372                       \textcolor{stringliteral}{"assigned=%ld, live=%ld, finished=%ld"}, 
373                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id}, ngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type},
374                       (\textcolor{keywordtype}{long})ngn->no\_assigned, (\textcolor{keywordtype}{long})ngn->no\_live,
375                       (\textcolor{keywordtype}{long})ngn->no\_finished);
376     \}
377     \textcolor{keywordflow}{else} \{
378         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c},
379                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): exit engine %s"}, 
380                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id});
381     \}
382     
383     apr\_hash\_set(shed->\hyperlink{structh2__ngn__shed_acd125c46e85c3a80bddffe88cdfe55cf}{ngns}, ngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type}, \hyperlink{group__apr__hash_ga3ba32541f2717b394000f87f38c7e12d}{APR\_HASH\_KEY\_STRING}, 
      \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
384     ngn->\hyperlink{structh2__req__engine_a101d67c6f32892e8cb93114290901372}{done} = 1;
385 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{h2__ngn__shed_8h_ac223b15a49f204c91c9fa767e5af377c_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task@{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task@{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task(h2\+\_\+ngn\+\_\+shed $\ast$shed, struct h2\+\_\+req\+\_\+engine $\ast$ngn, struct h2\+\_\+task $\ast$task)}{h2_ngn_shed_done_task(h2_ngn_shed *shed, struct h2_req_engine *ngn, struct h2_task *task)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+ngn\+\_\+shed\+\_\+done\+\_\+task (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed, }
\item[{struct {\bf h2\+\_\+req\+\_\+engine} $\ast$}]{ngn, }
\item[{struct {\bf h2\+\_\+task} $\ast$}]{task}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a109175d9466917558ff3702ea18b68a4}{}\label{h2__ngn__shed_8h_a109175d9466917558ff3702ea18b68a4}

\begin{DoxyCode}
337 \{
338     \textcolor{keywordflow}{return} ngn\_done\_task(shed, ngn, task, 1, 0);
339 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a109175d9466917558ff3702ea18b68a4_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx@{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx@{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx(h2\+\_\+ngn\+\_\+shed $\ast$shed)}{h2_ngn_shed_get_ctx(h2_ngn_shed *shed)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}$\ast$ h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+ctx (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_aaa422761ee11bef3236047b13d886c9c}{}\label{h2__ngn__shed_8h_aaa422761ee11bef3236047b13d886c9c}

\begin{DoxyCode}
131 \{
132     \textcolor{keywordflow}{return} shed->\hyperlink{structh2__ngn__shed_a1d88471a384d68e232b65ac42f105898}{user\_ctx};
133 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_aaa422761ee11bef3236047b13d886c9c_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed@{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed@{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed(struct h2\+\_\+req\+\_\+engine $\ast$ngn)}{h2_ngn_shed_get_shed(struct h2_req_engine *ngn)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf h2\+\_\+ngn\+\_\+shed}$\ast$ h2\+\_\+ngn\+\_\+shed\+\_\+get\+\_\+shed (
\begin{DoxyParamCaption}
\item[{struct {\bf h2\+\_\+req\+\_\+engine} $\ast$}]{ngn}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a65faf3cdb633ca671220547a17643917}{}\label{h2__ngn__shed_8h_a65faf3cdb633ca671220547a17643917}

\begin{DoxyCode}
136 \{
137     \textcolor{keywordflow}{return} ngn->\hyperlink{structh2__req__engine_a83b172305c7d44670cda27f2dd742a66}{shed};
138 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a65faf3cdb633ca671220547a17643917_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request@{h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request@{h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request(h2\+\_\+ngn\+\_\+shed $\ast$shed, h2\+\_\+req\+\_\+engine $\ast$pub\+\_\+ngn, int capacity, int want\+\_\+shutdown, request\+\_\+rec $\ast$$\ast$pr)}{h2_ngn_shed_pull_request(h2_ngn_shed *shed, h2_req_engine *pub_ngn, int capacity, int want_shutdown, request_rec **pr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+ngn\+\_\+shed\+\_\+pull\+\_\+request (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed, }
\item[{{\bf h2\+\_\+req\+\_\+engine} $\ast$}]{pub\+\_\+ngn, }
\item[{{\bf int}}]{capacity, }
\item[{{\bf int}}]{want\+\_\+shutdown, }
\item[{{\bf request\+\_\+rec} $\ast$$\ast$}]{pr}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a68e79d7b6a3b3c86acc380416511786b}{}\label{h2__ngn__shed_8h_a68e79d7b6a3b3c86acc380416511786b}

\begin{DoxyCode}
263 \{   
264     \hyperlink{structh2__ngn__entry}{h2\_ngn\_entry} *entry;
265     
266     \hyperlink{group__APACHE__CORE__DAEMON_gace52c7d9cc135b00b6e686236c0095a7}{ap\_assert}(ngn);
267     *pr = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
268     \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga5e4f134ae2203dd339774d9549d814db}{APLOG\_TRACE3}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03396)
269                   \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): pull task for engine %s, shutdown=%d"}, 
270                   shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->id, want\_shutdown);
271     \textcolor{keywordflow}{if} (shed->\hyperlink{structh2__ngn__shed_ac42cfce26642653a9d2c6a7d1cabf740}{aborted}) \{
272         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03397)
273                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): abort while pulling requests %s"}, 
274                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->id);
275         ngn->shutdown = 1;
276         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga9458da18e0ee46a5d37c9cdfdc43efd2}{APR\_ECONNABORTED};
277     \}
278     
279     ngn->capacity = capacity;
280     \textcolor{keywordflow}{if} (\hyperlink{h2__ngn__shed_8c_a1cfc316b91d996cba9329dfb4579f369}{H2\_REQ\_ENTRIES\_EMPTY}(&ngn->entries)) \{
281         \textcolor{keywordflow}{if} (want\_shutdown) \{
282             \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c},
283                           \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): emtpy queue, shutdown engine %s"}, 
284                           shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, ngn->id);
285             ngn->shutdown = 1;
286         \}
287         \textcolor{keywordflow}{return} ngn->shutdown? \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF} : \hyperlink{group__APR__Error_ga0b2a5ebb819de5ce93d326939b586578}{APR\_EAGAIN};
288     \}
289     
290     \textcolor{keywordflow}{if} ((entry = pop\_detached(ngn))) \{
291         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gadfcef90537539cf2b7d35cfbbbafeb93}{APLOG\_DEBUG}, 0, entry->task->c, 
      \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03398)
292                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): pulled request %s for engine %s"}, 
293                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, entry->task->id, ngn->id);
294         ngn->no\_live++;
295         *pr = entry->r;
296         entry->task->assigned = ngn;
297         \textcolor{comment}{/* task will now run in ngn's own thread. Modules like lua}
298 \textcolor{comment}{         * seem to require the correct thread set in the conn\_rec.}
299 \textcolor{comment}{         * See PR 59542. */}
300         \textcolor{keywordflow}{if} (entry->task->c && ngn->c) \{
301             entry->task->c->current\_thread = ngn->c->current\_thread;
302         \}
303         \textcolor{keywordflow}{if} (entry->task->engine == ngn) \{
304             \textcolor{comment}{/* If an engine pushes its own base task, and then pulls}
305 \textcolor{comment}{             * it back to itself again, it needs to be thawed.}
306 \textcolor{comment}{             */}
307             \hyperlink{h2__task_8c_ac271735ace7ded26cc2bc5abd4cdb5f7}{h2\_task\_thaw}(entry->task);
308         \}
309         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
310     \}
311     
312     \textcolor{keywordflow}{if} (1) \{
313         \hyperlink{structh2__ngn__entry}{h2\_ngn\_entry} *entry = \hyperlink{h2__ngn__shed_8c_ae930812e245be15ec5ccf4c8ad5bfc0c}{H2\_REQ\_ENTRIES\_FIRST}(&ngn->entries);
314         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gadfcef90537539cf2b7d35cfbbbafeb93}{APLOG\_DEBUG}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03399)
315                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): pull task, nothing, first task %s"}, 
316                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, entry->task->id);
317     \}
318     \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga0b2a5ebb819de5ce93d326939b586578}{APR\_EAGAIN};
319 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=325pt]{h2__ngn__shed_8h_a68e79d7b6a3b3c86acc380416511786b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a68e79d7b6a3b3c86acc380416511786b_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request@{h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request@{h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request(h2\+\_\+ngn\+\_\+shed $\ast$shed, const char $\ast$ngn\+\_\+type, request\+\_\+rec $\ast$r, h2\+\_\+shed\+\_\+ngn\+\_\+init $\ast$init\+\_\+cb)}{h2_ngn_shed_push_request(h2_ngn_shed *shed, const char *ngn_type, request_rec *r, h2_shed_ngn_init *init_cb)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} h2\+\_\+ngn\+\_\+shed\+\_\+push\+\_\+request (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed, }
\item[{const char $\ast$}]{ngn\+\_\+type, }
\item[{{\bf request\+\_\+rec} $\ast$}]{r, }
\item[{{\bf h2\+\_\+shed\+\_\+ngn\+\_\+init} $\ast$}]{init\+\_\+cb}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a5dede073dbda98e19da0bab089bbbace}{}\label{h2__ngn__shed_8h_a5dede073dbda98e19da0bab089bbbace}

\begin{DoxyCode}
161 \{
162     \hyperlink{structh2__req__engine}{h2\_req\_engine} *ngn;
163     \hyperlink{structh2__task}{h2\_task} *task = \hyperlink{h2__ctx_8c_ac49063adb1fe588e8c4225660712e85b}{h2\_ctx\_rget\_task}(r);
164 
165     \hyperlink{group__APACHE__CORE__DAEMON_gace52c7d9cc135b00b6e686236c0095a7}{ap\_assert}(task);
166     \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, shed->
      \hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c},
167                   \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): PUSHing request (task=%s)"}, shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, 
168                   task->\hyperlink{structh2__task_ad51ebc1a6948a168b5b8c0b589e3d3cd}{id});
169     \textcolor{keywordflow}{if} (task->\hyperlink{structh2__task_a2b29ed50bdcfa0549416978b8048cb78}{request}->\hyperlink{structh2__request_acb093d2b49d76dc171a6796b59ba7fdb}{serialize}) \{
170         \textcolor{comment}{/* Max compatibility, deny processing of this */}
171         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF};
172     \}
173     
174     \textcolor{keywordflow}{if} (task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned}) \{
175         --task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned}->no\_assigned;
176         --task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned}->no\_live;
177         task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
178     \}
179     
180     \textcolor{keywordflow}{if} (task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine}) \{
181         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, task->
      \hyperlink{structh2__task_a31da3014d93bc040c945182b35b2e573}{c}, 
182                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): push task(%s) hosting engine %s "} 
183                       \textcolor{stringliteral}{"already with %d tasks"}, 
184                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, task->\hyperlink{structh2__task_ad51ebc1a6948a168b5b8c0b589e3d3cd}{id}, task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine}->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id},
185                       task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine}->no\_assigned);
186         task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned} = task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine};
187         ngn\_add\_task(task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine}, task, r);
188         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
189     \}
190     
191     ngn = apr\_hash\_get(shed->\hyperlink{structh2__ngn__shed_acd125c46e85c3a80bddffe88cdfe55cf}{ngns}, ngn\_type, \hyperlink{group__apr__hash_ga3ba32541f2717b394000f87f38c7e12d}{APR\_HASH\_KEY\_STRING});
192     \textcolor{keywordflow}{if} (ngn && !ngn->\hyperlink{structh2__req__engine_a299d9d2ee463ed04588b9c3112a69e79}{shutdown}) \{
193         \textcolor{comment}{/* this task will be processed in another thread,}
194 \textcolor{comment}{         * freeze any I/O for the time being. */}
195         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gab08ab6d0e9ab24707ce7baeaecf1f551}{APLOG\_TRACE1}, 0, task->
      \hyperlink{structh2__task_a31da3014d93bc040c945182b35b2e573}{c},
196                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): pushing request %s to %s"}, 
197                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, task->\hyperlink{structh2__task_ad51ebc1a6948a168b5b8c0b589e3d3cd}{id}, ngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id});
198         \textcolor{keywordflow}{if} (!\hyperlink{h2__task_8c_a9d193d0549613d13db960961d371bbdf}{h2\_task\_has\_thawed}(task)) \{
199             \hyperlink{h2__task_8c_a4226c76b03850608adeebbbb3085ed97}{h2\_task\_freeze}(task);
200         \}
201         ngn\_add\_task(ngn, task, r);
202         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
203     \}
204     
205     \textcolor{comment}{/* no existing engine or being shut down, start a new one */}
206     \textcolor{keywordflow}{if} (einit) \{
207         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
208         \hyperlink{structapr__pool__t}{apr\_pool\_t} *\hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool} = task->\hyperlink{structh2__task_a49fad74f9497dd0ede7236b13a59f228}{pool};
209         \hyperlink{structh2__req__engine}{h2\_req\_engine} *newngn;
210         
211         newngn = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(pool, \textcolor{keyword}{sizeof}(*ngn));
212         newngn->\hyperlink{structh2__req__engine_a9df60573028fc93ee3802ce879aa2d17}{pool} = \hyperlink{group__APACHE__CORE__MUTEX_ga8fea43b485988aa6df5dced9dddbe733}{pool};
213         newngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id}   = apr\_psprintf(pool, \textcolor{stringliteral}{"ngn-%s"}, task->\hyperlink{structh2__task_ad51ebc1a6948a168b5b8c0b589e3d3cd}{id});
214         newngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type} = apr\_pstrdup(pool, ngn\_type);
215         newngn->\hyperlink{structh2__req__engine_a13758af1a2bbf5551ce2b9c9072b623b}{c}    = task->\hyperlink{structh2__task_a31da3014d93bc040c945182b35b2e573}{c};
216         newngn->\hyperlink{structh2__req__engine_a83b172305c7d44670cda27f2dd742a66}{shed} = shed;
217         newngn->capacity = shed->\hyperlink{structh2__ngn__shed_a894b85c523bfe32849ac3022658f7966}{default\_capacity};
218         newngn->no\_assigned = 1;
219         newngn->no\_live = 1;
220         \hyperlink{group__apr__ring_ga245e1a73b162a4a68ebd54c84683729d}{APR\_RING\_INIT}(&newngn->entries, \hyperlink{structh2__ngn__entry}{h2\_ngn\_entry}, link);
221         
222         status = einit(newngn, newngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id}, newngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type}, newngn->\hyperlink{structh2__req__engine_a9df60573028fc93ee3802ce879aa2d17}{pool},
223                        shed->\hyperlink{structh2__ngn__shed_a2458843bd55235ed2a09a56ee6ea6216}{req\_buffer\_size}, r,
224                        &newngn->out\_consumed, &newngn->out\_consumed\_ctx);
225         
226         \hyperlink{group__APACHE__CORE__LOG_ga60ef6919b8e1b691b0c1ac4d67c9449f}{ap\_log\_cerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_gadfcef90537539cf2b7d35cfbbbafeb93}{APLOG\_DEBUG}, status, task->
      \hyperlink{structh2__task_a31da3014d93bc040c945182b35b2e573}{c}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(03395)
227                       \textcolor{stringliteral}{"h2\_ngn\_shed(%ld): create engine %s (%s)"}, 
228                       shed->\hyperlink{structh2__ngn__shed_a5d700a43549875730221f09162cb2a25}{c}->\hyperlink{structconn__rec_af90d018c333fca6f3ef0f29375b86dc1}{id}, newngn->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id}, newngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type});
229         \textcolor{keywordflow}{if} (status == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
230             newngn->\hyperlink{structh2__req__engine_ad4cb93af13328ad6a87f083545d1e990}{task} = task;
231             task->\hyperlink{structh2__task_a79899299fec2d024b6d30c63af12daf9}{engine} = newngn;
232             task->\hyperlink{structh2__task_afc8a45828ada4b6a8da5cf66bee1dffd}{assigned} = newngn;
233             apr\_hash\_set(shed->\hyperlink{structh2__ngn__shed_acd125c46e85c3a80bddffe88cdfe55cf}{ngns}, newngn->\hyperlink{structh2__req__engine_aff1ecf309446554dfc0d1f5a83a3906c}{type}, \hyperlink{group__apr__hash_ga3ba32541f2717b394000f87f38c7e12d}{APR\_HASH\_KEY\_STRING}, newngn);
234         \}
235         \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status};
236     \}
237     \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF};
238 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a5dede073dbda98e19da0bab089bbbace_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a5dede073dbda98e19da0bab089bbbace_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx@{h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx}}
\index{h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx@{h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx(h2\+\_\+ngn\+\_\+shed $\ast$shed, void $\ast$user\+\_\+ctx)}{h2_ngn_shed_set_ctx(h2_ngn_shed *shed, void *user_ctx)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+ngn\+\_\+shed\+\_\+set\+\_\+ctx (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+ngn\+\_\+shed} $\ast$}]{shed, }
\item[{{\bf void} $\ast$}]{user\+\_\+ctx}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a88e30717d953a00815fa1acd60a5a74f}{}\label{h2__ngn__shed_8h_a88e30717d953a00815fa1acd60a5a74f}

\begin{DoxyCode}
126 \{
127     shed->\hyperlink{structh2__ngn__shed_a1d88471a384d68e232b65ac42f105898}{user\_ctx} = user\_ctx;
128 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{h2__ngn__shed_8h_a88e30717d953a00815fa1acd60a5a74f_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id@{h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id}}
\index{h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id@{h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id(h2\+\_\+req\+\_\+engine $\ast$engine)}{h2_req_engine_get_id(h2_req_engine *engine)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ h2\+\_\+req\+\_\+engine\+\_\+get\+\_\+id (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+req\+\_\+engine} $\ast$}]{engine}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_ada765812a034e97825703145c11f5b03}{}\label{h2__ngn__shed_8h_ada765812a034e97825703145c11f5b03}

\begin{DoxyCode}
92 \{
93     \textcolor{keywordflow}{return} engine->\hyperlink{structh2__req__engine_a00b19b07dd301e0e3d0b4970070a4b3c}{id};
94 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=325pt]{h2__ngn__shed_8h_ada765812a034e97825703145c11f5b03_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown@{h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown}}
\index{h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown@{h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown(h2\+\_\+req\+\_\+engine $\ast$engine)}{h2_req_engine_is_shutdown(h2_req_engine *engine)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} h2\+\_\+req\+\_\+engine\+\_\+is\+\_\+shutdown (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+req\+\_\+engine} $\ast$}]{engine}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a159f2c952b1b9eec4b79dae8f6a94364}{}\label{h2__ngn__shed_8h_a159f2c952b1b9eec4b79dae8f6a94364}

\begin{DoxyCode}
97 \{
98     \textcolor{keywordflow}{return} engine->\hyperlink{structh2__req__engine_a299d9d2ee463ed04588b9c3112a69e79}{shutdown};
99 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a159f2c952b1b9eec4b79dae8f6a94364_icgraph}
\end{center}
\end{figure}


\index{h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}!h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed@{h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed}}
\index{h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed@{h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed}!h2\+\_\+ngn\+\_\+shed.\+h@{h2\+\_\+ngn\+\_\+shed.\+h}}
\subsubsection[{\texorpdfstring{h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed(h2\+\_\+req\+\_\+engine $\ast$engine, conn\+\_\+rec $\ast$c, apr\+\_\+off\+\_\+t bytes)}{h2_req_engine_out_consumed(h2_req_engine *engine, conn_rec *c, apr_off_t bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} h2\+\_\+req\+\_\+engine\+\_\+out\+\_\+consumed (
\begin{DoxyParamCaption}
\item[{{\bf h2\+\_\+req\+\_\+engine} $\ast$}]{engine, }
\item[{{\bf conn\+\_\+rec} $\ast$}]{c, }
\item[{{\bf apr\+\_\+off\+\_\+t}}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{h2__ngn__shed_8h_a38e6e88ce849aa8bb6d700e5bf2a02aa}{}\label{h2__ngn__shed_8h_a38e6e88ce849aa8bb6d700e5bf2a02aa}

\begin{DoxyCode}
103 \{
104     \textcolor{keywordflow}{if} (engine->out\_consumed) \{
105         engine->out\_consumed(engine->out\_consumed\_ctx, c, \hyperlink{group__APACHE__CORE__HTTPD_ga393b167dab644f408202cbbcad070e6d}{bytes});
106     \}
107 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{h2__ngn__shed_8h_a38e6e88ce849aa8bb6d700e5bf2a02aa_icgraph}
\end{center}
\end{figure}


