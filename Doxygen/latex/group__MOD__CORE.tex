\hypertarget{group__MOD__CORE}{}\section{mod\+\_\+core}
\label{group__MOD__CORE}\index{mod\+\_\+core@{mod\+\_\+core}}
Collaboration diagram for mod\+\_\+core\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{group__MOD__CORE}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{group__MOD__CORE_gadd1247f7f25a314f11e5d22911a5bda5}{ap\+\_\+http\+\_\+filter} (\hyperlink{structap__filter__t}{ap\+\_\+filter\+\_\+t} $\ast$\hyperlink{pcregrep_8txt_a588c778c1c1509e472f22dc36efb005e}{f}, \hyperlink{structapr__bucket__brigade}{apr\+\_\+bucket\+\_\+brigade} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga11dc1bdeac74315dbed17465c98879e9}{b}, \hyperlink{util__filter_8h_ab570898d09fbbe5b6d838e28b90134e0}{ap\+\_\+input\+\_\+mode\+\_\+t} \hyperlink{pcregrep_8txt_ad194431669b7d1f96d2dacfb7be21261}{mode}, \hyperlink{group__APR__Util__Bucket__Brigades_ga756973fb6392bd1026c3d96b4519776d}{apr\+\_\+read\+\_\+type\+\_\+e} \hyperlink{pcretest_8txt_aebde0006968e3c574305c604c927277a}{block}, \hyperlink{group__apr__platform_ga6938af9075cec15c88299109381aa984}{apr\+\_\+off\+\_\+t} \hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{group__MOD__CORE_ga04176f8fb630b640c3f69d670996ffa0}{ap\+\_\+http\+\_\+chunk\+\_\+filter} (\hyperlink{structap__filter__t}{ap\+\_\+filter\+\_\+t} $\ast$\hyperlink{pcregrep_8txt_a588c778c1c1509e472f22dc36efb005e}{f}, \hyperlink{structapr__bucket__brigade}{apr\+\_\+bucket\+\_\+brigade} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga11dc1bdeac74315dbed17465c98879e9}{b})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{group__MOD__CORE_gaf839ae89e49affbb98a7e7327fc81d37}{ap\+\_\+http\+\_\+outerror\+\_\+filter} (\hyperlink{structap__filter__t}{ap\+\_\+filter\+\_\+t} $\ast$\hyperlink{pcregrep_8txt_a588c778c1c1509e472f22dc36efb005e}{f}, \hyperlink{structapr__bucket__brigade}{apr\+\_\+bucket\+\_\+brigade} $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_ga11dc1bdeac74315dbed17465c98879e9}{b})
\item 
char $\ast$ \hyperlink{group__MOD__CORE_gab66afd11fec3fb71fbfed031405c85ab}{ap\+\_\+response\+\_\+code\+\_\+string} (\hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} error\+\_\+index)
\item 
\hyperlink{group__MOD__CORE_ga58415037dad15390c47ced00db642f1d}{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) ap\+\_\+basic\+\_\+http\+\_\+header(\hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r}
\item 
\hyperlink{group__MOD__CORE_ga08131eb63e0f403de9ebc2023acda159}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int}) ap\+\_\+send\+\_\+http\+\_\+trace(\hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r})
\item 
\hyperlink{group__MOD__CORE_gab8d8f3d6912270098901ff1a41740f88}{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int}) ap\+\_\+send\+\_\+http\+\_\+options(\hyperlink{structrequest__rec}{request\+\_\+rec} $\ast$\hyperlink{pcregrep_8txt_a2e9e9438b26c0bb4425367a7e4f75eb3}{r})
\item 
\hyperlink{group__MOD__CORE_ga67c82c46d8e12b9b3ccf7c96c288f207}{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}) ap\+\_\+init\+\_\+rng(\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{structap__filter__rec__t}{ap\+\_\+filter\+\_\+rec\+\_\+t} $\ast$ \hyperlink{group__MOD__CORE_gaeb746d5b6cdbaa812be4a7f25430cc02}{ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{structap__filter__rec__t}{ap\+\_\+filter\+\_\+rec\+\_\+t} $\ast$ \hyperlink{group__MOD__CORE_gaa26a8ba27d83d5164e081376e7194a6b}{ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{structap__filter__rec__t}{ap\+\_\+filter\+\_\+rec\+\_\+t} $\ast$ \hyperlink{group__MOD__CORE_ga3b05beb1e35eee549854391adb4cb208}{ap\+\_\+chunk\+\_\+filter\+\_\+handle}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{structap__filter__rec__t}{ap\+\_\+filter\+\_\+rec\+\_\+t} $\ast$ \hyperlink{group__MOD__CORE_ga02a4c6ebf534dacd08a261efad19617f}{ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} \hyperlink{structap__filter__rec__t}{ap\+\_\+filter\+\_\+rec\+\_\+t} $\ast$ \hyperlink{group__MOD__CORE_ga7c86a5a40f67a4667c007899293a08d7}{ap\+\_\+byterange\+\_\+filter\+\_\+handle}
\item 
\hyperlink{structapr__bucket__brigade}{apr\+\_\+bucket\+\_\+brigade} $\ast$ \hyperlink{group__MOD__CORE_ga0b0eadb381dbe958da483f3d9fc9521a}{bb}
\item 
\hyperlink{ap__config_8h_a0bb4c3adf74510a0dcdad5b125725fe0}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} const char $\ast$ \hyperlink{group__MOD__CORE_gab5961ea801f827be5ef4dd64da4bfbc3}{ap\+\_\+multipart\+\_\+boundary}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Function Documentation}
\index{mod\+\_\+core@{mod\+\_\+core}!A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+RE}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+R\+E(void) ap\+\_\+init\+\_\+rng(apr\+\_\+pool\+\_\+t $\ast$p)}{AP_CORE_DECLARE(void) ap_init_rng(apr_pool_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_ga67c82c46d8e12b9b3ccf7c96c288f207}{}\label{group__MOD__CORE_ga67c82c46d8e12b9b3ccf7c96c288f207}
This is the protocol module driver. This calls all of the pre-\/connection and connection hooks for all protocol modules. 
\begin{DoxyParams}{Parameters}
{\em c} & The connection on which the request is read \\
\hline
{\em csd} & The mechanism on which this connection is to be read. Most times this will be a socket, but it is up to the module that accepts the request to determine the exact type.\\
\hline
\end{DoxyParams}
Flushes all remain data in the client send buffer 
\begin{DoxyParams}{Parameters}
{\em c} & The connection to flush \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
calls ap\+\_\+shutdown\+\_\+conn(c, 1)
\end{DoxyRemark}
parse\+\_\+uri\+: break apart the uri \begin{DoxyWarning}{Warning}
Side Effects\+: \begin{DoxyItemize}
\item sets r-\/$>$args to rest after \textquotesingle{}?\textquotesingle{} (or N\+U\+LL if no \textquotesingle{}?\textquotesingle{}) \item sets r-\/$>$uri to request uri (without r-\/$>$args part) \item sets r-\/$>$hostname (if not set already) from request (scheme\+://host\+:port) \end{DoxyItemize}

\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em uri} & The uri to break apart \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
216 \{
217     \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc};
218     ap\_update\_vhost\_given\_ip(\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c});
219 
220     rc = ap\_run\_pre\_connection(\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c}, \hyperlink{group__APACHE__CORE__CONNECTION_ga37491385bd0907d7a64ed8a3ec309aaa}{csd});
221     \textcolor{keywordflow}{if} (rc != \hyperlink{group__APACHE__CORE__DAEMON_gaba51915c87d64af47fb1cc59348961c9}{OK} && rc != \hyperlink{group__APACHE__CORE__DAEMON_gabe6b865c045f3e7c6892ef4f15ff5779}{DONE}) \{
222         \hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c}->\hyperlink{structconn__rec_aead9e56515e09e4f4b32a543e988e123}{aborted} = 1;
223     \}
224 
225     \textcolor{keywordflow}{if} (!\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c}->\hyperlink{structconn__rec_aead9e56515e09e4f4b32a543e988e123}{aborted}) \{
226         ap\_run\_process\_connection(\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c});
227     \}
228 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{group__MOD__CORE_ga67c82c46d8e12b9b3ccf7c96c288f207_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{group__MOD__CORE_ga67c82c46d8e12b9b3ccf7c96c288f207_icgraph}
\end{center}
\end{figure}


\index{mod\+\_\+core@{mod\+\_\+core}!A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E(void) ap\+\_\+basic\+\_\+http\+\_\+header(request\+\_\+rec $\ast$r}{AP_DECLARE(void) ap_basic_http_header(request_rec *r}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_ga58415037dad15390c47ced00db642f1d}{}\label{group__MOD__CORE_ga58415037dad15390c47ced00db642f1d}
Setup all of the defaults for the listener list

Get a pointer to a match from regex memory N\+O\+TE\+: this relies on the match pattern from the last call to ap\+\_\+rxplus\+\_\+exec still being valid (i.\+e. not freed or out-\/of-\/scope) 
\begin{DoxyParams}{Parameters}
{\em rx} & The regexp \\
\hline
{\em n} & The match number to retrieve (must be between 0 and nmatch) \\
\hline
{\em len} & Returns the length of the match. \\
\hline
{\em match} & Returns the match pattern\\
\hline
\end{DoxyParams}
Accessor to set module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em p} & A pool \\
\hline
{\em l} & The \hyperlink{structap__logconf}{ap\+\_\+logconf} struct to modify. \\
\hline
{\em index} & The module\+\_\+index of the module to set the loglevel for. \\
\hline
{\em level} & The new log level\\
\hline
\end{DoxyParams}
Set all module-\/specific loglevels to val 
\begin{DoxyParams}{Parameters}
{\em l} & The log config for which to set the loglevels. \\
\hline
{\em val} & the value to set all loglevels to\\
\hline
\end{DoxyParams}
Remove a module from the server. There are some caveats\+: when the module is removed, its slot is lost so all the current per-\/dir and per-\/server configurations are invalid. So we should only ever call this function when you are invalidating almost all our current data. I.\+e. when doing a restart. 
\begin{DoxyParams}{Parameters}
{\em m} & the module structure of the module to remove\\
\hline
\end{DoxyParams}
Remove a module fromthe chained modules list and the list of loaded modules 
\begin{DoxyParams}{Parameters}
{\em mod} & the module structure of the module to remove\\
\hline
\end{DoxyParams}
Run a single module\textquotesingle{}s two create\+\_\+config hooks 
\begin{DoxyParams}{Parameters}
{\em p} & the pool to allocate from \\
\hline
{\em s} & The server to configure for. \\
\hline
{\em m} & The module to configure\\
\hline
\end{DoxyParams}
Show the preloaded configuration directives, the help string explaining the directive arguments, in what module they are handled, and in what parts of the configuration they are allowed. Used for httpd -\/h.

Show the preloaded module names. Used for httpd -\/l.

Run all rewrite args hooks for loaded modules 
\begin{DoxyParams}{Parameters}
{\em process} & The process currently running the server\\
\hline
\end{DoxyParams}
Run the register hooks function for a specified module 
\begin{DoxyParams}{Parameters}
{\em m} & The module to run the register hooks function fo \\
\hline
{\em p} & The pool valid for the lifetime of the module\\
\hline
\end{DoxyParams}
Setup all virtual hosts 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em main\+\_\+server} & The head of the \hyperlink{structserver__rec}{server\+\_\+rec} list\\
\hline
\end{DoxyParams}
Reserve some modules slots for modules loaded by other means than E\+X\+E\+C\+\_\+\+O\+N\+\_\+\+R\+E\+AD directives. Relevant modules should call this in the pre\+\_\+config stage. 
\begin{DoxyParams}{Parameters}
{\em count} & The number of slots to reserve.\\
\hline
\end{DoxyParams}
Reserve some modules slots for modules loaded by a specific non-\/\+E\+X\+E\+C\+\_\+\+O\+N\+\_\+\+R\+E\+AD config directive. This counts how often the given directive is used in the config and calls ap\+\_\+reserve\+\_\+module\+\_\+slots() accordingly. 
\begin{DoxyParams}{Parameters}
{\em directive} & The name of the directive\\
\hline
\end{DoxyParams}
Merge old \hyperlink{structap__logconf}{ap\+\_\+logconf} into new \hyperlink{structap__logconf}{ap\+\_\+logconf}. old and new must have the same life time. 
\begin{DoxyParams}{Parameters}
{\em old\+\_\+conf} & The \hyperlink{structap__logconf}{ap\+\_\+logconf} to merge from \\
\hline
{\em new\+\_\+conf} & The \hyperlink{structap__logconf}{ap\+\_\+logconf} to merge into\\
\hline
\end{DoxyParams}
Accessor to set core\+\_\+module\textquotesingle{}s specific data. Equivalent to \hyperlink{group__APACHE__CORE__CONFIG_ga96c3eadc9e6ab6756d05bdcc068a8a10}{ap\+\_\+set\+\_\+module\+\_\+config(cv, \&core\+\_\+module, val)} but more efficient. 
\begin{DoxyParams}{Parameters}
{\em cv} & The vector in which the modules configuration is stored. usually r-\/$>$per\+\_\+dir\+\_\+config or s-\/$>$module\+\_\+config \\
\hline
{\em val} & The module-\/specific data to set\\
\hline
\end{DoxyParams}
Register external errorlog handler 
\begin{DoxyParams}{Parameters}
{\em p} & config pool to use \\
\hline
{\em tag} & the new format specifier (i.\+e. the letter after the \%) \\
\hline
{\em handler} & the handler function \\
\hline
{\em flags} & flags (reserved, set to 0)\\
\hline
\end{DoxyParams}
Convert stderr to the error log 
\begin{DoxyParams}{Parameters}
{\em s} & The current server\\
\hline
\end{DoxyParams}
Log the command line used to start the server. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for logging \\
\hline
{\em s} & The \hyperlink{structserver__rec}{server\+\_\+rec} whose process\textquotesingle{}s command line we want to log. The command line is logged to that server\textquotesingle{}s error log.\\
\hline
\end{DoxyParams}
Log common (various) M\+PM shared data at startup. 
\begin{DoxyParams}{Parameters}
{\em s} & The \hyperlink{structserver__rec}{server\+\_\+rec} of the error log we want to log to. Misc commonly logged data is logged to that server\textquotesingle{}s error log.\\
\hline
\end{DoxyParams}
Log the current pid of the parent process 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em fname} & The name of the file to log to. If the filename is not absolute then it is assumed to be relative to Server\+Root.\\
\hline
\end{DoxyParams}
Remove the pidfile. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em fname} & The name of the pid file to remove. If the filename is not absolute then it is assumed to be relative to Server\+Root.\\
\hline
\end{DoxyParams}
Close the piped log and kill the logging process 
\begin{DoxyParams}{Parameters}
{\em pl} & The piped log structure\\
\hline
\end{DoxyParams}
Optimized version of ap\+\_\+get\+\_\+mime\+\_\+headers() that requires a temporary brigade to work with 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em bb} & temp brigade\\
\hline
\end{DoxyParams}
Called at completion of sending the response. It sends the terminating protocol information. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Send error back to client. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em recursive\+\_\+error} & last arg indicates error status in case we get an error in the process of trying to deal with an Error\+Document to handle some other error. In that case, we print the default report for the first thing that went wrong, and more briefly report on the problem with the Error\+Document.\\
\hline
\end{DoxyParams}
Set the content length for this request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em length} & The new content length\\
\hline
\end{DoxyParams}
Precompile metadata structures used by ap\+\_\+make\+\_\+content\+\_\+type() 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to use for allocations\\
\hline
\end{DoxyParams}
Set the E-\/tag outgoing header 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Set the last modified time for the file being sent 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Initialize the method\+\_\+registry and allocate memory for it.


\begin{DoxyParams}{Parameters}
{\em p} & Pool to allocate memory for the registry from.\\
\hline
\end{DoxyParams}
Copy a method list


\begin{DoxyParams}{Parameters}
{\em dest} & List to copy to \\
\hline
{\em src} & List to copy from\\
\hline
\end{DoxyParams}
Add an H\+T\+TP method name to an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure if it isn\textquotesingle{}t already listed.


\begin{DoxyParams}{Parameters}
{\em method} & String containing the name of the method to check. \\
\hline
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Remove an H\+T\+TP method name from an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure.


\begin{DoxyParams}{Parameters}
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
{\em method} & String containing the name of the method to remove. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Reset a method list to be completely empty.


\begin{DoxyParams}{Parameters}
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Set the content type for this request (r-\/$>$\hyperlink{structcontent__type}{content\+\_\+type}). 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em ct} & The new content type \\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{Warning}
This function must be called to set r-\/$>$\hyperlink{structcontent__type}{content\+\_\+type} in order for the Add\+Output\+Filter\+By\+Type directive to work correctly.
\end{DoxyWarning}
Set the Accept-\/\+Ranges header for this response 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Setup the output headers so that the client knows how to authenticate itself the next time, if an authentication request failed. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000002}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+note\+\_\+auth\+\_\+failure
\end{DoxySeeAlso}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000003}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+note\+\_\+auth\+\_\+failure
\end{DoxySeeAlso}
Sett up the protocol fields for subsidiary requests 
\begin{DoxyParams}{Parameters}
{\em rnew} & New Sub Request \\
\hline
{\em r} & current request\\
\hline
\end{DoxyParams}
A wrapup function to keep the internal accounting straight. Indicates that there is no more content coming. 
\begin{DoxyParams}{Parameters}
{\em sub\+\_\+r} & Subrequest that is now compete\\
\hline
\end{DoxyParams}
Send an interim (H\+T\+TP 1xx) response immediately. 
\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em send\+\_\+headers} & Whether to send\&clear headers in r-\/$>$headers\+\_\+out\\
\hline
\end{DoxyParams}
Redirect the current request to some other uri 
\begin{DoxyParams}{Parameters}
{\em new\+\_\+uri} & The U\+RI to replace the current request with \\
\hline
{\em r} & The current request\\
\hline
\end{DoxyParams}
This function is designed for things like actions or C\+GI scripts, when using Add\+Handler, and you want to preserve the content type across an internal redirect. 
\begin{DoxyParams}{Parameters}
{\em new\+\_\+uri} & The U\+RI to replace the current request with. \\
\hline
{\em r} & The current request\\
\hline
\end{DoxyParams}
Redirect the current request to a sub\+\_\+req, merging the pools 
\begin{DoxyParams}{Parameters}
{\em sub\+\_\+req} & A subrequest created from this request \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
the sub\+\_\+req\textquotesingle{}s pool will be merged into r\textquotesingle{}s pool, be very careful not to destroy this subrequest, it will be destroyed with the main request!
\end{DoxyNote}
Clear flag which determines when access control hooks will be run for internal requests.

Determine whether access control hooks will be run for all internal requests with U\+R\+Is distinct from that of the initial request, or only those for which different configurations apply than those which applied to the initial request. To accommodate legacy external modules which may expect access control hooks to be run for all internal requests with distinct U\+R\+Is, this is the default behaviour unless all access control hooks and authentication and authorization providers are registered with A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF. 
\begin{DoxyParams}{Parameters}
{\em ptemp} & Pool used for temporary allocations\\
\hline
\end{DoxyParams}
Function to set the r-\/$>$mtime field to the specified value if it\textquotesingle{}s later than what\textquotesingle{}s already there. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em dependency\+\_\+mtime} & Time to set the mtime to\\
\hline
\end{DoxyParams}
Add one or more methods to the list permitted to access the resource. Usually executed by the content handler before the response header is sent, but sometimes invoked at an earlier phase if a module knows it can set the list authoritatively. Note that the methods are A\+D\+D\+ED to any already permitted unless the reset flag is non-\/zero. The list is used to generate the Allow response header field when it is needed. 
\begin{DoxyParams}{Parameters}
{\em r} & The pointer to the request identifying the resource. \\
\hline
{\em reset} & Boolean flag indicating whether this list should completely replace any current settings. \\
\hline
{\em ...} & A N\+U\+L\+L-\/terminated list of strings, each identifying a method name to add. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Add one or more methods to the list permitted to access the resource. Usually executed by the content handler before the response header is sent, but sometimes invoked at an earlier phase if a module knows it can set the list authoritatively. Note that the methods are A\+D\+D\+ED to any already permitted unless the reset flag is non-\/zero. The list is used to generate the Allow response header field when it is needed. 
\begin{DoxyParams}{Parameters}
{\em r} & The pointer to the request identifying the resource. \\
\hline
{\em reset} & Boolean flag indicating whether this list should completely replace any current settings. \\
\hline
{\em ...} & A list of method identifiers, from the \char`\"{}\+M\+\_\+\char`\"{} series defined in httpd.\+h, terminated with a value of -\/1 (e.\+g., \char`\"{}\+M\+\_\+\+G\+E\+T, M\+\_\+\+P\+O\+S\+T, M\+\_\+\+O\+P\+T\+I\+O\+N\+S, -\/1\char`\"{}) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Process a top-\/level request from a client, and synchronously write the response to the client 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Kill the current request 
\begin{DoxyParams}{Parameters}
{\em type} & Why the request is dieing \\
\hline
{\em r} & The current request\\
\hline
\end{DoxyParams}
Gives modules a chance to create their request\+\_\+config entry when the request is created. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request This hook allow modules an opportunity to translate the U\+RI into an actual filename. If no modules do anything special, the server\textquotesingle{}s default rules will be followed. \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+... This hook allow modules to set the per\+\_\+dir\+\_\+config based on their own context (such as \char`\"{}$<$\+Proxy$>$\char`\"{} sections) and responds to contextless requests such as T\+R\+A\+CE that need no security or filesystem mapping. based on the filesystem. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
D\+O\+NE (or H\+T\+T\+P\+\_\+) if this contextless request was just fulfilled (such as T\+R\+A\+CE), OK if this is not a file, and D\+E\+C\+L\+I\+N\+ED if this is a file. The core map\+\_\+to\+\_\+storage (H\+O\+O\+K\+\_\+\+R\+U\+N\+\_\+\+R\+E\+A\+L\+L\+Y\+\_\+\+L\+A\+ST) will directory\+\_\+walk and file\+\_\+walk the r-\/$>$filename. This hook is used to analyze the request headers, authenticate the user, and set the user information in the request record (r-\/$>$user and r-\/$>$ap\+\_\+auth\+\_\+type). This hook is only run when \hyperlink{namespaceApache}{Apache} determines that authentication/authorization is required for this resource (as determined by the \textquotesingle{}Require\textquotesingle{} directive). It runs after the access\+\_\+checker hook, and before the auth\+\_\+checker hook. This hook should be registered with ap\+\_\+hook\+\_\+check\+\_\+authn().
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+...
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+authn Allows modules \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} perform module-\/specific fixing \hyperlink{pcre_8txt_a9d5b55a535a7d176d14b62d664b47b4d}{of} header \hyperlink{pcre_8txt_a17e2a619a5772fa0fccf743c125ea249}{fields}. This \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} invoked just before \hyperlink{README_8txt_a117db88886e3b44e72c9457ba51928bc}{any} content-\/handler 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+... This routine is called to determine and/or set the various document type information bits, like Content-\/type (via r-\/$>$\hyperlink{structcontent__type}{content\+\_\+type}), language, et cetera. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+... This hook is used to apply additional access control to this resource. It runs {\itshape before} a user is authenticated, so this hook is really to apply additional restrictions independent of a user. It also runs independent of \textquotesingle{}Require\textquotesingle{} directive usage. This hook should be registered with ap\+\_\+hook\+\_\+check\+\_\+access().
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+...
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+access This hook \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} \hyperlink{pcregrep_8txt_ac199431a7baad211fadcdb6c45bfe7c0}{used} \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} apply additional access control and/or bypass authentication for \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} \hyperlink{group__APR__Util__RL_gaa6244aacafcc4ec1d0727bdb32614b11}{resource}. It runs {\itshape before} \hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a} user \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} authenticated, but \hyperlink{group__MOD__PROXY_gabe5742ecd24263fc01da937ad820d3fa}{after} the auth\+\_\+checker hook. This hook should \hyperlink{NON-AUTOTOOLS-BUILD_8txt_ac08ce70cbd4f453457597ad15ecbebdd}{be} registered \hyperlink{group__apr__atomic_ga62bdcea60b77e638d3d88947a34aff05}{with} ap\+\_\+hook\+\_\+check\+\_\+access\+\_\+ex().
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (allow acces), D\+E\+C\+L\+I\+N\+ED (let later modules decide), or H\+T\+T\+P\+\_\+... (deny access)
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+access\+\_\+ex This hook \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} \hyperlink{pcregrep_8txt_ac199431a7baad211fadcdb6c45bfe7c0}{used} \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} check \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} see \hyperlink{util__expr__scan_8c_aa1a71763978093648dffef60b56f7447}{if} the \hyperlink{group__APR__Util__RL_gaa6244aacafcc4ec1d0727bdb32614b11}{resource} being requested \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} \hyperlink{pcretest_8txt_a4535630baf343422449d0c4d3f6d0ae7}{available} for the authenticated user (r-\/$>$user and r-\/$>$ap\+\_\+auth\+\_\+type). It runs \hyperlink{group__MOD__PROXY_gabe5742ecd24263fc01da937ad820d3fa}{after} the access\+\_\+checker and check\+\_\+user\+\_\+id \hyperlink{group__MOD__DAV_ga2f89c7cfd67d24769756d6d2df79bf5c}{hooks}. Note that \hyperlink{pcretest_8txt_ab977b64dbdb969ce031dc4281a792b3c}{it} will {\itshape only} \hyperlink{NON-AUTOTOOLS-BUILD_8txt_ac08ce70cbd4f453457597ad15ecbebdd}{be} called \hyperlink{util__expr__scan_8c_aa1a71763978093648dffef60b56f7447}{if} \hyperlink{namespaceApache}{Apache} determines that access control has been applied \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} \hyperlink{group__APR__Util__RL_gaa6244aacafcc4ec1d0727bdb32614b11}{resource} (through \hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a} \textquotesingle{}Require\textquotesingle{} \hyperlink{basic-configuration_8txt_afff511b23780162b3e88a118ec5cb4c9}{directive}). This hook should \hyperlink{NON-AUTOTOOLS-BUILD_8txt_ac08ce70cbd4f453457597ad15ecbebdd}{be} registered \hyperlink{group__apr__atomic_ga62bdcea60b77e638d3d88947a34aff05}{with} ap\+\_\+hook\+\_\+check\+\_\+authz().
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+...
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+authz Register \hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a} hook \hyperlink{pcretest_8txt_abd306f12a46ac3f6be69579bceb817d0}{function} that will apply additional access control \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} the \hyperlink{group__APACHE__CORE__CONFIG_ga4b3e87cb39cac2296c5083f27321f1f4}{current} \hyperlink{ab_8c_ae55c2591fd7f232c48d3f252f18a869a}{request}. 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em pf} & An access\+\_\+checker hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
Register a hook function that will apply additional access control and/or bypass authentication for the current request. 
\begin{DoxyParams}{Parameters}
{\em pf} & An access\+\_\+checker\+\_\+ex hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
Register a hook function that will analyze the request headers, authenticate the user, and set the user information in the request record. 
\begin{DoxyParams}{Parameters}
{\em pf} & A check\+\_\+user\+\_\+id hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
Register a hook function that determine if the resource being requested is available for the currently authenticated user. 
\begin{DoxyParams}{Parameters}
{\em pf} & An auth\+\_\+checker hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
called after the config has been read to compile the tables needed to do the run-\/time vhost lookups 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate out of \\
\hline
{\em main\+\_\+server} & The start of the virtual host list\\
\hline
\end{DoxyParams}
given an ip address only, give our best guess as to what vhost it is 
\begin{DoxyParams}{Parameters}
{\em conn} & The current connection\\
\hline
\end{DoxyParams}
ap\+\_\+update\+\_\+vhost\+\_\+given\+\_\+ip is never enough, and this is always called after the headers have been read. It may change r-\/$>$server. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Add a component to the server description and banner strings 
\begin{DoxyParams}{Parameters}
{\em pconf} & The pool to allocate the component from \\
\hline
{\em component} & The string to add\\
\hline
\end{DoxyParams}
Set context\+\_\+prefix and context\+\_\+document\+\_\+root for a request. 
\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em prefix} & the U\+RI prefix, without trailing slash \\
\hline
{\em document\+\_\+root} & the corresponding directory on disk, without trailing slash \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
If one of prefix of document\+\_\+root is N\+U\+LL, the corrsponding property will not be changed.
\end{DoxyNote}
Set per-\/request document root. This is for mass virtual hosting modules that want to provide the correct D\+O\+C\+U\+M\+E\+N\+T\+\_\+\+R\+O\+OT value to scripts. 
\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em document\+\_\+root} & the document root for the request.\\
\hline
\end{DoxyParams}
Convert all double slashes to single slashes 
\begin{DoxyParams}{Parameters}
{\em name} & The string to convert\\
\hline
\end{DoxyParams}
Remove all ./ and xx/../ substrings from a file name. Also remove any leading ../ or /../ substrings. 
\begin{DoxyParams}{Parameters}
{\em name} & the file name to parse\\
\hline
\end{DoxyParams}
Free the memory associated with a compiled regular expression 
\begin{DoxyParams}{Parameters}
{\em p} & The pool the regex was allocated from \\
\hline
{\em reg} & The regular expression to free \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function is only necessary if the regex should be cleaned up before the pool
\end{DoxyNote}
We want to downcase the type/subtype for comparison purposes but nothing else because ;parameter=foo values are case sensitive. 
\begin{DoxyParams}{Parameters}
{\em s} & The content-\/type to convert to lowercase\\
\hline
\end{DoxyParams}
convert a string to all lowercase 
\begin{DoxyParams}{Parameters}
{\em s} & The string to convert to lowercase\\
\hline
\end{DoxyParams}
convert a string to all uppercase 
\begin{DoxyParams}{Parameters}
{\em s} & The string to convert to uppercase\\
\hline
\end{DoxyParams}
Log an assertion to the error log 
\begin{DoxyParams}{Parameters}
{\em sz\+Exp} & The assertion that failed \\
\hline
{\em sz\+File} & The file the assertion is in \\
\hline
{\em n\+Line} & The line the assertion is defined on\\
\hline
\end{DoxyParams}
Generate pseudo random bytes. This is a convenience interface to apr\+\_\+random. It is cheaper but less secure than apr\+\_\+generate\+\_\+random\+\_\+bytes(). 
\begin{DoxyParams}{Parameters}
{\em buf} & where to store the bytes \\
\hline
{\em size} & number of bytes to generate \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
ap\+\_\+random\+\_\+insecure\+\_\+bytes() is thread-\/safe, it uses a mutex on threaded M\+P\+Ms.
\end{DoxyNote}
Abort with a error message signifying out of memory

Get server load params 
\begin{DoxyParams}{Parameters}
{\em ld} & struct to populate\+: -\/1 in fields means error\\
\hline
\end{DoxyParams}
Get server load averages (ala getloadavg) 
\begin{DoxyParams}{Parameters}
{\em ld} & struct to populate\+: -\/1 in fields means error\\
\hline
\end{DoxyParams}
Convert binary data into a hex string 
\begin{DoxyParams}{Parameters}
{\em src} & pointer to the data \\
\hline
{\em srclen} & length of the data \\
\hline
{\em dest} & pointer to buffer of length (2 $\ast$ srclen + 1). The resulting string will be N\+U\+L-\/terminated.\\
\hline
\end{DoxyParams}
Catch any child processes that have been spawned by the parent process which have exited. This includes processes registered as \char`\"{}other\+\_\+children\char`\"{}.


\begin{DoxyParams}{Parameters}
{\em mpm\+\_\+callback} & Callback invoked for each dead child process\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The M\+PM child processes which are relieved are those listed in the scoreboard as well as those currently registered via ap\+\_\+register\+\_\+extra\+\_\+mpm\+\_\+process().
\end{DoxyNote}
Tell ap\+\_\+reclaim\+\_\+child\+\_\+processes() and ap\+\_\+relieve\+\_\+child\+\_\+processes() about an M\+PM child process which has no entry in the scoreboard. 
\begin{DoxyParams}{Parameters}
{\em pid} & The process id of an M\+PM child process which should be reclaimed when ap\+\_\+reclaim\+\_\+child\+\_\+processes() is called. \\
\hline
{\em gen} & The generation of this M\+PM child process.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
If an extra M\+PM child process terminates prior to calling ap\+\_\+reclaim\+\_\+child\+\_\+processes(), remove it from the list of such processes by calling ap\+\_\+unregister\+\_\+extra\+\_\+mpm\+\_\+process().
\end{DoxyNote}
Run the monitor hook (once every ten calls), determine if any child process has died and, if none died, sleep one second. 
\begin{DoxyParams}{Parameters}
{\em status} & The return code if a process has died \\
\hline
{\em exitcode} & The returned exit status of the child, if a child process dies, or the signal that caused the child to die. \\
\hline
{\em ret} & The process id of the process that died \\
\hline
{\em p} & The pool to allocate out of \\
\hline
{\em s} & The \hyperlink{structserver__rec}{server\+\_\+rec} to pass\\
\hline
\end{DoxyParams}
Write data to the pipe-\/of-\/death, signalling that all child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & The pipe-\/of-\/death to write to. \\
\hline
{\em num} & The number of child processes to kill\\
\hline
\end{DoxyParams}
Write data to the extended pipe-\/of-\/death, signalling that all child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & The pipe-\/of-\/death to write to. \\
\hline
{\em num} & The number of child processes to kill \\
\hline
{\em graceful} & restart-\/type\\
\hline
\end{DoxyParams}
Copy the contents of a worker scoreboard entry. The contents of the \hyperlink{structworker__score}{worker\+\_\+score} structure are copied verbatim into the dest structure. 
\begin{DoxyParams}{Parameters}
{\em dest} & Output parameter. \\
\hline
{\em child\+\_\+num} & The child number. \\
\hline
{\em thread\+\_\+num} & The thread number.\\
\hline
\end{DoxyParams}
Unpack header of Fast\+C\+GI record into \hyperlink{structap__fcgi__header}{ap\+\_\+fcgi\+\_\+header} 
\begin{DoxyParams}{Parameters}
{\em h} & The header to write to \\
\hline
{\em a} & The array to read from, of size A\+P\+\_\+\+F\+C\+G\+I\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+L\+EN\\
\hline
\end{DoxyParams}
Unpack header of Fast\+C\+GI record into individual fields 
\begin{DoxyParams}{Parameters}
{\em version} & The version, on output \\
\hline
{\em type} & The type, on output \\
\hline
{\em request\+\_\+id} & The request id, on output \\
\hline
{\em content\+\_\+len} & The content length, on output \\
\hline
{\em padding\+\_\+len} & The amount of padding following the content, on output \\
\hline
{\em a} & The array to read from, of size A\+P\+\_\+\+F\+C\+G\+I\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+L\+EN\\
\hline
\end{DoxyParams}
Pack \hyperlink{structap__fcgi__begin__request__body}{ap\+\_\+fcgi\+\_\+begin\+\_\+request\+\_\+body} 
\begin{DoxyParams}{Parameters}
{\em h} & The begin-\/request body to read from \\
\hline
{\em a} & The array to write to, of size A\+P\+\_\+\+F\+C\+G\+I\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+L\+EN\\
\hline
\end{DoxyParams}
Fill in a Fast\+C\+GI request header with the required field values. 
\begin{DoxyParams}{Parameters}
{\em header} & The header to fill in \\
\hline
{\em type} & The type of record \\
\hline
{\em request\+\_\+id} & The request id \\
\hline
{\em content\+\_\+len} & The amount of content which follows the header \\
\hline
{\em padding\+\_\+len} & The amount of padding which follows the content\\
\hline
\end{DoxyParams}
The header array must be at least A\+P\+\_\+\+F\+C\+G\+I\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+L\+EN bytes long.

Fill in a Fast\+C\+GI begin request body with the required field values. 
\begin{DoxyParams}{Parameters}
{\em brb} & The begin-\/request-\/body to fill in \\
\hline
{\em role} & A\+P\+\_\+\+F\+C\+G\+I\+\_\+\+R\+E\+S\+P\+O\+N\+D\+ER or other roles \\
\hline
{\em flags} & 0 or a combination of flags like A\+P\+\_\+\+F\+C\+G\+I\+\_\+\+K\+E\+E\+P\+\_\+\+C\+O\+NN\\
\hline
\end{DoxyParams}
Remove an output filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em f} & The filter to remove\\
\hline
\end{DoxyParams}
set protocol requirements for an output content filter (only works with A\+P\+\_\+\+F\+T\+Y\+P\+E\+\_\+\+R\+E\+S\+O\+U\+R\+CE and A\+P\+\_\+\+F\+T\+Y\+P\+E\+\_\+\+C\+O\+N\+T\+E\+N\+T\+\_\+\+S\+ET) 
\begin{DoxyParams}{Parameters}
{\em f} & the filter in question \\
\hline
{\em proto\+\_\+flags} & Logical OR of A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+P\+R\+O\+T\+O\+\_\+$\ast$ bits\\
\hline
\end{DoxyParams}
Parse query args for the request and store in a new table allocated from the request pool. For args with no value, \char`\"{}1\char`\"{} will be used instead. If no query args were specified, the table will be empty. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em table} & A new table on output.\\
\hline
\end{DoxyParams}
Grow a resizable buffer. If the vb-\/$>$buf cannot be grown in place, it will be reallocated and the first vb-\/$>$strlen + 1 bytes of memory will be copied to the new location. If vb-\/$>$strlen == A\+P\+\_\+\+V\+A\+R\+B\+U\+F\+\_\+\+U\+N\+K\+N\+O\+WN, the whole buffer is copied. 
\begin{DoxyParams}{Parameters}
{\em vb} & Pointer to the \hyperlink{structap__varbuf}{ap\+\_\+varbuf} struct \\
\hline
{\em new\+\_\+size} & The minimum new size of the buffer \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
ap\+\_\+varbuf\+\_\+grow() will usually at least double vb-\/$>$buf\textquotesingle{}s size with every invocation in order to reduce reallocations. 

ap\+\_\+varbuf\+\_\+grow() will use pool memory for small and allocator mem nodes for larger allocations. 

ap\+\_\+varbuf\+\_\+grow() will call vb-\/$>$pool\textquotesingle{}s abort function if out of memory.
\end{DoxyNote}
Release memory from a \hyperlink{structap__varbuf}{ap\+\_\+varbuf} immediately, if possible. This allows to free large buffers before the corresponding pool is cleared. Only larger allocations using mem nodes will be freed. 
\begin{DoxyParams}{Parameters}
{\em vb} & Pointer to the \hyperlink{structap__varbuf}{ap\+\_\+varbuf} struct \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
After ap\+\_\+varbuf\+\_\+free(), vb must not be used unless ap\+\_\+varbuf\+\_\+init() is called again.
\end{DoxyNote}
Concatenate a string to an \hyperlink{structap__varbuf}{ap\+\_\+varbuf}. vb-\/$>$strlen determines where the string is appended in the buffer. If vb-\/$>$strlen == A\+P\+\_\+\+V\+A\+R\+B\+U\+F\+\_\+\+U\+N\+K\+N\+O\+WN, the string will be appended at the first N\+UL byte in the buffer. If len == 0, ap\+\_\+varbuf\+\_\+strmemcat() does nothing. 
\begin{DoxyParams}{Parameters}
{\em vb} & Pointer to the \hyperlink{structap__varbuf}{ap\+\_\+varbuf} struct \\
\hline
{\em str} & The string to append; must be at least len bytes long \\
\hline
{\em len} & The number of characters of $\ast$str to concatenate to the buf \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
vb-\/$>$strlen will be set to the length of the new string 

if len != 0, vb-\/$>$buf will always be N\+U\+L-\/terminated
\end{DoxyNote}
Destroy a pre-\/compiled regex. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex to free.\\
\hline
\end{DoxyParams}
Get a pointer to a match from regex memory N\+O\+TE\+: this relies on the match pattern from the last call to ap\+\_\+rxplus\+\_\+exec still being valid (i.\+e. not freed or out-\/of-\/scope) 
\begin{DoxyParams}{Parameters}
{\em rx} & The regexp \\
\hline
{\em n} & The match number to retrieve (must be between 0 and nmatch) \\
\hline
{\em len} & Returns the length of the match. \\
\hline
{\em match} & Returns the match pattern\\
\hline
\end{DoxyParams}
Generic accessors for other modules to set their own module-\/specific data 
\begin{DoxyParams}{Parameters}
{\em cv} & The vector in which the modules configuration is stored. usually r-\/$>$per\+\_\+dir\+\_\+config or s-\/$>$module\+\_\+config \\
\hline
{\em m} & The module to set the data for. \\
\hline
{\em val} & The module-\/specific data to set\\
\hline
\end{DoxyParams}
Accessor to set module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em p} & A pool \\
\hline
{\em l} & The \hyperlink{structap__logconf}{ap\+\_\+logconf} struct to modify. \\
\hline
{\em index} & The module\+\_\+index of the module to set the loglevel for. \\
\hline
{\em level} & The new log level\\
\hline
\end{DoxyParams}
Set all module-\/specific loglevels to val 
\begin{DoxyParams}{Parameters}
{\em l} & The log config for which to set the loglevels. \\
\hline
{\em val} & the value to set all loglevels to\\
\hline
\end{DoxyParams}
Remove a module from the server. There are some caveats\+: when the module is removed, its slot is lost so all the current per-\/dir and per-\/server configurations are invalid. So we should only ever call this function when you are invalidating almost all our current data. I.\+e. when doing a restart. 
\begin{DoxyParams}{Parameters}
{\em m} & the module structure of the module to remove\\
\hline
\end{DoxyParams}
Remove a module fromthe chained modules list and the list of loaded modules 
\begin{DoxyParams}{Parameters}
{\em mod} & the module structure of the module to remove\\
\hline
\end{DoxyParams}
Run a single module\textquotesingle{}s two create\+\_\+config hooks 
\begin{DoxyParams}{Parameters}
{\em p} & the pool to allocate from \\
\hline
{\em s} & The server to configure for. \\
\hline
{\em m} & The module to configure\\
\hline
\end{DoxyParams}
Show the preloaded configuration directives, the help string explaining the directive arguments, in what module they are handled, and in what parts of the configuration they are allowed. Used for httpd -\/h.

Show the preloaded module names. Used for httpd -\/l.

Run all rewrite args hooks for loaded modules 
\begin{DoxyParams}{Parameters}
{\em process} & The process currently running the server\\
\hline
\end{DoxyParams}
Run the register hooks function for a specified module 
\begin{DoxyParams}{Parameters}
{\em m} & The module to run the register hooks function fo \\
\hline
{\em p} & The pool valid for the lifetime of the module\\
\hline
\end{DoxyParams}
Setup all virtual hosts 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em main\+\_\+server} & The head of the \hyperlink{structserver__rec}{server\+\_\+rec} list\\
\hline
\end{DoxyParams}
Reserve some modules slots for modules loaded by other means than E\+X\+E\+C\+\_\+\+O\+N\+\_\+\+R\+E\+AD directives. Relevant modules should call this in the pre\+\_\+config stage. 
\begin{DoxyParams}{Parameters}
{\em count} & The number of slots to reserve.\\
\hline
\end{DoxyParams}
Reserve some modules slots for modules loaded by a specific non-\/\+E\+X\+E\+C\+\_\+\+O\+N\+\_\+\+R\+E\+AD config directive. This counts how often the given directive is used in the config and calls ap\+\_\+reserve\+\_\+module\+\_\+slots() accordingly. 
\begin{DoxyParams}{Parameters}
{\em directive} & The name of the directive\\
\hline
\end{DoxyParams}
Merge old \hyperlink{structap__logconf}{ap\+\_\+logconf} into new \hyperlink{structap__logconf}{ap\+\_\+logconf}. old and new must have the same life time. 
\begin{DoxyParams}{Parameters}
{\em old\+\_\+conf} & The \hyperlink{structap__logconf}{ap\+\_\+logconf} to merge from \\
\hline
{\em new\+\_\+conf} & The \hyperlink{structap__logconf}{ap\+\_\+logconf} to merge into\\
\hline
\end{DoxyParams}
Install a custom response handler for a given status 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em status} & The status for which the custom response should be used \\
\hline
{\em string} & The custom response. This can be a static string, a file or a U\+RL\\
\hline
\end{DoxyParams}
Accessor to set core\+\_\+module\textquotesingle{}s specific data. Equivalent to \hyperlink{group__APACHE__CORE__CONFIG_ga96c3eadc9e6ab6756d05bdcc068a8a10}{ap\+\_\+set\+\_\+module\+\_\+config(cv, \&core\+\_\+module, val)} but more efficient. 
\begin{DoxyParams}{Parameters}
{\em cv} & The vector in which the modules configuration is stored. usually r-\/$>$per\+\_\+dir\+\_\+config or s-\/$>$module\+\_\+config \\
\hline
{\em val} & The module-\/specific data to set\\
\hline
\end{DoxyParams}
Register external errorlog handler 
\begin{DoxyParams}{Parameters}
{\em p} & config pool to use \\
\hline
{\em tag} & the new format specifier (i.\+e. the letter after the \%) \\
\hline
{\em handler} & the handler function \\
\hline
{\em flags} & flags (reserved, set to 0)\\
\hline
\end{DoxyParams}
Set up for logging to stderr. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate out of\\
\hline
\end{DoxyParams}
Convert stderr to the error log 
\begin{DoxyParams}{Parameters}
{\em s} & The current server\\
\hline
\end{DoxyParams}
Log the command line used to start the server. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for logging \\
\hline
{\em s} & The \hyperlink{structserver__rec}{server\+\_\+rec} whose process\textquotesingle{}s command line we want to log. The command line is logged to that server\textquotesingle{}s error log.\\
\hline
\end{DoxyParams}
Log common (various) M\+PM shared data at startup. 
\begin{DoxyParams}{Parameters}
{\em s} & The \hyperlink{structserver__rec}{server\+\_\+rec} of the error log we want to log to. Misc commonly logged data is logged to that server\textquotesingle{}s error log.\\
\hline
\end{DoxyParams}
Log the current pid of the parent process 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em fname} & The name of the file to log to. If the filename is not absolute then it is assumed to be relative to Server\+Root.\\
\hline
\end{DoxyParams}
Remove the pidfile. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em fname} & The name of the pid file to remove. If the filename is not absolute then it is assumed to be relative to Server\+Root.\\
\hline
\end{DoxyParams}
Close the piped log and kill the logging process 
\begin{DoxyParams}{Parameters}
{\em pl} & The piped log structure\\
\hline
\end{DoxyParams}
Read the mime-\/encoded headers. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Optimized version of ap\+\_\+get\+\_\+mime\+\_\+headers() that requires a temporary brigade to work with 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em bb} & temp brigade\\
\hline
\end{DoxyParams}
Called at completion of sending the response. It sends the terminating protocol information. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Send error back to client. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em recursive\+\_\+error} & last arg indicates error status in case we get an error in the process of trying to deal with an Error\+Document to handle some other error. In that case, we print the default report for the first thing that went wrong, and more briefly report on the problem with the Error\+Document.\\
\hline
\end{DoxyParams}
Set the content length for this request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em length} & The new content length\\
\hline
\end{DoxyParams}
Precompile metadata structures used by ap\+\_\+make\+\_\+content\+\_\+type() 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to use for allocations\\
\hline
\end{DoxyParams}
Set the E-\/tag outgoing header 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Set the last modified time for the file being sent 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Initialize the method\+\_\+registry and allocate memory for it.


\begin{DoxyParams}{Parameters}
{\em p} & Pool to allocate memory for the registry from.\\
\hline
\end{DoxyParams}
Copy a method list


\begin{DoxyParams}{Parameters}
{\em dest} & List to copy to \\
\hline
{\em src} & List to copy from\\
\hline
\end{DoxyParams}
Add an H\+T\+TP method name to an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure if it isn\textquotesingle{}t already listed.


\begin{DoxyParams}{Parameters}
{\em method} & String containing the name of the method to check. \\
\hline
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Remove an H\+T\+TP method name from an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure.


\begin{DoxyParams}{Parameters}
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
{\em method} & String containing the name of the method to remove. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Reset a method list to be completely empty.


\begin{DoxyParams}{Parameters}
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Set the content type for this request (r-\/$>$\hyperlink{structcontent__type}{content\+\_\+type}). 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em ct} & The new content type \\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{Warning}
This function must be called to set r-\/$>$\hyperlink{structcontent__type}{content\+\_\+type} in order for the Add\+Output\+Filter\+By\+Type directive to work correctly.
\end{DoxyWarning}
Set the Accept-\/\+Ranges header for this response 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Setup the output headers so that the client knows how to authenticate itself the next time, if an authentication request failed. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000002}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+note\+\_\+auth\+\_\+failure
\end{DoxySeeAlso}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000003}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+note\+\_\+auth\+\_\+failure
\end{DoxySeeAlso}
Sett up the protocol fields for subsidiary requests 
\begin{DoxyParams}{Parameters}
{\em rnew} & New Sub Request \\
\hline
{\em r} & current request\\
\hline
\end{DoxyParams}
A wrapup function to keep the internal accounting straight. Indicates that there is no more content coming. 
\begin{DoxyParams}{Parameters}
{\em sub\+\_\+r} & Subrequest that is now compete\\
\hline
\end{DoxyParams}
Send an interim (H\+T\+TP 1xx) response immediately. 
\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em send\+\_\+headers} & Whether to send\&clear headers in r-\/$>$headers\+\_\+out\\
\hline
\end{DoxyParams}
Free the memory associated with a subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The subrequest to finish\\
\hline
\end{DoxyParams}
Redirect the current request to some other uri 
\begin{DoxyParams}{Parameters}
{\em new\+\_\+uri} & The U\+RI to replace the current request with \\
\hline
{\em r} & The current request\\
\hline
\end{DoxyParams}
This function is designed for things like actions or C\+GI scripts, when using Add\+Handler, and you want to preserve the content type across an internal redirect. 
\begin{DoxyParams}{Parameters}
{\em new\+\_\+uri} & The U\+RI to replace the current request with. \\
\hline
{\em r} & The current request\\
\hline
\end{DoxyParams}
Redirect the current request to a sub\+\_\+req, merging the pools 
\begin{DoxyParams}{Parameters}
{\em sub\+\_\+req} & A subrequest created from this request \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
the sub\+\_\+req\textquotesingle{}s pool will be merged into r\textquotesingle{}s pool, be very careful not to destroy this subrequest, it will be destroyed with the main request!
\end{DoxyNote}
Clear flag which determines when access control hooks will be run for internal requests.

Determine whether access control hooks will be run for all internal requests with U\+R\+Is distinct from that of the initial request, or only those for which different configurations apply than those which applied to the initial request. To accommodate legacy external modules which may expect access control hooks to be run for all internal requests with distinct U\+R\+Is, this is the default behaviour unless all access control hooks and authentication and authorization providers are registered with A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF. 
\begin{DoxyParams}{Parameters}
{\em ptemp} & Pool used for temporary allocations\\
\hline
\end{DoxyParams}
Function to set the r-\/$>$mtime field to the specified value if it\textquotesingle{}s later than what\textquotesingle{}s already there. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em dependency\+\_\+mtime} & Time to set the mtime to\\
\hline
\end{DoxyParams}
Add one or more methods to the list permitted to access the resource. Usually executed by the content handler before the response header is sent, but sometimes invoked at an earlier phase if a module knows it can set the list authoritatively. Note that the methods are A\+D\+D\+ED to any already permitted unless the reset flag is non-\/zero. The list is used to generate the Allow response header field when it is needed. 
\begin{DoxyParams}{Parameters}
{\em r} & The pointer to the request identifying the resource. \\
\hline
{\em reset} & Boolean flag indicating whether this list should completely replace any current settings. \\
\hline
{\em ...} & A N\+U\+L\+L-\/terminated list of strings, each identifying a method name to add. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Add one or more methods to the list permitted to access the resource. Usually executed by the content handler before the response header is sent, but sometimes invoked at an earlier phase if a module knows it can set the list authoritatively. Note that the methods are A\+D\+D\+ED to any already permitted unless the reset flag is non-\/zero. The list is used to generate the Allow response header field when it is needed. 
\begin{DoxyParams}{Parameters}
{\em r} & The pointer to the request identifying the resource. \\
\hline
{\em reset} & Boolean flag indicating whether this list should completely replace any current settings. \\
\hline
{\em ...} & A list of method identifiers, from the \char`\"{}\+M\+\_\+\char`\"{} series defined in httpd.\+h, terminated with a value of -\/1 (e.\+g., \char`\"{}\+M\+\_\+\+G\+E\+T, M\+\_\+\+P\+O\+S\+T, M\+\_\+\+O\+P\+T\+I\+O\+N\+S, -\/1\char`\"{}) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None.
\end{DoxyReturn}
Process a top-\/level request from a client, and synchronously write the response to the client 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Kill the current request 
\begin{DoxyParams}{Parameters}
{\em type} & Why the request is dieing \\
\hline
{\em r} & The current request\\
\hline
\end{DoxyParams}
Gives modules a chance to create their request\+\_\+config entry when the request is created. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request This hook allow modules an opportunity to translate the U\+RI into an actual filename. If no modules do anything special, the server\textquotesingle{}s default rules will be followed. \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+... This hook allow modules to set the per\+\_\+dir\+\_\+config based on their own context (such as \char`\"{}$<$\+Proxy$>$\char`\"{} sections) and responds to contextless requests such as T\+R\+A\+CE that need no security or filesystem mapping. based on the filesystem. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
D\+O\+NE (or H\+T\+T\+P\+\_\+) if this contextless request was just fulfilled (such as T\+R\+A\+CE), OK if this is not a file, and D\+E\+C\+L\+I\+N\+ED if this is a file. The core map\+\_\+to\+\_\+storage (H\+O\+O\+K\+\_\+\+R\+U\+N\+\_\+\+R\+E\+A\+L\+L\+Y\+\_\+\+L\+A\+ST) will directory\+\_\+walk and file\+\_\+walk the r-\/$>$filename. This hook is used to analyze the request headers, authenticate the user, and set the user information in the request record (r-\/$>$user and r-\/$>$ap\+\_\+auth\+\_\+type). This hook is only run when \hyperlink{namespaceApache}{Apache} determines that authentication/authorization is required for this resource (as determined by the \textquotesingle{}Require\textquotesingle{} directive). It runs after the access\+\_\+checker hook, and before the auth\+\_\+checker hook. This hook should be registered with ap\+\_\+hook\+\_\+check\+\_\+authn().
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+...
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+authn Allows modules \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} perform module-\/specific fixing \hyperlink{pcre_8txt_a9d5b55a535a7d176d14b62d664b47b4d}{of} header \hyperlink{pcre_8txt_a17e2a619a5772fa0fccf743c125ea249}{fields}. This \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} invoked just before \hyperlink{README_8txt_a117db88886e3b44e72c9457ba51928bc}{any} content-\/handler 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+... This routine is called to determine and/or set the various document type information bits, like Content-\/type (via r-\/$>$\hyperlink{structcontent__type}{content\+\_\+type}), language, et cetera. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+... This hook is used to apply additional access control to this resource. It runs {\itshape before} a user is authenticated, so this hook is really to apply additional restrictions independent of a user. It also runs independent of \textquotesingle{}Require\textquotesingle{} directive usage. This hook should be registered with ap\+\_\+hook\+\_\+check\+\_\+access().
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+...
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+access This hook \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} \hyperlink{pcregrep_8txt_ac199431a7baad211fadcdb6c45bfe7c0}{used} \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} apply additional access control and/or bypass authentication for \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} \hyperlink{group__APR__Util__RL_gaa6244aacafcc4ec1d0727bdb32614b11}{resource}. It runs {\itshape before} \hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a} user \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} authenticated, but \hyperlink{group__MOD__PROXY_gabe5742ecd24263fc01da937ad820d3fa}{after} the auth\+\_\+checker hook. This hook should \hyperlink{NON-AUTOTOOLS-BUILD_8txt_ac08ce70cbd4f453457597ad15ecbebdd}{be} registered \hyperlink{group__apr__atomic_ga62bdcea60b77e638d3d88947a34aff05}{with} ap\+\_\+hook\+\_\+check\+\_\+access\+\_\+ex().
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (allow acces), D\+E\+C\+L\+I\+N\+ED (let later modules decide), or H\+T\+T\+P\+\_\+... (deny access)
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+access\+\_\+ex This hook \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} \hyperlink{pcregrep_8txt_ac199431a7baad211fadcdb6c45bfe7c0}{used} \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} check \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} see \hyperlink{util__expr__scan_8c_aa1a71763978093648dffef60b56f7447}{if} the \hyperlink{group__APR__Util__RL_gaa6244aacafcc4ec1d0727bdb32614b11}{resource} being requested \hyperlink{NON-AUTOTOOLS-BUILD_8txt_a2569119f3fd3f0d7d7ecea3c96acb0bf}{is} \hyperlink{pcretest_8txt_a4535630baf343422449d0c4d3f6d0ae7}{available} for the authenticated user (r-\/$>$user and r-\/$>$ap\+\_\+auth\+\_\+type). It runs \hyperlink{group__MOD__PROXY_gabe5742ecd24263fc01da937ad820d3fa}{after} the access\+\_\+checker and check\+\_\+user\+\_\+id \hyperlink{group__MOD__DAV_ga2f89c7cfd67d24769756d6d2df79bf5c}{hooks}. Note that \hyperlink{pcretest_8txt_ab977b64dbdb969ce031dc4281a792b3c}{it} will {\itshape only} \hyperlink{NON-AUTOTOOLS-BUILD_8txt_ac08ce70cbd4f453457597ad15ecbebdd}{be} called \hyperlink{util__expr__scan_8c_aa1a71763978093648dffef60b56f7447}{if} \hyperlink{namespaceApache}{Apache} determines that access control has been applied \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} \hyperlink{group__APR__Util__RL_gaa6244aacafcc4ec1d0727bdb32614b11}{resource} (through \hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a} \textquotesingle{}Require\textquotesingle{} \hyperlink{basic-configuration_8txt_afff511b23780162b3e88a118ec5cb4c9}{directive}). This hook should \hyperlink{NON-AUTOTOOLS-BUILD_8txt_ac08ce70cbd4f453457597ad15ecbebdd}{be} registered \hyperlink{group__apr__atomic_ga62bdcea60b77e638d3d88947a34aff05}{with} ap\+\_\+hook\+\_\+check\+\_\+authz().
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED, or H\+T\+T\+P\+\_\+...
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
ap\+\_\+hook\+\_\+check\+\_\+authz Register \hyperlink{pcre_8txt_a841271aab70f5cda9412a19c7753f02c}{a} hook \hyperlink{pcretest_8txt_abd306f12a46ac3f6be69579bceb817d0}{function} that will apply additional access control \hyperlink{pcretest_8txt_aa22c98f630e4b3fe86ee17ce5150c62f}{to} the \hyperlink{group__APACHE__CORE__CONFIG_ga4b3e87cb39cac2296c5083f27321f1f4}{current} \hyperlink{ab_8c_ae55c2591fd7f232c48d3f252f18a869a}{request}. 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em pf} & An access\+\_\+checker hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
Register a hook function that will apply additional access control and/or bypass authentication for the current request. 
\begin{DoxyParams}{Parameters}
{\em pf} & An access\+\_\+checker\+\_\+ex hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
Register a hook function that will analyze the request headers, authenticate the user, and set the user information in the request record. 
\begin{DoxyParams}{Parameters}
{\em pf} & A check\+\_\+user\+\_\+id hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
Register a hook function that determine if the resource being requested is available for the currently authenticated user. 
\begin{DoxyParams}{Parameters}
{\em pf} & An auth\+\_\+checker hook function \\
\hline
{\em asz\+Pre} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should precede this one \\
\hline
{\em asz\+Succ} & A N\+U\+L\+L-\/terminated array of strings that name modules whose hooks should succeed this one \\
\hline
{\em n\+Order} & An integer determining order before honouring asz\+Pre and asz\+Succ (for example, H\+O\+O\+K\+\_\+\+M\+I\+D\+D\+LE) \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF\\
\hline
\end{DoxyParams}
called before any config is read 
\begin{DoxyParams}{Parameters}
{\em p} & Pool to allocate out of\\
\hline
\end{DoxyParams}
called after the config has been read to compile the tables needed to do the run-\/time vhost lookups 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate out of \\
\hline
{\em main\+\_\+server} & The start of the virtual host list\\
\hline
\end{DoxyParams}
given an ip address only, give our best guess as to what vhost it is 
\begin{DoxyParams}{Parameters}
{\em conn} & The current connection\\
\hline
\end{DoxyParams}
ap\+\_\+update\+\_\+vhost\+\_\+given\+\_\+ip is never enough, and this is always called after the headers have been read. It may change r-\/$>$server. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Return httpd\textquotesingle{}s version information in a numeric form.


\begin{DoxyParams}{Parameters}
{\em version} & Pointer to a version structure for returning the version information.\\
\hline
\end{DoxyParams}
Add a component to the server description and banner strings 
\begin{DoxyParams}{Parameters}
{\em pconf} & The pool to allocate the component from \\
\hline
{\em component} & The string to add\\
\hline
\end{DoxyParams}
Set context\+\_\+prefix and context\+\_\+document\+\_\+root for a request. 
\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em prefix} & the U\+RI prefix, without trailing slash \\
\hline
{\em document\+\_\+root} & the corresponding directory on disk, without trailing slash \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
If one of prefix of document\+\_\+root is N\+U\+LL, the corrsponding property will not be changed.
\end{DoxyNote}
Set per-\/request document root. This is for mass virtual hosting modules that want to provide the correct D\+O\+C\+U\+M\+E\+N\+T\+\_\+\+R\+O\+OT value to scripts. 
\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em document\+\_\+root} & the document root for the request.\\
\hline
\end{DoxyParams}
Convert all double slashes to single slashes 
\begin{DoxyParams}{Parameters}
{\em name} & The string to convert\\
\hline
\end{DoxyParams}
Remove all ./ and xx/../ substrings from a file name. Also remove any leading ../ or /../ substrings. 
\begin{DoxyParams}{Parameters}
{\em name} & the file name to parse\\
\hline
\end{DoxyParams}
Free the memory associated with a compiled regular expression 
\begin{DoxyParams}{Parameters}
{\em p} & The pool the regex was allocated from \\
\hline
{\em reg} & The regular expression to free \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function is only necessary if the regex should be cleaned up before the pool
\end{DoxyNote}
We want to downcase the type/subtype for comparison purposes but nothing else because ;parameter=foo values are case sensitive. 
\begin{DoxyParams}{Parameters}
{\em s} & The content-\/type to convert to lowercase\\
\hline
\end{DoxyParams}
convert a string to all lowercase 
\begin{DoxyParams}{Parameters}
{\em s} & The string to convert to lowercase\\
\hline
\end{DoxyParams}
convert a string to all uppercase 
\begin{DoxyParams}{Parameters}
{\em s} & The string to convert to uppercase\\
\hline
\end{DoxyParams}
Log an assertion to the error log 
\begin{DoxyParams}{Parameters}
{\em sz\+Exp} & The assertion that failed \\
\hline
{\em sz\+File} & The file the assertion is in \\
\hline
{\em n\+Line} & The line the assertion is defined on\\
\hline
\end{DoxyParams}
Generate pseudo random bytes. This is a convenience interface to apr\+\_\+random. It is cheaper but less secure than apr\+\_\+generate\+\_\+random\+\_\+bytes(). 
\begin{DoxyParams}{Parameters}
{\em buf} & where to store the bytes \\
\hline
{\em size} & number of bytes to generate \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
ap\+\_\+random\+\_\+insecure\+\_\+bytes() is thread-\/safe, it uses a mutex on threaded M\+P\+Ms.
\end{DoxyNote}
Abort with a error message signifying out of memory

Get server load params 
\begin{DoxyParams}{Parameters}
{\em ld} & struct to populate\+: -\/1 in fields means error\\
\hline
\end{DoxyParams}
Get server load averages (ala getloadavg) 
\begin{DoxyParams}{Parameters}
{\em ld} & struct to populate\+: -\/1 in fields means error\\
\hline
\end{DoxyParams}
Convert binary data into a hex string 
\begin{DoxyParams}{Parameters}
{\em src} & pointer to the data \\
\hline
{\em srclen} & length of the data \\
\hline
{\em dest} & pointer to buffer of length (2 $\ast$ srclen + 1). The resulting string will be N\+U\+L-\/terminated. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1075 \{
1076     \textcolor{keywordflow}{if} (!\hyperlink{group__APACHE__CORE__PROTO_ga7e93f988a62cb0584f3f8eeebdd32e4b}{ct}) \{
1077         \hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a539f8aba497328ed3e9c4628b0b7b4b0}{content\_type} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
1078     \}
1079     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a539f8aba497328ed3e9c4628b0b7b4b0}{content\_type} || strcmp(\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a539f8aba497328ed3e9c4628b0b7b4b0}{content\_type}, 
      \hyperlink{group__APACHE__CORE__PROTO_ga7e93f988a62cb0584f3f8eeebdd32e4b}{ct})) \{
1080         \hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a539f8aba497328ed3e9c4628b0b7b4b0}{content\_type} = \hyperlink{group__APACHE__CORE__PROTO_ga7e93f988a62cb0584f3f8eeebdd32e4b}{ct};
1081     \}
1082 \}
\end{DoxyCode}
\index{mod\+\_\+core@{mod\+\_\+core}!A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E(int) ap\+\_\+send\+\_\+http\+\_\+options(request\+\_\+rec $\ast$r)}{AP_DECLARE(int) ap_send_http_options(request_rec *r)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+status\+\_\+t}}]{}
\end{DoxyParamCaption}
) const}\hypertarget{group__MOD__CORE_gab8d8f3d6912270098901ff1a41740f88}{}\label{group__MOD__CORE_gab8d8f3d6912270098901ff1a41740f88}
Send an appropriate response to an http O\+P\+T\+I\+O\+NS request. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request\\
\hline
\end{DoxyParams}
Evaluate a parse tree, simple interface 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em expr} & The expression to be evaluated \\
\hline
{\em err} & Where an error message should be stored \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$ 0 if expression evaluates to true, == 0 if false, $<$ 0 on error 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
err will be set to N\+U\+LL on success, or to an error message on error 

request headers used during evaluation will be added to the Vary\+: response header, unless \hyperlink{group__AP__EXPR_ga2b831a2e84340ada00100fa078dce1ed}{A\+P\+\_\+\+E\+X\+P\+R\+\_\+\+F\+L\+A\+G\+\_\+\+D\+O\+N\+T\+\_\+\+V\+A\+RY} is set.
\end{DoxyNote}
Evaluate a parse tree, with access to regexp backreference 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em expr} & The expression to be evaluated \\
\hline
{\em nmatch} & size of the regex match vector pmatch \\
\hline
{\em pmatch} & information about regex matches \\
\hline
{\em source} & the string that pmatch applies to \\
\hline
{\em err} & Where an error message should be stored \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$ 0 if expression evaluates to true, == 0 if false, $<$ 0 on error 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
err will be set to N\+U\+LL on success, or to an error message on error 

nmatch/pmatch/source can be used both to make previous matches available to ap\+\_\+expr\+\_\+exec\+\_\+re and to use ap\+\_\+expr\+\_\+exec\+\_\+re\textquotesingle{}s matches later on. 

request headers used during evaluation will be added to the Vary\+: response header, unless \hyperlink{group__AP__EXPR_ga2b831a2e84340ada00100fa078dce1ed}{A\+P\+\_\+\+E\+X\+P\+R\+\_\+\+F\+L\+A\+G\+\_\+\+D\+O\+N\+T\+\_\+\+V\+A\+RY} is set.
\end{DoxyNote}
Evaluate a parse tree, full featured version 
\begin{DoxyParams}{Parameters}
{\em ctx} & The evaluation context with all data filled in \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$ 0 if expression evaluates to true, == 0 if false, $<$ 0 on error 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
$\ast$ctx-\/$>$err will be set to N\+U\+LL on success, or to an error message on error 

request headers used during evaluation will be added to the Vary\+: response header if ctx-\/$>$vary\+\_\+this is set.
\end{DoxyNote}
This function duplicates ap\+\_\+listeners into multiple buckets when configured to (see Listen\+Cores\+Buckets\+Ratio) and the platform supports it (eg. number of online C\+PU cores and S\+O\+\_\+\+R\+E\+U\+S\+E\+P\+O\+RT available). 
\begin{DoxyParams}{Parameters}
{\em p} & The config pool \\
\hline
{\em s} & The global \hyperlink{structserver__rec}{server\+\_\+rec} \\
\hline
{\em buckets} & The array of listeners buckets. \\
\hline
{\em num\+\_\+buckets} & The total number of listeners buckets (array size). \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
If the given $\ast$num\+\_\+buckets is 0 (input), it will be computed according to the platform capacities, otherwise (positive) it will be preserved. The number of listeners duplicated will always match $\ast$num\+\_\+buckets, be it computed or given.
\end{DoxyRemark}
Match a N\+U\+L-\/terminated string against a pre-\/compiled regex. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em string} & The string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, {\ttfamily A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH} otherwise
\end{DoxyReturn}
Match a string with given length against a pre-\/compiled regex. The string does not need to be N\+U\+L-\/terminated. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em buff} & The string to match \\
\hline
{\em len} & Length of the string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH otherwise
\end{DoxyReturn}
Return an array of named regex backreferences 
\begin{DoxyParams}{Parameters}
{\em preg} & The precompiled regex \\
\hline
{\em names} & The array to which the names will be added \\
\hline
{\em upper} & If non zero, uppercase the names\\
\hline
\end{DoxyParams}
Apply a regexp operation to a string. 
\begin{DoxyParams}{Parameters}
{\em pool} & Pool to allocate from \\
\hline
{\em rx} & The regex match to apply \\
\hline
{\em pattern} & The string to apply it to N\+O\+TE\+: This M\+U\+ST be kept in scope to use regexp memory \\
\hline
{\em newpattern} & The modified string (ignored if the operation doesn\textquotesingle{}t modify the string) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of times a match happens. Normally 0 (no match) or 1 (match found), but may be greater if a transforming pattern is applied with the \textquotesingle{}g\textquotesingle{} flag.
\end{DoxyReturn}
Generic accessor for modules the module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em c} & The connection from which to get the loglevel. \\
\hline
{\em index} & The module\+\_\+index of the module to get the loglevel for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The module-\/specific loglevel
\end{DoxyReturn}
Generic accessor for modules the module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em c} & The connection from which to get the loglevel. \\
\hline
{\em s} & The server from which to get the loglevel if c does not have a specific loglevel configuration. \\
\hline
{\em index} & The module\+\_\+index of the module to get the loglevel for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The module-\/specific loglevel
\end{DoxyReturn}
Generic accessor for modules to get the module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em r} & The request from which to get the loglevel. \\
\hline
{\em index} & The module\+\_\+index of the module to get the loglevel for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The module-\/specific loglevel
\end{DoxyReturn}
Return true if the specified method is limited by being listed in a $<$Limit$>$ container, or by {\itshape not} being listed in a $<$Limit\+Except$>$ container.


\begin{DoxyParams}{Parameters}
{\em method} & Pointer to a string specifying the method to check. \\
\hline
{\em cmd} & Pointer to the cmd\+\_\+parms structure passed to the directive handler. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the method is not limited in the current scope
\end{DoxyReturn}
Open a \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} as \hyperlink{structapr__file__t}{apr\+\_\+file\+\_\+t} 
\begin{DoxyParams}{Parameters}
{\em ret\+\_\+cfg} & open \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} struct pointer \\
\hline
{\em p} & The pool to allocate the structure from \\
\hline
{\em name} & the name of the file to open\\
\hline
\end{DoxyParams}
Read one line from open \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t}, strip leading and trailing whitespace, increase line number 
\begin{DoxyParams}{Parameters}
{\em buf} & place to store the line read \\
\hline
{\em bufsize} & size of the buffer \\
\hline
{\em cfp} & File to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status, A\+P\+R\+\_\+\+E\+N\+O\+S\+PC if bufsize is too small for the line
\end{DoxyReturn}
Read one char from open configfile\+\_\+t, increase line number upon LF 
\begin{DoxyParams}{Parameters}
{\em ch} & place to store the char read \\
\hline
{\em cfp} & The file to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status
\end{DoxyReturn}
Detach from open \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t}, calling the close handler 
\begin{DoxyParams}{Parameters}
{\em cfp} & The file to close \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on failure
\end{DoxyReturn}
Process all directives in the config tree 
\begin{DoxyParams}{Parameters}
{\em s} & The server rec to use in the command parms \\
\hline
{\em conftree} & The config tree to process \\
\hline
{\em p} & The pool for general allocation \\
\hline
{\em ptemp} & The pool for temporary allocations \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK if no problems
\end{DoxyReturn}
Retrieve the value of the Allow\+Override for this request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the overrides bitmask
\end{DoxyReturn}
Check if the current request is beyond the configured max. number of redirects or subrequests 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true (is exceeded) or false
\end{DoxyReturn}
Check for a definition from the server command line 
\begin{DoxyParams}{Parameters}
{\em name} & The define to check for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if defined, 0 otherwise
\end{DoxyReturn}
How the requires lines must be met. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
How the requirements must be met. One of\+: 
\begin{DoxyPre}
     SATISFY\_ANY    -- any of the requirements must be met.
     SATISFY\_ALL    -- all of the requirements must be met.
     SATISFY\_NOSPEC -- There are no applicable satisfy lines
\end{DoxyPre}

\end{DoxyReturn}
Query the server for some state information 
\begin{DoxyParams}{Parameters}
{\em query\+\_\+code} & Which information is requested \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the requested state information
\end{DoxyReturn}
Retrieve the pid from a pidfile. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em filename} & The name of the file containing the pid. If the filename is not absolute then it is assumed to be relative to Server\+Root. \\
\hline
{\em mypid} & Pointer to pid\+\_\+t (valid only if return A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS)\\
\hline
\end{DoxyParams}
Implements condition G\+ET rules for H\+T\+T\+P/1.\+1 specification. This function inspects the client headers and determines if the response fulfills the requirements specified. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK if the response fulfills the condition G\+ET rules, some other status code otherwise
\end{DoxyReturn}
Send an entire file to the client, using sendfile if supported by the current platform 
\begin{DoxyParams}{Parameters}
{\em fd} & The file to send. \\
\hline
{\em r} & The current request \\
\hline
{\em offset} & Offset into the file to start sending. \\
\hline
{\em length} & Amount of data to send \\
\hline
{\em nbytes} & Amount of data actually sent\\
\hline
\end{DoxyParams}
Register a new request method, and return the offset that will be associated with that method.


\begin{DoxyParams}{Parameters}
{\em p} & The pool to create registered method numbers from. \\
\hline
{\em methname} & The name of the new method to register. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An int value representing an offset into a bitmask.
\end{DoxyReturn}
Search for an H\+T\+TP method name in an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure, and return true if found.


\begin{DoxyParams}{Parameters}
{\em method} & String containing the name of the method to check. \\
\hline
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if method is in the list, otherwise 0
\end{DoxyReturn}
Output one character for this request 
\begin{DoxyParams}{Parameters}
{\em c} & the character to output \\
\hline
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Write a buffer for the current request 
\begin{DoxyParams}{Parameters}
{\em buf} & The buffer to write \\
\hline
{\em nbyte} & The number of bytes to send from the buffer \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em vlist} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Flush all of the data for the current request to the client 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 if an error occurred
\end{DoxyReturn}
Index used in custom\+\_\+responses array for a specific error code (only use outside protocol.\+c is in getting them configured). 
\begin{DoxyParams}{Parameters}
{\em status} & H\+T\+TP status code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the response
\end{DoxyReturn}
Setup the client to allow \hyperlink{namespaceApache}{Apache} to read the request body. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em read\+\_\+policy} & How the server should interpret a chunked transfer-\/encoding. One of\+: 
\begin{DoxyPre}
   REQUEST\_NO\_BODY          Send 413 error if message has any body
   REQUEST\_CHUNKED\_ERROR    Send 411 error if body without Content-Length
   REQUEST\_CHUNKED\_DECHUNK  If chunked, remove the chunks for me.
\end{DoxyPre}
 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
either OK or an error code
\end{DoxyReturn}
Determine if the client has sent any data. This also sends a 100 Continue response to H\+T\+T\+P/1.\+1 clients, so modules should not be called until the module is ready to read content. \begin{DoxyWarning}{Warning}
Never call this function more than once. 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if there is no message to read, 1 otherwise
\end{DoxyReturn}
Map specific A\+PR codes returned by the filter stack to H\+T\+TP error codes, or the default status code provided. Use it as follows\+:

return ap\+\_\+map\+\_\+http\+\_\+request\+\_\+error(rv, H\+T\+T\+P\+\_\+\+B\+A\+D\+\_\+\+R\+E\+Q\+U\+E\+S\+T);

If the filter has already handled the error, A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR will be returned, which is cleanly passed through.

These mappings imply that the filter stack is reading from the downstream client, the proxy will map these codes differently. 
\begin{DoxyParams}{Parameters}
{\em rv} & A\+PR status code \\
\hline
{\em status} & Default H\+T\+TP code should the A\+PR code not be recognised \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Mapped H\+T\+TP status code
\end{DoxyReturn}
In H\+T\+T\+P/1.\+1, any method can have a body. However, most G\+ET handlers wouldn\textquotesingle{}t know what to do with a request body if they received one. This helper routine tests for and reads any message body in the request, simply discarding whatever it receives. We need to do this because failing to read the request body would cause it to be interpreted as the next request on a persistent connection. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status if request is malformed, OK otherwise
\end{DoxyReturn}
This hook allows modules to add support for a specific auth type to ap\+\_\+note\+\_\+auth\+\_\+failure 
\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
{\em auth\+\_\+type} & the configured auth\+\_\+type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED Get the password from the request headers. This function has multiple side effects due to its prior use in the old authentication framework. ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components() should be preferred.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000004}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em pw} & The password as set in the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 (OK) if it set the \textquotesingle{}pw\textquotesingle{} argument (and assured a correct value in r-\/$>$user); otherwise it returns an error code, either H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR if things are really confused, H\+T\+T\+P\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED if no authentication at all seemed to be in use, or D\+E\+C\+L\+I\+N\+ED if there was authentication but it wasn\textquotesingle{}t Basic (in which case, the caller should presumably decline as well).
\end{DoxyReturn}
Get the username and/or password from the request\textquotesingle{}s Basic authentication headers. Unlike ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+pw(), calling this function has no side effects on the passed \hyperlink{structrequest__rec}{request\+\_\+rec}.


\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em username} & If not N\+U\+LL, set to the username sent by the client \\
\hline
{\em password} & If not N\+U\+LL, set to the password sent by the client \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if the credentials were successfully parsed and returned; A\+P\+R\+\_\+\+E\+I\+N\+V\+AL if there was no authentication header sent or if the client was not using the Basic authentication scheme. username and password are unchanged on failure.
\end{DoxyReturn}
Get the next line of input for the request 
\begin{DoxyParams}{Parameters}
{\em s} & The buffer into which to read the line \\
\hline
{\em n} & The size of the buffer \\
\hline
{\em r} & The request \\
\hline
{\em flags} & Bit flag of multiple parsing options A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+F\+O\+LD Whether to merge continuation lines A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+C\+R\+LF Whether line ends must be in the form CR LF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The length of the line, if successful n, if the line is too big to fit in the buffer -\/1 for miscellaneous errors
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__APACHE__CORE__PROTO_ga4b31458cae55948009a7de050dd6acc4}{ap\+\_\+rgetline}
\end{DoxySeeAlso}
Get the method number associated with the given string, assumed to contain an H\+T\+TP method. Returns M\+\_\+\+I\+N\+V\+A\+L\+ID if not recognized. 
\begin{DoxyParams}{Parameters}
{\em method} & A string containing a valid H\+T\+TP method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The method number
\end{DoxyReturn}
Return the protocol used on the connection. Modules implementing protocol switching must register here and return the correct protocol identifier for connections they switched.

To find out the protocol for the current connection, better call \begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+protocol \hyperlink{README_8txt_a9d3df0d4bed2ac7e1c01860363ab4ac2}{which} internally uses \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} hook.
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The identifier of the protocol in place or N\+U\+LL 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000003}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}
Get the protocols that the connection and optional request may upgrade to -\/ besides the protocol currently active on the connection. These values may be used to announce to a client what choices it has.

If report\+\_\+all == 0, only protocols more preferable than the one currently being used, are reported. Otherwise, all available protocols beside the current one are being reported.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em report\+\_\+all} & include also protocols less preferred than the current one \\
\hline
{\em pupgrades} & on return, possible protocols to upgrade to in descending order of preference. Maybe N\+U\+LL if none are available. \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000004}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Perform the actual protocol switch. The protocol given must have been selected before on the very same connection and request pair.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS, if caller may continue processing as usual A\+P\+R\+\_\+\+E\+OF, if caller needs to stop processing the connection A\+P\+R\+\_\+\+E\+I\+N\+V\+AL, if the protocol is already in place A\+P\+R\+\_\+\+N\+O\+T\+I\+M\+PL, if no module performed the switch Other errors where appropriate 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000006}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Check if the given protocol is an allowed choice on the given combination of connection, request and server.

When server is N\+U\+LL, it is taken from \hyperlink{structrequest__rec}{request\+\_\+rec}, unless \hyperlink{structrequest__rec}{request\+\_\+rec} is N\+U\+LL. Then it is taken from the connection base server.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!= 0 iff protocol is allowed 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000008}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Run the handler for the subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The subrequest to run \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return code for the subrequest
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if authentication is required, 0 otherwise 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000009}{Bug}]Behavior changed in 2.\+4.\+x refactoring, A\+PI no longer usable \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000005}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+some\+\_\+authn\+\_\+required()
\end{DoxySeeAlso}
Register an authentication or authorization provider with the global provider pool. 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to create any storage from \\
\hline
{\em provider\+\_\+group} & The group to store the provider in \\
\hline
{\em provider\+\_\+name} & The name for this provider \\
\hline
{\em provider\+\_\+version} & The version for this provider \\
\hline
{\em provider} & Opaque structure for this provider \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if all went well
\end{DoxyReturn}
Determine if the current request is the main request or a subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if this is the main request, 0 otherwise
\end{DoxyReturn}
Check whether a connection is still established and has data available, optionnaly consuming blank lines (\mbox{[}CR\mbox{]}LF). 
\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em bb} & The brigade to filter \\
\hline
{\em max\+\_\+blank\+\_\+lines} & Max number of blank lines to consume, or zero to consider them as data (single read). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS\+: connection established with data available, A\+P\+R\+\_\+\+E\+A\+G\+A\+IN\+: connection established and empty, A\+P\+R\+\_\+\+N\+O\+T\+F\+O\+U\+ND\+: too much blank lines, A\+P\+R\+\_\+\+E$\ast$\+: connection/general error.
\end{DoxyReturn}
This hook allows modules to insert filters for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & the current request This hook allows modules to affect the request immediately after the per-\/directory configuration for the request has been generated. \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (allow acces), D\+E\+C\+L\+I\+N\+ED (let later modules decide), or H\+T\+T\+P\+\_\+... (deny access) This hook allows a module to force authn to be required when processing a request. This hook should be registered with ap\+\_\+hook\+\_\+force\+\_\+authn(). 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (force authn), D\+E\+C\+L\+I\+N\+ED (let later modules decide) This hook allows modules to handle/emulate the apr\+\_\+stat() calls needed for directory walk. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em finfo} & where to put the stat data \\
\hline
{\em r} & The current request \\
\hline
{\em wanted} & A\+P\+R\+\_\+\+F\+I\+N\+F\+O\+\_\+$\ast$ flags to pass to apr\+\_\+stat() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
apr\+\_\+status\+\_\+t or A\+P\+\_\+\+D\+E\+C\+L\+I\+N\+ED (let later modules decide)
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request. Note that if used with an access\+\_\+checker hook, an access\+\_\+checker\+\_\+ex hook or an authz provider; the caller should take steps to avoid a loop since this function is implemented by calling these hooks. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if authentication is required, F\+A\+L\+SE otherwise
\end{DoxyReturn}
Match the host in the header with the hostname of the server for this request. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em host} & The hostname in the headers \\
\hline
{\em port} & The port from the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
return 1 if the host\+:port matches any of the aliases of r-\/$>$server, return 0 otherwise
\end{DoxyReturn}
Do a weak E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Do a strong E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Find http tokens, see the definition of token from R\+F\+C2068 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
find http tokens from the end of the line 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
Check for an Absolute U\+RI syntax 
\begin{DoxyParams}{Parameters}
{\em u} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if U\+RI, 0 otherwise
\end{DoxyReturn}
Unescape a string 
\begin{DoxyParams}{Parameters}
{\em url} & The string to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL, but leaving \%2f (slashes) escaped 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
{\em decode\+\_\+slashes} & Whether or not slashes should be decoded \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape an application/x-\/www-\/form-\/urlencoded string 
\begin{DoxyParams}{Parameters}
{\em query} & The query to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Count the number of directories in a path 
\begin{DoxyParams}{Parameters}
{\em path} & The path to count \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of directories
\end{DoxyReturn}
Test if the given path has an absolute path. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em dir} & The directory name \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The converse is not necessarily true, some OS\textquotesingle{}s (Win32/\+O\+S2/\+Netware) have multiple forms of absolute paths. This only reports if the path is absolute in a canonical sense.
\end{DoxyNote}
Does the provided string contain wildcard characters? This is useful for determining if the string should be passed to strcmp\+\_\+match or to strcmp. The only wildcard characters recognized are \textquotesingle{}?\textquotesingle{} and \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the string has wildcards, 0 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{}, ignoring case 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
After performing a successful regex match, you may use this function to perform a series of string substitutions based on subexpressions that were matched during the call to ap\+\_\+regexec 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em result} & where to store the result, will be set to N\+U\+LL on error \\
\hline
{\em input} & An arbitrary string containing \$1 through \$9. These are replaced with the corresponding matched sub-\/expressions \\
\hline
{\em source} & The string that was originally matched to the regex \\
\hline
{\em nmatch} & the nmatch returned from ap\+\_\+pregex \\
\hline
{\em pmatch} & the pmatch array returned from ap\+\_\+pregex \\
\hline
{\em maxlen} & the maximum string length to return, 0 for unlimited \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if successful, A\+P\+R\+\_\+\+E\+N\+O\+M\+EM or other error code otherwise.
\end{DoxyReturn}
Search a string from left to right for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Search a string from right to left for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Parse a given timeout parameter string into an apr\+\_\+interval\+\_\+time\+\_\+t value. The unit of the time interval is given as postfix string to the numeric string. Currently the following units are understood\+:

ms \+: milliseconds s \+: seconds mi\mbox{[}n\mbox{]} \+: minutes h \+: hours

If no unit is contained in the given timeout parameter the default\+\_\+time\+\_\+unit will be used instead. 
\begin{DoxyParams}{Parameters}
{\em timeout\+\_\+parameter} & The string containing the timeout parameter. \\
\hline
{\em timeout} & The timeout value to be returned. \\
\hline
{\em default\+\_\+time\+\_\+unit} & The default time unit to use if none is specified in timeout\+\_\+parameter. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the parsing was successful or not.
\end{DoxyReturn}
Determine if a request has a request body or not.


\begin{DoxyParams}{Parameters}
{\em r} & the \hyperlink{structrequest__rec}{request\+\_\+rec} of the request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
truth value
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em p} & pool to use to allocate dest \\
\hline
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, pre-\/allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Read the body and parse any form found, which must be of the type application/x-\/www-\/form-\/urlencoded. 
\begin{DoxyParams}{Parameters}
{\em r} & request containing P\+O\+S\+Ted form data \\
\hline
{\em f} & filter \\
\hline
{\em ptr} & returned array of \hyperlink{structap__form__pair__t}{ap\+\_\+form\+\_\+pair\+\_\+t} \\
\hline
{\em num} & max num of params or -\/1 for unlimited \\
\hline
{\em size} & max size allowed for parsed data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK or H\+T\+TP error
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory -\/ this version is symlink aware 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Get the first index of the string in the array or -\/1 if not found. Start searching a start. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
{\em start} & Start index for search. If start is out of bounds (negative or equal to array length or greater), -\/1 will be returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of string in array or -\/1
\end{DoxyReturn}
Check if the string is member of the given array by strcmp. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!=0 iff string is member of array (via strcmp)
\end{DoxyReturn}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmp, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmpn, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Safely signal an M\+PM child process, if the process is in the current process group. Otherwise fail. 
\begin{DoxyParams}{Parameters}
{\em pid} & the process id of a child process to signal \\
\hline
{\em sig} & the signal number to send \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if signal is sent, otherwise an error as per kill(3); A\+P\+R\+\_\+\+E\+I\+N\+V\+AL is returned if passed either an invalid ($<$ 1) pid, or if the pid is not in the current process group
\end{DoxyReturn}
Log why a child died to the error log, if the child died without the parent signalling it. 
\begin{DoxyParams}{Parameters}
{\em pid} & The child that has died \\
\hline
{\em why} & The return code of the child process \\
\hline
{\em status} & The status returned from ap\+\_\+wait\+\_\+or\+\_\+timeout \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, A\+P\+E\+X\+I\+T\+\_\+\+C\+H\+I\+L\+D\+F\+A\+T\+AL if M\+PM should terminate
\end{DoxyReturn}
Open the pipe-\/of-\/death. The pipe of death is used to tell all child processes that it is time to die gracefully. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & the pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to.\\
\hline
\end{DoxyParams}
Open the extended pipe-\/of-\/death. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & The pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the extended pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & The pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the extended pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to. \\
\hline
{\em graceful} & restart-\/type\\
\hline
\end{DoxyParams}
Write an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em val} & The value to place in the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the D\+E\+F\+A\+U\+L\+T\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em maxage} & If non zero, a Max-\/\+Age header will be added to the cookie. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2109 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name} & The name of the cookie. \\
\hline
{\em attrs} & The string containing additional cookie attributes. If N\+U\+LL, the C\+L\+E\+A\+R\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the C\+L\+E\+A\+R\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Read a cookie called name, placing its value in val.

Both the Cookie and Cookie2 headers are scanned for the cookie.

If the cookie is duplicated, this function returns A\+P\+R\+\_\+\+E\+G\+E\+N\+E\+R\+AL. If found, and if remove is non zero, the cookie will be removed from the headers, and thus kept private from the backend.

Sanity check a given string that it exists, is not empty, and does not contain the special characters \textquotesingle{}=\textquotesingle{}, \textquotesingle{};\textquotesingle{} and \textquotesingle{}\&\textquotesingle{}.

It is used to sanity check the cookie names.

Pass the current bucket brigade down to the next filter on the filter stack. The filter returns an apr\+\_\+status\+\_\+t value. If the bottom-\/most filter doesn\textquotesingle{}t write to the network, then \hyperlink{group__APACHE__CORE__DAEMON_gab6541339293a2dc16d92208f9656ba02}{A\+P\+\_\+\+N\+O\+B\+O\+D\+Y\+\_\+\+W\+R\+O\+TE} is returned. 
\begin{DoxyParams}{Parameters}
{\em filter} & The next filter in the chain \\
\hline
{\em bucket} & The current bucket brigade\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Ownership of the brigade is retained by the caller. On return, the contents of the brigade are U\+N\+D\+E\+F\+I\+N\+ED, and the caller must either call apr\+\_\+brigade\+\_\+cleanup or apr\+\_\+brigade\+\_\+destroy on the brigade.
\end{DoxyRemark}
Pass the current bucket brigade down to the next filter on the filter stack checking for filter errors. The filter returns an apr\+\_\+status\+\_\+t value. Returns \hyperlink{group__APACHE__CORE__DAEMON_gaba51915c87d64af47fb1cc59348961c9}{OK} if the brigade is successfully passed \hyperlink{group__APACHE__CORE__DAEMON_ga571664f1af74affc2b898a892f335b82}{A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR} on a filter error \hyperlink{group__HTTP__Status_ga5d9777e02c26063c2985e39ef71091d2}{H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR} on all other errors 
\begin{DoxyParams}{Parameters}
{\em r} & The request rec \\
\hline
{\em bucket} & The current bucket brigade \\
\hline
{\em fmt} & The format string. If N\+U\+LL defaults to \char`\"{}ap\+\_\+pass\+\_\+brigade returned\char`\"{} \\
\hline
{\em ...} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Ownership of the brigade is retained by the caller. On return, the contents of the brigade are U\+N\+D\+E\+F\+I\+N\+ED, and the caller must either call apr\+\_\+brigade\+\_\+cleanup or apr\+\_\+brigade\+\_\+destroy on the brigade.
\end{DoxyRemark}
Remove an input filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em next} & The filter stack to search \\
\hline
{\em handle} & The filter handle (name) to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS on removal or error
\end{DoxyReturn}
Remove an output filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em next} & The filter stack to search \\
\hline
{\em handle} & The filter handle (name) to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS on removal or error
\end{DoxyReturn}
prepare a bucket brigade to be setaside. If a different brigade was set-\/aside earlier, then the two brigades are concatenated together. 
\begin{DoxyParams}{Parameters}
{\em f} & The current filter \\
\hline
{\em save\+\_\+to} & The brigade that was previously set-\/aside. Regardless, the new bucket brigade is returned in this location. \\
\hline
{\em b} & The bucket brigade to save aside. This brigade is always empty on return \\
\hline
{\em p} & Ensure that all data in the brigade lives as long as this pool\\
\hline
\end{DoxyParams}
Flush the current brigade down the filter stack. 
\begin{DoxyParams}{Parameters}
{\em f} & The filter we are passing to \\
\hline
{\em bb} & The brigade to flush\\
\hline
\end{DoxyParams}
Register a module\textquotesingle{}s mutex type with core to allow configuration with the Mutex directive. This must be called in the pre\+\_\+config hook; otherwise, configuration directives referencing this mutex type will be rejected.

The default\+\_\+dir and default\+\_\+mech parameters allow a module to set defaults for the lock file directory and mechanism. These could be based on compile-\/time settings. These aren\textquotesingle{}t required except in special circumstances.

The order of precedence for the choice of mechanism and lock file directory is\+:


\begin{DoxyEnumerate}
\item Mutex directive specifically for this mutex e.\+g., Mutex mpm-\/default flock\+:/tmp/mpmlocks
\item Mutex directive for global default e.\+g., Mutex default flock\+:/tmp/httpdlocks
\item Defaults for this mutex provided on the ap\+\_\+mutex\+\_\+register()
\item Built-\/in defaults for all mutexes, which are A\+P\+R\+\_\+\+L\+O\+C\+K\+\_\+\+D\+E\+F\+A\+U\+LT and D\+E\+F\+A\+U\+L\+T\+\_\+\+R\+E\+L\+\_\+\+R\+U\+N\+T\+I\+M\+E\+D\+IR.
\end{DoxyEnumerate}


\begin{DoxyParams}{Parameters}
{\em pconf} & The pconf pool \\
\hline
{\em type} & The type name of the mutex, used as the basename of the file associated with the mutex, if any. This must be unique among all mutex types (mutex creation accommodates multi-\/instance mutex types); mod\+\_\+foo might have mutex types \char`\"{}foo-\/pipe\char`\"{} and \char`\"{}foo-\/shm\char`\"{} \\
\hline
{\em default\+\_\+dir} & Default dir for any lock file required for this lock, to override built-\/in defaults; should be N\+U\+LL for most modules, to respect built-\/in defaults \\
\hline
{\em default\+\_\+mech} & Default mechanism for this lock, to override built-\/in defaults; should be A\+P\+R\+\_\+\+L\+O\+C\+K\+\_\+\+D\+E\+F\+A\+U\+LT for most modules, to respect built-\/in defaults or N\+U\+LL if there are no defaults for this mutex. \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults\\
\hline
\end{DoxyParams}
Create an A\+PR global mutex that has been registered previously with ap\+\_\+mutex\+\_\+register(). Mutex files, permissions, and error logging will be handled internally. 
\begin{DoxyParams}{Parameters}
{\em mutex} & The memory address where the newly created mutex will be stored. If this mutex is disabled, mutex will be set to N\+U\+LL on output. (That is allowed only if the A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+\+A\+L\+L\+O\+W\+\_\+\+N\+O\+NE flag is passed to ap\+\_\+mutex\+\_\+register().) \\
\hline
{\em name} & The generated filename of the created mutex, or N\+U\+LL if no file was created. Pass N\+U\+LL if this result is not needed. \\
\hline
{\em type} & The type name of the mutex, matching the type name passed to ap\+\_\+mutex\+\_\+register(). \\
\hline
{\em instance\+\_\+id} & A unique string to be used in the lock filename I\+FF this mutex type is multi-\/instance, N\+U\+LL otherwise. \\
\hline
{\em server} & \hyperlink{structserver__rec}{server\+\_\+rec} of main server \\
\hline
{\em pool} & pool lifetime of the mutex \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults (currently none are defined for this function)\\
\hline
\end{DoxyParams}
Create an A\+PR proc mutex that has been registered previously with ap\+\_\+mutex\+\_\+register(). Mutex files, permissions, and error logging will be handled internally. 
\begin{DoxyParams}{Parameters}
{\em mutex} & The memory address where the newly created mutex will be stored. If this mutex is disabled, mutex will be set to N\+U\+LL on output. (That is allowed only if the A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+\+A\+L\+L\+O\+W\+\_\+\+N\+O\+NE flag is passed to ap\+\_\+mutex\+\_\+register().) \\
\hline
{\em name} & The generated filename of the created mutex, or N\+U\+LL if no file was created. Pass N\+U\+LL if this result is not needed. \\
\hline
{\em type} & The type name of the mutex, matching the type name passed to ap\+\_\+mutex\+\_\+register(). \\
\hline
{\em instance\+\_\+id} & A unique string to be used in the lock filename I\+FF this mutex type is multi-\/instance, N\+U\+LL otherwise. \\
\hline
{\em server} & \hyperlink{structserver__rec}{server\+\_\+rec} of main server \\
\hline
{\em pool} & pool lifetime of the mutex \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults (currently none are defined for this function)\\
\hline
\end{DoxyParams}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em f} & The file to read from \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em bb} & The brigade from which to read \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em getsfunc} & Function to read the headers from. This function should act like gets() \\
\hline
{\em getsfunc\+\_\+data} & The place to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em getsfunc} & Function to read the headers from. This function should act like gets() \\
\hline
{\em getsfunc\+\_\+data} & The place to read from \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
convert a recent time to its human readable components in G\+MT timezone 
\begin{DoxyParams}{Parameters}
{\em tm} & the exploded time \\
\hline
{\em t} & the time to explode\+: M\+U\+ST be within the last A\+P\+\_\+\+T\+I\+M\+E\+\_\+\+R\+E\+C\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+LD seconds \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This is a faster alternative to apr\+\_\+time\+\_\+exp\+\_\+gmt that uses a cache of pre-\/exploded time structures. It is useful for things that need to explode the current time multiple times per second, like loggers. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS iff successful
\end{DoxyReturn}
format a recent timestamp in the ctime() format. 
\begin{DoxyParams}{Parameters}
{\em date\+\_\+str} & String to write to. \\
\hline
{\em t} & the time to convert \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Consider using ap\+\_\+recent\+\_\+ctime\+\_\+ex instead. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS iff successful
\end{DoxyReturn}
format a recent timestamp in an extended ctime() format. 
\begin{DoxyParams}{Parameters}
{\em date\+\_\+str} & String to write to. \\
\hline
{\em t} & the time to convert \\
\hline
{\em option} & Additional formatting options (A\+P\+\_\+\+C\+T\+I\+M\+E\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+$\ast$). \\
\hline
{\em len} & Pointer to an int containing the length of the provided buffer. On successful return it contains the number of bytes written to the buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS iff successful, A\+P\+R\+\_\+\+E\+N\+O\+M\+EM if buffer was to short.
\end{DoxyReturn}
format a recent timestamp in the R\+F\+C822 format 
\begin{DoxyParams}{Parameters}
{\em date\+\_\+str} & String to write to (must have length $>$= A\+P\+R\+\_\+\+R\+F\+C822\+\_\+\+D\+A\+T\+E\+\_\+\+L\+EN) \\
\hline
{\em t} & the time to convert\\
\hline
\end{DoxyParams}
Read a line from an \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} and append it to an \hyperlink{structap__varbuf}{ap\+\_\+varbuf}. 
\begin{DoxyParams}{Parameters}
{\em vb} & Pointer to the \hyperlink{structap__varbuf}{ap\+\_\+varbuf} struct \\
\hline
{\em cfp} & Pointer to the \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} \\
\hline
{\em max\+\_\+len} & Maximum line length, including leading/trailing whitespace \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
See ap\+\_\+cfg\+\_\+getline() 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
vb-\/$>$strlen will be set to the length of the line 

If vb-\/$>$strlen equals A\+P\+\_\+\+V\+A\+R\+B\+U\+F\+\_\+\+U\+N\+K\+N\+O\+WN, it will be set to strlen(vb-\/$>$buf) first.
\end{DoxyNote}
One of the functions to set mutex permissions should be called in the parent process on platforms that switch identity when the server is started as root. If the child init logic is performed before switching identity (e.\+g., M\+PM setup for an accept mutex), it should only be called for SysV semaphores. Otherwise, it is safe to call it for all mutex types.

Write an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em val} & The value to place in the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the D\+E\+F\+A\+U\+L\+T\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em maxage} & If non zero, a Max-\/\+Age header will be added to the cookie.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2109 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name} & The name of the cookie.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie.\\
\hline
\end{DoxyParams}
For every virtual host on this connection, call func\+\_\+cb.

Loop through the global \hyperlink{structap__listen__rec}{ap\+\_\+listen\+\_\+rec} list and create all of the required sockets. This executes the listen and bind on the sockets. 
\begin{DoxyParams}{Parameters}
{\em s} & The global \hyperlink{structserver__rec}{server\+\_\+rec} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of open sockets.
\end{DoxyReturn}
This function duplicates ap\+\_\+listeners into multiple buckets when configured to (see Listen\+Cores\+Buckets\+Ratio) and the platform supports it (eg. number of online C\+PU cores and S\+O\+\_\+\+R\+E\+U\+S\+E\+P\+O\+RT available). 
\begin{DoxyParams}{Parameters}
{\em p} & The config pool \\
\hline
{\em s} & The global \hyperlink{structserver__rec}{server\+\_\+rec} \\
\hline
{\em buckets} & The array of listeners buckets. \\
\hline
{\em num\+\_\+buckets} & The total number of listeners buckets (array size). \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
If the given $\ast$num\+\_\+buckets is 0 (input), it will be computed according to the platform capacities, otherwise (positive) it will be preserved. The number of listeners duplicated will always match $\ast$num\+\_\+buckets, be it computed or given.
\end{DoxyRemark}
This function is used to register a provider with the global provider pool. 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to create any storage from \\
\hline
{\em provider\+\_\+group} & The group to store the provider in \\
\hline
{\em provider\+\_\+name} & The name for this provider \\
\hline
{\em provider\+\_\+version} & The version for this provider \\
\hline
{\em provider} & Opaque structure for this provider \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if all went well
\end{DoxyReturn}
Compile a regular expression. 
\begin{DoxyParams}{Parameters}
{\em preg} & Returned compiled regex \\
\hline
{\em regex} & The regular expression string \\
\hline
{\em cflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (I\+C\+A\+SE and N\+E\+W\+L\+I\+NE supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero on success or non-\/zero on error
\end{DoxyReturn}
Match a N\+U\+L-\/terminated string against a pre-\/compiled regex. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em string} & The string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, {\ttfamily A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH} otherwise
\end{DoxyReturn}
Match a string with given length against a pre-\/compiled regex. The string does not need to be N\+U\+L-\/terminated. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em buff} & The string to match \\
\hline
{\em len} & Length of the string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH otherwise
\end{DoxyReturn}
Return an array of named regex backreferences 
\begin{DoxyParams}{Parameters}
{\em preg} & The precompiled regex \\
\hline
{\em names} & The array to which the names will be added \\
\hline
{\em upper} & If non zero, uppercase the names\\
\hline
\end{DoxyParams}
Apply a regexp operation to a string. 
\begin{DoxyParams}{Parameters}
{\em pool} & Pool to allocate from \\
\hline
{\em rx} & The regex match to apply \\
\hline
{\em pattern} & The string to apply it to N\+O\+TE\+: This M\+U\+ST be kept in scope to use regexp memory \\
\hline
{\em newpattern} & The modified string (ignored if the operation doesn\textquotesingle{}t modify the string) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of times a match happens. Normally 0 (no match) or 1 (match found), but may be greater if a transforming pattern is applied with the \textquotesingle{}g\textquotesingle{} flag.
\end{DoxyReturn}
Replace logging to stderr with logging to the given file. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate out of \\
\hline
{\em file} & Name of the file to log stderr output\\
\hline
\end{DoxyParams}
Retrieve the pid from a pidfile. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em filename} & The name of the file containing the pid. If the filename is not absolute then it is assumed to be relative to Server\+Root. \\
\hline
{\em mypid} & Pointer to pid\+\_\+t (valid only if return A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS)\\
\hline
\end{DoxyParams}
Set the keepalive status for this request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if keepalive can be set, 0 otherwise
\end{DoxyReturn}
Implements condition G\+ET rules for H\+T\+T\+P/1.\+1 specification. This function inspects the client headers and determines if the response fulfills the requirements specified. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK if the response fulfills the condition G\+ET rules, some other status code otherwise
\end{DoxyReturn}
Send an entire file to the client, using sendfile if supported by the current platform 
\begin{DoxyParams}{Parameters}
{\em fd} & The file to send. \\
\hline
{\em r} & The current request \\
\hline
{\em offset} & Offset into the file to start sending. \\
\hline
{\em length} & Amount of data to send \\
\hline
{\em nbytes} & Amount of data actually sent\\
\hline
\end{DoxyParams}
Register a new request method, and return the offset that will be associated with that method.


\begin{DoxyParams}{Parameters}
{\em p} & The pool to create registered method numbers from. \\
\hline
{\em methname} & The name of the new method to register. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An int value representing an offset into a bitmask.
\end{DoxyReturn}
Search for an H\+T\+TP method name in an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure, and return true if found.


\begin{DoxyParams}{Parameters}
{\em method} & String containing the name of the method to check. \\
\hline
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if method is in the list, otherwise 0
\end{DoxyReturn}
Output one character for this request 
\begin{DoxyParams}{Parameters}
{\em c} & the character to output \\
\hline
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Write a buffer for the current request 
\begin{DoxyParams}{Parameters}
{\em buf} & The buffer to write \\
\hline
{\em nbyte} & The number of bytes to send from the buffer \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em vlist} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Flush all of the data for the current request to the client 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 if an error occurred
\end{DoxyReturn}
Index used in custom\+\_\+responses array for a specific error code (only use outside protocol.\+c is in getting them configured). 
\begin{DoxyParams}{Parameters}
{\em status} & H\+T\+TP status code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the response
\end{DoxyReturn}
Setup the client to allow \hyperlink{namespaceApache}{Apache} to read the request body. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em read\+\_\+policy} & How the server should interpret a chunked transfer-\/encoding. One of\+: 
\begin{DoxyPre}
   REQUEST\_NO\_BODY          Send 413 error if message has any body
   REQUEST\_CHUNKED\_ERROR    Send 411 error if body without Content-Length
   REQUEST\_CHUNKED\_DECHUNK  If chunked, remove the chunks for me.
\end{DoxyPre}
 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
either OK or an error code
\end{DoxyReturn}
Determine if the client has sent any data. This also sends a 100 Continue response to H\+T\+T\+P/1.\+1 clients, so modules should not be called until the module is ready to read content. \begin{DoxyWarning}{Warning}
Never call this function more than once. 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if there is no message to read, 1 otherwise
\end{DoxyReturn}
Map specific A\+PR codes returned by the filter stack to H\+T\+TP error codes, or the default status code provided. Use it as follows\+:

return ap\+\_\+map\+\_\+http\+\_\+request\+\_\+error(rv, H\+T\+T\+P\+\_\+\+B\+A\+D\+\_\+\+R\+E\+Q\+U\+E\+S\+T);

If the filter has already handled the error, A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR will be returned, which is cleanly passed through.

These mappings imply that the filter stack is reading from the downstream client, the proxy will map these codes differently. 
\begin{DoxyParams}{Parameters}
{\em rv} & A\+PR status code \\
\hline
{\em status} & Default H\+T\+TP code should the A\+PR code not be recognised \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Mapped H\+T\+TP status code
\end{DoxyReturn}
In H\+T\+T\+P/1.\+1, any method can have a body. However, most G\+ET handlers wouldn\textquotesingle{}t know what to do with a request body if they received one. This helper routine tests for and reads any message body in the request, simply discarding whatever it receives. We need to do this because failing to read the request body would cause it to be interpreted as the next request on a persistent connection. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status if request is malformed, OK otherwise
\end{DoxyReturn}
This hook allows modules to add support for a specific auth type to ap\+\_\+note\+\_\+auth\+\_\+failure 
\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
{\em auth\+\_\+type} & the configured auth\+\_\+type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED Get the password from the request headers. This function has multiple side effects due to its prior use in the old authentication framework. ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components() should be preferred.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000004}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em pw} & The password as set in the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 (OK) if it set the \textquotesingle{}pw\textquotesingle{} argument (and assured a correct value in r-\/$>$user); otherwise it returns an error code, either H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR if things are really confused, H\+T\+T\+P\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED if no authentication at all seemed to be in use, or D\+E\+C\+L\+I\+N\+ED if there was authentication but it wasn\textquotesingle{}t Basic (in which case, the caller should presumably decline as well).
\end{DoxyReturn}
Get the username and/or password from the request\textquotesingle{}s Basic authentication headers. Unlike ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+pw(), calling this function has no side effects on the passed \hyperlink{structrequest__rec}{request\+\_\+rec}.


\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em username} & If not N\+U\+LL, set to the username sent by the client \\
\hline
{\em password} & If not N\+U\+LL, set to the password sent by the client \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if the credentials were successfully parsed and returned; A\+P\+R\+\_\+\+E\+I\+N\+V\+AL if there was no authentication header sent or if the client was not using the Basic authentication scheme. username and password are unchanged on failure.
\end{DoxyReturn}
Get the next line of input for the request 
\begin{DoxyParams}{Parameters}
{\em s} & The buffer into which to read the line \\
\hline
{\em n} & The size of the buffer \\
\hline
{\em r} & The request \\
\hline
{\em flags} & Bit flag of multiple parsing options A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+F\+O\+LD Whether to merge continuation lines A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+C\+R\+LF Whether line ends must be in the form CR LF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The length of the line, if successful n, if the line is too big to fit in the buffer -\/1 for miscellaneous errors
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__APACHE__CORE__PROTO_ga4b31458cae55948009a7de050dd6acc4}{ap\+\_\+rgetline}
\end{DoxySeeAlso}
Get the method number associated with the given string, assumed to contain an H\+T\+TP method. Returns M\+\_\+\+I\+N\+V\+A\+L\+ID if not recognized. 
\begin{DoxyParams}{Parameters}
{\em method} & A string containing a valid H\+T\+TP method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The method number
\end{DoxyReturn}
Return the protocol used on the connection. Modules implementing protocol switching must register here and return the correct protocol identifier for connections they switched.

To find out the protocol for the current connection, better call \begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+protocol \hyperlink{README_8txt_a9d3df0d4bed2ac7e1c01860363ab4ac2}{which} internally uses \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} hook.
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The identifier of the protocol in place or N\+U\+LL 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000003}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}
Get the protocols that the connection and optional request may upgrade to -\/ besides the protocol currently active on the connection. These values may be used to announce to a client what choices it has.

If report\+\_\+all == 0, only protocols more preferable than the one currently being used, are reported. Otherwise, all available protocols beside the current one are being reported.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em report\+\_\+all} & include also protocols less preferred than the current one \\
\hline
{\em pupgrades} & on return, possible protocols to upgrade to in descending order of preference. Maybe N\+U\+LL if none are available. \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000004}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Perform the actual protocol switch. The protocol given must have been selected before on the very same connection and request pair.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS, if caller may continue processing as usual A\+P\+R\+\_\+\+E\+OF, if caller needs to stop processing the connection A\+P\+R\+\_\+\+E\+I\+N\+V\+AL, if the protocol is already in place A\+P\+R\+\_\+\+N\+O\+T\+I\+M\+PL, if no module performed the switch Other errors where appropriate 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000006}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Check if the given protocol is an allowed choice on the given combination of connection, request and server.

When server is N\+U\+LL, it is taken from \hyperlink{structrequest__rec}{request\+\_\+rec}, unless \hyperlink{structrequest__rec}{request\+\_\+rec} is N\+U\+LL. Then it is taken from the connection base server.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!= 0 iff protocol is allowed 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000008}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


An internal handler used by the ap\+\_\+process\+\_\+request, all subrequest mechanisms and the redirect mechanism. 
\begin{DoxyParams}{Parameters}
{\em r} & The request, subrequest or internal redirect to pre-\/process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return code for the request
\end{DoxyReturn}
Run the handler for the subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The subrequest to run \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return code for the subrequest
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if authentication is required, 0 otherwise 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000009}{Bug}]Behavior changed in 2.\+4.\+x refactoring, A\+PI no longer usable \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000005}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+some\+\_\+authn\+\_\+required()
\end{DoxySeeAlso}
Register an authentication or authorization provider with the global provider pool. 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to create any storage from \\
\hline
{\em provider\+\_\+group} & The group to store the provider in \\
\hline
{\em provider\+\_\+name} & The name for this provider \\
\hline
{\em provider\+\_\+version} & The version for this provider \\
\hline
{\em provider} & Opaque structure for this provider \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if all went well
\end{DoxyReturn}
Determine if the current request is the main request or a subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if this is the main request, 0 otherwise
\end{DoxyReturn}
Check whether a connection is still established and has data available, optionnaly consuming blank lines (\mbox{[}CR\mbox{]}LF). 
\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em bb} & The brigade to filter \\
\hline
{\em max\+\_\+blank\+\_\+lines} & Max number of blank lines to consume, or zero to consider them as data (single read). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS\+: connection established with data available, A\+P\+R\+\_\+\+E\+A\+G\+A\+IN\+: connection established and empty, A\+P\+R\+\_\+\+N\+O\+T\+F\+O\+U\+ND\+: too much blank lines, A\+P\+R\+\_\+\+E$\ast$\+: connection/general error.
\end{DoxyReturn}
This hook allows modules to insert filters for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & the current request This hook allows modules to affect the request immediately after the per-\/directory configuration for the request has been generated. \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (allow acces), D\+E\+C\+L\+I\+N\+ED (let later modules decide), or H\+T\+T\+P\+\_\+... (deny access) This hook allows a module to force authn to be required when processing a request. This hook should be registered with ap\+\_\+hook\+\_\+force\+\_\+authn(). 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (force authn), D\+E\+C\+L\+I\+N\+ED (let later modules decide) This hook allows modules to handle/emulate the apr\+\_\+stat() calls needed for directory walk. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em finfo} & where to put the stat data \\
\hline
{\em r} & The current request \\
\hline
{\em wanted} & A\+P\+R\+\_\+\+F\+I\+N\+F\+O\+\_\+$\ast$ flags to pass to apr\+\_\+stat() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
apr\+\_\+status\+\_\+t or A\+P\+\_\+\+D\+E\+C\+L\+I\+N\+ED (let later modules decide)
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request. Note that if used with an access\+\_\+checker hook, an access\+\_\+checker\+\_\+ex hook or an authz provider; the caller should take steps to avoid a loop since this function is implemented by calling these hooks. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if authentication is required, F\+A\+L\+SE otherwise
\end{DoxyReturn}
For every virtual host on this connection, call func\+\_\+cb. 
\begin{DoxyParams}{Parameters}
{\em conn} & The current connection \\
\hline
{\em func\+\_\+cb} & Function called for every Name Based Virtual Host for this connection. \\
\hline
{\em baton} & Opaque object passed to func\+\_\+cb. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return value from func\+\_\+cb. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
If func\+\_\+cb returns non-\/zero, the function will return at this point, and not continue iterating the virtual hosts.
\end{DoxyNote}
Match the host in the header with the hostname of the server for this request. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em host} & The hostname in the headers \\
\hline
{\em port} & The port from the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
return 1 if the host\+:port matches any of the aliases of r-\/$>$server, return 0 otherwise
\end{DoxyReturn}
Find an item in canonical form (lowercase, no extra spaces) within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Do a weak E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Do a strong E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Find http tokens, see the definition of token from R\+F\+C2068 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
find http tokens from the end of the line 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
Check for an Absolute U\+RI syntax 
\begin{DoxyParams}{Parameters}
{\em u} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if U\+RI, 0 otherwise
\end{DoxyReturn}
Unescape a string 
\begin{DoxyParams}{Parameters}
{\em url} & The string to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL, but leaving \%2f (slashes) escaped 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
{\em decode\+\_\+slashes} & Whether or not slashes should be decoded \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape an application/x-\/www-\/form-\/urlencoded string 
\begin{DoxyParams}{Parameters}
{\em query} & The query to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Count the number of directories in a path 
\begin{DoxyParams}{Parameters}
{\em path} & The path to count \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of directories
\end{DoxyReturn}
Test if the given path has an absolute path. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em dir} & The directory name \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The converse is not necessarily true, some OS\textquotesingle{}s (Win32/\+O\+S2/\+Netware) have multiple forms of absolute paths. This only reports if the path is absolute in a canonical sense.
\end{DoxyNote}
Does the provided string contain wildcard characters? This is useful for determining if the string should be passed to strcmp\+\_\+match or to strcmp. The only wildcard characters recognized are \textquotesingle{}?\textquotesingle{} and \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the string has wildcards, 0 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{}, ignoring case 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
After performing a successful regex match, you may use this function to perform a series of string substitutions based on subexpressions that were matched during the call to ap\+\_\+regexec 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em result} & where to store the result, will be set to N\+U\+LL on error \\
\hline
{\em input} & An arbitrary string containing \$1 through \$9. These are replaced with the corresponding matched sub-\/expressions \\
\hline
{\em source} & The string that was originally matched to the regex \\
\hline
{\em nmatch} & the nmatch returned from ap\+\_\+pregex \\
\hline
{\em pmatch} & the pmatch array returned from ap\+\_\+pregex \\
\hline
{\em maxlen} & the maximum string length to return, 0 for unlimited \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if successful, A\+P\+R\+\_\+\+E\+N\+O\+M\+EM or other error code otherwise.
\end{DoxyReturn}
Search a string from left to right for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Search a string from right to left for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Parse a given timeout parameter string into an apr\+\_\+interval\+\_\+time\+\_\+t value. The unit of the time interval is given as postfix string to the numeric string. Currently the following units are understood\+:

ms \+: milliseconds s \+: seconds mi\mbox{[}n\mbox{]} \+: minutes h \+: hours

If no unit is contained in the given timeout parameter the default\+\_\+time\+\_\+unit will be used instead. 
\begin{DoxyParams}{Parameters}
{\em timeout\+\_\+parameter} & The string containing the timeout parameter. \\
\hline
{\em timeout} & The timeout value to be returned. \\
\hline
{\em default\+\_\+time\+\_\+unit} & The default time unit to use if none is specified in timeout\+\_\+parameter. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the parsing was successful or not.
\end{DoxyReturn}
Determine if a request has a request body or not.


\begin{DoxyParams}{Parameters}
{\em r} & the \hyperlink{structrequest__rec}{request\+\_\+rec} of the request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
truth value
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em p} & pool to use to allocate dest \\
\hline
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, pre-\/allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Read the body and parse any form found, which must be of the type application/x-\/www-\/form-\/urlencoded. 
\begin{DoxyParams}{Parameters}
{\em r} & request containing P\+O\+S\+Ted form data \\
\hline
{\em f} & filter \\
\hline
{\em ptr} & returned array of \hyperlink{structap__form__pair__t}{ap\+\_\+form\+\_\+pair\+\_\+t} \\
\hline
{\em num} & max num of params or -\/1 for unlimited \\
\hline
{\em size} & max size allowed for parsed data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK or H\+T\+TP error
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory -\/ this version is symlink aware 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Get the first index of the string in the array or -\/1 if not found. Start searching a start. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
{\em start} & Start index for search. If start is out of bounds (negative or equal to array length or greater), -\/1 will be returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of string in array or -\/1
\end{DoxyReturn}
Check if the string is member of the given array by strcmp. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!=0 iff string is member of array (via strcmp)
\end{DoxyReturn}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmp, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmpn, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Unregister an M\+PM child process which was previously registered by a call to ap\+\_\+register\+\_\+extra\+\_\+mpm\+\_\+process(). 
\begin{DoxyParams}{Parameters}
{\em pid} & The process id of an M\+PM child process which no longer needs to be reclaimed. \\
\hline
{\em old\+\_\+gen} & Set to the server generation of the process, if found. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the process was found and removed, 0 otherwise
\end{DoxyReturn}
Safely signal an M\+PM child process, if the process is in the current process group. Otherwise fail. 
\begin{DoxyParams}{Parameters}
{\em pid} & the process id of a child process to signal \\
\hline
{\em sig} & the signal number to send \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if signal is sent, otherwise an error as per kill(3); A\+P\+R\+\_\+\+E\+I\+N\+V\+AL is returned if passed either an invalid ($<$ 1) pid, or if the pid is not in the current process group
\end{DoxyReturn}
Log why a child died to the error log, if the child died without the parent signalling it. 
\begin{DoxyParams}{Parameters}
{\em pid} & The child that has died \\
\hline
{\em why} & The return code of the child process \\
\hline
{\em status} & The status returned from ap\+\_\+wait\+\_\+or\+\_\+timeout \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, A\+P\+E\+X\+I\+T\+\_\+\+C\+H\+I\+L\+D\+F\+A\+T\+AL if M\+PM should terminate
\end{DoxyReturn}
Open the pipe-\/of-\/death. The pipe of death is used to tell all child processes that it is time to die gracefully. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & the pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to.\\
\hline
\end{DoxyParams}
Open the extended pipe-\/of-\/death. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & The pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the extended pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & The pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the extended pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to. \\
\hline
{\em graceful} & restart-\/type\\
\hline
\end{DoxyParams}
Evaluate a parse tree, simple interface 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em expr} & The expression to be evaluated \\
\hline
{\em err} & Where an error message should be stored \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$ 0 if expression evaluates to true, == 0 if false, $<$ 0 on error 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
err will be set to N\+U\+LL on success, or to an error message on error 

request headers used during evaluation will be added to the Vary\+: response header, unless \hyperlink{group__AP__EXPR_ga2b831a2e84340ada00100fa078dce1ed}{A\+P\+\_\+\+E\+X\+P\+R\+\_\+\+F\+L\+A\+G\+\_\+\+D\+O\+N\+T\+\_\+\+V\+A\+RY} is set.
\end{DoxyNote}
Evaluate a parse tree, with access to regexp backreference 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em expr} & The expression to be evaluated \\
\hline
{\em nmatch} & size of the regex match vector pmatch \\
\hline
{\em pmatch} & information about regex matches \\
\hline
{\em source} & the string that pmatch applies to \\
\hline
{\em err} & Where an error message should be stored \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$ 0 if expression evaluates to true, == 0 if false, $<$ 0 on error 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
err will be set to N\+U\+LL on success, or to an error message on error 

nmatch/pmatch/source can be used both to make previous matches available to ap\+\_\+expr\+\_\+exec\+\_\+re and to use ap\+\_\+expr\+\_\+exec\+\_\+re\textquotesingle{}s matches later on. 

request headers used during evaluation will be added to the Vary\+: response header, unless \hyperlink{group__AP__EXPR_ga2b831a2e84340ada00100fa078dce1ed}{A\+P\+\_\+\+E\+X\+P\+R\+\_\+\+F\+L\+A\+G\+\_\+\+D\+O\+N\+T\+\_\+\+V\+A\+RY} is set.
\end{DoxyNote}
Evaluate a parse tree, full featured version 
\begin{DoxyParams}{Parameters}
{\em ctx} & The evaluation context with all data filled in \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$ 0 if expression evaluates to true, == 0 if false, $<$ 0 on error 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
$\ast$ctx-\/$>$err will be set to N\+U\+LL on success, or to an error message on error 

request headers used during evaluation will be added to the Vary\+: response header if ctx-\/$>$vary\+\_\+this is set.
\end{DoxyNote}
This function duplicates ap\+\_\+listeners into multiple buckets when configured to (see Listen\+Cores\+Buckets\+Ratio) and the platform supports it (eg. number of online C\+PU cores and S\+O\+\_\+\+R\+E\+U\+S\+E\+P\+O\+RT available). 
\begin{DoxyParams}{Parameters}
{\em p} & The config pool \\
\hline
{\em s} & The global \hyperlink{structserver__rec}{server\+\_\+rec} \\
\hline
{\em buckets} & The array of listeners buckets. \\
\hline
{\em num\+\_\+buckets} & The total number of listeners buckets (array size). \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
If the given $\ast$num\+\_\+buckets is 0 (input), it will be computed according to the platform capacities, otherwise (positive) it will be preserved. The number of listeners duplicated will always match $\ast$num\+\_\+buckets, be it computed or given.
\end{DoxyRemark}
Match a N\+U\+L-\/terminated string against a pre-\/compiled regex. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em string} & The string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, {\ttfamily A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH} otherwise
\end{DoxyReturn}
Match a string with given length against a pre-\/compiled regex. The string does not need to be N\+U\+L-\/terminated. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em buff} & The string to match \\
\hline
{\em len} & Length of the string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH otherwise
\end{DoxyReturn}
Return an array of named regex backreferences 
\begin{DoxyParams}{Parameters}
{\em preg} & The precompiled regex \\
\hline
{\em names} & The array to which the names will be added \\
\hline
{\em upper} & If non zero, uppercase the names\\
\hline
\end{DoxyParams}
Apply a regexp operation to a string. 
\begin{DoxyParams}{Parameters}
{\em pool} & Pool to allocate from \\
\hline
{\em rx} & The regex match to apply \\
\hline
{\em pattern} & The string to apply it to N\+O\+TE\+: This M\+U\+ST be kept in scope to use regexp memory \\
\hline
{\em newpattern} & The modified string (ignored if the operation doesn\textquotesingle{}t modify the string) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of times a match happens. Normally 0 (no match) or 1 (match found), but may be greater if a transforming pattern is applied with the \textquotesingle{}g\textquotesingle{} flag.
\end{DoxyReturn}
Generic accessor for modules the module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em c} & The connection from which to get the loglevel. \\
\hline
{\em index} & The module\+\_\+index of the module to get the loglevel for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The module-\/specific loglevel
\end{DoxyReturn}
Generic accessor for modules the module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em c} & The connection from which to get the loglevel. \\
\hline
{\em s} & The server from which to get the loglevel if c does not have a specific loglevel configuration. \\
\hline
{\em index} & The module\+\_\+index of the module to get the loglevel for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The module-\/specific loglevel
\end{DoxyReturn}
Generic accessor for modules to get the module-\/specific loglevel 
\begin{DoxyParams}{Parameters}
{\em r} & The request from which to get the loglevel. \\
\hline
{\em index} & The module\+\_\+index of the module to get the loglevel for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The module-\/specific loglevel
\end{DoxyReturn}
Return true if the specified method is limited by being listed in a $<$Limit$>$ container, or by {\itshape not} being listed in a $<$Limit\+Except$>$ container.


\begin{DoxyParams}{Parameters}
{\em method} & Pointer to a string specifying the method to check. \\
\hline
{\em cmd} & Pointer to the cmd\+\_\+parms structure passed to the directive handler. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the method is not limited in the current scope
\end{DoxyReturn}
Open a \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} as \hyperlink{structapr__file__t}{apr\+\_\+file\+\_\+t} 
\begin{DoxyParams}{Parameters}
{\em ret\+\_\+cfg} & open \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} struct pointer \\
\hline
{\em p} & The pool to allocate the structure from \\
\hline
{\em name} & the name of the file to open\\
\hline
\end{DoxyParams}
Read one line from open \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t}, strip leading and trailing whitespace, increase line number 
\begin{DoxyParams}{Parameters}
{\em buf} & place to store the line read \\
\hline
{\em bufsize} & size of the buffer \\
\hline
{\em cfp} & File to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status, A\+P\+R\+\_\+\+E\+N\+O\+S\+PC if bufsize is too small for the line
\end{DoxyReturn}
Read one char from open configfile\+\_\+t, increase line number upon LF 
\begin{DoxyParams}{Parameters}
{\em ch} & place to store the char read \\
\hline
{\em cfp} & The file to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status
\end{DoxyReturn}
Detach from open \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t}, calling the close handler 
\begin{DoxyParams}{Parameters}
{\em cfp} & The file to close \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on failure
\end{DoxyReturn}
Process all directives in the config tree 
\begin{DoxyParams}{Parameters}
{\em s} & The server rec to use in the command parms \\
\hline
{\em conftree} & The config tree to process \\
\hline
{\em p} & The pool for general allocation \\
\hline
{\em ptemp} & The pool for temporary allocations \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK if no problems
\end{DoxyReturn}
Retrieve the value of the Allow\+Override for this request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the overrides bitmask
\end{DoxyReturn}
Check if the current request is beyond the configured max. number of redirects or subrequests 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true (is exceeded) or false
\end{DoxyReturn}
Check for a definition from the server command line 
\begin{DoxyParams}{Parameters}
{\em name} & The define to check for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if defined, 0 otherwise
\end{DoxyReturn}
How the requires lines must be met. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
How the requirements must be met. One of\+: 
\begin{DoxyPre}
     SATISFY\_ANY    -- any of the requirements must be met.
     SATISFY\_ALL    -- all of the requirements must be met.
     SATISFY\_NOSPEC -- There are no applicable satisfy lines
\end{DoxyPre}

\end{DoxyReturn}
Query the server for some state information 
\begin{DoxyParams}{Parameters}
{\em query\+\_\+code} & Which information is requested \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the requested state information
\end{DoxyReturn}
Retrieve the pid from a pidfile. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em filename} & The name of the file containing the pid. If the filename is not absolute then it is assumed to be relative to Server\+Root. \\
\hline
{\em mypid} & Pointer to pid\+\_\+t (valid only if return A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS)\\
\hline
\end{DoxyParams}
Implements condition G\+ET rules for H\+T\+T\+P/1.\+1 specification. This function inspects the client headers and determines if the response fulfills the requirements specified. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK if the response fulfills the condition G\+ET rules, some other status code otherwise
\end{DoxyReturn}
Send an entire file to the client, using sendfile if supported by the current platform 
\begin{DoxyParams}{Parameters}
{\em fd} & The file to send. \\
\hline
{\em r} & The current request \\
\hline
{\em offset} & Offset into the file to start sending. \\
\hline
{\em length} & Amount of data to send \\
\hline
{\em nbytes} & Amount of data actually sent\\
\hline
\end{DoxyParams}
Register a new request method, and return the offset that will be associated with that method.


\begin{DoxyParams}{Parameters}
{\em p} & The pool to create registered method numbers from. \\
\hline
{\em methname} & The name of the new method to register. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An int value representing an offset into a bitmask.
\end{DoxyReturn}
Search for an H\+T\+TP method name in an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure, and return true if found.


\begin{DoxyParams}{Parameters}
{\em method} & String containing the name of the method to check. \\
\hline
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if method is in the list, otherwise 0
\end{DoxyReturn}
Output one character for this request 
\begin{DoxyParams}{Parameters}
{\em c} & the character to output \\
\hline
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Write a buffer for the current request 
\begin{DoxyParams}{Parameters}
{\em buf} & The buffer to write \\
\hline
{\em nbyte} & The number of bytes to send from the buffer \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em vlist} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Flush all of the data for the current request to the client 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 if an error occurred
\end{DoxyReturn}
Index used in custom\+\_\+responses array for a specific error code (only use outside protocol.\+c is in getting them configured). 
\begin{DoxyParams}{Parameters}
{\em status} & H\+T\+TP status code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the response
\end{DoxyReturn}
Setup the client to allow \hyperlink{namespaceApache}{Apache} to read the request body. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em read\+\_\+policy} & How the server should interpret a chunked transfer-\/encoding. One of\+: 
\begin{DoxyPre}
   REQUEST\_NO\_BODY          Send 413 error if message has any body
   REQUEST\_CHUNKED\_ERROR    Send 411 error if body without Content-Length
   REQUEST\_CHUNKED\_DECHUNK  If chunked, remove the chunks for me.
\end{DoxyPre}
 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
either OK or an error code
\end{DoxyReturn}
Determine if the client has sent any data. This also sends a 100 Continue response to H\+T\+T\+P/1.\+1 clients, so modules should not be called until the module is ready to read content. \begin{DoxyWarning}{Warning}
Never call this function more than once. 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if there is no message to read, 1 otherwise
\end{DoxyReturn}
Map specific A\+PR codes returned by the filter stack to H\+T\+TP error codes, or the default status code provided. Use it as follows\+:

return ap\+\_\+map\+\_\+http\+\_\+request\+\_\+error(rv, H\+T\+T\+P\+\_\+\+B\+A\+D\+\_\+\+R\+E\+Q\+U\+E\+S\+T);

If the filter has already handled the error, A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR will be returned, which is cleanly passed through.

These mappings imply that the filter stack is reading from the downstream client, the proxy will map these codes differently. 
\begin{DoxyParams}{Parameters}
{\em rv} & A\+PR status code \\
\hline
{\em status} & Default H\+T\+TP code should the A\+PR code not be recognised \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Mapped H\+T\+TP status code
\end{DoxyReturn}
In H\+T\+T\+P/1.\+1, any method can have a body. However, most G\+ET handlers wouldn\textquotesingle{}t know what to do with a request body if they received one. This helper routine tests for and reads any message body in the request, simply discarding whatever it receives. We need to do this because failing to read the request body would cause it to be interpreted as the next request on a persistent connection. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status if request is malformed, OK otherwise
\end{DoxyReturn}
This hook allows modules to add support for a specific auth type to ap\+\_\+note\+\_\+auth\+\_\+failure 
\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
{\em auth\+\_\+type} & the configured auth\+\_\+type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED Get the password from the request headers. This function has multiple side effects due to its prior use in the old authentication framework. ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components() should be preferred.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000004}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em pw} & The password as set in the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 (OK) if it set the \textquotesingle{}pw\textquotesingle{} argument (and assured a correct value in r-\/$>$user); otherwise it returns an error code, either H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR if things are really confused, H\+T\+T\+P\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED if no authentication at all seemed to be in use, or D\+E\+C\+L\+I\+N\+ED if there was authentication but it wasn\textquotesingle{}t Basic (in which case, the caller should presumably decline as well).
\end{DoxyReturn}
Get the username and/or password from the request\textquotesingle{}s Basic authentication headers. Unlike ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+pw(), calling this function has no side effects on the passed \hyperlink{structrequest__rec}{request\+\_\+rec}.


\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em username} & If not N\+U\+LL, set to the username sent by the client \\
\hline
{\em password} & If not N\+U\+LL, set to the password sent by the client \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if the credentials were successfully parsed and returned; A\+P\+R\+\_\+\+E\+I\+N\+V\+AL if there was no authentication header sent or if the client was not using the Basic authentication scheme. username and password are unchanged on failure.
\end{DoxyReturn}
Get the next line of input for the request 
\begin{DoxyParams}{Parameters}
{\em s} & The buffer into which to read the line \\
\hline
{\em n} & The size of the buffer \\
\hline
{\em r} & The request \\
\hline
{\em flags} & Bit flag of multiple parsing options A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+F\+O\+LD Whether to merge continuation lines A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+C\+R\+LF Whether line ends must be in the form CR LF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The length of the line, if successful n, if the line is too big to fit in the buffer -\/1 for miscellaneous errors
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__APACHE__CORE__PROTO_ga4b31458cae55948009a7de050dd6acc4}{ap\+\_\+rgetline}
\end{DoxySeeAlso}
Get the method number associated with the given string, assumed to contain an H\+T\+TP method. Returns M\+\_\+\+I\+N\+V\+A\+L\+ID if not recognized. 
\begin{DoxyParams}{Parameters}
{\em method} & A string containing a valid H\+T\+TP method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The method number
\end{DoxyReturn}
Return the protocol used on the connection. Modules implementing protocol switching must register here and return the correct protocol identifier for connections they switched.

To find out the protocol for the current connection, better call \begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+protocol \hyperlink{README_8txt_a9d3df0d4bed2ac7e1c01860363ab4ac2}{which} internally uses \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} hook.
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The identifier of the protocol in place or N\+U\+LL 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000003}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}
Get the protocols that the connection and optional request may upgrade to -\/ besides the protocol currently active on the connection. These values may be used to announce to a client what choices it has.

If report\+\_\+all == 0, only protocols more preferable than the one currently being used, are reported. Otherwise, all available protocols beside the current one are being reported.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em report\+\_\+all} & include also protocols less preferred than the current one \\
\hline
{\em pupgrades} & on return, possible protocols to upgrade to in descending order of preference. Maybe N\+U\+LL if none are available. \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000004}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Perform the actual protocol switch. The protocol given must have been selected before on the very same connection and request pair.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS, if caller may continue processing as usual A\+P\+R\+\_\+\+E\+OF, if caller needs to stop processing the connection A\+P\+R\+\_\+\+E\+I\+N\+V\+AL, if the protocol is already in place A\+P\+R\+\_\+\+N\+O\+T\+I\+M\+PL, if no module performed the switch Other errors where appropriate 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000006}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Check if the given protocol is an allowed choice on the given combination of connection, request and server.

When server is N\+U\+LL, it is taken from \hyperlink{structrequest__rec}{request\+\_\+rec}, unless \hyperlink{structrequest__rec}{request\+\_\+rec} is N\+U\+LL. Then it is taken from the connection base server.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!= 0 iff protocol is allowed 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000008}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Run the handler for the subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The subrequest to run \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return code for the subrequest
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if authentication is required, 0 otherwise 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000009}{Bug}]Behavior changed in 2.\+4.\+x refactoring, A\+PI no longer usable \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000005}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+some\+\_\+authn\+\_\+required()
\end{DoxySeeAlso}
Register an authentication or authorization provider with the global provider pool. 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to create any storage from \\
\hline
{\em provider\+\_\+group} & The group to store the provider in \\
\hline
{\em provider\+\_\+name} & The name for this provider \\
\hline
{\em provider\+\_\+version} & The version for this provider \\
\hline
{\em provider} & Opaque structure for this provider \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if all went well
\end{DoxyReturn}
Determine if the current request is the main request or a subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if this is the main request, 0 otherwise
\end{DoxyReturn}
Check whether a connection is still established and has data available, optionnaly consuming blank lines (\mbox{[}CR\mbox{]}LF). 
\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em bb} & The brigade to filter \\
\hline
{\em max\+\_\+blank\+\_\+lines} & Max number of blank lines to consume, or zero to consider them as data (single read). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS\+: connection established with data available, A\+P\+R\+\_\+\+E\+A\+G\+A\+IN\+: connection established and empty, A\+P\+R\+\_\+\+N\+O\+T\+F\+O\+U\+ND\+: too much blank lines, A\+P\+R\+\_\+\+E$\ast$\+: connection/general error.
\end{DoxyReturn}
This hook allows modules to insert filters for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & the current request This hook allows modules to affect the request immediately after the per-\/directory configuration for the request has been generated. \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (allow acces), D\+E\+C\+L\+I\+N\+ED (let later modules decide), or H\+T\+T\+P\+\_\+... (deny access) This hook allows a module to force authn to be required when processing a request. This hook should be registered with ap\+\_\+hook\+\_\+force\+\_\+authn(). 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (force authn), D\+E\+C\+L\+I\+N\+ED (let later modules decide) This hook allows modules to handle/emulate the apr\+\_\+stat() calls needed for directory walk. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em finfo} & where to put the stat data \\
\hline
{\em r} & The current request \\
\hline
{\em wanted} & A\+P\+R\+\_\+\+F\+I\+N\+F\+O\+\_\+$\ast$ flags to pass to apr\+\_\+stat() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
apr\+\_\+status\+\_\+t or A\+P\+\_\+\+D\+E\+C\+L\+I\+N\+ED (let later modules decide)
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request. Note that if used with an access\+\_\+checker hook, an access\+\_\+checker\+\_\+ex hook or an authz provider; the caller should take steps to avoid a loop since this function is implemented by calling these hooks. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if authentication is required, F\+A\+L\+SE otherwise
\end{DoxyReturn}
Match the host in the header with the hostname of the server for this request. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em host} & The hostname in the headers \\
\hline
{\em port} & The port from the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
return 1 if the host\+:port matches any of the aliases of r-\/$>$server, return 0 otherwise
\end{DoxyReturn}
Do a weak E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Do a strong E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Find http tokens, see the definition of token from R\+F\+C2068 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
find http tokens from the end of the line 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
Check for an Absolute U\+RI syntax 
\begin{DoxyParams}{Parameters}
{\em u} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if U\+RI, 0 otherwise
\end{DoxyReturn}
Unescape a string 
\begin{DoxyParams}{Parameters}
{\em url} & The string to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL, but leaving \%2f (slashes) escaped 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
{\em decode\+\_\+slashes} & Whether or not slashes should be decoded \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape an application/x-\/www-\/form-\/urlencoded string 
\begin{DoxyParams}{Parameters}
{\em query} & The query to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Count the number of directories in a path 
\begin{DoxyParams}{Parameters}
{\em path} & The path to count \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of directories
\end{DoxyReturn}
Test if the given path has an absolute path. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em dir} & The directory name \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The converse is not necessarily true, some OS\textquotesingle{}s (Win32/\+O\+S2/\+Netware) have multiple forms of absolute paths. This only reports if the path is absolute in a canonical sense.
\end{DoxyNote}
Does the provided string contain wildcard characters? This is useful for determining if the string should be passed to strcmp\+\_\+match or to strcmp. The only wildcard characters recognized are \textquotesingle{}?\textquotesingle{} and \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the string has wildcards, 0 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{}, ignoring case 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
After performing a successful regex match, you may use this function to perform a series of string substitutions based on subexpressions that were matched during the call to ap\+\_\+regexec 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em result} & where to store the result, will be set to N\+U\+LL on error \\
\hline
{\em input} & An arbitrary string containing \$1 through \$9. These are replaced with the corresponding matched sub-\/expressions \\
\hline
{\em source} & The string that was originally matched to the regex \\
\hline
{\em nmatch} & the nmatch returned from ap\+\_\+pregex \\
\hline
{\em pmatch} & the pmatch array returned from ap\+\_\+pregex \\
\hline
{\em maxlen} & the maximum string length to return, 0 for unlimited \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if successful, A\+P\+R\+\_\+\+E\+N\+O\+M\+EM or other error code otherwise.
\end{DoxyReturn}
Search a string from left to right for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Search a string from right to left for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Parse a given timeout parameter string into an apr\+\_\+interval\+\_\+time\+\_\+t value. The unit of the time interval is given as postfix string to the numeric string. Currently the following units are understood\+:

ms \+: milliseconds s \+: seconds mi\mbox{[}n\mbox{]} \+: minutes h \+: hours

If no unit is contained in the given timeout parameter the default\+\_\+time\+\_\+unit will be used instead. 
\begin{DoxyParams}{Parameters}
{\em timeout\+\_\+parameter} & The string containing the timeout parameter. \\
\hline
{\em timeout} & The timeout value to be returned. \\
\hline
{\em default\+\_\+time\+\_\+unit} & The default time unit to use if none is specified in timeout\+\_\+parameter. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the parsing was successful or not.
\end{DoxyReturn}
Determine if a request has a request body or not.


\begin{DoxyParams}{Parameters}
{\em r} & the \hyperlink{structrequest__rec}{request\+\_\+rec} of the request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
truth value
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em p} & pool to use to allocate dest \\
\hline
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, pre-\/allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Read the body and parse any form found, which must be of the type application/x-\/www-\/form-\/urlencoded. 
\begin{DoxyParams}{Parameters}
{\em r} & request containing P\+O\+S\+Ted form data \\
\hline
{\em f} & filter \\
\hline
{\em ptr} & returned array of \hyperlink{structap__form__pair__t}{ap\+\_\+form\+\_\+pair\+\_\+t} \\
\hline
{\em num} & max num of params or -\/1 for unlimited \\
\hline
{\em size} & max size allowed for parsed data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK or H\+T\+TP error
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory -\/ this version is symlink aware 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Get the first index of the string in the array or -\/1 if not found. Start searching a start. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
{\em start} & Start index for search. If start is out of bounds (negative or equal to array length or greater), -\/1 will be returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of string in array or -\/1
\end{DoxyReturn}
Check if the string is member of the given array by strcmp. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!=0 iff string is member of array (via strcmp)
\end{DoxyReturn}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmp, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmpn, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Safely signal an M\+PM child process, if the process is in the current process group. Otherwise fail. 
\begin{DoxyParams}{Parameters}
{\em pid} & the process id of a child process to signal \\
\hline
{\em sig} & the signal number to send \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if signal is sent, otherwise an error as per kill(3); A\+P\+R\+\_\+\+E\+I\+N\+V\+AL is returned if passed either an invalid ($<$ 1) pid, or if the pid is not in the current process group
\end{DoxyReturn}
Log why a child died to the error log, if the child died without the parent signalling it. 
\begin{DoxyParams}{Parameters}
{\em pid} & The child that has died \\
\hline
{\em why} & The return code of the child process \\
\hline
{\em status} & The status returned from ap\+\_\+wait\+\_\+or\+\_\+timeout \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, A\+P\+E\+X\+I\+T\+\_\+\+C\+H\+I\+L\+D\+F\+A\+T\+AL if M\+PM should terminate
\end{DoxyReturn}
Open the pipe-\/of-\/death. The pipe of death is used to tell all child processes that it is time to die gracefully. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & the pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to.\\
\hline
\end{DoxyParams}
Open the extended pipe-\/of-\/death. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & The pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the extended pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & The pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the extended pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to. \\
\hline
{\em graceful} & restart-\/type\\
\hline
\end{DoxyParams}
Write an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em val} & The value to place in the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the D\+E\+F\+A\+U\+L\+T\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em maxage} & If non zero, a Max-\/\+Age header will be added to the cookie. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2109 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name} & The name of the cookie. \\
\hline
{\em attrs} & The string containing additional cookie attributes. If N\+U\+LL, the C\+L\+E\+A\+R\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the C\+L\+E\+A\+R\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Read a cookie called name, placing its value in val.

Both the Cookie and Cookie2 headers are scanned for the cookie.

If the cookie is duplicated, this function returns A\+P\+R\+\_\+\+E\+G\+E\+N\+E\+R\+AL. If found, and if remove is non zero, the cookie will be removed from the headers, and thus kept private from the backend.

Sanity check a given string that it exists, is not empty, and does not contain the special characters \textquotesingle{}=\textquotesingle{}, \textquotesingle{};\textquotesingle{} and \textquotesingle{}\&\textquotesingle{}.

It is used to sanity check the cookie names.

Pass the current bucket brigade down to the next filter on the filter stack. The filter returns an apr\+\_\+status\+\_\+t value. If the bottom-\/most filter doesn\textquotesingle{}t write to the network, then \hyperlink{group__APACHE__CORE__DAEMON_gab6541339293a2dc16d92208f9656ba02}{A\+P\+\_\+\+N\+O\+B\+O\+D\+Y\+\_\+\+W\+R\+O\+TE} is returned. 
\begin{DoxyParams}{Parameters}
{\em filter} & The next filter in the chain \\
\hline
{\em bucket} & The current bucket brigade\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Ownership of the brigade is retained by the caller. On return, the contents of the brigade are U\+N\+D\+E\+F\+I\+N\+ED, and the caller must either call apr\+\_\+brigade\+\_\+cleanup or apr\+\_\+brigade\+\_\+destroy on the brigade.
\end{DoxyRemark}
Pass the current bucket brigade down to the next filter on the filter stack checking for filter errors. The filter returns an apr\+\_\+status\+\_\+t value. Returns \hyperlink{group__APACHE__CORE__DAEMON_gaba51915c87d64af47fb1cc59348961c9}{OK} if the brigade is successfully passed \hyperlink{group__APACHE__CORE__DAEMON_ga571664f1af74affc2b898a892f335b82}{A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR} on a filter error \hyperlink{group__HTTP__Status_ga5d9777e02c26063c2985e39ef71091d2}{H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR} on all other errors 
\begin{DoxyParams}{Parameters}
{\em r} & The request rec \\
\hline
{\em bucket} & The current bucket brigade \\
\hline
{\em fmt} & The format string. If N\+U\+LL defaults to \char`\"{}ap\+\_\+pass\+\_\+brigade returned\char`\"{} \\
\hline
{\em ...} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Ownership of the brigade is retained by the caller. On return, the contents of the brigade are U\+N\+D\+E\+F\+I\+N\+ED, and the caller must either call apr\+\_\+brigade\+\_\+cleanup or apr\+\_\+brigade\+\_\+destroy on the brigade.
\end{DoxyRemark}
Remove an input filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em next} & The filter stack to search \\
\hline
{\em handle} & The filter handle (name) to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS on removal or error
\end{DoxyReturn}
Remove an output filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em next} & The filter stack to search \\
\hline
{\em handle} & The filter handle (name) to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS on removal or error
\end{DoxyReturn}
prepare a bucket brigade to be setaside. If a different brigade was set-\/aside earlier, then the two brigades are concatenated together. 
\begin{DoxyParams}{Parameters}
{\em f} & The current filter \\
\hline
{\em save\+\_\+to} & The brigade that was previously set-\/aside. Regardless, the new bucket brigade is returned in this location. \\
\hline
{\em b} & The bucket brigade to save aside. This brigade is always empty on return \\
\hline
{\em p} & Ensure that all data in the brigade lives as long as this pool\\
\hline
\end{DoxyParams}
Flush the current brigade down the filter stack. 
\begin{DoxyParams}{Parameters}
{\em f} & The filter we are passing to \\
\hline
{\em bb} & The brigade to flush\\
\hline
\end{DoxyParams}
Register a module\textquotesingle{}s mutex type with core to allow configuration with the Mutex directive. This must be called in the pre\+\_\+config hook; otherwise, configuration directives referencing this mutex type will be rejected.

The default\+\_\+dir and default\+\_\+mech parameters allow a module to set defaults for the lock file directory and mechanism. These could be based on compile-\/time settings. These aren\textquotesingle{}t required except in special circumstances.

The order of precedence for the choice of mechanism and lock file directory is\+:


\begin{DoxyEnumerate}
\item Mutex directive specifically for this mutex e.\+g., Mutex mpm-\/default flock\+:/tmp/mpmlocks
\item Mutex directive for global default e.\+g., Mutex default flock\+:/tmp/httpdlocks
\item Defaults for this mutex provided on the ap\+\_\+mutex\+\_\+register()
\item Built-\/in defaults for all mutexes, which are A\+P\+R\+\_\+\+L\+O\+C\+K\+\_\+\+D\+E\+F\+A\+U\+LT and D\+E\+F\+A\+U\+L\+T\+\_\+\+R\+E\+L\+\_\+\+R\+U\+N\+T\+I\+M\+E\+D\+IR.
\end{DoxyEnumerate}


\begin{DoxyParams}{Parameters}
{\em pconf} & The pconf pool \\
\hline
{\em type} & The type name of the mutex, used as the basename of the file associated with the mutex, if any. This must be unique among all mutex types (mutex creation accommodates multi-\/instance mutex types); mod\+\_\+foo might have mutex types \char`\"{}foo-\/pipe\char`\"{} and \char`\"{}foo-\/shm\char`\"{} \\
\hline
{\em default\+\_\+dir} & Default dir for any lock file required for this lock, to override built-\/in defaults; should be N\+U\+LL for most modules, to respect built-\/in defaults \\
\hline
{\em default\+\_\+mech} & Default mechanism for this lock, to override built-\/in defaults; should be A\+P\+R\+\_\+\+L\+O\+C\+K\+\_\+\+D\+E\+F\+A\+U\+LT for most modules, to respect built-\/in defaults or N\+U\+LL if there are no defaults for this mutex. \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults\\
\hline
\end{DoxyParams}
Create an A\+PR global mutex that has been registered previously with ap\+\_\+mutex\+\_\+register(). Mutex files, permissions, and error logging will be handled internally. 
\begin{DoxyParams}{Parameters}
{\em mutex} & The memory address where the newly created mutex will be stored. If this mutex is disabled, mutex will be set to N\+U\+LL on output. (That is allowed only if the A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+\+A\+L\+L\+O\+W\+\_\+\+N\+O\+NE flag is passed to ap\+\_\+mutex\+\_\+register().) \\
\hline
{\em name} & The generated filename of the created mutex, or N\+U\+LL if no file was created. Pass N\+U\+LL if this result is not needed. \\
\hline
{\em type} & The type name of the mutex, matching the type name passed to ap\+\_\+mutex\+\_\+register(). \\
\hline
{\em instance\+\_\+id} & A unique string to be used in the lock filename I\+FF this mutex type is multi-\/instance, N\+U\+LL otherwise. \\
\hline
{\em server} & \hyperlink{structserver__rec}{server\+\_\+rec} of main server \\
\hline
{\em pool} & pool lifetime of the mutex \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults (currently none are defined for this function)\\
\hline
\end{DoxyParams}
Create an A\+PR proc mutex that has been registered previously with ap\+\_\+mutex\+\_\+register(). Mutex files, permissions, and error logging will be handled internally. 
\begin{DoxyParams}{Parameters}
{\em mutex} & The memory address where the newly created mutex will be stored. If this mutex is disabled, mutex will be set to N\+U\+LL on output. (That is allowed only if the A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+\+A\+L\+L\+O\+W\+\_\+\+N\+O\+NE flag is passed to ap\+\_\+mutex\+\_\+register().) \\
\hline
{\em name} & The generated filename of the created mutex, or N\+U\+LL if no file was created. Pass N\+U\+LL if this result is not needed. \\
\hline
{\em type} & The type name of the mutex, matching the type name passed to ap\+\_\+mutex\+\_\+register(). \\
\hline
{\em instance\+\_\+id} & A unique string to be used in the lock filename I\+FF this mutex type is multi-\/instance, N\+U\+LL otherwise. \\
\hline
{\em server} & \hyperlink{structserver__rec}{server\+\_\+rec} of main server \\
\hline
{\em pool} & pool lifetime of the mutex \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults (currently none are defined for this function)\\
\hline
\end{DoxyParams}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em f} & The file to read from \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em bb} & The brigade from which to read \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em getsfunc} & Function to read the headers from. This function should act like gets() \\
\hline
{\em getsfunc\+\_\+data} & The place to read from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers output from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em getsfunc} & Function to read the headers from. This function should act like gets() \\
\hline
{\em getsfunc\+\_\+data} & The place to read from \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
convert a recent time to its human readable components in G\+MT timezone 
\begin{DoxyParams}{Parameters}
{\em tm} & the exploded time \\
\hline
{\em t} & the time to explode\+: M\+U\+ST be within the last A\+P\+\_\+\+T\+I\+M\+E\+\_\+\+R\+E\+C\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+LD seconds \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This is a faster alternative to apr\+\_\+time\+\_\+exp\+\_\+gmt that uses a cache of pre-\/exploded time structures. It is useful for things that need to explode the current time multiple times per second, like loggers. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS iff successful
\end{DoxyReturn}
format a recent timestamp in the ctime() format. 
\begin{DoxyParams}{Parameters}
{\em date\+\_\+str} & String to write to. \\
\hline
{\em t} & the time to convert \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Consider using ap\+\_\+recent\+\_\+ctime\+\_\+ex instead. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS iff successful
\end{DoxyReturn}
format a recent timestamp in an extended ctime() format. 
\begin{DoxyParams}{Parameters}
{\em date\+\_\+str} & String to write to. \\
\hline
{\em t} & the time to convert \\
\hline
{\em option} & Additional formatting options (A\+P\+\_\+\+C\+T\+I\+M\+E\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+$\ast$). \\
\hline
{\em len} & Pointer to an int containing the length of the provided buffer. On successful return it contains the number of bytes written to the buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS iff successful, A\+P\+R\+\_\+\+E\+N\+O\+M\+EM if buffer was to short.
\end{DoxyReturn}
format a recent timestamp in the R\+F\+C822 format 
\begin{DoxyParams}{Parameters}
{\em date\+\_\+str} & String to write to (must have length $>$= A\+P\+R\+\_\+\+R\+F\+C822\+\_\+\+D\+A\+T\+E\+\_\+\+L\+EN) \\
\hline
{\em t} & the time to convert\\
\hline
\end{DoxyParams}
Read a line from an \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} and append it to an \hyperlink{structap__varbuf}{ap\+\_\+varbuf}. 
\begin{DoxyParams}{Parameters}
{\em vb} & Pointer to the \hyperlink{structap__varbuf}{ap\+\_\+varbuf} struct \\
\hline
{\em cfp} & Pointer to the \hyperlink{structap__configfile__t}{ap\+\_\+configfile\+\_\+t} \\
\hline
{\em max\+\_\+len} & Maximum line length, including leading/trailing whitespace \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
See ap\+\_\+cfg\+\_\+getline() 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
vb-\/$>$strlen will be set to the length of the line 

If vb-\/$>$strlen equals A\+P\+\_\+\+V\+A\+R\+B\+U\+F\+\_\+\+U\+N\+K\+N\+O\+WN, it will be set to strlen(vb-\/$>$buf) first.
\end{DoxyNote}
One of the functions to set mutex permissions should be called in the parent process on platforms that switch identity when the server is started as root. If the child init logic is performed before switching identity (e.\+g., M\+PM setup for an accept mutex), it should only be called for SysV semaphores. Otherwise, it is safe to call it for all mutex types.

Write an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em val} & The value to place in the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the D\+E\+F\+A\+U\+L\+T\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em maxage} & If non zero, a Max-\/\+Age header will be added to the cookie.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2109 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name} & The name of the cookie.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie.\\
\hline
\end{DoxyParams}
For every virtual host on this connection, call func\+\_\+cb.

Loop through the global \hyperlink{structap__listen__rec}{ap\+\_\+listen\+\_\+rec} list and create all of the required sockets. This executes the listen and bind on the sockets. 
\begin{DoxyParams}{Parameters}
{\em s} & The global \hyperlink{structserver__rec}{server\+\_\+rec} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of open sockets.
\end{DoxyReturn}
This function duplicates ap\+\_\+listeners into multiple buckets when configured to (see Listen\+Cores\+Buckets\+Ratio) and the platform supports it (eg. number of online C\+PU cores and S\+O\+\_\+\+R\+E\+U\+S\+E\+P\+O\+RT available). 
\begin{DoxyParams}{Parameters}
{\em p} & The config pool \\
\hline
{\em s} & The global \hyperlink{structserver__rec}{server\+\_\+rec} \\
\hline
{\em buckets} & The array of listeners buckets. \\
\hline
{\em num\+\_\+buckets} & The total number of listeners buckets (array size). \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
If the given $\ast$num\+\_\+buckets is 0 (input), it will be computed according to the platform capacities, otherwise (positive) it will be preserved. The number of listeners duplicated will always match $\ast$num\+\_\+buckets, be it computed or given.
\end{DoxyRemark}
This function is used to register a provider with the global provider pool. 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to create any storage from \\
\hline
{\em provider\+\_\+group} & The group to store the provider in \\
\hline
{\em provider\+\_\+name} & The name for this provider \\
\hline
{\em provider\+\_\+version} & The version for this provider \\
\hline
{\em provider} & Opaque structure for this provider \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if all went well
\end{DoxyReturn}
Compile a regular expression. 
\begin{DoxyParams}{Parameters}
{\em preg} & Returned compiled regex \\
\hline
{\em regex} & The regular expression string \\
\hline
{\em cflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (I\+C\+A\+SE and N\+E\+W\+L\+I\+NE supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero on success or non-\/zero on error
\end{DoxyReturn}
Match a N\+U\+L-\/terminated string against a pre-\/compiled regex. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em string} & The string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, {\ttfamily A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH} otherwise
\end{DoxyReturn}
Match a string with given length against a pre-\/compiled regex. The string does not need to be N\+U\+L-\/terminated. 
\begin{DoxyParams}{Parameters}
{\em preg} & The pre-\/compiled regex \\
\hline
{\em buff} & The string to match \\
\hline
{\em len} & Length of the string to match \\
\hline
{\em nmatch} & Provide information regarding the location of any matches \\
\hline
{\em pmatch} & Provide information regarding the location of any matches \\
\hline
{\em eflags} & Bitwise OR of A\+P\+\_\+\+R\+E\+G\+\_\+$\ast$ flags (N\+O\+T\+B\+OL and N\+O\+T\+E\+OL supported, other flags are ignored) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for successful match, A\+P\+\_\+\+R\+E\+G\+\_\+\+N\+O\+M\+A\+T\+CH otherwise
\end{DoxyReturn}
Return an array of named regex backreferences 
\begin{DoxyParams}{Parameters}
{\em preg} & The precompiled regex \\
\hline
{\em names} & The array to which the names will be added \\
\hline
{\em upper} & If non zero, uppercase the names\\
\hline
\end{DoxyParams}
Apply a regexp operation to a string. 
\begin{DoxyParams}{Parameters}
{\em pool} & Pool to allocate from \\
\hline
{\em rx} & The regex match to apply \\
\hline
{\em pattern} & The string to apply it to N\+O\+TE\+: This M\+U\+ST be kept in scope to use regexp memory \\
\hline
{\em newpattern} & The modified string (ignored if the operation doesn\textquotesingle{}t modify the string) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of times a match happens. Normally 0 (no match) or 1 (match found), but may be greater if a transforming pattern is applied with the \textquotesingle{}g\textquotesingle{} flag.
\end{DoxyReturn}
Replace logging to stderr with logging to the given file. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate out of \\
\hline
{\em file} & Name of the file to log stderr output\\
\hline
\end{DoxyParams}
Retrieve the pid from a pidfile. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for processing \\
\hline
{\em filename} & The name of the file containing the pid. If the filename is not absolute then it is assumed to be relative to Server\+Root. \\
\hline
{\em mypid} & Pointer to pid\+\_\+t (valid only if return A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS)\\
\hline
\end{DoxyParams}
Set the keepalive status for this request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if keepalive can be set, 0 otherwise
\end{DoxyReturn}
Implements condition G\+ET rules for H\+T\+T\+P/1.\+1 specification. This function inspects the client headers and determines if the response fulfills the requirements specified. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK if the response fulfills the condition G\+ET rules, some other status code otherwise
\end{DoxyReturn}
Send an entire file to the client, using sendfile if supported by the current platform 
\begin{DoxyParams}{Parameters}
{\em fd} & The file to send. \\
\hline
{\em r} & The current request \\
\hline
{\em offset} & Offset into the file to start sending. \\
\hline
{\em length} & Amount of data to send \\
\hline
{\em nbytes} & Amount of data actually sent\\
\hline
\end{DoxyParams}
Register a new request method, and return the offset that will be associated with that method.


\begin{DoxyParams}{Parameters}
{\em p} & The pool to create registered method numbers from. \\
\hline
{\em methname} & The name of the new method to register. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An int value representing an offset into a bitmask.
\end{DoxyReturn}
Search for an H\+T\+TP method name in an \hyperlink{structap__method__list__t}{ap\+\_\+method\+\_\+list\+\_\+t} structure, and return true if found.


\begin{DoxyParams}{Parameters}
{\em method} & String containing the name of the method to check. \\
\hline
{\em l} & Pointer to a method list, such as r-\/$>$allowed\+\_\+methods. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if method is in the list, otherwise 0
\end{DoxyReturn}
Output one character for this request 
\begin{DoxyParams}{Parameters}
{\em c} & the character to output \\
\hline
{\em r} & the current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Write a buffer for the current request 
\begin{DoxyParams}{Parameters}
{\em buf} & The buffer to write \\
\hline
{\em nbyte} & The number of bytes to send from the buffer \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em vlist} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Flush all of the data for the current request to the client 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 if an error occurred
\end{DoxyReturn}
Index used in custom\+\_\+responses array for a specific error code (only use outside protocol.\+c is in getting them configured). 
\begin{DoxyParams}{Parameters}
{\em status} & H\+T\+TP status code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the response
\end{DoxyReturn}
Setup the client to allow \hyperlink{namespaceApache}{Apache} to read the request body. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em read\+\_\+policy} & How the server should interpret a chunked transfer-\/encoding. One of\+: 
\begin{DoxyPre}
   REQUEST\_NO\_BODY          Send 413 error if message has any body
   REQUEST\_CHUNKED\_ERROR    Send 411 error if body without Content-Length
   REQUEST\_CHUNKED\_DECHUNK  If chunked, remove the chunks for me.
\end{DoxyPre}
 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
either OK or an error code
\end{DoxyReturn}
Determine if the client has sent any data. This also sends a 100 Continue response to H\+T\+T\+P/1.\+1 clients, so modules should not be called until the module is ready to read content. \begin{DoxyWarning}{Warning}
Never call this function more than once. 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if there is no message to read, 1 otherwise
\end{DoxyReturn}
Map specific A\+PR codes returned by the filter stack to H\+T\+TP error codes, or the default status code provided. Use it as follows\+:

return ap\+\_\+map\+\_\+http\+\_\+request\+\_\+error(rv, H\+T\+T\+P\+\_\+\+B\+A\+D\+\_\+\+R\+E\+Q\+U\+E\+S\+T);

If the filter has already handled the error, A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR will be returned, which is cleanly passed through.

These mappings imply that the filter stack is reading from the downstream client, the proxy will map these codes differently. 
\begin{DoxyParams}{Parameters}
{\em rv} & A\+PR status code \\
\hline
{\em status} & Default H\+T\+TP code should the A\+PR code not be recognised \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Mapped H\+T\+TP status code
\end{DoxyReturn}
In H\+T\+T\+P/1.\+1, any method can have a body. However, most G\+ET handlers wouldn\textquotesingle{}t know what to do with a request body if they received one. This helper routine tests for and reads any message body in the request, simply discarding whatever it receives. We need to do this because failing to read the request body would cause it to be interpreted as the next request on a persistent connection. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error status if request is malformed, OK otherwise
\end{DoxyReturn}
This hook allows modules to add support for a specific auth type to ap\+\_\+note\+\_\+auth\+\_\+failure 
\begin{DoxyParams}{Parameters}
{\em r} & the current request \\
\hline
{\em auth\+\_\+type} & the configured auth\+\_\+type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK, D\+E\+C\+L\+I\+N\+ED Get the password from the request headers. This function has multiple side effects due to its prior use in the old authentication framework. ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components() should be preferred.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000004}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+components 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em pw} & The password as set in the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 (OK) if it set the \textquotesingle{}pw\textquotesingle{} argument (and assured a correct value in r-\/$>$user); otherwise it returns an error code, either H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR if things are really confused, H\+T\+T\+P\+\_\+\+U\+N\+A\+U\+T\+H\+O\+R\+I\+Z\+ED if no authentication at all seemed to be in use, or D\+E\+C\+L\+I\+N\+ED if there was authentication but it wasn\textquotesingle{}t Basic (in which case, the caller should presumably decline as well).
\end{DoxyReturn}
Get the username and/or password from the request\textquotesingle{}s Basic authentication headers. Unlike ap\+\_\+get\+\_\+basic\+\_\+auth\+\_\+pw(), calling this function has no side effects on the passed \hyperlink{structrequest__rec}{request\+\_\+rec}.


\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em username} & If not N\+U\+LL, set to the username sent by the client \\
\hline
{\em password} & If not N\+U\+LL, set to the password sent by the client \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if the credentials were successfully parsed and returned; A\+P\+R\+\_\+\+E\+I\+N\+V\+AL if there was no authentication header sent or if the client was not using the Basic authentication scheme. username and password are unchanged on failure.
\end{DoxyReturn}
Get the next line of input for the request 
\begin{DoxyParams}{Parameters}
{\em s} & The buffer into which to read the line \\
\hline
{\em n} & The size of the buffer \\
\hline
{\em r} & The request \\
\hline
{\em flags} & Bit flag of multiple parsing options A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+F\+O\+LD Whether to merge continuation lines A\+P\+\_\+\+G\+E\+T\+L\+I\+N\+E\+\_\+\+C\+R\+LF Whether line ends must be in the form CR LF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The length of the line, if successful n, if the line is too big to fit in the buffer -\/1 for miscellaneous errors
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__APACHE__CORE__PROTO_ga4b31458cae55948009a7de050dd6acc4}{ap\+\_\+rgetline}
\end{DoxySeeAlso}
Get the method number associated with the given string, assumed to contain an H\+T\+TP method. Returns M\+\_\+\+I\+N\+V\+A\+L\+ID if not recognized. 
\begin{DoxyParams}{Parameters}
{\em method} & A string containing a valid H\+T\+TP method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The method number
\end{DoxyReturn}
Return the protocol used on the connection. Modules implementing protocol switching must register here and return the correct protocol identifier for connections they switched.

To find out the protocol for the current connection, better call \begin{DoxySeeAlso}{See also}
ap\+\_\+get\+\_\+protocol \hyperlink{README_8txt_a9d3df0d4bed2ac7e1c01860363ab4ac2}{which} internally uses \hyperlink{pcregrep_8txt_a1d4586f0a85ecec85237e5fb0f611dd1}{this} hook.
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The identifier of the protocol in place or N\+U\+LL 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000003}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}
Get the protocols that the connection and optional request may upgrade to -\/ besides the protocol currently active on the connection. These values may be used to announce to a client what choices it has.

If report\+\_\+all == 0, only protocols more preferable than the one currently being used, are reported. Otherwise, all available protocols beside the current one are being reported.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em report\+\_\+all} & include also protocols less preferred than the current one \\
\hline
{\em pupgrades} & on return, possible protocols to upgrade to in descending order of preference. Maybe N\+U\+LL if none are available. \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000004}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Perform the actual protocol switch. The protocol given must have been selected before on the very same connection and request pair.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS, if caller may continue processing as usual A\+P\+R\+\_\+\+E\+OF, if caller needs to stop processing the connection A\+P\+R\+\_\+\+E\+I\+N\+V\+AL, if the protocol is already in place A\+P\+R\+\_\+\+N\+O\+T\+I\+M\+PL, if no module performed the switch Other errors where appropriate 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000006}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


Check if the given protocol is an allowed choice on the given combination of connection, request and server.

When server is N\+U\+LL, it is taken from \hyperlink{structrequest__rec}{request\+\_\+rec}, unless \hyperlink{structrequest__rec}{request\+\_\+rec} is N\+U\+LL. Then it is taken from the connection base server.


\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em r} & The current request or N\+U\+LL \\
\hline
{\em s} & The server/virtual host selected or N\+U\+LL \\
\hline
{\em protocol} & the protocol to switch to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!= 0 iff protocol is allowed 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000008}{Bug}]This A\+PI or implementation and order of operations should be considered experimental and will continue to evolve in future 2.\+4 releases, with a corresponding minor module magic number (M\+MN) bump to indicate the A\+PI revision level. \end{DoxyRefDesc}


An internal handler used by the ap\+\_\+process\+\_\+request, all subrequest mechanisms and the redirect mechanism. 
\begin{DoxyParams}{Parameters}
{\em r} & The request, subrequest or internal redirect to pre-\/process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return code for the request
\end{DoxyReturn}
Run the handler for the subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The subrequest to run \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return code for the subrequest
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if authentication is required, 0 otherwise 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000009}{Bug}]Behavior changed in 2.\+4.\+x refactoring, A\+PI no longer usable \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000005}{Deprecated}]\end{DoxyRefDesc}
\begin{DoxySeeAlso}{See also}
ap\+\_\+some\+\_\+authn\+\_\+required()
\end{DoxySeeAlso}
Register an authentication or authorization provider with the global provider pool. 
\begin{DoxyParams}{Parameters}
{\em pool} & The pool to create any storage from \\
\hline
{\em provider\+\_\+group} & The group to store the provider in \\
\hline
{\em provider\+\_\+name} & The name for this provider \\
\hline
{\em provider\+\_\+version} & The version for this provider \\
\hline
{\em provider} & Opaque structure for this provider \\
\hline
{\em type} & Internal request processing mode, either A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+U\+RI or A\+P\+\_\+\+A\+U\+T\+H\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+P\+E\+R\+\_\+\+C\+O\+NF \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if all went well
\end{DoxyReturn}
Determine if the current request is the main request or a subrequest 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if this is the main request, 0 otherwise
\end{DoxyReturn}
Check whether a connection is still established and has data available, optionnaly consuming blank lines (\mbox{[}CR\mbox{]}LF). 
\begin{DoxyParams}{Parameters}
{\em c} & The current connection \\
\hline
{\em bb} & The brigade to filter \\
\hline
{\em max\+\_\+blank\+\_\+lines} & Max number of blank lines to consume, or zero to consider them as data (single read). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS\+: connection established with data available, A\+P\+R\+\_\+\+E\+A\+G\+A\+IN\+: connection established and empty, A\+P\+R\+\_\+\+N\+O\+T\+F\+O\+U\+ND\+: too much blank lines, A\+P\+R\+\_\+\+E$\ast$\+: connection/general error.
\end{DoxyReturn}
This hook allows modules to insert filters for the current request 
\begin{DoxyParams}{Parameters}
{\em r} & the current request This hook allows modules to affect the request immediately after the per-\/directory configuration for the request has been generated. \\
\hline
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (allow acces), D\+E\+C\+L\+I\+N\+ED (let later modules decide), or H\+T\+T\+P\+\_\+... (deny access) This hook allows a module to force authn to be required when processing a request. This hook should be registered with ap\+\_\+hook\+\_\+force\+\_\+authn(). 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK (force authn), D\+E\+C\+L\+I\+N\+ED (let later modules decide) This hook allows modules to handle/emulate the apr\+\_\+stat() calls needed for directory walk. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em finfo} & where to put the stat data \\
\hline
{\em r} & The current request \\
\hline
{\em wanted} & A\+P\+R\+\_\+\+F\+I\+N\+F\+O\+\_\+$\ast$ flags to pass to apr\+\_\+stat() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
apr\+\_\+status\+\_\+t or A\+P\+\_\+\+D\+E\+C\+L\+I\+N\+ED (let later modules decide)
\end{DoxyReturn}
Can be used within any handler to determine if any authentication is required for the current request. Note that if used with an access\+\_\+checker hook, an access\+\_\+checker\+\_\+ex hook or an authz provider; the caller should take steps to avoid a loop since this function is implemented by calling these hooks. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if authentication is required, F\+A\+L\+SE otherwise
\end{DoxyReturn}
For every virtual host on this connection, call func\+\_\+cb. 
\begin{DoxyParams}{Parameters}
{\em conn} & The current connection \\
\hline
{\em func\+\_\+cb} & Function called for every Name Based Virtual Host for this connection. \\
\hline
{\em baton} & Opaque object passed to func\+\_\+cb. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return value from func\+\_\+cb. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
If func\+\_\+cb returns non-\/zero, the function will return at this point, and not continue iterating the virtual hosts.
\end{DoxyNote}
Match the host in the header with the hostname of the server for this request. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em host} & The hostname in the headers \\
\hline
{\em port} & The port from the headers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
return 1 if the host\+:port matches any of the aliases of r-\/$>$server, return 0 otherwise
\end{DoxyReturn}
Find an item in canonical form (lowercase, no extra spaces) within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Do a weak E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Do a strong E\+Tag comparison within an H\+T\+TP field value list. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The field value list to search \\
\hline
{\em tok} & The token to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if found, 0 if not found.
\end{DoxyReturn}
Find http tokens, see the definition of token from R\+F\+C2068 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
find http tokens from the end of the line 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em line} & The line to find the token \\
\hline
{\em tok} & The token to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the token is found, 0 otherwise
\end{DoxyReturn}
Check for an Absolute U\+RI syntax 
\begin{DoxyParams}{Parameters}
{\em u} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if U\+RI, 0 otherwise
\end{DoxyReturn}
Unescape a string 
\begin{DoxyParams}{Parameters}
{\em url} & The string to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape a U\+RL, but leaving \%2f (slashes) escaped 
\begin{DoxyParams}{Parameters}
{\em url} & The url to unescape \\
\hline
{\em decode\+\_\+slashes} & Whether or not slashes should be decoded \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Unescape an application/x-\/www-\/form-\/urlencoded string 
\begin{DoxyParams}{Parameters}
{\em query} & The query to unescape \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero otherwise
\end{DoxyReturn}
Count the number of directories in a path 
\begin{DoxyParams}{Parameters}
{\em path} & The path to count \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of directories
\end{DoxyReturn}
Test if the given path has an absolute path. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em dir} & The directory name \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The converse is not necessarily true, some OS\textquotesingle{}s (Win32/\+O\+S2/\+Netware) have multiple forms of absolute paths. This only reports if the path is absolute in a canonical sense.
\end{DoxyNote}
Does the provided string contain wildcard characters? This is useful for determining if the string should be passed to strcmp\+\_\+match or to strcmp. The only wildcard characters recognized are \textquotesingle{}?\textquotesingle{} and \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the string has wildcards, 0 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{} 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
Determine if a string matches a pattern containing the wildcards \textquotesingle{}?\textquotesingle{} or \textquotesingle{}$\ast$\textquotesingle{}, ignoring case 
\begin{DoxyParams}{Parameters}
{\em str} & The string to check \\
\hline
{\em expected} & The pattern to match against \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the two strings match, 1 otherwise
\end{DoxyReturn}
After performing a successful regex match, you may use this function to perform a series of string substitutions based on subexpressions that were matched during the call to ap\+\_\+regexec 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em result} & where to store the result, will be set to N\+U\+LL on error \\
\hline
{\em input} & An arbitrary string containing \$1 through \$9. These are replaced with the corresponding matched sub-\/expressions \\
\hline
{\em source} & The string that was originally matched to the regex \\
\hline
{\em nmatch} & the nmatch returned from ap\+\_\+pregex \\
\hline
{\em pmatch} & the pmatch array returned from ap\+\_\+pregex \\
\hline
{\em maxlen} & the maximum string length to return, 0 for unlimited \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if successful, A\+P\+R\+\_\+\+E\+N\+O\+M\+EM or other error code otherwise.
\end{DoxyReturn}
Search a string from left to right for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Search a string from right to left for the first occurrence of a specific character 
\begin{DoxyParams}{Parameters}
{\em str} & The string to search \\
\hline
{\em c} & The character to search for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the first occurrence of c in str
\end{DoxyReturn}
Parse a given timeout parameter string into an apr\+\_\+interval\+\_\+time\+\_\+t value. The unit of the time interval is given as postfix string to the numeric string. Currently the following units are understood\+:

ms \+: milliseconds s \+: seconds mi\mbox{[}n\mbox{]} \+: minutes h \+: hours

If no unit is contained in the given timeout parameter the default\+\_\+time\+\_\+unit will be used instead. 
\begin{DoxyParams}{Parameters}
{\em timeout\+\_\+parameter} & The string containing the timeout parameter. \\
\hline
{\em timeout} & The timeout value to be returned. \\
\hline
{\em default\+\_\+time\+\_\+unit} & The default time unit to use if none is specified in timeout\+\_\+parameter. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the parsing was successful or not.
\end{DoxyReturn}
Determine if a request has a request body or not.


\begin{DoxyParams}{Parameters}
{\em r} & the \hyperlink{structrequest__rec}{request\+\_\+rec} of the request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
truth value
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em p} & pool to use to allocate dest \\
\hline
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Cleanup a string (mainly to be filesystem safe) We only allow \textquotesingle{}\+\_\+\textquotesingle{} and alphanumeric chars. Non-\/printable map to \textquotesingle{}x\textquotesingle{} and all others map to \textquotesingle{}\+\_\+\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em src} & string to clean up \\
\hline
{\em dest} & cleaned up, pre-\/allocated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status value indicating whether the cleaning was successful or not.
\end{DoxyReturn}
Read the body and parse any form found, which must be of the type application/x-\/www-\/form-\/urlencoded. 
\begin{DoxyParams}{Parameters}
{\em r} & request containing P\+O\+S\+Ted form data \\
\hline
{\em f} & filter \\
\hline
{\em ptr} & returned array of \hyperlink{structap__form__pair__t}{ap\+\_\+form\+\_\+pair\+\_\+t} \\
\hline
{\em num} & max num of params or -\/1 for unlimited \\
\hline
{\em size} & max size allowed for parsed data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK or H\+T\+TP error
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Given the name of an object in the file system determine if it is a directory -\/ this version is symlink aware 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
{\em name} & The name of the object to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if it is a directory, 0 otherwise
\end{DoxyReturn}
Get the first index of the string in the array or -\/1 if not found. Start searching a start. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
{\em start} & Start index for search. If start is out of bounds (negative or equal to array length or greater), -\/1 will be returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of string in array or -\/1
\end{DoxyReturn}
Check if the string is member of the given array by strcmp. 
\begin{DoxyParams}{Parameters}
{\em array} & The array the check \\
\hline
{\em s} & The string to find \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
!=0 iff string is member of array (via strcmp)
\end{DoxyReturn}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmp, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Perform a case-\/insensitive comparison of two strings {\itshape atr1} and {\itshape atr2}, treating upper and lower case values of the 26 standard C/\+P\+O\+S\+IX alphabetic characters as equivalent. Extended latin characters outside of this set are treated as unique octets, irrespective of the current locale.

Returns in integer greater than, equal to, or less than 0, according to whether {\itshape str1} is considered greater than, equal to, or less than {\itshape str2}.

\begin{DoxyNote}{Note}
Same code as apr\+\_\+cstr\+\_\+casecmpn, which arrives in A\+PR 1.\+6
\end{DoxyNote}
Unregister an M\+PM child process which was previously registered by a call to ap\+\_\+register\+\_\+extra\+\_\+mpm\+\_\+process(). 
\begin{DoxyParams}{Parameters}
{\em pid} & The process id of an M\+PM child process which no longer needs to be reclaimed. \\
\hline
{\em old\+\_\+gen} & Set to the server generation of the process, if found. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the process was found and removed, 0 otherwise
\end{DoxyReturn}
Safely signal an M\+PM child process, if the process is in the current process group. Otherwise fail. 
\begin{DoxyParams}{Parameters}
{\em pid} & the process id of a child process to signal \\
\hline
{\em sig} & the signal number to send \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if signal is sent, otherwise an error as per kill(3); A\+P\+R\+\_\+\+E\+I\+N\+V\+AL is returned if passed either an invalid ($<$ 1) pid, or if the pid is not in the current process group
\end{DoxyReturn}
Log why a child died to the error log, if the child died without the parent signalling it. 
\begin{DoxyParams}{Parameters}
{\em pid} & The child that has died \\
\hline
{\em why} & The return code of the child process \\
\hline
{\em status} & The status returned from ap\+\_\+wait\+\_\+or\+\_\+timeout \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, A\+P\+E\+X\+I\+T\+\_\+\+C\+H\+I\+L\+D\+F\+A\+T\+AL if M\+PM should terminate
\end{DoxyReturn}
Open the pipe-\/of-\/death. The pipe of death is used to tell all child processes that it is time to die gracefully. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & the pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to.\\
\hline
\end{DoxyParams}
Open the extended pipe-\/of-\/death. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to use for allocating the pipe \\
\hline
{\em pod} & The pipe-\/of-\/death that is created.\\
\hline
\end{DoxyParams}
Check the extended pipe to determine if the process has been signalled to die.

Close the pipe-\/of-\/death


\begin{DoxyParams}{Parameters}
{\em pod} & The pipe-\/of-\/death to close.\\
\hline
\end{DoxyParams}
Write data to the extended pipe-\/of-\/death, signalling that one child process should die. 
\begin{DoxyParams}{Parameters}
{\em pod} & the pipe-\/of-\/death to write to. \\
\hline
{\em graceful} & restart-\/type\\
\hline
\end{DoxyParams}
Write an R\+F\+C2109 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name} & The name of the cookie. \\
\hline
{\em val} & The value to place in the cookie. \\
\hline
{\em attrs} & The string containing additional cookie attributes. If N\+U\+LL, the D\+E\+F\+A\+U\+L\+T\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em maxage} & If non zero, a Max-\/\+Age header will be added to the cookie. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Write an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em val} & The value to place in the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the D\+E\+F\+A\+U\+L\+T\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em maxage} & If non zero, a Max-\/\+Age header will be added to the cookie. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2109 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name} & The name of the cookie. \\
\hline
{\em attrs} & The string containing additional cookie attributes. If N\+U\+LL, the C\+L\+E\+A\+R\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Remove an R\+F\+C2965 compliant cookie.


\begin{DoxyParams}{Parameters}
{\em r} & The request \\
\hline
{\em name2} & The name of the cookie. \\
\hline
{\em attrs2} & The string containing additional cookie attributes. If N\+U\+LL, the C\+L\+E\+A\+R\+\_\+\+A\+T\+T\+RS will be used. \\
\hline
{\em ...} & A varargs array of zero or more (\hyperlink{structapr__table__t}{apr\+\_\+table\+\_\+t} $\ast$) tables followed by N\+U\+LL to which the cookies should be added.\\
\hline
\end{DoxyParams}
Read a cookie called name, placing its value in val.

Both the Cookie and Cookie2 headers are scanned for the cookie.

If the cookie is duplicated, this function returns A\+P\+R\+\_\+\+E\+G\+E\+N\+E\+R\+AL. If found, and if remove is non zero, the cookie will be removed from the headers, and thus kept private from the backend.

Sanity check a given string that it exists, is not empty, and does not contain the special characters \textquotesingle{}=\textquotesingle{}, \textquotesingle{};\textquotesingle{} and \textquotesingle{}\&\textquotesingle{}.

It is used to sanity check the cookie names.

Encode the next portion of the provided environment table using a buffer previously allocated. 
\begin{DoxyParams}{Parameters}
{\em r} & The request, for logging \\
\hline
{\em env} & The environment table \\
\hline
{\em buffer} & A buffer to contain the encoded environment table \\
\hline
{\em buflen} & The length of the buffer, previously computed by ap\+\_\+fcgi\+\_\+encoded\+\_\+env\+\_\+len(). \\
\hline
{\em starting\+\_\+elem} & On input, the next element of the table array to process in this Fast\+C\+GI record. On output, the next element to process on the {\itshape next} Fast\+C\+GI record. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS if a section could be encoded or A\+P\+R\+\_\+\+E\+N\+O\+S\+PC otherwise. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The output starting\+\_\+elem from ap\+\_\+fcgi\+\_\+encoded\+\_\+env\+\_\+len shouldn\textquotesingle{}t be used as input to ap\+\_\+fcgi\+\_\+encode\+\_\+env when building the same Fast\+C\+GI record.
\end{DoxyNote}
Get the current bucket brigade from the next filter on the filter stack. The filter returns an apr\+\_\+status\+\_\+t value. If the bottom-\/most filter doesn\textquotesingle{}t read from the network, then \hyperlink{group__APACHE__CORE__DAEMON_gafafcc328b1e4659b888a331e302c7d43}{A\+P\+\_\+\+N\+O\+B\+O\+D\+Y\+\_\+\+R\+E\+AD} is returned. The bucket brigade will be empty when there is nothing left to get. 
\begin{DoxyParams}{Parameters}
{\em filter} & The next filter in the chain \\
\hline
{\em bucket} & The current bucket brigade. The original brigade passed to ap\+\_\+get\+\_\+brigade() must be empty. \\
\hline
{\em mode} & The way in which the data should be read \\
\hline
{\em block} & How the operations should be performed \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8}{A\+P\+R\+\_\+\+B\+L\+O\+C\+K\+\_\+\+R\+E\+AD}, \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da42b97663ca71fbbf2e2af7c8192e5dd8}{A\+P\+R\+\_\+\+N\+O\+N\+B\+L\+O\+C\+K\+\_\+\+R\+E\+AD} \\
\hline
{\em readbytes} & How many bytes to read from the next filter.\\
\hline
\end{DoxyParams}
Pass the current bucket brigade down to the next filter on the filter stack. The filter returns an apr\+\_\+status\+\_\+t value. If the bottom-\/most filter doesn\textquotesingle{}t write to the network, then \hyperlink{group__APACHE__CORE__DAEMON_gab6541339293a2dc16d92208f9656ba02}{A\+P\+\_\+\+N\+O\+B\+O\+D\+Y\+\_\+\+W\+R\+O\+TE} is returned. 
\begin{DoxyParams}{Parameters}
{\em filter} & The next filter in the chain \\
\hline
{\em bucket} & The current bucket brigade\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Ownership of the brigade is retained by the caller. On return, the contents of the brigade are U\+N\+D\+E\+F\+I\+N\+ED, and the caller must either call apr\+\_\+brigade\+\_\+cleanup or apr\+\_\+brigade\+\_\+destroy on the brigade.
\end{DoxyRemark}
Pass the current bucket brigade down to the next filter on the filter stack checking for filter errors. The filter returns an apr\+\_\+status\+\_\+t value. Returns \hyperlink{group__APACHE__CORE__DAEMON_gaba51915c87d64af47fb1cc59348961c9}{OK} if the brigade is successfully passed \hyperlink{group__APACHE__CORE__DAEMON_ga571664f1af74affc2b898a892f335b82}{A\+P\+\_\+\+F\+I\+L\+T\+E\+R\+\_\+\+E\+R\+R\+OR} on a filter error \hyperlink{group__HTTP__Status_ga5d9777e02c26063c2985e39ef71091d2}{H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR} on all other errors 
\begin{DoxyParams}{Parameters}
{\em r} & The request rec \\
\hline
{\em bucket} & The current bucket brigade \\
\hline
{\em fmt} & The format string. If N\+U\+LL defaults to \char`\"{}ap\+\_\+pass\+\_\+brigade returned\char`\"{} \\
\hline
{\em ...} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Ownership of the brigade is retained by the caller. On return, the contents of the brigade are U\+N\+D\+E\+F\+I\+N\+ED, and the caller must either call apr\+\_\+brigade\+\_\+cleanup or apr\+\_\+brigade\+\_\+destroy on the brigade.
\end{DoxyRemark}
Remove an input filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em next} & The filter stack to search \\
\hline
{\em handle} & The filter handle (name) to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS on removal or error
\end{DoxyReturn}
Remove an output filter from either the request or connection stack it is associated with. 
\begin{DoxyParams}{Parameters}
{\em next} & The filter stack to search \\
\hline
{\em handle} & The filter handle (name) to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS on removal or error
\end{DoxyReturn}
prepare a bucket brigade to be setaside. If a different brigade was set-\/aside earlier, then the two brigades are concatenated together. 
\begin{DoxyParams}{Parameters}
{\em f} & The current filter \\
\hline
{\em save\+\_\+to} & The brigade that was previously set-\/aside. Regardless, the new bucket brigade is returned in this location. \\
\hline
{\em b} & The bucket brigade to save aside. This brigade is always empty on return \\
\hline
{\em p} & Ensure that all data in the brigade lives as long as this pool\\
\hline
\end{DoxyParams}
Flush the current brigade down the filter stack. 
\begin{DoxyParams}{Parameters}
{\em f} & The filter we are passing to \\
\hline
{\em bb} & The brigade to flush\\
\hline
\end{DoxyParams}
Register a module\textquotesingle{}s mutex type with core to allow configuration with the Mutex directive. This must be called in the pre\+\_\+config hook; otherwise, configuration directives referencing this mutex type will be rejected.

The default\+\_\+dir and default\+\_\+mech parameters allow a module to set defaults for the lock file directory and mechanism. These could be based on compile-\/time settings. These aren\textquotesingle{}t required except in special circumstances.

The order of precedence for the choice of mechanism and lock file directory is\+:


\begin{DoxyEnumerate}
\item Mutex directive specifically for this mutex e.\+g., Mutex mpm-\/default flock\+:/tmp/mpmlocks
\item Mutex directive for global default e.\+g., Mutex default flock\+:/tmp/httpdlocks
\item Defaults for this mutex provided on the ap\+\_\+mutex\+\_\+register()
\item Built-\/in defaults for all mutexes, which are A\+P\+R\+\_\+\+L\+O\+C\+K\+\_\+\+D\+E\+F\+A\+U\+LT and D\+E\+F\+A\+U\+L\+T\+\_\+\+R\+E\+L\+\_\+\+R\+U\+N\+T\+I\+M\+E\+D\+IR.
\end{DoxyEnumerate}


\begin{DoxyParams}{Parameters}
{\em pconf} & The pconf pool \\
\hline
{\em type} & The type name of the mutex, used as the basename of the file associated with the mutex, if any. This must be unique among all mutex types (mutex creation accommodates multi-\/instance mutex types); mod\+\_\+foo might have mutex types \char`\"{}foo-\/pipe\char`\"{} and \char`\"{}foo-\/shm\char`\"{} \\
\hline
{\em default\+\_\+dir} & Default dir for any lock file required for this lock, to override built-\/in defaults; should be N\+U\+LL for most modules, to respect built-\/in defaults \\
\hline
{\em default\+\_\+mech} & Default mechanism for this lock, to override built-\/in defaults; should be A\+P\+R\+\_\+\+L\+O\+C\+K\+\_\+\+D\+E\+F\+A\+U\+LT for most modules, to respect built-\/in defaults or N\+U\+LL if there are no defaults for this mutex. \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults\\
\hline
\end{DoxyParams}
Create an A\+PR global mutex that has been registered previously with ap\+\_\+mutex\+\_\+register(). Mutex files, permissions, and error logging will be handled internally. 
\begin{DoxyParams}{Parameters}
{\em mutex} & The memory address where the newly created mutex will be stored. If this mutex is disabled, mutex will be set to N\+U\+LL on output. (That is allowed only if the A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+\+A\+L\+L\+O\+W\+\_\+\+N\+O\+NE flag is passed to ap\+\_\+mutex\+\_\+register().) \\
\hline
{\em name} & The generated filename of the created mutex, or N\+U\+LL if no file was created. Pass N\+U\+LL if this result is not needed. \\
\hline
{\em type} & The type name of the mutex, matching the type name passed to ap\+\_\+mutex\+\_\+register(). \\
\hline
{\em instance\+\_\+id} & A unique string to be used in the lock filename I\+FF this mutex type is multi-\/instance, N\+U\+LL otherwise. \\
\hline
{\em server} & \hyperlink{structserver__rec}{server\+\_\+rec} of main server \\
\hline
{\em pool} & pool lifetime of the mutex \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults (currently none are defined for this function)\\
\hline
\end{DoxyParams}
Create an A\+PR proc mutex that has been registered previously with ap\+\_\+mutex\+\_\+register(). Mutex files, permissions, and error logging will be handled internally. 
\begin{DoxyParams}{Parameters}
{\em mutex} & The memory address where the newly created mutex will be stored. If this mutex is disabled, mutex will be set to N\+U\+LL on output. (That is allowed only if the A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+\+A\+L\+L\+O\+W\+\_\+\+N\+O\+NE flag is passed to ap\+\_\+mutex\+\_\+register().) \\
\hline
{\em name} & The generated filename of the created mutex, or N\+U\+LL if no file was created. Pass N\+U\+LL if this result is not needed. \\
\hline
{\em type} & The type name of the mutex, matching the type name passed to ap\+\_\+mutex\+\_\+register(). \\
\hline
{\em instance\+\_\+id} & A unique string to be used in the lock filename I\+FF this mutex type is multi-\/instance, N\+U\+LL otherwise. \\
\hline
{\em server} & \hyperlink{structserver__rec}{server\+\_\+rec} of main server \\
\hline
{\em pool} & pool lifetime of the mutex \\
\hline
{\em options} & combination of A\+P\+\_\+\+M\+U\+T\+E\+X\+\_\+$\ast$ constants, or 0 for defaults (currently none are defined for this function) \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
1593 \{
1594     \hyperlink{structapr__bucket__brigade}{apr\_bucket\_brigade} *\hyperlink{group__APACHE__CORE__PROTO_gaa3f67fb4e98cad3cf7b1633f8d7be67a}{bb};
1595     \textcolor{keywordtype}{int} seen\_eos;
1596     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
1597 
1598     \textcolor{comment}{/* Sometimes we'll get in a state where the input handling has}
1599 \textcolor{comment}{     * detected an error where we want to drop the connection, so if}
1600 \textcolor{comment}{     * that's the case, don't read the data as that is what we're trying}
1601 \textcolor{comment}{     * to avoid.}
1602 \textcolor{comment}{     *}
1603 \textcolor{comment}{     * This function is also a no-op on a subrequest.}
1604 \textcolor{comment}{     */}
1605     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_aa15c110738953554b82619d8d2ee25b3}{main} || \hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a0924aae55826638314f76952ca5d60b1}{connection}->keepalive == \hyperlink{group__APACHE__CORE__DAEMON_gga0fc39bb8f47f9c1f418f28354416db79ac991e8ec951fe03c8c2f36495859034d}{AP\_CONN\_CLOSE} ||
1606         \hyperlink{group__HTTP__Status_gaf6029c20b468032acad1f82c4806ac6f}{ap\_status\_drops\_connection}(\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a09b59ad2fa51be73efea7369b5484eb0}{status})) \{
1607         \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__DAEMON_gaba51915c87d64af47fb1cc59348961c9}{OK};
1608     \}
1609 
1610     bb = apr\_brigade\_create(\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, \hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a0924aae55826638314f76952ca5d60b1}{connection}->bucket\_alloc);
1611     seen\_eos = 0;
1612     \textcolor{keywordflow}{do} \{
1613         \hyperlink{structapr__bucket}{apr\_bucket} *\hyperlink{group__APACHE__CORE__FILTER_ga6550e0bd0ee31e160be60d67874dbcbc}{bucket};
1614 
1615         rv = ap\_get\_brigade(\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_ab07868ed8240b6236a51aa1e7b198d3e}{input\_filters}, bb, 
      \hyperlink{util__filter_8h_ab570898d09fbbe5b6d838e28b90134e0a2d8e63e1da380c3909ac0a1325339de4}{AP\_MODE\_READBYTES},
1616                             \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8}{APR\_BLOCK\_READ}, \hyperlink{group__APACHE__CORE__DAEMON_ga0c9dd98f46b90b5bcd4cbf75e252d0da}{HUGE\_STRING\_LEN});
1617 
1618         \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
1619             apr\_brigade\_destroy(bb);
1620             \textcolor{keywordflow}{return} ap\_map\_http\_request\_error(rv, \hyperlink{group__HTTP__Status_ga0c1fdbbb10800664989907cbd3a5a023}{HTTP\_BAD\_REQUEST});
1621         \}
1622 
1623         \textcolor{keywordflow}{for} (bucket = \hyperlink{group__APR__Util__Bucket__Brigades_gab5826a11eb6ba90786a94282f806c230}{APR\_BRIGADE\_FIRST}(bb);
1624              bucket != \hyperlink{group__APR__Util__Bucket__Brigades_ga858da66dccab1e063415678bb115788a}{APR\_BRIGADE\_SENTINEL}(bb);
1625              bucket = \hyperlink{group__APR__Util__Bucket__Brigades_ga7171f690b203d548a5b6ae0b079068d8}{APR\_BUCKET\_NEXT}(bucket))
1626         \{
1627             \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__LOG_gae4950db1dbfff8459a712737063b61aa}{data};
1628             \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
1629 
1630             \textcolor{keywordflow}{if} (\hyperlink{group__APR__Util__Bucket__Brigades_ga89b225e1c08473766eec719b985ca0d6}{APR\_BUCKET\_IS\_EOS}(bucket)) \{
1631                 seen\_eos = 1;
1632                 \textcolor{keywordflow}{break};
1633             \}
1634 
1635             \textcolor{comment}{/* These are metadata buckets. */}
1636             \textcolor{keywordflow}{if} (bucket->\hyperlink{structapr__bucket_a0898dfc78d9275187189b9a745e619bf}{length} == 0) \{
1637                 \textcolor{keywordflow}{continue};
1638             \}
1639 
1640             \textcolor{comment}{/* We MUST read because in case we have an unknown-length}
1641 \textcolor{comment}{             * bucket or one that morphs, we want to exhaust it.}
1642 \textcolor{comment}{             */}
1643             rv = \hyperlink{group__APR__Util__Bucket__Brigades_gae44ae938c6c60e148430fdb098dcf28f}{apr\_bucket\_read}(bucket, &data, &len, 
      \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8}{APR\_BLOCK\_READ});
1644             \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
1645                 apr\_brigade\_destroy(bb);
1646                 \textcolor{keywordflow}{return} \hyperlink{group__HTTP__Status_ga0c1fdbbb10800664989907cbd3a5a023}{HTTP\_BAD\_REQUEST};
1647             \}
1648         \}
1649         apr\_brigade\_cleanup(bb);
1650     \} \textcolor{keywordflow}{while} (!seen\_eos);
1651 
1652     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__DAEMON_gaba51915c87d64af47fb1cc59348961c9}{OK};
1653 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{group__MOD__CORE_gab8d8f3d6912270098901ff1a41740f88_cgraph}
\end{center}
\end{figure}


\index{mod\+\_\+core@{mod\+\_\+core}!A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD@{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD@{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+T\+D(int) ap\+\_\+send\+\_\+http\+\_\+trace(request\+\_\+rec $\ast$r)}{AP_DECLARE_NONSTD(int) ap_send_http_trace(request_rec *r)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_ga08131eb63e0f403de9ebc2023acda159}{}\label{group__MOD__CORE_ga08131eb63e0f403de9ebc2023acda159}
Send an appropriate response to an http T\+R\+A\+CE request. 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
returns D\+O\+NE or the H\+T\+TP status error if it handles the T\+R\+A\+CE, or D\+E\+C\+L\+I\+N\+ED if the request was not for T\+R\+A\+CE. request method was not T\+R\+A\+CE.
\end{DoxyNote}
Write an unspecified number of strings to the request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em ...} & The strings to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em ...} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Flush function for apr\+\_\+brigade\+\_\+$\ast$ calls. This calls ap\+\_\+pass\+\_\+brigade to flush the brigade if the brigade buffer overflows. 
\begin{DoxyParams}{Parameters}
{\em bb} & The brigade to flush \\
\hline
{\em ctx} & The filter to pass the brigade to \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
this function has nothing to do with F\+L\+U\+SH buckets. It is simply a way to flush content out of a brigade and down a filter stack.
\end{DoxyNote}
Write an unspecified number of strings to the current filter 
\begin{DoxyParams}{Parameters}
{\em f} & the filter we are writing to \\
\hline
{\em bb} & The brigade to buffer into \\
\hline
{\em ...} & The strings to write\\
\hline
\end{DoxyParams}
Output data to the filter in printf format 
\begin{DoxyParams}{Parameters}
{\em f} & the filter we are writing to \\
\hline
{\em bb} & The brigade to buffer into \\
\hline
{\em fmt} & The format string \\
\hline
{\em ...} & The arguments to use to fill out the format string\\
\hline
\end{DoxyParams}
Read headers strings from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em termch} & Pointer to the last character parsed. \\
\hline
{\em termarg} & Pointer to an int to capture the last argument parsed.\\
\hline
\end{DoxyParams}
The varargs are string arguments to parse consecutively for headers, with a N\+U\+LL argument to terminate the list.

\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers strings from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
{\em termch} & Pointer to the last character parsed. \\
\hline
{\em termarg} & Pointer to an int to capture the last argument parsed.\\
\hline
\end{DoxyParams}
The varargs are string arguments to parse consecutively for headers, with a N\+U\+LL argument to terminate the list.

\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Default lookup function which just calls ap\+\_\+run\+\_\+expr\+\_\+lookup(). ap\+\_\+run\+\_\+expr\+\_\+lookup cannot be used directly because it has the wrong calling convention under Windows.

Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em ...} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Write an unspecified number of strings to the current filter 
\begin{DoxyParams}{Parameters}
{\em f} & the filter we are writing to \\
\hline
{\em bb} & The brigade to buffer into \\
\hline
{\em ...} & The strings to write\\
\hline
\end{DoxyParams}
Output data to the filter in printf format 
\begin{DoxyParams}{Parameters}
{\em f} & the filter we are writing to \\
\hline
{\em bb} & The brigade to buffer into \\
\hline
{\em fmt} & The format string \\
\hline
{\em ...} & The arguments to use to fill out the format string\\
\hline
\end{DoxyParams}
Read headers strings from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
{\em termch} & Pointer to the last character parsed. \\
\hline
{\em termarg} & Pointer to an int to capture the last argument parsed.\\
\hline
\end{DoxyParams}
The varargs are string arguments to parse consecutively for headers, with a N\+U\+LL argument to terminate the list.

\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Write an unspecified number of strings to the request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em ...} & The strings to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Output data to the client in a printf format 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em fmt} & The format string \\
\hline
{\em ...} & The arguments to use to fill out the format string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent
\end{DoxyReturn}
Flush function for apr\+\_\+brigade\+\_\+$\ast$ calls. This calls ap\+\_\+pass\+\_\+brigade to flush the brigade if the brigade buffer overflows. 
\begin{DoxyParams}{Parameters}
{\em bb} & The brigade to flush \\
\hline
{\em ctx} & The filter to pass the brigade to \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
this function has nothing to do with F\+L\+U\+SH buckets. It is simply a way to flush content out of a brigade and down a filter stack.
\end{DoxyNote}
Write an unspecified number of strings to the current filter 
\begin{DoxyParams}{Parameters}
{\em f} & the filter we are writing to \\
\hline
{\em bb} & The brigade to buffer into \\
\hline
{\em ...} & The strings to write\\
\hline
\end{DoxyParams}
Output data to the filter in printf format 
\begin{DoxyParams}{Parameters}
{\em f} & the filter we are writing to \\
\hline
{\em bb} & The brigade to buffer into \\
\hline
{\em fmt} & The format string \\
\hline
{\em ...} & The arguments to use to fill out the format string\\
\hline
\end{DoxyParams}
Read headers strings from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em termch} & Pointer to the last character parsed. \\
\hline
{\em termarg} & Pointer to an int to capture the last argument parsed.\\
\hline
\end{DoxyParams}
The varargs are string arguments to parse consecutively for headers, with a N\+U\+LL argument to terminate the list.

\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise
\end{DoxyReturn}
Read headers strings from a script, ensuring that the output is valid. If the output is valid, then the headers are added to the headers out of the current request 
\begin{DoxyParams}{Parameters}
{\em r} & The current request \\
\hline
{\em buffer} & Empty when calling the function. On output, if there was an error, the string that cause the error is stored here. \\
\hline
{\em module\+\_\+index} & The module index to be used for logging \\
\hline
{\em termch} & Pointer to the last character parsed. \\
\hline
{\em termarg} & Pointer to an int to capture the last argument parsed.\\
\hline
\end{DoxyParams}
The varargs are string arguments to parse consecutively for headers, with a N\+U\+LL argument to terminate the list.

\begin{DoxyReturn}{Returns}
H\+T\+T\+P\+\_\+\+OK on success, H\+T\+T\+P\+\_\+\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+R\+R\+OR otherwise 
\end{DoxyReturn}

\begin{DoxyCode}
2017 \{
2018     va\_list \hyperlink{group__APR__Util__Bucket__Brigades_gafa1ac2f9aa9e56e3f87cbc5324a3114f}{va};
2019     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
2020     \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
2021     \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} written = 0;
2022 
2023     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a0924aae55826638314f76952ca5d60b1}{connection}->aborted)
2024         \textcolor{keywordflow}{return} -1;
2025 
2026     \textcolor{comment}{/* ### TODO: if the total output is large, put all the strings}
2027 \textcolor{comment}{     * ### into a single brigade, rather than flushing each time we}
2028 \textcolor{comment}{     * ### fill the buffer}
2029 \textcolor{comment}{     */}
2030     va\_start(va, \hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r});
2031     \textcolor{keywordflow}{while} (1) \{
2032         s = va\_arg(va, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *);
2033         \textcolor{keywordflow}{if} (s == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL})
2034             \textcolor{keywordflow}{break};
2035 
2036         len = strlen(s);
2037         \textcolor{keywordflow}{if} (buffer\_output(\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}, s, len) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
2038             \textcolor{keywordflow}{return} -1;
2039         \}
2040 
2041         written += \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
2042     \}
2043     va\_end(va);
2044 
2045     \textcolor{keywordflow}{return} written;
2046 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__MOD__CORE_ga08131eb63e0f403de9ebc2023acda159_cgraph}
\end{center}
\end{figure}


\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+http\+\_\+chunk\+\_\+filter@{ap\+\_\+http\+\_\+chunk\+\_\+filter}}
\index{ap\+\_\+http\+\_\+chunk\+\_\+filter@{ap\+\_\+http\+\_\+chunk\+\_\+filter}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+http\+\_\+chunk\+\_\+filter(ap\+\_\+filter\+\_\+t $\ast$f, apr\+\_\+bucket\+\_\+brigade $\ast$b)}{ap_http_chunk_filter(ap_filter_t *f, apr_bucket_brigade *b)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} ap\+\_\+http\+\_\+chunk\+\_\+filter (
\begin{DoxyParamCaption}
\item[{{\bf ap\+\_\+filter\+\_\+t} $\ast$}]{f, }
\item[{{\bf apr\+\_\+bucket\+\_\+brigade} $\ast$}]{b}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_ga04176f8fb630b640c3f69d670996ffa0}{}\label{group__MOD__CORE_ga04176f8fb630b640c3f69d670996ffa0}

\begin{DoxyCode}
48 \{
49 \textcolor{preprocessor}{#define ASCII\_CRLF  "\(\backslash\)015\(\backslash\)012"}
50 \textcolor{preprocessor}{#define ASCII\_ZERO  "\(\backslash\)060"}
51     \hyperlink{structconn__rec}{conn\_rec} *\hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c} = f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a0924aae55826638314f76952ca5d60b1}{connection};
52     \hyperlink{structapr__bucket__brigade}{apr\_bucket\_brigade} *more, *tmp;
53     \hyperlink{structapr__bucket}{apr\_bucket} *\hyperlink{group__APR__Util__Bucket__Brigades_gacd90314acb2c2e5cd19681136c08efac}{e};
54     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
55 
56     \textcolor{keywordflow}{for} (more = tmp = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}; \hyperlink{group__APACHE__CORE__PROTO_ga7fa09c5c80a7d25b74511944f5949e31}{b}; b = more, more = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
57         \hyperlink{group__apr__platform_ga6938af9075cec15c88299109381aa984}{apr\_off\_t} \hyperlink{group__APACHE__CORE__HTTPD_ga393b167dab644f408202cbbcad070e6d}{bytes} = 0;
58         \hyperlink{structapr__bucket}{apr\_bucket} *eos = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
59         \hyperlink{structapr__bucket}{apr\_bucket} *\hyperlink{group__APACHE__CORE__CONNECTION_ga0e45940edc0a96a29eea9b91650341ae}{flush} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
60         \textcolor{comment}{/* XXX: chunk\_hdr must remain at this scope since it is used in a}
61 \textcolor{comment}{         *      transient bucket.}
62 \textcolor{comment}{         */}
63         \textcolor{keywordtype}{char} chunk\_hdr[20]; \textcolor{comment}{/* enough space for the snprintf below */}
64 
65 
66         \textcolor{keywordflow}{for} (e = \hyperlink{group__APR__Util__Bucket__Brigades_gab5826a11eb6ba90786a94282f806c230}{APR\_BRIGADE\_FIRST}(b);
67              e != \hyperlink{group__APR__Util__Bucket__Brigades_ga858da66dccab1e063415678bb115788a}{APR\_BRIGADE\_SENTINEL}(b);
68              e = \hyperlink{group__APR__Util__Bucket__Brigades_ga7171f690b203d548a5b6ae0b079068d8}{APR\_BUCKET\_NEXT}(e))
69         \{
70             \textcolor{keywordflow}{if} (\hyperlink{group__APR__Util__Bucket__Brigades_ga89b225e1c08473766eec719b985ca0d6}{APR\_BUCKET\_IS\_EOS}(e)) \{
71                 \textcolor{comment}{/* there shouldn't be anything after the eos */}
72                 eos = \hyperlink{group__APR__Util__Bucket__Brigades_gacd90314acb2c2e5cd19681136c08efac}{e};
73                 \textcolor{keywordflow}{break};
74             \}
75             \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__PROTO_gaab791518d091322fdc35b084f5b9f642}{AP\_BUCKET\_IS\_ERROR}(e)
76                 && (((\hyperlink{structap__bucket__error}{ap\_bucket\_error} *)(e->\hyperlink{structapr__bucket_a7fc4604750889b3f762bda1a786d276a}{data}))->\hyperlink{group__APACHE__CORE__HTTPD_ga6e27f49150e9a14580fb313cc2777e00}{status}
77                     == \hyperlink{group__HTTP__Status_ga57ddfb82346d6efc864c3e164e574b10}{HTTP\_BAD\_GATEWAY})) \{
78                 \textcolor{comment}{/*}
79 \textcolor{comment}{                 * We had a broken backend. Memorize this in the filter}
80 \textcolor{comment}{                 * context.}
81 \textcolor{comment}{                 */}
82                 f->\hyperlink{structap__filter__t_aef5a2ef40157f704d2b573b8737a6a70}{ctx} = &bad\_gateway\_seen;
83                 \textcolor{keywordflow}{continue};
84             \}
85             \textcolor{keywordflow}{if} (\hyperlink{group__APR__Util__Bucket__Brigades_ga24105da0bb755a775c4b2a519d7c25f9}{APR\_BUCKET\_IS\_FLUSH}(e)) \{
86                 flush = \hyperlink{group__APR__Util__Bucket__Brigades_gacd90314acb2c2e5cd19681136c08efac}{e};
87                 \textcolor{keywordflow}{if} (e != \hyperlink{group__APR__Util__Bucket__Brigades_ga40e0ef2a904aa519ca9d63288dee0b4d}{APR\_BRIGADE\_LAST}(b)) \{
88                     more = apr\_brigade\_split\_ex(b, \hyperlink{group__APR__Util__Bucket__Brigades_ga7171f690b203d548a5b6ae0b079068d8}{APR\_BUCKET\_NEXT}(e), tmp);
89                 \}
90                 \textcolor{keywordflow}{break};
91             \}
92             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e->\hyperlink{structapr__bucket_a0898dfc78d9275187189b9a745e619bf}{length} == (\hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t})-1) \{
93                 \textcolor{comment}{/* unknown amount of data (e.g. a pipe) */}
94                 \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__LOG_gae4950db1dbfff8459a712737063b61aa}{data};
95                 \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
96 
97                 rv = \hyperlink{group__APR__Util__Bucket__Brigades_gae44ae938c6c60e148430fdb098dcf28f}{apr\_bucket\_read}(e, &data, &len, 
      \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8}{APR\_BLOCK\_READ});
98                 \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
99                     \textcolor{keywordflow}{return} rv;
100                 \}
101                 \textcolor{keywordflow}{if} (len > 0) \{
102                     \textcolor{comment}{/*}
103 \textcolor{comment}{                     * There may be a new next bucket representing the}
104 \textcolor{comment}{                     * rest of the data stream on which a read() may}
105 \textcolor{comment}{                     * block so we pass down what we have so far.}
106 \textcolor{comment}{                     */}
107                     bytes += \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
108                     more = apr\_brigade\_split\_ex(b, \hyperlink{group__APR__Util__Bucket__Brigades_ga7171f690b203d548a5b6ae0b079068d8}{APR\_BUCKET\_NEXT}(e), tmp);
109                     \textcolor{keywordflow}{break};
110                 \}
111                 \textcolor{keywordflow}{else} \{
112                     \textcolor{comment}{/* If there was nothing in this bucket then we can}
113 \textcolor{comment}{                     * safely move on to the next one without pausing}
114 \textcolor{comment}{                     * to pass down what we have counted up so far.}
115 \textcolor{comment}{                     */}
116                     \textcolor{keywordflow}{continue};
117                 \}
118             \}
119             \textcolor{keywordflow}{else} \{
120                 bytes += e->\hyperlink{structapr__bucket_a0898dfc78d9275187189b9a745e619bf}{length};
121             \}
122         \}
123 
124         \textcolor{comment}{/*}
125 \textcolor{comment}{         * XXX: if there aren't very many bytes at this point it may}
126 \textcolor{comment}{         * be a good idea to set them aside and return for more,}
127 \textcolor{comment}{         * unless we haven't finished counting this brigade yet.}
128 \textcolor{comment}{         */}
129         \textcolor{comment}{/* if there are content bytes, then wrap them in a chunk */}
130         \textcolor{keywordflow}{if} (bytes > 0) \{
131             \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} hdr\_len;
132             \textcolor{comment}{/*}
133 \textcolor{comment}{             * Insert the chunk header, specifying the number of bytes in}
134 \textcolor{comment}{             * the chunk.}
135 \textcolor{comment}{             */}
136             hdr\_len = apr\_snprintf(chunk\_hdr, \textcolor{keyword}{sizeof}(chunk\_hdr),
137                                    \textcolor{stringliteral}{"%"} \hyperlink{group__apr__platform_ga528bc9f3c6f3500b35e97c4b25566b48}{APR\_UINT64\_T\_HEX\_FMT} 
      \hyperlink{group__APACHE__CORE__DAEMON_ga596f22107770abbd60ffce8338be9732}{CRLF}, (\hyperlink{group__apr__platform_ga722b277a42230f3fd41cb5be7a76cfb4}{apr\_uint64\_t})bytes);
138             \hyperlink{group__APACHE__CORE__EBCDIC_gab64dbae9ff27269fd9e52c43cb142c16}{ap\_xlate\_proto\_to\_ascii}(chunk\_hdr, hdr\_len);
139             e = apr\_bucket\_transient\_create(chunk\_hdr, hdr\_len,
140                                             c->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
141             \hyperlink{group__APR__Util__Bucket__Brigades_ga6dc39d8757e18941a6fb069b0c18fbd3}{APR\_BRIGADE\_INSERT\_HEAD}(b, e);
142 
143             \textcolor{comment}{/*}
144 \textcolor{comment}{             * Insert the end-of-chunk CRLF before an EOS or}
145 \textcolor{comment}{             * FLUSH bucket, or appended to the brigade}
146 \textcolor{comment}{             */}
147             e = apr\_bucket\_immortal\_create(\hyperlink{chunk__filter_8c_a23f2c1c9e246a8db468e22fe13adb77a}{ASCII\_CRLF}, 2, c->
      \hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
148             \textcolor{keywordflow}{if} (eos != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
149                 \hyperlink{group__APR__Util__Bucket__Brigades_gae012adeccda754eabc42b7855bec081e}{APR\_BUCKET\_INSERT\_BEFORE}(eos, e);
150             \}
151             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (flush != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
152                 \hyperlink{group__APR__Util__Bucket__Brigades_gae012adeccda754eabc42b7855bec081e}{APR\_BUCKET\_INSERT\_BEFORE}(flush, e);
153             \}
154             \textcolor{keywordflow}{else} \{
155                 \hyperlink{group__APR__Util__Bucket__Brigades_ga5447595f8374296c5ffe208db39b2f5d}{APR\_BRIGADE\_INSERT\_TAIL}(b, e);
156             \}
157         \}
158 
159         \textcolor{comment}{/* RFC 2616, Section 3.6.1}
160 \textcolor{comment}{         *}
161 \textcolor{comment}{         * If there is an EOS bucket, then prefix it with:}
162 \textcolor{comment}{         *   1) the last-chunk marker ("0" CRLF)}
163 \textcolor{comment}{         *   2) the trailer}
164 \textcolor{comment}{         *   3) the end-of-chunked body CRLF}
165 \textcolor{comment}{         *}
166 \textcolor{comment}{         * We only do this if we have not seen an error bucket with}
167 \textcolor{comment}{         * status HTTP\_BAD\_GATEWAY. We have memorized an}
168 \textcolor{comment}{         * error bucket that we had seen in the filter context.}
169 \textcolor{comment}{         * The error bucket with status HTTP\_BAD\_GATEWAY indicates that the}
170 \textcolor{comment}{         * connection to the backend (mod\_proxy) broke in the middle of the}
171 \textcolor{comment}{         * response. In order to signal the client that something went wrong}
172 \textcolor{comment}{         * we do not create the last-chunk marker and set c->keepalive to}
173 \textcolor{comment}{         * AP\_CONN\_CLOSE in the core output filter.}
174 \textcolor{comment}{         *}
175 \textcolor{comment}{         * XXX: it would be nice to combine this with the end-of-chunk}
176 \textcolor{comment}{         * marker above, but this is a bit more straight-forward for}
177 \textcolor{comment}{         * now.}
178 \textcolor{comment}{         */}
179         \textcolor{keywordflow}{if} (eos && !f->\hyperlink{structap__filter__t_aef5a2ef40157f704d2b573b8737a6a70}{ctx}) \{
180             \textcolor{comment}{/* XXX: (2) trailers ... does not yet exist */}
181             e = apr\_bucket\_immortal\_create(\hyperlink{chunk__filter_8c_abde11a6ee98560227d0d3889da0408e4}{ASCII\_ZERO} \hyperlink{chunk__filter_8c_a23f2c1c9e246a8db468e22fe13adb77a}{ASCII\_CRLF}
182                                            \textcolor{comment}{/* <trailers> */}
183                                            \hyperlink{chunk__filter_8c_a23f2c1c9e246a8db468e22fe13adb77a}{ASCII\_CRLF}, 5, c->
      \hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
184             \hyperlink{group__APR__Util__Bucket__Brigades_gae012adeccda754eabc42b7855bec081e}{APR\_BUCKET\_INSERT\_BEFORE}(eos, e);
185         \}
186 
187         \textcolor{comment}{/* pass the brigade to the next filter. */}
188         rv = ap\_pass\_brigade(f->\hyperlink{structap__filter__t_af4835ed2c41734061dc374d92ba401a2}{next}, b);
189         \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS} || eos != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
190             \textcolor{keywordflow}{return} rv;
191         \}
192         tmp = \hyperlink{group__APACHE__CORE__PROTO_ga7fa09c5c80a7d25b74511944f5949e31}{b};
193         apr\_brigade\_cleanup(tmp);
194     \}
195     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
196 \}
\end{DoxyCode}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+http\+\_\+filter@{ap\+\_\+http\+\_\+filter}}
\index{ap\+\_\+http\+\_\+filter@{ap\+\_\+http\+\_\+filter}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+http\+\_\+filter(ap\+\_\+filter\+\_\+t $\ast$f, apr\+\_\+bucket\+\_\+brigade $\ast$b, ap\+\_\+input\+\_\+mode\+\_\+t mode, apr\+\_\+read\+\_\+type\+\_\+e block, apr\+\_\+off\+\_\+t readbytes)}{ap_http_filter(ap_filter_t *f, apr_bucket_brigade *b, ap_input_mode_t mode, apr_read_type_e block, apr_off_t readbytes)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} ap\+\_\+http\+\_\+filter (
\begin{DoxyParamCaption}
\item[{{\bf ap\+\_\+filter\+\_\+t} $\ast$}]{f, }
\item[{{\bf apr\+\_\+bucket\+\_\+brigade} $\ast$}]{b, }
\item[{{\bf ap\+\_\+input\+\_\+mode\+\_\+t}}]{mode, }
\item[{{\bf apr\+\_\+read\+\_\+type\+\_\+e}}]{block, }
\item[{{\bf apr\+\_\+off\+\_\+t}}]{readbytes}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_gadd1247f7f25a314f11e5d22911a5bda5}{}\label{group__MOD__CORE_gadd1247f7f25a314f11e5d22911a5bda5}

\begin{DoxyCode}
342 \{
343     \hyperlink{structcore__server__config}{core\_server\_config} *\hyperlink{group__APACHE__CORE__HTTPD_ga7be6dfd9155648f64d6e9abcd78c38cd}{conf} =
344         (\hyperlink{structcore__server__config}{core\_server\_config} *) \hyperlink{group__APACHE__CORE__CONFIG_ga1093a5908a384eacc929b028c79f2a02}{ap\_get\_module\_config}(f->
      \hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a4a8059930ce9409cb885fdeef6921b7b}{server}->module\_config,
345                                                     &\hyperlink{group__APACHE__CORE__HTTPD_gafebd5dacd393edc6b65481d68544c59a}{core\_module});
346     \textcolor{keywordtype}{int} strict = (conf->\hyperlink{structcore__server__config_a56088a7f6f6bdf65bc4b125b7bf8a57f}{http\_conformance} != 
      \hyperlink{http__core_8h_ae2e97c40d27957c9f783118f7969b569}{AP\_HTTP\_CONFORMANCE\_UNSAFE});
347     \hyperlink{structapr__bucket}{apr\_bucket} *\hyperlink{group__APR__Util__Bucket__Brigades_gacd90314acb2c2e5cd19681136c08efac}{e};
348     \hyperlink{structhttp__filter__ctx}{http\_ctx\_t} *\hyperlink{group__APACHE__CORE__FILTER_ga94af791485570bea922969fef12d6259}{ctx} = f->\hyperlink{structap__filter__t_aef5a2ef40157f704d2b573b8737a6a70}{ctx};
349     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
350     \textcolor{keywordtype}{int} http\_error = \hyperlink{group__HTTP__Status_ga93fd8ea184f2b91b69c000f86d2e35bf}{HTTP\_REQUEST\_ENTITY\_TOO\_LARGE};
351     \hyperlink{structapr__bucket__brigade}{apr\_bucket\_brigade} *\hyperlink{group__APACHE__CORE__PROTO_gaa3f67fb4e98cad3cf7b1633f8d7be67a}{bb};
352     \textcolor{keywordtype}{int} again;
353 
354     \textcolor{comment}{/* just get out of the way of things we don't want. */}
355     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__FILTER_gad194431669b7d1f96d2dacfb7be21261}{mode} != \hyperlink{util__filter_8h_ab570898d09fbbe5b6d838e28b90134e0a2d8e63e1da380c3909ac0a1325339de4}{AP\_MODE\_READBYTES} && \hyperlink{group__APACHE__CORE__FILTER_gad194431669b7d1f96d2dacfb7be21261}{mode} != 
      \hyperlink{util__filter_8h_ab570898d09fbbe5b6d838e28b90134e0ae223ad325ff670d0c1dd98d3c9dcad2d}{AP\_MODE\_GETLINE}) \{
356         \textcolor{keywordflow}{return} ap\_get\_brigade(f->\hyperlink{structap__filter__t_af4835ed2c41734061dc374d92ba401a2}{next}, b, \hyperlink{group__APACHE__CORE__FILTER_gad194431669b7d1f96d2dacfb7be21261}{mode}, \hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block}, \hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes});
357     \}
358 
359     \textcolor{keywordflow}{if} (!ctx) \{
360         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *tenc, *lenp;
361         f->\hyperlink{structap__filter__t_aef5a2ef40157f704d2b573b8737a6a70}{ctx} = ctx = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, \textcolor{keyword}{sizeof}(*ctx));
362         ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} = BODY\_NONE;
363         ctx->\hyperlink{structhttp__filter__ctx_a430be4ba8f438622f652319917aa565f}{bb} = apr\_brigade\_create(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
364         bb = ctx->\hyperlink{structhttp__filter__ctx_a430be4ba8f438622f652319917aa565f}{bb};
365 
366         \textcolor{comment}{/* LimitRequestBody does not apply to proxied responses.}
367 \textcolor{comment}{         * Consider implementing this check in its own filter.}
368 \textcolor{comment}{         * Would adding a directive to limit the size of proxied}
369 \textcolor{comment}{         * responses be useful?}
370 \textcolor{comment}{         */}
371         \textcolor{keywordflow}{if} (!f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a82ca03c6dcfcacbf7001ff85e462289d}{proxyreq}) \{
372             ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit} = ap\_get\_limit\_req\_body(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r});
373         \}
374         \textcolor{keywordflow}{else} \{
375             ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit} = 0;
376         \}
377 
378         tenc = apr\_table\_get(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a5497da6c01af49acf70a4a9b975c1c83}{headers\_in}, \textcolor{stringliteral}{"Transfer-Encoding"});
379         lenp = apr\_table\_get(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a5497da6c01af49acf70a4a9b975c1c83}{headers\_in}, \textcolor{stringliteral}{"Content-Length"});
380 
381         \textcolor{keywordflow}{if} (tenc) \{
382             \textcolor{keywordflow}{if} (\hyperlink{apr__cpystrn_8c_a4a00fc29b96a953fed9e0107a9c4548a}{strcasecmp}(tenc, \textcolor{stringliteral}{"chunked"}) == 0 \textcolor{comment}{/* fast path */}
383                     || ap\_find\_last\_token(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, tenc, \textcolor{stringliteral}{"chunked"})) \{
384                 ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} = BODY\_CHUNK;
385             \}
386             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a82ca03c6dcfcacbf7001ff85e462289d}{proxyreq} == \hyperlink{group__ProxyReq_gaedfe04be933e20251ce580aa6b15d864}{PROXYREQ\_RESPONSE}) \{
387                 \textcolor{comment}{/* http://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-23}
388 \textcolor{comment}{                 * Section 3.3.3.3: "If a Transfer-Encoding header field is}
389 \textcolor{comment}{                 * present in a response and the chunked transfer coding is not}
390 \textcolor{comment}{                 * the final encoding, the message body length is determined by}
391 \textcolor{comment}{                 * reading the connection until it is closed by the server."}
392 \textcolor{comment}{                 */}
393                 \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, 0, f->
      \hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(02555)
394                               \textcolor{stringliteral}{"Unknown Transfer-Encoding: %s; "}
395                               \textcolor{stringliteral}{"using read-until-close"}, tenc);
396                 tenc = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
397             \}
398             \textcolor{keywordflow}{else} \{
399                 \textcolor{comment}{/* Something that isn't a HTTP request, unless some future}
400 \textcolor{comment}{                 * edition defines new transfer encodings, is unsupported.}
401 \textcolor{comment}{                 */}
402                 \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, 0, f->
      \hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(01585)
403                               \textcolor{stringliteral}{"Unknown Transfer-Encoding: %s"}, tenc);
404                 \textcolor{keywordflow}{return} bail\_out\_on\_error(ctx, f, \hyperlink{group__HTTP__Status_ga0c1fdbbb10800664989907cbd3a5a023}{HTTP\_BAD\_REQUEST});
405             \}
406             lenp = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
407         \}
408         \textcolor{keywordflow}{if} (lenp) \{
409             \textcolor{keywordtype}{char} *endstr;
410 
411             ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} = BODY\_LENGTH;
412 
413             \textcolor{comment}{/* Protects against over/underflow, non-digit chars in the}
414 \textcolor{comment}{             * string (excluding leading space) (the endstr checks)}
415 \textcolor{comment}{             * and a negative number. */}
416             \textcolor{keywordflow}{if} (apr\_strtoff(&ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining}, lenp, &endstr, 10)
417                 || endstr == lenp || *endstr || ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} < 0) \{
418 
419                 ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} = 0;
420                 \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, 0, f->
      \hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(01587)
421                               \textcolor{stringliteral}{"Invalid Content-Length"});
422 
423                 \textcolor{keywordflow}{return} bail\_out\_on\_error(ctx, f, \hyperlink{group__HTTP__Status_ga0c1fdbbb10800664989907cbd3a5a023}{HTTP\_BAD\_REQUEST});
424             \}
425 
426             \textcolor{comment}{/* If we have a limit in effect and we know the C-L ahead of}
427 \textcolor{comment}{             * time, stop it here if it is invalid.}
428 \textcolor{comment}{             */}
429             \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit} && ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit} < ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining}) \{
430                 \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, 0, f->
      \hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(01588)
431                           \textcolor{stringliteral}{"Requested content-length of %"} \hyperlink{group__apr__platform_gad71d0d5a325d1aedeb6328d6bdacac76}{APR\_OFF\_T\_FMT}
432                           \textcolor{stringliteral}{" is larger than the configured limit"}
433                           \textcolor{stringliteral}{" of %"} \hyperlink{group__apr__platform_gad71d0d5a325d1aedeb6328d6bdacac76}{APR\_OFF\_T\_FMT}, ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining}, ctx->
      \hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit});
434                 \textcolor{keywordflow}{return} bail\_out\_on\_error(ctx, f, \hyperlink{group__HTTP__Status_ga93fd8ea184f2b91b69c000f86d2e35bf}{HTTP\_REQUEST\_ENTITY\_TOO\_LARGE}
      );
435             \}
436         \}
437 
438         \textcolor{comment}{/* If we don't have a request entity indicated by the headers, EOS.}
439 \textcolor{comment}{         * (BODY\_NONE is a valid intermediate state due to trailers,}
440 \textcolor{comment}{         *  but it isn't a valid starting state.)}
441 \textcolor{comment}{         *}
442 \textcolor{comment}{         * RFC 2616 Section 4.4 note 5 states that connection-close}
443 \textcolor{comment}{         * is invalid for a request entity - request bodies must be}
444 \textcolor{comment}{         * denoted by C-L or T-E: chunked.}
445 \textcolor{comment}{         *}
446 \textcolor{comment}{         * Note that since the proxy uses this filter to handle the}
447 \textcolor{comment}{         * proxied *response*, proxy responses MUST be exempt.}
448 \textcolor{comment}{         */}
449         \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} == BODY\_NONE && f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a82ca03c6dcfcacbf7001ff85e462289d}{proxyreq} != 
      \hyperlink{group__ProxyReq_gaedfe04be933e20251ce580aa6b15d864}{PROXYREQ\_RESPONSE}) \{
450             e = apr\_bucket\_eos\_create(f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
451             \hyperlink{group__APR__Util__Bucket__Brigades_ga5447595f8374296c5ffe208db39b2f5d}{APR\_BRIGADE\_INSERT\_TAIL}(b, e);
452             ctx->\hyperlink{structhttp__filter__ctx_aaf41999f4964aefe0f6947e7482e644f}{eos\_sent} = 1;
453             \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
454         \}
455 
456         \textcolor{comment}{/* Since we're about to read data, send 100-Continue if needed.}
457 \textcolor{comment}{         * Only valid on chunked and C-L bodies where the C-L is > 0. */}
458         \textcolor{keywordflow}{if} ((ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} == BODY\_CHUNK ||
459             (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} == BODY\_LENGTH && ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} > 0)) &&
460             f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a58f8821d9463cfded49110353ced165d}{expecting\_100} && f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_aac9666ac729394665b8a7bd854336029}{proto\_num} >= 
      \hyperlink{group__APACHE__CORE__DAEMON_gab48aba3b8935a26d38b88710041a1b6a}{HTTP\_VERSION}(1,1) &&
461             !(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a0b4d967e1511b2ab93cd44987d658d43}{eos\_sent} || f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a8e626c2b8ebc0156e1517cce657cdb90}{bytes\_sent})) \{
462             \textcolor{keywordflow}{if} (!\hyperlink{group__HTTP__Status_gae0908ef87e454c3343bfe29be9e8d28b}{ap\_is\_HTTP\_SUCCESS}(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a09b59ad2fa51be73efea7369b5484eb0}{status})) \{
463                 ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} = BODY\_NONE;
464                 ctx->\hyperlink{structhttp__filter__ctx_aaf41999f4964aefe0f6947e7482e644f}{eos\_sent} = 1;
465             \}
466             \textcolor{keywordflow}{else} \{
467                 \textcolor{keywordtype}{char} *tmp;
468                 \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
469 
470                 \textcolor{comment}{/* if we send an interim response, we're no longer}
471 \textcolor{comment}{                 * in a state of expecting one.}
472 \textcolor{comment}{                 */}
473                 f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a58f8821d9463cfded49110353ced165d}{expecting\_100} = 0;
474                 tmp = apr\_pstrcat(f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, \hyperlink{group__APACHE__CORE__DAEMON_ga7432aed9e5cf19107a870f71c5bde58a}{AP\_SERVER\_PROTOCOL} \textcolor{stringliteral}{" "},
475                                   ap\_get\_status\_line(\hyperlink{group__HTTP__Status_ga3c520c5e65c710a1c7bbb1fa79fd3a9d}{HTTP\_CONTINUE}), 
      \hyperlink{group__APACHE__CORE__DAEMON_ga596f22107770abbd60ffce8338be9732}{CRLF} \hyperlink{group__APACHE__CORE__DAEMON_ga596f22107770abbd60ffce8338be9732}{CRLF},
476                                   \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL});
477                 len = strlen(tmp);
478                 \hyperlink{group__APACHE__CORE__EBCDIC_gab64dbae9ff27269fd9e52c43cb142c16}{ap\_xlate\_proto\_to\_ascii}(tmp, len);
479                 apr\_brigade\_cleanup(bb);
480                 e = apr\_bucket\_pool\_create(tmp, len, f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool},
481                                            f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
482                 \hyperlink{group__APR__Util__Bucket__Brigades_ga6dc39d8757e18941a6fb069b0c18fbd3}{APR\_BRIGADE\_INSERT\_HEAD}(bb, e);
483                 e = apr\_bucket\_flush\_create(f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
484                 \hyperlink{group__APR__Util__Bucket__Brigades_ga5447595f8374296c5ffe208db39b2f5d}{APR\_BRIGADE\_INSERT\_TAIL}(bb, e);
485 
486                 rv = ap\_pass\_brigade(f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a41ce808290656ac63a859b7145b0602c}{output\_filters}, bb);
487                 \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
488                     \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__DAEMON_ga571664f1af74affc2b898a892f335b82}{AP\_FILTER\_ERROR};
489                 \}
490             \}
491         \}
492     \}
493 
494     \textcolor{comment}{/* sanity check in case we're read twice */}
495     \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_aaf41999f4964aefe0f6947e7482e644f}{eos\_sent}) \{
496         e = apr\_bucket\_eos\_create(f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
497         \hyperlink{group__APR__Util__Bucket__Brigades_ga5447595f8374296c5ffe208db39b2f5d}{APR\_BRIGADE\_INSERT\_TAIL}(b, e);
498         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
499     \}
500 
501     \textcolor{keywordflow}{do} \{
502         apr\_brigade\_cleanup(b);
503         again = 0; \textcolor{comment}{/* until further notice */}
504 
505         \textcolor{comment}{/* read and handle the brigade */}
506         \textcolor{keywordflow}{switch} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state}) \{
507         \textcolor{keywordflow}{case} BODY\_CHUNK:
508         \textcolor{keywordflow}{case} BODY\_CHUNK\_PART:
509         \textcolor{keywordflow}{case} BODY\_CHUNK\_EXT:
510         \textcolor{keywordflow}{case} BODY\_CHUNK\_CR:
511         \textcolor{keywordflow}{case} BODY\_CHUNK\_LF:
512         \textcolor{keywordflow}{case} BODY\_CHUNK\_END:
513         \textcolor{keywordflow}{case} BODY\_CHUNK\_END\_LF: \{
514 
515             rv = ap\_get\_brigade(f->\hyperlink{structap__filter__t_af4835ed2c41734061dc374d92ba401a2}{next}, b, \hyperlink{util__filter_8h_ab570898d09fbbe5b6d838e28b90134e0ae223ad325ff670d0c1dd98d3c9dcad2d}{AP\_MODE\_GETLINE}, 
      \hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block}, 0);
516 
517             \textcolor{comment}{/* for timeout */}
518             \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block} == \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da42b97663ca71fbbf2e2af7c8192e5dd8}{APR\_NONBLOCK\_READ}
519                     && ((rv == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS} && \hyperlink{group__APR__Util__Bucket__Brigades_ga836f61da6cce15074eff257ce4b6fc0f}{APR\_BRIGADE\_EMPTY}(b))
520                             || (\hyperlink{group__APR__STATUS__IS_ga9dd578bfcd76a2d997395608ae5b3a4e}{APR\_STATUS\_IS\_EAGAIN}(rv)))) \{
521                 \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga0b2a5ebb819de5ce93d326939b586578}{APR\_EAGAIN};
522             \}
523 
524             \textcolor{keywordflow}{if} (rv == \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF}) \{
525                 \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE};
526             \}
527 
528             \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
529                 \textcolor{keywordflow}{return} rv;
530             \}
531 
532             e = \hyperlink{group__APR__Util__Bucket__Brigades_gab5826a11eb6ba90786a94282f806c230}{APR\_BRIGADE\_FIRST}(b);
533             \textcolor{keywordflow}{while} (e != \hyperlink{group__APR__Util__Bucket__Brigades_ga858da66dccab1e063415678bb115788a}{APR\_BRIGADE\_SENTINEL}(b)) \{
534                 \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__PROTO_gabd91b1aab0a10c5027ca2eb5577f759f}{buffer};
535                 \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len};
536 
537                 \textcolor{keywordflow}{if} (!\hyperlink{group__APR__Util__Bucket__Brigades_ga506cb29cc1ec1abeb487e01b122bd4d9}{APR\_BUCKET\_IS\_METADATA}(e)) \{
538                     \textcolor{keywordtype}{int} parsing = 0;
539 
540                     rv = \hyperlink{group__APR__Util__Bucket__Brigades_gae44ae938c6c60e148430fdb098dcf28f}{apr\_bucket\_read}(e, &buffer, &len, 
      \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8}{APR\_BLOCK\_READ});
541 
542                     \textcolor{keywordflow}{if} (rv == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
543                         parsing = 1;
544                         rv = parse\_chunk\_size(ctx, buffer, len,
545                                 f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}->\hyperlink{structrequest__rec_a4a8059930ce9409cb885fdeef6921b7b}{server}->limit\_req\_fieldsize, strict);
546                     \}
547                     \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
548                         \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, 
      \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, rv, f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(01590)
549                                       \textcolor{stringliteral}{"Error reading/parsing chunk %s "},
550                                       (\hyperlink{group__APR__Error_ga1dfc0bbf080f17b0b9010ef967542193}{APR\_ENOSPC} == rv) ? \textcolor{stringliteral}{"(overflow)"} : \textcolor{stringliteral}{""});
551                         \textcolor{keywordflow}{if} (parsing) \{
552                             \textcolor{keywordflow}{if} (rv != \hyperlink{group__APR__Error_ga1dfc0bbf080f17b0b9010ef967542193}{APR\_ENOSPC}) \{
553                                 http\_error = \hyperlink{group__HTTP__Status_ga0c1fdbbb10800664989907cbd3a5a023}{HTTP\_BAD\_REQUEST};
554                             \}
555                             \textcolor{keywordflow}{return} bail\_out\_on\_error(ctx, f, http\_error);
556                         \}
557                         \textcolor{keywordflow}{return} rv;
558                     \}
559                 \}
560 
561                 \hyperlink{group__APR__Util__Bucket__Brigades_ga8925c02a7f95e8c1c3986294d4678797}{apr\_bucket\_delete}(e);
562                 e = \hyperlink{group__APR__Util__Bucket__Brigades_gab5826a11eb6ba90786a94282f806c230}{APR\_BRIGADE\_FIRST}(b);
563             \}
564             again = 1; \textcolor{comment}{/* come around again */}
565 
566             \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} == BODY\_CHUNK\_TRAILER) \{
567                 \textcolor{comment}{/* Treat UNSET as DISABLE - trailers aren't merged by default */}
568                 \textcolor{keywordflow}{return} read\_chunked\_trailers(ctx, f, b,
569                             conf->\hyperlink{structcore__server__config_a2608fe3794c66bb783bff4af1191446a}{merge\_trailers} == 
      \hyperlink{http__core_8h_ac1483475c601d9d111a63ddfee3fddc8}{AP\_MERGE\_TRAILERS\_ENABLE});
570             \}
571 
572             \textcolor{keywordflow}{break};
573         \}
574         \textcolor{keywordflow}{case} BODY\_NONE:
575         \textcolor{keywordflow}{case} BODY\_LENGTH:
576         \textcolor{keywordflow}{case} BODY\_CHUNK\_DATA: \{
577 
578             \textcolor{comment}{/* Ensure that the caller can not go over our boundary point. */}
579             \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} != BODY\_NONE && ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} < 
      \hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes}) \{
580                 \hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes} = ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining};
581             \}
582             \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes} > 0) \{
583                 \hyperlink{group__apr__platform_ga6938af9075cec15c88299109381aa984}{apr\_off\_t} \hyperlink{ab_8c_a820ac3597d0f57ceb3428345978194e9}{totalread};
584 
585                 rv = ap\_get\_brigade(f->\hyperlink{structap__filter__t_af4835ed2c41734061dc374d92ba401a2}{next}, b, \hyperlink{group__APACHE__CORE__FILTER_gad194431669b7d1f96d2dacfb7be21261}{mode}, \hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block}, 
      \hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes});
586 
587                 \textcolor{comment}{/* for timeout */}
588                 \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block} == \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da42b97663ca71fbbf2e2af7c8192e5dd8}{APR\_NONBLOCK\_READ}
589                         && ((rv == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS} && \hyperlink{group__APR__Util__Bucket__Brigades_ga836f61da6cce15074eff257ce4b6fc0f}{APR\_BRIGADE\_EMPTY}(b))
590                                 || (\hyperlink{group__APR__STATUS__IS_ga9dd578bfcd76a2d997395608ae5b3a4e}{APR\_STATUS\_IS\_EAGAIN}(rv)))) \{
591                     \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga0b2a5ebb819de5ce93d326939b586578}{APR\_EAGAIN};
592                 \}
593 
594                 \textcolor{keywordflow}{if} (rv == \hyperlink{group__APR__Error_ga35d9dca2514c522a2840aca0f3e2ebd3}{APR\_EOF} && ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} != BODY\_NONE
595                         && ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} > 0) \{
596                     \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE};
597                 \}
598 
599                 \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
600                     \textcolor{keywordflow}{return} rv;
601                 \}
602 
603                 \textcolor{comment}{/* How many bytes did we just read? */}
604                 apr\_brigade\_length(b, 0, &totalread);
605 
606                 \textcolor{comment}{/* If this happens, we have a bucket of unknown length.  Die because}
607 \textcolor{comment}{                 * it means our assumptions have changed. */}
608                 \hyperlink{group__APACHE__CORE__DAEMON_ga85dbc1e4d9600422461f815193f8ace8}{AP\_DEBUG\_ASSERT}(totalread >= 0);
609 
610                 \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} != BODY\_NONE) \{
611                     ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} -= \hyperlink{ab_8c_a820ac3597d0f57ceb3428345978194e9}{totalread};
612                     \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} > 0) \{
613                         e = \hyperlink{group__APR__Util__Bucket__Brigades_ga40e0ef2a904aa519ca9d63288dee0b4d}{APR\_BRIGADE\_LAST}(b);
614                         \textcolor{keywordflow}{if} (\hyperlink{group__APR__Util__Bucket__Brigades_ga89b225e1c08473766eec719b985ca0d6}{APR\_BUCKET\_IS\_EOS}(e)) \{
615                             \hyperlink{group__APR__Util__Bucket__Brigades_ga8925c02a7f95e8c1c3986294d4678797}{apr\_bucket\_delete}(e);
616                             \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE};
617                         \}
618                     \}
619                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} == BODY\_CHUNK\_DATA) \{
620                         \textcolor{comment}{/* next chunk please */}
621                         ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} = BODY\_CHUNK\_END;
622                         ctx->\hyperlink{structhttp__filter__ctx_af2c2e8f48a907b5515b8c42252be727d}{chunk\_used} = 0;
623                     \}
624                 \}
625 
626                 \textcolor{comment}{/* We have a limit in effect. */}
627                 \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit}) \{
628                     \textcolor{comment}{/* FIXME: Note that we might get slightly confused on}
629 \textcolor{comment}{                     * chunked inputs as we'd need to compensate for the chunk}
630 \textcolor{comment}{                     * lengths which may not really count.  This seems to be up}
631 \textcolor{comment}{                     * for interpretation.}
632 \textcolor{comment}{                     */}
633                     ctx->\hyperlink{structhttp__filter__ctx_a39ce71ac22882c37594f7ff5a1d6bbe6}{limit\_used} += \hyperlink{ab_8c_a820ac3597d0f57ceb3428345978194e9}{totalread};
634                     \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit} < ctx->\hyperlink{structhttp__filter__ctx_a39ce71ac22882c37594f7ff5a1d6bbe6}{limit\_used}) \{
635                         \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, 
      \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, 0, f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r},
636                                       \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(01591) \textcolor{stringliteral}{"Read content length of "}
637                                       \textcolor{stringliteral}{"%"} \hyperlink{group__apr__platform_gad71d0d5a325d1aedeb6328d6bdacac76}{APR\_OFF\_T\_FMT} \textcolor{stringliteral}{" is larger than the "}
638                                       \textcolor{stringliteral}{"configured limit of %"} \hyperlink{group__apr__platform_gad71d0d5a325d1aedeb6328d6bdacac76}{APR\_OFF\_T\_FMT},
639                                       ctx->\hyperlink{structhttp__filter__ctx_a39ce71ac22882c37594f7ff5a1d6bbe6}{limit\_used}, ctx->\hyperlink{structhttp__filter__ctx_ae3dfd19fe37ee4d2d690ca352f6d8601}{limit});
640                         \textcolor{keywordflow}{return} bail\_out\_on\_error(ctx, f,
641                                                  \hyperlink{group__HTTP__Status_ga93fd8ea184f2b91b69c000f86d2e35bf}{HTTP\_REQUEST\_ENTITY\_TOO\_LARGE}
      );
642                     \}
643                 \}
644             \}
645 
646             \textcolor{comment}{/* If we have no more bytes remaining on a C-L request,}
647 \textcolor{comment}{             * save the caller a round trip to discover EOS.}
648 \textcolor{comment}{             */}
649             \textcolor{keywordflow}{if} (ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state} == BODY\_LENGTH && ctx->\hyperlink{structhttp__filter__ctx_a669e4805b3738b515c0bc6d56f0f7ea7}{remaining} == 0) \{
650                 e = apr\_bucket\_eos\_create(f->\hyperlink{structap__filter__t_afb039953f0c62d8455aa9f4bdd3ef487}{c}->\hyperlink{structconn__rec_a5a9ee4911c5a655131f76a04036fb4c0}{bucket\_alloc});
651                 \hyperlink{group__APR__Util__Bucket__Brigades_ga5447595f8374296c5ffe208db39b2f5d}{APR\_BRIGADE\_INSERT\_TAIL}(b, e);
652                 ctx->\hyperlink{structhttp__filter__ctx_aaf41999f4964aefe0f6947e7482e644f}{eos\_sent} = 1;
653             \}
654 
655             \textcolor{keywordflow}{break};
656         \}
657         \textcolor{keywordflow}{case} BODY\_CHUNK\_TRAILER: \{
658 
659             rv = ap\_get\_brigade(f->\hyperlink{structap__filter__t_af4835ed2c41734061dc374d92ba401a2}{next}, b, \hyperlink{group__APACHE__CORE__FILTER_gad194431669b7d1f96d2dacfb7be21261}{mode}, \hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block}, \hyperlink{group__APACHE__CORE__FILTER_ga0ce3dc88443223a04b0d1a3167356aee}{readbytes});
660 
661             \textcolor{comment}{/* for timeout */}
662             \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__FILTER_gafe0ebf200b97a61a45c0513334da9ab6}{block} == \hyperlink{group__APR__Util__Bucket__Brigades_gga756973fb6392bd1026c3d96b4519776da42b97663ca71fbbf2e2af7c8192e5dd8}{APR\_NONBLOCK\_READ}
663                     && ((rv == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS} && \hyperlink{group__APR__Util__Bucket__Brigades_ga836f61da6cce15074eff257ce4b6fc0f}{APR\_BRIGADE\_EMPTY}(b))
664                             || (\hyperlink{group__APR__STATUS__IS_ga9dd578bfcd76a2d997395608ae5b3a4e}{APR\_STATUS\_IS\_EAGAIN}(rv)))) \{
665                 \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga0b2a5ebb819de5ce93d326939b586578}{APR\_EAGAIN};
666             \}
667 
668             \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
669                 \textcolor{keywordflow}{return} rv;
670             \}
671 
672             \textcolor{keywordflow}{break};
673         \}
674         \textcolor{keywordflow}{default}: \{
675             \textcolor{comment}{/* Should not happen */}
676             \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga47fafbef7e478babdd92e90407f95b19}{APLOG\_INFO}, 0, f->
      \hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(02901)
677                           \textcolor{stringliteral}{"Unexpected body state (%i)"}, (\textcolor{keywordtype}{int})ctx->\hyperlink{structhttp__filter__ctx_a2e84a1c737dd4daa565b328c875402cb}{state});
678             \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga18f5678bea0c2c704a2b6a186c9e158b}{APR\_EGENERAL};
679         \}
680         \}
681 
682     \} \textcolor{keywordflow}{while} (again);
683 
684     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
685 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=257pt]{group__MOD__CORE_gadd1247f7f25a314f11e5d22911a5bda5_cgraph}
\end{center}
\end{figure}


\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+http\+\_\+outerror\+\_\+filter@{ap\+\_\+http\+\_\+outerror\+\_\+filter}}
\index{ap\+\_\+http\+\_\+outerror\+\_\+filter@{ap\+\_\+http\+\_\+outerror\+\_\+filter}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+http\+\_\+outerror\+\_\+filter(ap\+\_\+filter\+\_\+t $\ast$f, apr\+\_\+bucket\+\_\+brigade $\ast$b)}{ap_http_outerror_filter(ap_filter_t *f, apr_bucket_brigade *b)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} ap\+\_\+http\+\_\+outerror\+\_\+filter (
\begin{DoxyParamCaption}
\item[{{\bf ap\+\_\+filter\+\_\+t} $\ast$}]{f, }
\item[{{\bf apr\+\_\+bucket\+\_\+brigade} $\ast$}]{b}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_gaf839ae89e49affbb98a7e7327fc81d37}{}\label{group__MOD__CORE_gaf839ae89e49affbb98a7e7327fc81d37}

\begin{DoxyCode}
1846 \{
1847     \hyperlink{structrequest__rec}{request\_rec} *\hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r} = f->\hyperlink{structap__filter__t_a2d6537780c4059697c1f168a1121d62c}{r};
1848     \hyperlink{structouterror__filter__ctx__t}{outerror\_filter\_ctx\_t} *\hyperlink{group__APACHE__CORE__FILTER_ga94af791485570bea922969fef12d6259}{ctx} = (\hyperlink{structouterror__filter__ctx__t}{outerror\_filter\_ctx\_t} *)(f->
      \hyperlink{structap__filter__t_aef5a2ef40157f704d2b573b8737a6a70}{ctx});
1849     \hyperlink{structapr__bucket}{apr\_bucket} *\hyperlink{group__APR__Util__Bucket__Brigades_gacd90314acb2c2e5cd19681136c08efac}{e};
1850 
1851     \textcolor{comment}{/* Create context if none is present */}
1852     \textcolor{keywordflow}{if} (!ctx) \{
1853         ctx = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(r->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, \textcolor{keyword}{sizeof}(\hyperlink{structouterror__filter__ctx__t}{outerror\_filter\_ctx\_t}));
1854         f->\hyperlink{structap__filter__t_aef5a2ef40157f704d2b573b8737a6a70}{ctx} = \hyperlink{group__APACHE__CORE__FILTER_ga94af791485570bea922969fef12d6259}{ctx};
1855     \}
1856     \textcolor{keywordflow}{for} (e = \hyperlink{group__APR__Util__Bucket__Brigades_gab5826a11eb6ba90786a94282f806c230}{APR\_BRIGADE\_FIRST}(b);
1857          e != \hyperlink{group__APR__Util__Bucket__Brigades_ga858da66dccab1e063415678bb115788a}{APR\_BRIGADE\_SENTINEL}(b);
1858          e = \hyperlink{group__APR__Util__Bucket__Brigades_ga7171f690b203d548a5b6ae0b079068d8}{APR\_BUCKET\_NEXT}(e))
1859     \{
1860         \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__PROTO_gaab791518d091322fdc35b084f5b9f642}{AP\_BUCKET\_IS\_ERROR}(e)) \{
1861             \textcolor{comment}{/*}
1862 \textcolor{comment}{             * Start of error handling state tree. Just one condition}
1863 \textcolor{comment}{             * right now :)}
1864 \textcolor{comment}{             */}
1865             \textcolor{keywordflow}{if} (((\hyperlink{structap__bucket__error}{ap\_bucket\_error} *)(e->\hyperlink{structapr__bucket_a7fc4604750889b3f762bda1a786d276a}{data}))->status == 
      \hyperlink{group__HTTP__Status_ga57ddfb82346d6efc864c3e164e574b10}{HTTP\_BAD\_GATEWAY}) \{
1866                 \textcolor{comment}{/* stream aborted and we have not ended it yet */}
1867                 r->\hyperlink{structrequest__rec_a0924aae55826638314f76952ca5d60b1}{connection}->keepalive = \hyperlink{group__APACHE__CORE__DAEMON_gga0fc39bb8f47f9c1f418f28354416db79ac991e8ec951fe03c8c2f36495859034d}{AP\_CONN\_CLOSE};
1868             \}
1869             \textcolor{keywordflow}{continue};
1870         \}
1871         \textcolor{comment}{/* Detect EOC buckets and memorize this in the context. */}
1872         \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__CONNECTION_ga6ae3ca117a7265de04b91849d6b5acb1}{AP\_BUCKET\_IS\_EOC}(e)) \{
1873             ctx->\hyperlink{structouterror__filter__ctx__t_a8535206a76c9a7e7377d96d1e03f86f6}{seen\_eoc} = 1;
1874         \}
1875     \}
1876     \textcolor{comment}{/*}
1877 \textcolor{comment}{     * Remove all data buckets that are in a brigade after an EOC bucket}
1878 \textcolor{comment}{     * was seen, as an EOC bucket tells us that no (further) resource}
1879 \textcolor{comment}{     * and protocol data should go out to the client. OTOH meta buckets}
1880 \textcolor{comment}{     * are still welcome as they might trigger needed actions down in}
1881 \textcolor{comment}{     * the chain (e.g. in network filters like SSL).}
1882 \textcolor{comment}{     * Remark 1: It is needed to dump ALL data buckets in the brigade}
1883 \textcolor{comment}{     *           since an filter in between might have inserted data}
1884 \textcolor{comment}{     *           buckets BEFORE the EOC bucket sent by the original}
1885 \textcolor{comment}{     *           sender and we do NOT want this data to be sent.}
1886 \textcolor{comment}{     * Remark 2: Dumping all data buckets here does not necessarily mean}
1887 \textcolor{comment}{     *           that no further data is send to the client as:}
1888 \textcolor{comment}{     *           1. Network filters like SSL can still be triggered via}
1889 \textcolor{comment}{     *              meta buckets to talk with the client e.g. for a}
1890 \textcolor{comment}{     *              clean shutdown.}
1891 \textcolor{comment}{     *           2. There could be still data that was buffered before}
1892 \textcolor{comment}{     *              down in the chain that gets flushed by a FLUSH or an}
1893 \textcolor{comment}{     *              EOS bucket.}
1894 \textcolor{comment}{     */}
1895     \textcolor{keywordflow}{if} (ctx->\hyperlink{structouterror__filter__ctx__t_a8535206a76c9a7e7377d96d1e03f86f6}{seen\_eoc}) \{
1896         \textcolor{keywordflow}{for} (e = \hyperlink{group__APR__Util__Bucket__Brigades_gab5826a11eb6ba90786a94282f806c230}{APR\_BRIGADE\_FIRST}(b);
1897              e != \hyperlink{group__APR__Util__Bucket__Brigades_ga858da66dccab1e063415678bb115788a}{APR\_BRIGADE\_SENTINEL}(b);
1898              e = \hyperlink{group__APR__Util__Bucket__Brigades_ga7171f690b203d548a5b6ae0b079068d8}{APR\_BUCKET\_NEXT}(e))
1899         \{
1900             \textcolor{keywordflow}{if} (!\hyperlink{group__APR__Util__Bucket__Brigades_ga506cb29cc1ec1abeb487e01b122bd4d9}{APR\_BUCKET\_IS\_METADATA}(e)) \{
1901                 \hyperlink{group__APR__Util__Bucket__Brigades_ga2c46a1b717a87b68bd98b425e0c64977}{APR\_BUCKET\_REMOVE}(e);
1902             \}
1903         \}
1904     \}
1905 
1906     \textcolor{keywordflow}{return} ap\_pass\_brigade(f->\hyperlink{structap__filter__t_af4835ed2c41734061dc374d92ba401a2}{next},  b);
1907 \}
\end{DoxyCode}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+response\+\_\+code\+\_\+string@{ap\+\_\+response\+\_\+code\+\_\+string}}
\index{ap\+\_\+response\+\_\+code\+\_\+string@{ap\+\_\+response\+\_\+code\+\_\+string}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+response\+\_\+code\+\_\+string(request\+\_\+rec $\ast$r, int error\+\_\+index)}{ap_response_code_string(request_rec *r, int error_index)}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ ap\+\_\+response\+\_\+code\+\_\+string (
\begin{DoxyParamCaption}
\item[{{\bf request\+\_\+rec} $\ast$}]{r, }
\item[{{\bf int}}]{error\+\_\+index}
\end{DoxyParamCaption}
)}\hypertarget{group__MOD__CORE_gab66afd11fec3fb71fbfed031405c85ab}{}\label{group__MOD__CORE_gab66afd11fec3fb71fbfed031405c85ab}

\begin{DoxyCode}
827 \{
828     \hyperlink{structcore__dir__config}{core\_dir\_config} *dirconf;
829     \hyperlink{structcore__request__config}{core\_request\_config} *reqconf = \hyperlink{group__APACHE__CORE__HTTPD_ga5e96e185d9e95051576a4fbb7846ae51}{ap\_get\_core\_module\_config}(r
      ->\hyperlink{structrequest__rec_a64ddc7e883db1473c43254766c0c0c07}{request\_config});
830     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__AP__EXPR_gaccebe6c638c552d2845014cf8bdea8d8}{err};
831     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{group__MOD__DAV_ga61a23706db0e2c726e15a7a081345de7}{response};
832     \hyperlink{structap__expr__info__t}{ap\_expr\_info\_t} *\hyperlink{group__AP__EXPR_ga678330dc2f7e5114b38824a310f676ed}{expr};
833 
834     \textcolor{comment}{/* check for string registered via ap\_custom\_response() first */}
835     \textcolor{keywordflow}{if} (reqconf->\hyperlink{structcore__request__config_a12553976ceaa71260fc40cc5d3b41aa5}{response\_code\_strings} != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}
836             && reqconf->\hyperlink{structcore__request__config_a12553976ceaa71260fc40cc5d3b41aa5}{response\_code\_strings}[error\_index] != 
      \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
837         \textcolor{keywordflow}{return} reqconf->\hyperlink{structcore__request__config_a12553976ceaa71260fc40cc5d3b41aa5}{response\_code\_strings}[error\_index];
838     \}
839 
840     \textcolor{comment}{/* check for string specified via ErrorDocument */}
841     dirconf = \hyperlink{group__APACHE__CORE__HTTPD_ga5e96e185d9e95051576a4fbb7846ae51}{ap\_get\_core\_module\_config}(r->
      \hyperlink{structrequest__rec_a0935ac19a61c462c8986898b4c30547d}{per\_dir\_config});
842 
843     \textcolor{keywordflow}{if} (!dirconf->\hyperlink{structcore__dir__config_a1fab962a8a35689fc897b2aac77b935e}{response\_code\_exprs}) \{
844         \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
845     \}
846 
847     expr = apr\_hash\_get(dirconf->\hyperlink{structcore__dir__config_a1fab962a8a35689fc897b2aac77b935e}{response\_code\_exprs}, &error\_index,
848             \textcolor{keyword}{sizeof}(error\_index));
849     \textcolor{keywordflow}{if} (!expr) \{
850         \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
851     \}
852 
853     \textcolor{comment}{/* special token to indicate revert back to default */}
854     \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{char} *) expr == &errordocument\_default) \{
855         \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
856     \}
857 
858     err = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
859     response = ap\_expr\_str\_exec(r, expr, &err);
860     \textcolor{keywordflow}{if} (err) \{
861         \hyperlink{group__APACHE__CORE__LOG_ga4c112558ccffd6b363da102b2052d2a6}{ap\_log\_rerror}(
862                 \hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga57ad94ed8c92c4306de90479251a5d58}{APLOG\_ERR}, 0, r, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(02841) \textcolor{stringliteral}{"core: ErrorDocument:
       can't "}
863                 \textcolor{stringliteral}{"evaluate require expression: %s"}, err);
864         \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
865     \}
866 
867     \textcolor{comment}{/* alas, duplication required as we return not-const */}
868     \textcolor{keywordflow}{return} apr\_pstrdup(r->\hyperlink{structrequest__rec_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0}{pool}, response);
869 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__MOD__CORE_gab66afd11fec3fb71fbfed031405c85ab_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__MOD__CORE_gab66afd11fec3fb71fbfed031405c85ab_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+byterange\+\_\+filter\+\_\+handle@{ap\+\_\+byterange\+\_\+filter\+\_\+handle}}
\index{ap\+\_\+byterange\+\_\+filter\+\_\+handle@{ap\+\_\+byterange\+\_\+filter\+\_\+handle}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+byterange\+\_\+filter\+\_\+handle}{ap_byterange_filter_handle}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} {\bf ap\+\_\+filter\+\_\+rec\+\_\+t}$\ast$ ap\+\_\+byterange\+\_\+filter\+\_\+handle}\hypertarget{group__MOD__CORE_ga7c86a5a40f67a4667c007899293a08d7}{}\label{group__MOD__CORE_ga7c86a5a40f67a4667c007899293a08d7}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+chunk\+\_\+filter\+\_\+handle@{ap\+\_\+chunk\+\_\+filter\+\_\+handle}}
\index{ap\+\_\+chunk\+\_\+filter\+\_\+handle@{ap\+\_\+chunk\+\_\+filter\+\_\+handle}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+chunk\+\_\+filter\+\_\+handle}{ap_chunk_filter_handle}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} {\bf ap\+\_\+filter\+\_\+rec\+\_\+t}$\ast$ ap\+\_\+chunk\+\_\+filter\+\_\+handle}\hypertarget{group__MOD__CORE_ga3b05beb1e35eee549854391adb4cb208}{}\label{group__MOD__CORE_ga3b05beb1e35eee549854391adb4cb208}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle@{ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle}}
\index{ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle@{ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle}{ap_http_header_filter_handle}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} {\bf ap\+\_\+filter\+\_\+rec\+\_\+t}$\ast$ ap\+\_\+http\+\_\+header\+\_\+filter\+\_\+handle}\hypertarget{group__MOD__CORE_gaa26a8ba27d83d5164e081376e7194a6b}{}\label{group__MOD__CORE_gaa26a8ba27d83d5164e081376e7194a6b}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle@{ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle}}
\index{ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle@{ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle}{ap_http_input_filter_handle}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} {\bf ap\+\_\+filter\+\_\+rec\+\_\+t}$\ast$ ap\+\_\+http\+\_\+input\+\_\+filter\+\_\+handle}\hypertarget{group__MOD__CORE_gaeb746d5b6cdbaa812be4a7f25430cc02}{}\label{group__MOD__CORE_gaeb746d5b6cdbaa812be4a7f25430cc02}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle@{ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle}}
\index{ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle@{ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle}{ap_http_outerror_filter_handle}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} {\bf ap\+\_\+filter\+\_\+rec\+\_\+t}$\ast$ ap\+\_\+http\+\_\+outerror\+\_\+filter\+\_\+handle}\hypertarget{group__MOD__CORE_ga02a4c6ebf534dacd08a261efad19617f}{}\label{group__MOD__CORE_ga02a4c6ebf534dacd08a261efad19617f}
\index{mod\+\_\+core@{mod\+\_\+core}!ap\+\_\+multipart\+\_\+boundary@{ap\+\_\+multipart\+\_\+boundary}}
\index{ap\+\_\+multipart\+\_\+boundary@{ap\+\_\+multipart\+\_\+boundary}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{ap\+\_\+multipart\+\_\+boundary}{ap_multipart_boundary}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+TA} const char$\ast$ ap\+\_\+multipart\+\_\+boundary}\hypertarget{group__MOD__CORE_gab5961ea801f827be5ef4dd64da4bfbc3}{}\label{group__MOD__CORE_gab5961ea801f827be5ef4dd64da4bfbc3}
\index{mod\+\_\+core@{mod\+\_\+core}!bb@{bb}}
\index{bb@{bb}!mod\+\_\+core@{mod\+\_\+core}}
\subsubsection[{\texorpdfstring{bb}{bb}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+bucket\+\_\+brigade}$\ast$ bb}\hypertarget{group__MOD__CORE_ga0b0eadb381dbe958da483f3d9fc9521a}{}\label{group__MOD__CORE_ga0b0eadb381dbe958da483f3d9fc9521a}
