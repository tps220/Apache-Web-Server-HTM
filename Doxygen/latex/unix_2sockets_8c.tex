\hypertarget{unix_2sockets_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/network\+\_\+io/unix/sockets.c File Reference}
\label{unix_2sockets_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/network\+\_\+io/unix/sockets.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/network\+\_\+io/unix/sockets.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+arch\+\_\+networkio.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+network\+\_\+io.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+support.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+portable.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+arch\+\_\+inherit.\+h\char`\"{}}\\*
Include dependency graph for sockets.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockets_8c__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{unix_2sockets_8c__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{unix_2sockets_8c_a80f957884ab9fca136831d807e67c560}{G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN}~16
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_ac402d9426de37b6cede18fa157020bd9}{apr\+\_\+socket\+\_\+protocol\+\_\+get} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} $\ast$\hyperlink{group__apr__network__io_gaffe05cd2fe14c30ec8ea72e19680fbda}{protocol})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_ad975e4f99f233d8156a9e8e1a153199d}{apr\+\_\+socket\+\_\+create} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$$\ast$new, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} ofamily, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{pcre_8txt_a2463fbbe8b0c90b90db12195e1edaa5d}{type}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__apr__network__io_gaffe05cd2fe14c30ec8ea72e19680fbda}{protocol}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__Util__RMM_ga787b4ea953862721fc5e2d757cd26cfc}{cont})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_ac5aea857a50c493f840c48b930abc48e}{apr\+\_\+socket\+\_\+shutdown} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$thesocket, \hyperlink{group__apr__network__io_gae2130f1fa2d0db58c5c3c9c73d9b4009}{apr\+\_\+shutdown\+\_\+how\+\_\+e} \hyperlink{group__apr__thread__proc_ga6e0837f31f9838d1bc93f4e98184579f}{how})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a88779f243ce19a2563544aee81894e6d}{apr\+\_\+socket\+\_\+close} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$thesocket)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a512882c9979c2b9cad7cbc2508516d65}{apr\+\_\+socket\+\_\+bind} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{structapr__sockaddr__t}{apr\+\_\+sockaddr\+\_\+t} $\ast$\hyperlink{group__apr__network__io_ga5dc1cb3876df6ab646ee9b3d528cbd9f}{sa})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a154bcee918f6f01fe0373359dd74b0c4}{apr\+\_\+socket\+\_\+listen} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__platform_ga21ef1e35fd3ff9be386f3cb20164ff02}{apr\+\_\+int32\+\_\+t} \hyperlink{group__apr__network__io_ga8ab200d7cdc39cd5efe5114a1ebc5969}{backlog})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a0c6a5d4f9de19f14390dc412717b89f2}{apr\+\_\+socket\+\_\+accept} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$$\ast$new, \hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$connection\+\_\+context)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a8e58bd8112ed2ce5004487918cd9275e}{apr\+\_\+socket\+\_\+connect} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{structapr__sockaddr__t}{apr\+\_\+sockaddr\+\_\+t} $\ast$\hyperlink{group__apr__network__io_ga5dc1cb3876df6ab646ee9b3d528cbd9f}{sa})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a8d23ee2db9a84af2e6408ef460613514}{apr\+\_\+socket\+\_\+type\+\_\+get} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} $\ast$\hyperlink{pcre_8txt_a2463fbbe8b0c90b90db12195e1edaa5d}{type})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_ae76b48d0224a608b4ddb8bd00582eaa7}{apr\+\_\+socket\+\_\+data\+\_\+get} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$$\ast$\hyperlink{structdata}{data}, const char $\ast$\hyperlink{apr__siphash_8h_adac0b6a30345ea1d0daa8a692b0b7ad9}{key}, \hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_afec197f3aa9a495801cdf7892ff8dcb5}{apr\+\_\+socket\+\_\+data\+\_\+set} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$\hyperlink{structdata}{data}, const char $\ast$\hyperlink{apr__siphash_8h_adac0b6a30345ea1d0daa8a692b0b7ad9}{key}, \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}($\ast$\hyperlink{group__apr__thread__proc_gae555885ae33d4ce54db29815c6221f58}{cleanup})(\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$))
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a07ec79bbb5243596933cd2caf2d428df}{apr\+\_\+os\+\_\+sock\+\_\+get} (\hyperlink{group__apr__portabile_ga2965cd2e48cb6513bc0ba05aa6083ed7}{apr\+\_\+os\+\_\+sock\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga7416ad406fa85593c0df6de8348d86f6}{thesock}, \hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a5df9f6b1b9c07bfeca3685118760eefc}{apr\+\_\+os\+\_\+sock\+\_\+make} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$$\ast$apr\+\_\+sock, \hyperlink{structapr__os__sock__info__t}{apr\+\_\+os\+\_\+sock\+\_\+info\+\_\+t} $\ast$\hyperlink{group__apr__portabile_gaa1f4b361ddc24ad6f9a0ea53fe15ca61}{os\+\_\+sock\+\_\+info}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__Util__RMM_ga787b4ea953862721fc5e2d757cd26cfc}{cont})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2sockets_8c_a729bd6825dfadd814de2aa602462d838}{apr\+\_\+os\+\_\+sock\+\_\+put} (\hyperlink{structapr__socket__t}{apr\+\_\+socket\+\_\+t} $\ast$$\ast$\hyperlink{group__apr__portabile_ga8292197f1f8dcb54676a30f4d8b95bfb}{sock}, \hyperlink{group__apr__portabile_ga2965cd2e48cb6513bc0ba05aa6083ed7}{apr\+\_\+os\+\_\+sock\+\_\+t} $\ast$\hyperlink{group__apr__portabile_ga7416ad406fa85593c0df6de8348d86f6}{thesock}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APR__Util__RMM_ga787b4ea953862721fc5e2d757cd26cfc}{cont})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{unix/sockets.\+c@{unix/sockets.\+c}!G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN@{G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN}}
\index{G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN@{G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN}{GENERIC_INADDR_ANY_LEN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define G\+E\+N\+E\+R\+I\+C\+\_\+\+I\+N\+A\+D\+D\+R\+\_\+\+A\+N\+Y\+\_\+\+L\+EN~16}\hypertarget{unix_2sockets_8c_a80f957884ab9fca136831d807e67c560}{}\label{unix_2sockets_8c_a80f957884ab9fca136831d807e67c560}


\subsection{Function Documentation}
\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+os\+\_\+sock\+\_\+get@{apr\+\_\+os\+\_\+sock\+\_\+get}}
\index{apr\+\_\+os\+\_\+sock\+\_\+get@{apr\+\_\+os\+\_\+sock\+\_\+get}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+os\+\_\+sock\+\_\+get(apr\+\_\+os\+\_\+sock\+\_\+t $\ast$thesock, apr\+\_\+socket\+\_\+t $\ast$sock)}{apr_os_sock_get(apr_os_sock_t *thesock, apr_socket_t *sock)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+os\+\_\+sock\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+os\+\_\+sock\+\_\+t} $\ast$}]{thesock, }
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a07ec79bbb5243596933cd2caf2d428df}{}\label{unix_2sockets_8c_a07ec79bbb5243596933cd2caf2d428df}

\begin{DoxyCode}
507 \{
508     *\hyperlink{group__apr__portabile_ga7416ad406fa85593c0df6de8348d86f6}{thesock} = sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes};
509     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
510 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockets_8c_a07ec79bbb5243596933cd2caf2d428df_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+os\+\_\+sock\+\_\+make@{apr\+\_\+os\+\_\+sock\+\_\+make}}
\index{apr\+\_\+os\+\_\+sock\+\_\+make@{apr\+\_\+os\+\_\+sock\+\_\+make}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+os\+\_\+sock\+\_\+make(apr\+\_\+socket\+\_\+t $\ast$$\ast$apr\+\_\+sock, apr\+\_\+os\+\_\+sock\+\_\+info\+\_\+t $\ast$os\+\_\+sock\+\_\+info, apr\+\_\+pool\+\_\+t $\ast$cont)}{apr_os_sock_make(apr_socket_t **apr_sock, apr_os_sock_info_t *os_sock_info, apr_pool_t *cont)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+os\+\_\+sock\+\_\+make (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$$\ast$}]{apr\+\_\+sock, }
\item[{{\bf apr\+\_\+os\+\_\+sock\+\_\+info\+\_\+t} $\ast$}]{os\+\_\+sock\+\_\+info, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{cont}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a5df9f6b1b9c07bfeca3685118760eefc}{}\label{unix_2sockets_8c_a5df9f6b1b9c07bfeca3685118760eefc}

\begin{DoxyCode}
515 \{
516     alloc\_socket(apr\_sock, cont);
517     set\_socket\_vars(*apr\_sock, os\_sock\_info->\hyperlink{structapr__os__sock__info__t_aa29fd0cf57b0b5e3559961f068fa8b7e}{family}, os\_sock\_info->\hyperlink{structapr__os__sock__info__t_a248fb394cd644b31619f44de0936aa04}{type}, os\_sock\_info->
      \hyperlink{structapr__os__sock__info__t_a176ede3ecf40abf0f82a01bfeb95f1e3}{protocol});
518     (*apr\_sock)->timeout = -1;
519     (*apr\_sock)->socketdes = *os\_sock\_info->\hyperlink{structapr__os__sock__info__t_a952464d2f91ca4650e8b4848a81745b5}{os\_sock};
520     \textcolor{keywordflow}{if} (os\_sock\_info->\hyperlink{structapr__os__sock__info__t_afaf470560cbc3088479af708878aa086}{local}) \{
521         memcpy(&(*apr\_sock)->local\_addr->sa.sin, 
522                os\_sock\_info->\hyperlink{structapr__os__sock__info__t_afaf470560cbc3088479af708878aa086}{local}, 
523                (*apr\_sock)->local\_addr->salen);
524         \textcolor{comment}{/* XXX IPv6 - this assumes sin\_port and sin6\_port at same offset */}
525         (*apr\_sock)->local\_addr->port = ntohs((*apr\_sock)->local\_addr->sa.sin.sin\_port);
526     \}
527     \textcolor{keywordflow}{else} \{
528         (*apr\_sock)->local\_port\_unknown = (*apr\_sock)->local\_interface\_unknown = 1;
529     \}
530     \textcolor{keywordflow}{if} (os\_sock\_info->\hyperlink{structapr__os__sock__info__t_ae71fe14a5eb9141fc4ad0a6d0a91f17e}{remote}) \{
531 \textcolor{preprocessor}{#ifndef HAVE\_POLL}
532         (*apr\_sock)->connected = 1;
533 \textcolor{preprocessor}{#endif}
534         memcpy(&(*apr\_sock)->remote\_addr->sa.sin, 
535                os\_sock\_info->\hyperlink{structapr__os__sock__info__t_ae71fe14a5eb9141fc4ad0a6d0a91f17e}{remote},
536                (*apr\_sock)->remote\_addr->salen);
537         \textcolor{comment}{/* XXX IPv6 - this assumes sin\_port and sin6\_port at same offset */}
538         (*apr\_sock)->remote\_addr->port = ntohs((*apr\_sock)->remote\_addr->sa.sin.sin\_port);
539     \}
540     \textcolor{keywordflow}{else} \{
541         (*apr\_sock)->remote\_addr\_unknown = 1;
542     \}
543         
544     (*apr\_sock)->inherit = 0;
545     apr\_pool\_cleanup\_register((*apr\_sock)->pool, (\textcolor{keywordtype}{void} *)(*apr\_sock), 
546                               socket\_cleanup, socket\_cleanup);
547     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
548 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=308pt]{unix_2sockets_8c_a5df9f6b1b9c07bfeca3685118760eefc_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+os\+\_\+sock\+\_\+put@{apr\+\_\+os\+\_\+sock\+\_\+put}}
\index{apr\+\_\+os\+\_\+sock\+\_\+put@{apr\+\_\+os\+\_\+sock\+\_\+put}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+os\+\_\+sock\+\_\+put(apr\+\_\+socket\+\_\+t $\ast$$\ast$sock, apr\+\_\+os\+\_\+sock\+\_\+t $\ast$thesock, apr\+\_\+pool\+\_\+t $\ast$cont)}{apr_os_sock_put(apr_socket_t **sock, apr_os_sock_t *thesock, apr_pool_t *cont)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+os\+\_\+sock\+\_\+put (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$$\ast$}]{sock, }
\item[{{\bf apr\+\_\+os\+\_\+sock\+\_\+t} $\ast$}]{thesock, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{cont}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a729bd6825dfadd814de2aa602462d838}{}\label{unix_2sockets_8c_a729bd6825dfadd814de2aa602462d838}

\begin{DoxyCode}
552 \{
553     \textcolor{comment}{/* XXX Bogus assumption that *sock points at anything legit */}
554     \textcolor{keywordflow}{if} ((*sock) == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
555         alloc\_socket(sock, cont);
556         \textcolor{comment}{/* XXX IPv6 figure out the family here! */}
557         \textcolor{comment}{/* XXX figure out the actual socket type here */}
558         \textcolor{comment}{/* *or* just decide that apr\_os\_sock\_put() has to be told the family and type */}
559         set\_socket\_vars(*sock, \hyperlink{group__apr__network__io_gaa96e8e8dbf92bc77643a4032017b3d67}{APR\_INET}, SOCK\_STREAM, 0);
560         (*sock)->timeout = -1;
561     \}
562     (*sock)->local\_port\_unknown = (*sock)->local\_interface\_unknown = 1;
563     (*sock)->remote\_addr\_unknown = 1;
564     (*sock)->socketdes = *\hyperlink{group__apr__portabile_ga7416ad406fa85593c0df6de8348d86f6}{thesock};
565     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
566 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=341pt]{unix_2sockets_8c_a729bd6825dfadd814de2aa602462d838_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=298pt]{unix_2sockets_8c_a729bd6825dfadd814de2aa602462d838_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+accept@{apr\+\_\+socket\+\_\+accept}}
\index{apr\+\_\+socket\+\_\+accept@{apr\+\_\+socket\+\_\+accept}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+accept(apr\+\_\+socket\+\_\+t $\ast$$\ast$new, apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+pool\+\_\+t $\ast$connection\+\_\+context)}{apr_socket_accept(apr_socket_t **new, apr_socket_t *sock, apr_pool_t *connection_context)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+accept (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$$\ast$}]{new, }
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{connection\+\_\+context}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a0c6a5d4f9de19f14390dc412717b89f2}{}\label{unix_2sockets_8c_a0c6a5d4f9de19f14390dc412717b89f2}

\begin{DoxyCode}
249 \{
250     \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
251     \hyperlink{structapr__sockaddr__t}{apr\_sockaddr\_t} \hyperlink{group__apr__network__io_ga5dc1cb3876df6ab646ee9b3d528cbd9f}{sa};
252 
253     sa.\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen} = \textcolor{keyword}{sizeof}(sa.\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa});
254 
255 \textcolor{preprocessor}{#ifdef HAVE\_ACCEPT4}
256     \{
257         \textcolor{keywordtype}{int} \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags} = SOCK\_CLOEXEC;
258 
259 \textcolor{preprocessor}{#if defined(SOCK\_NONBLOCK) && APR\_O\_NONBLOCK\_INHERITED}
260         \textcolor{comment}{/* With FreeBSD accept4() (avail in 10+), O\_NONBLOCK is not inherited}
261 \textcolor{comment}{         * (unlike Linux).  Mimic the accept() behavior here in a way that}
262 \textcolor{comment}{         * may help other platforms.}
263 \textcolor{comment}{         */}
264         \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}) == 1) \{
265             flags |= SOCK\_NONBLOCK;
266         \}
267 \textcolor{preprocessor}{#endif}
268         s = accept4(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, (\textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr} *)&sa.\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}, &sa.
      \hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen}, flags);
269     \}
270 \textcolor{preprocessor}{#else}
271     s = \hyperlink{apr__arch__os2calls_8h_a2fe3d034024f850bed737a97851616bf}{accept}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, (\textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr} *)&sa.\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}, &sa.
      \hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen});
272 \textcolor{preprocessor}{#endif}
273 
274     \textcolor{keywordflow}{if} (s < 0) \{
275         \textcolor{keywordflow}{return} errno;
276     \}
277 \textcolor{preprocessor}{#ifdef TPF}
278     \textcolor{keywordflow}{if} (s == 0) \{ 
279         \textcolor{comment}{/* 0 is an invalid socket for TPF */}
280         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_gaee1ce306c0ebf1701b34172310aa1bd5}{APR\_EINTR};
281     \}
282 \textcolor{preprocessor}{#endif}
283     alloc\_socket(\textcolor{keyword}{new}, connection\_context);
284 
285     \textcolor{comment}{/* Set up socket variables -- note that it may be possible for}
286 \textcolor{comment}{     * *new to be an AF\_INET socket when sock is AF\_INET6 in some}
287 \textcolor{comment}{     * dual-stack configurations, so ensure that the remote\_/local\_addr}
288 \textcolor{comment}{     * structures are adjusted for the family of the accepted}
289 \textcolor{comment}{     * socket: */}
290     set\_socket\_vars(*\textcolor{keyword}{new}, sa.\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family, SOCK\_STREAM, sock->\hyperlink{structapr__socket__t_a89e0cf9d8e6d443c5d69d7f813ef9df7}{protocol});
291 
292 \textcolor{preprocessor}{#ifndef HAVE\_POLL}
293     (*new)->connected = 1;
294 \textcolor{preprocessor}{#endif}
295     (*new)->timeout = -1;
296 
297     (*new)->remote\_addr\_unknown = 0;
298 
299     (*new)->socketdes = \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
300 
301     \textcolor{comment}{/* Copy in peer's address. */}
302     (*new)->remote\_addr->sa = sa.\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa};
303     (*new)->remote\_addr->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen} = sa.\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen};
304 
305     *(*new)->local\_addr = *sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr};
306 
307     \textcolor{comment}{/* The above assignment just overwrote the pool entry. Setting the local\_addr }
308 \textcolor{comment}{       pool for the accepted socket back to what it should be.  Otherwise all }
309 \textcolor{comment}{       allocations for this socket will come from a server pool that is not}
310 \textcolor{comment}{       freed until the process goes down.*/}
311     (*new)->local\_addr->\hyperlink{structapr__sockaddr__t_a5f2d72a6a181cf2f54ba7c922aa0dfab}{pool} = connection\_context;
312 
313     \textcolor{comment}{/* fix up any pointers which are no longer valid */}
314     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family == AF\_INET) \{
315         (*new)->local\_addr->ipaddr\_ptr = &(*new)->local\_addr->sa.sin.sin\_addr;
316     \}
317 \textcolor{preprocessor}{#if APR\_HAVE\_IPV6}
318     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family == AF\_INET6) \{
319         (*new)->local\_addr->ipaddr\_ptr = &(*new)->local\_addr->sa.sin6.sin6\_addr;
320     \}
321 \textcolor{preprocessor}{#endif}
322 \textcolor{preprocessor}{#if APR\_HAVE\_SOCKADDR\_UN}
323     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family == AF\_UNIX) \{
324         *(*new)->remote\_addr = *sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr};
325         (*new)->local\_addr->\hyperlink{structapr__sockaddr__t_a6e1b71121ada4047acde36c6777b5442}{ipaddr\_ptr} = &((*new)->local\_addr->sa.unx.sun\_path);
326         (*new)->remote\_addr->ipaddr\_ptr = &((*new)->remote\_addr->sa.unx.sun\_path);
327     \}
328     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family != AF\_UNIX)
329 \textcolor{preprocessor}{#endif}
330     (*new)->remote\_addr->port = ntohs((*new)->remote\_addr->sa.sin.sin\_port);
331     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a26fff6df2c70dd6cfa2514ca233cfbbf}{local\_port\_unknown}) \{
332         \textcolor{comment}{/* not likely for a listening socket, but theoretically possible :) */}
333         (*new)->local\_port\_unknown = 1;
334     \}
335 
336 \textcolor{preprocessor}{#if APR\_TCP\_NODELAY\_INHERITED}
337     \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}) == 1) \{
338         \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(*\textcolor{keyword}{new}, \hyperlink{group__apr__sockopt_ga24db924d850dea792e92be7f8bc45cbd}{APR\_TCP\_NODELAY}, 1);
339     \}
340 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* TCP\_NODELAY\_INHERITED */}\textcolor{preprocessor}{}
341 \textcolor{preprocessor}{#if APR\_O\_NONBLOCK\_INHERITED}
342     \textcolor{keywordflow}{if} (\hyperlink{unix_2apr__arch__networkio_8h_a66269685c1aaa38e7e53dc690b347a39}{apr\_is\_option\_set}(sock, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}) == 1) \{
343         \hyperlink{unix_2apr__arch__networkio_8h_a84c5a7025af591f1dc8501b5057a03d7}{apr\_set\_option}(*\textcolor{keyword}{new}, \hyperlink{group__apr__sockopt_gac3bf19cc28b43da9b9dc396c84914a0f}{APR\_SO\_NONBLOCK}, 1);
344     \}
345 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* APR\_O\_NONBLOCK\_INHERITED */}\textcolor{preprocessor}{}
346 
347     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_a3e468f713040ca13ba88d659b6e26fb5}{local\_interface\_unknown} ||
348         !memcmp(sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_a6e1b71121ada4047acde36c6777b5442}{ipaddr\_ptr},
349                 generic\_inaddr\_any,
350                 sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_a81be21b2eb968b83ca36183213c99867}{ipaddr\_len})) \{
351         \textcolor{comment}{/* If the interface address inside the listening socket's local\_addr wasn't }
352 \textcolor{comment}{         * up-to-date, we don't know local interface of the connected socket either.}
353 \textcolor{comment}{         *}
354 \textcolor{comment}{         * If the listening socket was not bound to a specific interface, we}
355 \textcolor{comment}{         * don't know the local\_addr of the connected socket.}
356 \textcolor{comment}{         */}
357         (*new)->local\_interface\_unknown = 1;
358     \}
359 
360 \textcolor{preprocessor}{#ifndef HAVE\_ACCEPT4}
361     \{
362         \textcolor{keywordtype}{int} \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags};
363         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
364 
365         \textcolor{keywordflow}{if} ((flags = fcntl((*new)->socketdes, F\_GETFD)) == -1) \{
366             rv = errno;
367             close((*new)->socketdes);
368             (*new)->socketdes = -1;
369             \textcolor{keywordflow}{return} rv;
370         \}
371 
372         flags |= FD\_CLOEXEC;
373         \textcolor{keywordflow}{if} (fcntl((*new)->socketdes, F\_SETFD, flags) == -1) \{
374             rv = errno;
375             close((*new)->socketdes);
376             (*new)->socketdes = -1;
377             \textcolor{keywordflow}{return} rv;
378         \}
379     \}
380 \textcolor{preprocessor}{#endif}
381 
382     (*new)->inherit = 0;
383     apr\_pool\_cleanup\_register((*new)->pool, (\textcolor{keywordtype}{void} *)(*\textcolor{keyword}{new}), socket\_cleanup,
384                               socket\_cleanup);
385     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
386 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockets_8c_a0c6a5d4f9de19f14390dc412717b89f2_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+bind@{apr\+\_\+socket\+\_\+bind}}
\index{apr\+\_\+socket\+\_\+bind@{apr\+\_\+socket\+\_\+bind}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+bind(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+sockaddr\+\_\+t $\ast$sa)}{apr_socket_bind(apr_socket_t *sock, apr_sockaddr_t *sa)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+bind (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+sockaddr\+\_\+t} $\ast$}]{sa}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a512882c9979c2b9cad7cbc2508516d65}{}\label{unix_2sockets_8c_a512882c9979c2b9cad7cbc2508516d65}

\begin{DoxyCode}
217 \{
218     \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_af65cc88d9ccb2274b94e0025d25d965f}{bind}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, 
219              (\textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr} *)&sa->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}, sa->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen}) == -1) \{
220         \textcolor{keywordflow}{return} errno;
221     \}
222     \textcolor{keywordflow}{else} \{
223         sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr} = \hyperlink{group__apr__network__io_ga5dc1cb3876df6ab646ee9b3d528cbd9f}{sa};
224         \textcolor{comment}{/* XXX IPv6 - this assumes sin\_port and sin6\_port at same offset */}
225 \textcolor{preprocessor}{#if APR\_HAVE\_SOCKADDR\_UN}
226         \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ac17f6e803928cfc29069a6e62dcb3a52}{family} == APR\_UNIX) \{
227             sock->bound = 1;
228             sock->\hyperlink{structapr__socket__t_a26fff6df2c70dd6cfa2514ca233cfbbf}{local\_port\_unknown} = 1;
229         \}
230         \textcolor{keywordflow}{else}
231 \textcolor{preprocessor}{#endif}
232         \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_port == 0) \{ \textcolor{comment}{/* no need for ntohs() when comparing
       w/ 0 */}
233             sock->\hyperlink{structapr__socket__t_a26fff6df2c70dd6cfa2514ca233cfbbf}{local\_port\_unknown} = 1; \textcolor{comment}{/* kernel got us an ephemeral port */}
234         \}
235         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
236     \}
237 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{unix_2sockets_8c_a512882c9979c2b9cad7cbc2508516d65_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+close@{apr\+\_\+socket\+\_\+close}}
\index{apr\+\_\+socket\+\_\+close@{apr\+\_\+socket\+\_\+close}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+close(apr\+\_\+socket\+\_\+t $\ast$thesocket)}{apr_socket_close(apr_socket_t *thesocket)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+close (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{thesocket}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a88779f243ce19a2563544aee81894e6d}{}\label{unix_2sockets_8c_a88779f243ce19a2563544aee81894e6d}

\begin{DoxyCode}
212 \{
213     \textcolor{keywordflow}{return} apr\_pool\_cleanup\_run(thesocket->\hyperlink{structapr__socket__t_a122d4e497509ed40dd450119a8aa1cd2}{pool}, thesocket, socket\_cleanup);
214 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2sockets_8c_a88779f243ce19a2563544aee81894e6d_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+connect@{apr\+\_\+socket\+\_\+connect}}
\index{apr\+\_\+socket\+\_\+connect@{apr\+\_\+socket\+\_\+connect}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+connect(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+sockaddr\+\_\+t $\ast$sa)}{apr_socket_connect(apr_socket_t *sock, apr_sockaddr_t *sa)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+connect (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+sockaddr\+\_\+t} $\ast$}]{sa}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a8e58bd8112ed2ce5004487918cd9275e}{}\label{unix_2sockets_8c_a8e58bd8112ed2ce5004487918cd9275e}

\begin{DoxyCode}
389 \{
390     \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc};        
391 
392     \textcolor{keywordflow}{do} \{
393         rc = \hyperlink{apr__arch__os2calls_8h_adfd4ee688142ebda1142c1b0c7577e91}{connect}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes},
394                      (\textcolor{keyword}{const} \textcolor{keyword}{struct} \hyperlink{group__apr__network__io_ga0b610ae0cdca368eefee514a7b12f632}{sockaddr} *)&sa->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin},
395                      sa->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen});
396     \} \textcolor{keywordflow}{while} (rc == -1 && errno == EINTR);
397 
398     \textcolor{comment}{/* we can see EINPROGRESS the first time connect is called on a non-blocking}
399 \textcolor{comment}{     * socket; if called again, we can see EALREADY}
400 \textcolor{comment}{     */}
401     \textcolor{keywordflow}{if} ((rc == -1) && (errno == EINPROGRESS || errno == EALREADY)
402                    && (sock->\hyperlink{structapr__socket__t_a3626689cdb39190d306a43cbd7f9e90c}{timeout} > 0)) \{
403         rc = \hyperlink{group__apr__support_ga324ffc66a6d42df2325ce999001c1c36}{apr\_wait\_for\_io\_or\_timeout}(\hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, sock, 0);
404         \textcolor{keywordflow}{if} (rc != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
405             \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc};
406         \}
407 
408 \textcolor{preprocessor}{#ifdef SO\_ERROR}
409         \{
410             \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_ga11614f44ef4d939bdd984953346a7572}{error};
411             \hyperlink{group__apr__platform_gab613b0701b7a8b0ccd1a3c157a800f27}{apr\_socklen\_t} \hyperlink{group__APACHE__CORE__LOG_gab5a43233d60ef05c5b5bf5cba3d74468}{len} = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__PROTO_ga11614f44ef4d939bdd984953346a7572}{error});
412             \textcolor{keywordflow}{if} ((rc = \hyperlink{apr__arch__os2calls_8h_a6d2e979cce939b0bccfe059fb553dbb8}{getsockopt}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, SOL\_SOCKET, SO\_ERROR, 
413                                  (\textcolor{keywordtype}{char} *)&error, &len)) < 0) \{
414                 \textcolor{keywordflow}{return} errno;
415             \}
416             \textcolor{keywordflow}{if} (error) \{
417                 \textcolor{keywordflow}{return} \hyperlink{group__APACHE__CORE__PROTO_ga11614f44ef4d939bdd984953346a7572}{error};
418             \}
419         \}
420 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* SO\_ERROR */}\textcolor{preprocessor}{}
421     \}
422 
423     \textcolor{keywordflow}{if} (memcmp(sa->\hyperlink{structapr__sockaddr__t_a6e1b71121ada4047acde36c6777b5442}{ipaddr\_ptr}, generic\_inaddr\_any, sa->\hyperlink{structapr__sockaddr__t_a81be21b2eb968b83ca36183213c99867}{ipaddr\_len})) \{
424         \textcolor{comment}{/* A real remote address was passed in.  If the unspecified}
425 \textcolor{comment}{         * address was used, the actual remote addr will have to be}
426 \textcolor{comment}{         * determined using getpeername() if required. */}
427         sock->\hyperlink{structapr__socket__t_ae9f799c8f438814bfbf0d66265d4ac0d}{remote\_addr\_unknown} = 0;
428 
429         \textcolor{comment}{/* Copy the address structure details in. */}
430         sock->\hyperlink{structapr__socket__t_a487dc49f378bdc6ad32d362b9fe575a2}{remote\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa} = sa->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa};
431         sock->\hyperlink{structapr__socket__t_a487dc49f378bdc6ad32d362b9fe575a2}{remote\_addr}->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen} = sa->\hyperlink{structapr__sockaddr__t_aef1d2a482f85eeab7b6bf0a7732a087a}{salen};
432         \textcolor{comment}{/* Adjust ipaddr\_ptr et al. */}
433         \hyperlink{os2_2apr__arch__networkio_8h_a3ed59de41b95fa5b9ef695a2bccbdc3a}{apr\_sockaddr\_vars\_set}(sock->\hyperlink{structapr__socket__t_a487dc49f378bdc6ad32d362b9fe575a2}{remote\_addr}, sa->
      \hyperlink{structapr__sockaddr__t_ac17f6e803928cfc29069a6e62dcb3a52}{family}, sa->\hyperlink{structapr__sockaddr__t_a174c19138de9c208f13ed71b5892e505}{port});
434     \}
435 
436     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_a174c19138de9c208f13ed71b5892e505}{port} == 0) \{
437         \textcolor{comment}{/* connect() got us an ephemeral port */}
438         sock->\hyperlink{structapr__socket__t_a26fff6df2c70dd6cfa2514ca233cfbbf}{local\_port\_unknown} = 1;
439     \}
440 \textcolor{preprocessor}{#if APR\_HAVE\_SOCKADDR\_UN}
441     \textcolor{keywordflow}{if} (sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_ade95595a2a33c108f71358bbb8a501cf}{sa}.\hyperlink{structapr__sockaddr__t_a7d5cf0290260c3c448360fc819b28714}{sin}.sin\_family == AF\_UNIX) \{
442         \textcolor{comment}{/* Assign connect address as local. */}
443         sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr} = \hyperlink{group__apr__network__io_ga5dc1cb3876df6ab646ee9b3d528cbd9f}{sa};
444     \}
445     \textcolor{keywordflow}{else}
446 \textcolor{preprocessor}{#endif}
447     \textcolor{keywordflow}{if} (!memcmp(sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_a6e1b71121ada4047acde36c6777b5442}{ipaddr\_ptr},
448                 generic\_inaddr\_any,
449                 sock->\hyperlink{structapr__socket__t_ae310bbeb00298cd45c03dca515289239}{local\_addr}->\hyperlink{structapr__sockaddr__t_a81be21b2eb968b83ca36183213c99867}{ipaddr\_len})) \{
450         \textcolor{comment}{/* not bound to specific local interface; connect() had to assign}
451 \textcolor{comment}{         * one for the socket}
452 \textcolor{comment}{         */}
453         sock->\hyperlink{structapr__socket__t_a3e468f713040ca13ba88d659b6e26fb5}{local\_interface\_unknown} = 1;
454     \}
455 
456     \textcolor{keywordflow}{if} (rc == -1 && errno != EISCONN) \{
457         \textcolor{keywordflow}{return} errno;
458     \}
459 
460 \textcolor{preprocessor}{#ifndef HAVE\_POLL}
461     sock->connected=1;
462 \textcolor{preprocessor}{#endif}
463     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
464 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{unix_2sockets_8c_a8e58bd8112ed2ce5004487918cd9275e_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=325pt]{unix_2sockets_8c_a8e58bd8112ed2ce5004487918cd9275e_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+create@{apr\+\_\+socket\+\_\+create}}
\index{apr\+\_\+socket\+\_\+create@{apr\+\_\+socket\+\_\+create}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+create(apr\+\_\+socket\+\_\+t $\ast$$\ast$new, int ofamily, int type, int protocol, apr\+\_\+pool\+\_\+t $\ast$cont)}{apr_socket_create(apr_socket_t **new, int ofamily, int type, int protocol, apr_pool_t *cont)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+create (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$$\ast$}]{new, }
\item[{{\bf int}}]{ofamily, }
\item[{{\bf int}}]{type, }
\item[{{\bf int}}]{protocol, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{cont}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_ad975e4f99f233d8156a9e8e1a153199d}{}\label{unix_2sockets_8c_ad975e4f99f233d8156a9e8e1a153199d}

\begin{DoxyCode}
118 \{
119     \textcolor{keywordtype}{int} \hyperlink{group__apr__network__io_ga22f2baef89908641382fdf6fb41e8b83}{family} = ofamily, \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags} = 0;
120     \textcolor{keywordtype}{int} oprotocol = \hyperlink{group__APACHE__CORE__PROTO_gab4455c9ffced5cbd2748a0585c988a2f}{protocol};
121 
122 \textcolor{preprocessor}{#ifdef HAVE\_SOCK\_CLOEXEC}
123     flags |= SOCK\_CLOEXEC;
124 \textcolor{preprocessor}{#endif}
125 
126     \textcolor{keywordflow}{if} (family == \hyperlink{group__apr__network__io_gaa7a33b17a7d0820b09ef489bd3328f85}{APR\_UNSPEC}) \{
127 \textcolor{preprocessor}{#if APR\_HAVE\_IPV6}
128         family = \hyperlink{group__apr__network__io_gad09d9ea8995f50f35073ae0c77efb44f}{APR\_INET6};
129 \textcolor{preprocessor}{#else}
130         family = \hyperlink{group__apr__network__io_gaa96e8e8dbf92bc77643a4032017b3d67}{APR\_INET};
131 \textcolor{preprocessor}{#endif}
132     \}
133 \textcolor{preprocessor}{#if APR\_HAVE\_SOCKADDR\_UN}
134     \textcolor{keywordflow}{if} (family == APR\_UNIX) \{
135         \hyperlink{group__APACHE__CORE__PROTO_gab4455c9ffced5cbd2748a0585c988a2f}{protocol} = 0;
136     \}
137 \textcolor{preprocessor}{#endif}
138     alloc\_socket(\textcolor{keyword}{new}, cont);
139 
140 \textcolor{preprocessor}{#ifndef BEOS\_R5}
141     (*new)->socketdes = \hyperlink{apr__arch__os2calls_8h_aa8318fbee111c5bde5952c63e894c962}{socket}(family, \hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type}|flags, \hyperlink{group__APACHE__CORE__PROTO_gab4455c9ffced5cbd2748a0585c988a2f}{protocol});
142 \textcolor{preprocessor}{#else}
143     \textcolor{comment}{/* For some reason BeOS R5 has an unconventional protocol numbering,}
144 \textcolor{comment}{     * so we need to translate here. */}
145     \textcolor{keywordflow}{switch} (\hyperlink{group__APACHE__CORE__PROTO_gab4455c9ffced5cbd2748a0585c988a2f}{protocol}) \{
146     \textcolor{keywordflow}{case} 0:
147         (*new)->socketdes = \hyperlink{apr__arch__os2calls_8h_aa8318fbee111c5bde5952c63e894c962}{socket}(family, \hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type}|flags, 0);
148         \textcolor{keywordflow}{break};
149     \textcolor{keywordflow}{case} \hyperlink{group__IP__Proto_gad231c935f9f9746ca43b46cdcf80338e}{APR\_PROTO\_TCP}:
150         (*new)->socketdes = \hyperlink{apr__arch__os2calls_8h_aa8318fbee111c5bde5952c63e894c962}{socket}(family, \hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type}|flags, IPPROTO\_TCP);
151         \textcolor{keywordflow}{break};
152     \textcolor{keywordflow}{case} \hyperlink{group__IP__Proto_ga05acc4775ee3f3a637f97c904b8ebd7d}{APR\_PROTO\_UDP}:
153         (*new)->socketdes = \hyperlink{apr__arch__os2calls_8h_aa8318fbee111c5bde5952c63e894c962}{socket}(family, \hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type}|flags, IPPROTO\_UDP);
154         \textcolor{keywordflow}{break};
155     \textcolor{keywordflow}{case} \hyperlink{group__IP__Proto_ga89b4fd2811d13e945e937f890b750727}{APR\_PROTO\_SCTP}:
156     \textcolor{keywordflow}{default}:
157         errno = EPROTONOSUPPORT;
158         (*new)->socketdes = -1;
159         \textcolor{keywordflow}{break};
160     \}
161 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* BEOS\_R5 */}\textcolor{preprocessor}{}
162 
163 \textcolor{preprocessor}{#if APR\_HAVE\_IPV6}
164     \textcolor{keywordflow}{if} ((*new)->socketdes < 0 && ofamily == \hyperlink{group__apr__network__io_gaa7a33b17a7d0820b09ef489bd3328f85}{APR\_UNSPEC}) \{
165         family = \hyperlink{group__apr__network__io_gaa96e8e8dbf92bc77643a4032017b3d67}{APR\_INET};
166         (*new)->socketdes = \hyperlink{apr__arch__os2calls_8h_aa8318fbee111c5bde5952c63e894c962}{socket}(family, \hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type}|flags, \hyperlink{group__APACHE__CORE__PROTO_gab4455c9ffced5cbd2748a0585c988a2f}{protocol});
167     \}
168 \textcolor{preprocessor}{#endif}
169 
170     \textcolor{keywordflow}{if} ((*new)->socketdes < 0) \{
171         \textcolor{keywordflow}{return} errno;
172     \}
173     set\_socket\_vars(*\textcolor{keyword}{new}, family, \hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type}, oprotocol);
174 
175 \textcolor{preprocessor}{#ifndef HAVE\_SOCK\_CLOEXEC}
176     \{
177         \textcolor{keywordtype}{int} \hyperlink{group__AP__EXPR_gad7a10cd81a384ff727296d05bb827806}{flags};
178         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
179 
180         \textcolor{keywordflow}{if} ((flags = fcntl((*new)->socketdes, F\_GETFD)) == -1) \{
181             rv = errno;
182             close((*new)->socketdes);
183             (*new)->socketdes = -1;
184             \textcolor{keywordflow}{return} rv;
185         \}
186 
187         flags |= FD\_CLOEXEC;
188         \textcolor{keywordflow}{if} (fcntl((*new)->socketdes, F\_SETFD, flags) == -1) \{
189             rv = errno;
190             close((*new)->socketdes);
191             (*new)->socketdes = -1;
192             \textcolor{keywordflow}{return} rv;
193         \}
194     \}
195 \textcolor{preprocessor}{#endif}
196 
197     (*new)->timeout = -1;
198     (*new)->inherit = 0;
199     apr\_pool\_cleanup\_register((*new)->pool, (\textcolor{keywordtype}{void} *)(*\textcolor{keyword}{new}), socket\_cleanup,
200                               socket\_child\_cleanup);
201 
202     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
203 \} 
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unix_2sockets_8c_ad975e4f99f233d8156a9e8e1a153199d_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+data\+\_\+get@{apr\+\_\+socket\+\_\+data\+\_\+get}}
\index{apr\+\_\+socket\+\_\+data\+\_\+get@{apr\+\_\+socket\+\_\+data\+\_\+get}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+data\+\_\+get(void $\ast$$\ast$data, const char $\ast$key, apr\+\_\+socket\+\_\+t $\ast$sock)}{apr_socket_data_get(void **data, const char *key, apr_socket_t *sock)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+data\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$$\ast$}]{data, }
\item[{const char $\ast$}]{key, }
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_ae76b48d0224a608b4ddb8bd00582eaa7}{}\label{unix_2sockets_8c_ae76b48d0224a608b4ddb8bd00582eaa7}

\begin{DoxyCode}
473 \{
474     \hyperlink{structsock__userdata__t}{sock\_userdata\_t} *cur = sock->\hyperlink{structapr__socket__t_a235046207ad5817e1eab0ab69157cdbd}{userdata};
475 
476     *\hyperlink{structdata}{data} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
477 
478     \textcolor{keywordflow}{while} (cur) \{
479         \textcolor{keywordflow}{if} (!strcmp(cur->\hyperlink{structsock__userdata__t_a269c5c5398407ad21bc9650d46d12828}{key}, \hyperlink{group__MOD__CACHE_ga11d8023381192746eb96be162398fe1c}{key})) \{
480             *\hyperlink{structdata}{data} = cur->\hyperlink{structsock__userdata__t_a8f2e13b1566dc2edc2747284afa0736b}{data};
481             \textcolor{keywordflow}{break};
482         \}
483         cur = cur->\hyperlink{structsock__userdata__t_a7d67d5d0a6470fe1ad6f39f6810c27d5}{next};
484     \}
485 
486     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
487 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{unix_2sockets_8c_ae76b48d0224a608b4ddb8bd00582eaa7_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+data\+\_\+set@{apr\+\_\+socket\+\_\+data\+\_\+set}}
\index{apr\+\_\+socket\+\_\+data\+\_\+set@{apr\+\_\+socket\+\_\+data\+\_\+set}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+data\+\_\+set(apr\+\_\+socket\+\_\+t $\ast$sock, void $\ast$data, const char $\ast$key, apr\+\_\+status\+\_\+t($\ast$cleanup)(void $\ast$))}{apr_socket_data_set(apr_socket_t *sock, void *data, const char *key, apr_status_t(*cleanup)(void *))}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+data\+\_\+set (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf void} $\ast$}]{data, }
\item[{const char $\ast$}]{key, }
\item[{{\bf apr\+\_\+status\+\_\+t}($\ast$)({\bf void} $\ast$)}]{cleanup}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_afec197f3aa9a495801cdf7892ff8dcb5}{}\label{unix_2sockets_8c_afec197f3aa9a495801cdf7892ff8dcb5}

\begin{DoxyCode}
491 \{
492     \hyperlink{structsock__userdata__t}{sock\_userdata\_t} *\textcolor{keyword}{new} = apr\_palloc(sock->\hyperlink{structapr__socket__t_a122d4e497509ed40dd450119a8aa1cd2}{pool}, \textcolor{keyword}{sizeof}(
      \hyperlink{structsock__userdata__t}{sock\_userdata\_t}));
493 
494     \textcolor{keyword}{new}->key = apr\_pstrdup(sock->\hyperlink{structapr__socket__t_a122d4e497509ed40dd450119a8aa1cd2}{pool}, \hyperlink{group__MOD__CACHE_ga11d8023381192746eb96be162398fe1c}{key});
495     \textcolor{keyword}{new}->data = \hyperlink{group__APACHE__CORE__LOG_gae4950db1dbfff8459a712737063b61aa}{data};
496     \textcolor{keyword}{new}->\hyperlink{structserver__rec_a8bbf4ea1c54cdba1cb7e00f9d978f540}{next} = sock->\hyperlink{structapr__socket__t_a235046207ad5817e1eab0ab69157cdbd}{userdata};
497     sock->\hyperlink{structapr__socket__t_a235046207ad5817e1eab0ab69157cdbd}{userdata} = \textcolor{keyword}{new};
498 
499     \textcolor{keywordflow}{if} (\hyperlink{group__apr__file__io_gaf17dc2e0316f116a00fe0bab14fe2188}{cleanup}) \{
500         apr\_pool\_cleanup\_register(sock->\hyperlink{structapr__socket__t_a122d4e497509ed40dd450119a8aa1cd2}{pool}, \hyperlink{structdata}{data}, \hyperlink{group__apr__file__io_gaf17dc2e0316f116a00fe0bab14fe2188}{cleanup}, 
      \hyperlink{group__apr__file__io_gaf17dc2e0316f116a00fe0bab14fe2188}{cleanup});
501     \}
502 
503     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
504 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{unix_2sockets_8c_afec197f3aa9a495801cdf7892ff8dcb5_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+listen@{apr\+\_\+socket\+\_\+listen}}
\index{apr\+\_\+socket\+\_\+listen@{apr\+\_\+socket\+\_\+listen}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+listen(apr\+\_\+socket\+\_\+t $\ast$sock, apr\+\_\+int32\+\_\+t backlog)}{apr_socket_listen(apr_socket_t *sock, apr_int32_t backlog)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+listen (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf apr\+\_\+int32\+\_\+t}}]{backlog}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a154bcee918f6f01fe0373359dd74b0c4}{}\label{unix_2sockets_8c_a154bcee918f6f01fe0373359dd74b0c4}

\begin{DoxyCode}
240 \{
241     \textcolor{keywordflow}{if} (\hyperlink{apr__arch__os2calls_8h_a2d3d00e67d3046983357fc3a5b0e63ed}{listen}(sock->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__apr__network__io_ga8ab200d7cdc39cd5efe5114a1ebc5969}{backlog}) == -1)
242         \textcolor{keywordflow}{return} errno;
243     \textcolor{keywordflow}{else}
244         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
245 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{unix_2sockets_8c_a154bcee918f6f01fe0373359dd74b0c4_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+protocol\+\_\+get@{apr\+\_\+socket\+\_\+protocol\+\_\+get}}
\index{apr\+\_\+socket\+\_\+protocol\+\_\+get@{apr\+\_\+socket\+\_\+protocol\+\_\+get}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+protocol\+\_\+get(apr\+\_\+socket\+\_\+t $\ast$sock, int $\ast$protocol)}{apr_socket_protocol_get(apr_socket_t *sock, int *protocol)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+protocol\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf int} $\ast$}]{protocol}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_ac402d9426de37b6cede18fa157020bd9}{}\label{unix_2sockets_8c_ac402d9426de37b6cede18fa157020bd9}

\begin{DoxyCode}
111 \{
112     *\hyperlink{group__APACHE__CORE__PROTO_gab4455c9ffced5cbd2748a0585c988a2f}{protocol} = sock->\hyperlink{structapr__socket__t_a89e0cf9d8e6d443c5d69d7f813ef9df7}{protocol};
113     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
114 \}
\end{DoxyCode}
\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+shutdown@{apr\+\_\+socket\+\_\+shutdown}}
\index{apr\+\_\+socket\+\_\+shutdown@{apr\+\_\+socket\+\_\+shutdown}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+shutdown(apr\+\_\+socket\+\_\+t $\ast$thesocket, apr\+\_\+shutdown\+\_\+how\+\_\+e how)}{apr_socket_shutdown(apr_socket_t *thesocket, apr_shutdown_how_e how)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+shutdown (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{thesocket, }
\item[{{\bf apr\+\_\+shutdown\+\_\+how\+\_\+e}}]{how}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_ac5aea857a50c493f840c48b930abc48e}{}\label{unix_2sockets_8c_ac5aea857a50c493f840c48b930abc48e}

\begin{DoxyCode}
207 \{
208     \textcolor{keywordflow}{return} (\hyperlink{apr__arch__os2calls_8h_abb5abf491305ecb624576b9d3120e0ae}{shutdown}(thesocket->\hyperlink{structapr__socket__t_acd1a084790ce6cb462825fc029000095}{socketdes}, \hyperlink{group__apr__network__io_ga9590c380aa45d7405869b44456f744b5}{how}) == -1) ? errno : 
      \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
209 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{unix_2sockets_8c_ac5aea857a50c493f840c48b930abc48e_icgraph}
\end{center}
\end{figure}


\index{unix/sockets.\+c@{unix/sockets.\+c}!apr\+\_\+socket\+\_\+type\+\_\+get@{apr\+\_\+socket\+\_\+type\+\_\+get}}
\index{apr\+\_\+socket\+\_\+type\+\_\+get@{apr\+\_\+socket\+\_\+type\+\_\+get}!unix/sockets.\+c@{unix/sockets.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+socket\+\_\+type\+\_\+get(apr\+\_\+socket\+\_\+t $\ast$sock, int $\ast$type)}{apr_socket_type_get(apr_socket_t *sock, int *type)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+socket\+\_\+type\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+socket\+\_\+t} $\ast$}]{sock, }
\item[{{\bf int} $\ast$}]{type}
\end{DoxyParamCaption}
)}\hypertarget{unix_2sockets_8c_a8d23ee2db9a84af2e6408ef460613514}{}\label{unix_2sockets_8c_a8d23ee2db9a84af2e6408ef460613514}

\begin{DoxyCode}
467 \{
468     *\hyperlink{group__APACHE__CORE__HTTPD_gaafc7089562892428c4fcae486f171f5a}{type} = sock->\hyperlink{structapr__socket__t_a722ea4796e2227c8b0821d1d75ea0b07}{type};
469     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
470 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{unix_2sockets_8c_a8d23ee2db9a84af2e6408ef460613514_icgraph}
\end{center}
\end{figure}


