\hypertarget{sed1_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/modules/filters/sed1.c File Reference}
\label{sed1_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/filters/sed1.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/modules/filters/sed1.\+c}}
{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+lib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}libsed.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sed.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}regexp.\+h\char`\"{}}\\*
Include dependency graph for sed1.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sed1_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sed1_8c_a598285922e2b62b38ee46ced0ebd9388}{I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE}~1024
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{sed1_8c_a9a57da97dc285f94737a35ce1ea74709}{sed\+\_\+step} (char $\ast$p1, char $\ast$p2, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} circf, \hyperlink{regexp_8h_a86803955e891b45f2460a7bd44c785d4}{step\+\_\+vars\+\_\+storage} $\ast$vars)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{sed1_8c_a2727a923b639ae081eaddd41f7ac9ee1}{sed\+\_\+init\+\_\+eval} (\hyperlink{libsed_8h_ae6ec8323971a67e199713c75fd7873bf}{sed\+\_\+eval\+\_\+t} $\ast$eval, \hyperlink{libsed_8h_a859d78cc648723665a860a763f2fb291}{sed\+\_\+commands\+\_\+t} $\ast$commands, \hyperlink{libsed_8h_a0916e86efda81c86a64578a703cd0bb3}{sed\+\_\+err\+\_\+fn\+\_\+t} $\ast$\hyperlink{group__apr__thread__proc_ga2f0d60ad743726f6dced4ea651eaad0c}{errfn}, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$\hyperlink{structdata}{data}, \hyperlink{libsed_8h_af714a0a369b727f8ea0c999547e2a41f}{sed\+\_\+write\+\_\+fn\+\_\+t} $\ast$writefn, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{sed1_8c_a852f7ab1d5beefeb26f22afbc2eb4bd6}{sed\+\_\+reset\+\_\+eval} (\hyperlink{libsed_8h_ae6ec8323971a67e199713c75fd7873bf}{sed\+\_\+eval\+\_\+t} $\ast$eval, \hyperlink{libsed_8h_a859d78cc648723665a860a763f2fb291}{sed\+\_\+commands\+\_\+t} $\ast$commands, \hyperlink{libsed_8h_a0916e86efda81c86a64578a703cd0bb3}{sed\+\_\+err\+\_\+fn\+\_\+t} $\ast$\hyperlink{group__apr__thread__proc_ga2f0d60ad743726f6dced4ea651eaad0c}{errfn}, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$\hyperlink{structdata}{data})
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{sed1_8c_a284448bb66c537276875a94ff03d2251}{sed\+\_\+destroy\+\_\+eval} (\hyperlink{libsed_8h_ae6ec8323971a67e199713c75fd7873bf}{sed\+\_\+eval\+\_\+t} $\ast$eval)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{sed1_8c_afa40b77fdb3963139a0c37f0f754e479}{sed\+\_\+eval\+\_\+file} (\hyperlink{libsed_8h_ae6ec8323971a67e199713c75fd7873bf}{sed\+\_\+eval\+\_\+t} $\ast$eval, \hyperlink{structapr__file__t}{apr\+\_\+file\+\_\+t} $\ast$fin, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$fout)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{sed1_8c_ae293590e2cf7ba99d63e02a9f10f1452}{sed\+\_\+eval\+\_\+buffer} (\hyperlink{libsed_8h_ae6ec8323971a67e199713c75fd7873bf}{sed\+\_\+eval\+\_\+t} $\ast$eval, const char $\ast$\hyperlink{group__APR__Util__Bucket__Brigades_gae92da6cbed6002407731bd51f7c6b984}{buf}, \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} bufsz, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$fout)
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{sed1_8c_a7eb14ce96b00752a57054f855374677a}{sed\+\_\+finalize\+\_\+eval} (\hyperlink{libsed_8h_ae6ec8323971a67e199713c75fd7873bf}{sed\+\_\+eval\+\_\+t} $\ast$eval, \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$fout)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{sed1.\+c@{sed1.\+c}!I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE@{I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE}}
\index{I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE@{I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE}{INIT_BUF_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+N\+I\+T\+\_\+\+B\+U\+F\+\_\+\+S\+I\+ZE~1024}\hypertarget{sed1_8c_a598285922e2b62b38ee46ced0ebd9388}{}\label{sed1_8c_a598285922e2b62b38ee46ced0ebd9388}


\subsection{Function Documentation}
\index{sed1.\+c@{sed1.\+c}!sed\+\_\+destroy\+\_\+eval@{sed\+\_\+destroy\+\_\+eval}}
\index{sed\+\_\+destroy\+\_\+eval@{sed\+\_\+destroy\+\_\+eval}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+destroy\+\_\+eval(sed\+\_\+eval\+\_\+t $\ast$eval)}{sed_destroy_eval(sed_eval_t *eval)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} sed\+\_\+destroy\+\_\+eval (
\begin{DoxyParamCaption}
\item[{{\bf sed\+\_\+eval\+\_\+t} $\ast$}]{eval}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_a284448bb66c537276875a94ff03d2251}{}\label{sed1_8c_a284448bb66c537276875a94ff03d2251}

\begin{DoxyCode}
318 \{
319     \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
320     \textcolor{comment}{/* eval->linebuf, eval->holdbuf, eval->genbuf and eval->inar are allocated}
321 \textcolor{comment}{     * on pool. It will be freed when pool will be freed */}
322     \textcolor{keywordflow}{for} (i = 0; i < eval->\hyperlink{structsed__eval__s_a5e50e5069934b1e219e3b069f42893f4}{commands}->\hyperlink{structsed__commands__s_a8d082761b64591f9a0db1ae58e93ed25}{nfiles}; i++) \{
323         \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_a100d3ef79eec9d6139585f61bfa92adb}{fcode}[i] != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
324             apr\_file\_close(eval->\hyperlink{structsed__eval__s_a100d3ef79eec9d6139585f61bfa92adb}{fcode}[i]);
325             eval->\hyperlink{structsed__eval__s_a100d3ef79eec9d6139585f61bfa92adb}{fcode}[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}] = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
326         \}
327     \}
328 \}
\end{DoxyCode}
\index{sed1.\+c@{sed1.\+c}!sed\+\_\+eval\+\_\+buffer@{sed\+\_\+eval\+\_\+buffer}}
\index{sed\+\_\+eval\+\_\+buffer@{sed\+\_\+eval\+\_\+buffer}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+eval\+\_\+buffer(sed\+\_\+eval\+\_\+t $\ast$eval, const char $\ast$buf, int bufsz, void $\ast$fout)}{sed_eval_buffer(sed_eval_t *eval, const char *buf, int bufsz, void *fout)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} sed\+\_\+eval\+\_\+buffer (
\begin{DoxyParamCaption}
\item[{{\bf sed\+\_\+eval\+\_\+t} $\ast$}]{eval, }
\item[{const char $\ast$}]{buf, }
\item[{{\bf int}}]{bufsz, }
\item[{{\bf void} $\ast$}]{fout}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_ae293590e2cf7ba99d63e02a9f10f1452}{}\label{sed1_8c_ae293590e2cf7ba99d63e02a9f10f1452}

\begin{DoxyCode}
357 \{
358     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
359 
360     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_aaf660a3f58ace1338543f57ac5a713c2}{quitflag})
361         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
362 
363     \textcolor{keywordflow}{if} (!\hyperlink{libsed_8h_a4a0f0bafae3fac20b467e3a9a5353879}{sed\_canbe\_finalized}(eval->\hyperlink{structsed__eval__s_a5e50e5069934b1e219e3b069f42893f4}{commands})) \{
364         \textcolor{comment}{/* Commands were not finalized properly. */}
365         \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \hyperlink{group__APACHE__CORE__PROTO_ga11614f44ef4d939bdd984953346a7572}{error} = \hyperlink{libsed_8h_add33e514d5f975b84e61e0ad8cacb3f1}{sed\_get\_finalize\_error}(eval->
      \hyperlink{structsed__eval__s_a5e50e5069934b1e219e3b069f42893f4}{commands}, eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool});
366         \textcolor{keywordflow}{if} (error) \{
367             eval\_errf(eval, error);
368             \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga18f5678bea0c2c704a2b6a186c9e158b}{APR\_EGENERAL};
369         \}
370     \}
371 
372     eval->\hyperlink{structsed__eval__s_a361dd857182a9c19914e7b439fad8069}{fout} = fout;
373 
374     \textcolor{comment}{/* Process leftovers */}
375     \textcolor{keywordflow}{if} (bufsz && eval->\hyperlink{structsed__eval__s_a5741d3c07dc1863d02f71f55f09aa3f7}{lreadyflag}) \{
376         eval->\hyperlink{structsed__eval__s_a5741d3c07dc1863d02f71f55f09aa3f7}{lreadyflag} = 0;
377         eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend}--;
378         *eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend} = \textcolor{charliteral}{'\(\backslash\)0'};
379         rv = execute(eval);
380         \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
381             \textcolor{keywordflow}{return} rv;
382     \}
383 
384     \textcolor{keywordflow}{while} (bufsz) \{
385         \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__PROTO_gad484edfd58b9127caa8f0f59b4004d09}{n};
386         \textcolor{keywordtype}{int} llen;
387 
388         n = \hyperlink{apr__strings_8c_a16d6b0bd660cc3f9910924c6b6f4af8e}{memchr}(\hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}, \textcolor{charliteral}{'\(\backslash\)n'}, bufsz);
389         \textcolor{keywordflow}{if} (n == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL})
390             \textcolor{keywordflow}{break};
391 
392         llen = n - \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf};
393         \textcolor{keywordflow}{if} (llen == bufsz - 1) \{
394             \textcolor{comment}{/* This might be the last line; delay its processing */}
395             eval->\hyperlink{structsed__eval__s_a5741d3c07dc1863d02f71f55f09aa3f7}{lreadyflag} = 1;
396             \textcolor{keywordflow}{break};
397         \}
398 
399         appendmem\_to\_linebuf(eval, buf, llen + 1);
400         --eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend};
401         \textcolor{comment}{/* replace new line character with NULL */}
402         *eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend} = \textcolor{charliteral}{'\(\backslash\)0'};
403         buf += (llen + 1);
404         bufsz -= (llen + 1);
405         rv = execute(eval);
406         \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
407             \textcolor{keywordflow}{return} rv;
408         \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_aaf660a3f58ace1338543f57ac5a713c2}{quitflag})
409             \textcolor{keywordflow}{break};
410     \}
411 
412     \textcolor{comment}{/* Save the leftovers for later */}
413     \textcolor{keywordflow}{if} (bufsz) \{
414         appendmem\_to\_linebuf(eval, buf, bufsz);
415     \}
416 
417     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
418 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sed1_8c_ae293590e2cf7ba99d63e02a9f10f1452_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{sed1_8c_ae293590e2cf7ba99d63e02a9f10f1452_icgraph}
\end{center}
\end{figure}


\index{sed1.\+c@{sed1.\+c}!sed\+\_\+eval\+\_\+file@{sed\+\_\+eval\+\_\+file}}
\index{sed\+\_\+eval\+\_\+file@{sed\+\_\+eval\+\_\+file}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+eval\+\_\+file(sed\+\_\+eval\+\_\+t $\ast$eval, apr\+\_\+file\+\_\+t $\ast$fin, void $\ast$fout)}{sed_eval_file(sed_eval_t *eval, apr_file_t *fin, void *fout)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} sed\+\_\+eval\+\_\+file (
\begin{DoxyParamCaption}
\item[{{\bf sed\+\_\+eval\+\_\+t} $\ast$}]{eval, }
\item[{{\bf apr\+\_\+file\+\_\+t} $\ast$}]{fin, }
\item[{{\bf void} $\ast$}]{fout}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_afa40b77fdb3963139a0c37f0f754e479}{}\label{sed1_8c_afa40b77fdb3963139a0c37f0f754e479}

\begin{DoxyCode}
334 \{
335     \textcolor{keywordflow}{for} (;;) \{
336         \textcolor{keywordtype}{char} \hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf}[1024];
337         \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} read\_bytes = 0;
338 
339         read\_bytes = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__PROTO_ga17bc47ccf1b618ed082a4ff4f2cc7f7e}{buf});
340         \textcolor{keywordflow}{if} (apr\_file\_read(fin, buf, &read\_bytes) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
341             \textcolor{keywordflow}{break};
342 
343         \textcolor{keywordflow}{if} (\hyperlink{sed1_8c_ae293590e2cf7ba99d63e02a9f10f1452}{sed\_eval\_buffer}(eval, buf, read\_bytes, fout) != 
      \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
344             \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga18f5678bea0c2c704a2b6a186c9e158b}{APR\_EGENERAL};
345 
346         \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_aaf660a3f58ace1338543f57ac5a713c2}{quitflag})
347             \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
348     \}
349 
350     \textcolor{keywordflow}{return} \hyperlink{sed1_8c_a7eb14ce96b00752a57054f855374677a}{sed\_finalize\_eval}(eval, fout);
351 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sed1_8c_afa40b77fdb3963139a0c37f0f754e479_cgraph}
\end{center}
\end{figure}


\index{sed1.\+c@{sed1.\+c}!sed\+\_\+finalize\+\_\+eval@{sed\+\_\+finalize\+\_\+eval}}
\index{sed\+\_\+finalize\+\_\+eval@{sed\+\_\+finalize\+\_\+eval}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+finalize\+\_\+eval(sed\+\_\+eval\+\_\+t $\ast$eval, void $\ast$fout)}{sed_finalize_eval(sed_eval_t *eval, void *fout)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} sed\+\_\+finalize\+\_\+eval (
\begin{DoxyParamCaption}
\item[{{\bf sed\+\_\+eval\+\_\+t} $\ast$}]{eval, }
\item[{{\bf void} $\ast$}]{fout}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_a7eb14ce96b00752a57054f855374677a}{}\label{sed1_8c_a7eb14ce96b00752a57054f855374677a}

\begin{DoxyCode}
424 \{
425     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_aaf660a3f58ace1338543f57ac5a713c2}{quitflag})
426         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
427 
428     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_ab8ed6e233be318dbf63f59601e3f85bf}{finalflag})
429         eval->\hyperlink{structsed__eval__s_a4c412b6a80ea7add80745b6d09cf0338}{dolflag} = 1;
430 
431     eval->\hyperlink{structsed__eval__s_a361dd857182a9c19914e7b439fad8069}{fout} = fout;
432 
433     \textcolor{comment}{/* Process leftovers */}
434     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend} > eval->\hyperlink{structsed__eval__s_a22649940ee1f364aadcd2e6590b803f9}{linebuf}) \{
435         \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} rv;
436 
437         \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_a5741d3c07dc1863d02f71f55f09aa3f7}{lreadyflag}) \{
438             eval->\hyperlink{structsed__eval__s_a5741d3c07dc1863d02f71f55f09aa3f7}{lreadyflag} = 0;
439             eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend}--;
440         \} \textcolor{keywordflow}{else} \{
441             \textcolor{comment}{/* Code can probably reach here when last character in output}
442 \textcolor{comment}{             * buffer is not a newline.}
443 \textcolor{comment}{             */}
444             \textcolor{comment}{/* Assure space for NULL */}
445             append\_to\_linebuf(eval, \textcolor{stringliteral}{""});
446         \}
447 
448         *eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend} = \textcolor{charliteral}{'\(\backslash\)0'};
449         rv = execute(eval);
450         \textcolor{keywordflow}{if} (rv != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS})
451             \textcolor{keywordflow}{return} rv;
452     \}
453 
454     eval->\hyperlink{structsed__eval__s_aaf660a3f58ace1338543f57ac5a713c2}{quitflag} = 1;
455 
456     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
457 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=264pt]{sed1_8c_a7eb14ce96b00752a57054f855374677a_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{sed1_8c_a7eb14ce96b00752a57054f855374677a_icgraph}
\end{center}
\end{figure}


\index{sed1.\+c@{sed1.\+c}!sed\+\_\+init\+\_\+eval@{sed\+\_\+init\+\_\+eval}}
\index{sed\+\_\+init\+\_\+eval@{sed\+\_\+init\+\_\+eval}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+init\+\_\+eval(sed\+\_\+eval\+\_\+t $\ast$eval, sed\+\_\+commands\+\_\+t $\ast$commands, sed\+\_\+err\+\_\+fn\+\_\+t $\ast$errfn, void $\ast$data, sed\+\_\+write\+\_\+fn\+\_\+t $\ast$writefn, apr\+\_\+pool\+\_\+t $\ast$p)}{sed_init_eval(sed_eval_t *eval, sed_commands_t *commands, sed_err_fn_t *errfn, void *data, sed_write_fn_t *writefn, apr_pool_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} sed\+\_\+init\+\_\+eval (
\begin{DoxyParamCaption}
\item[{{\bf sed\+\_\+eval\+\_\+t} $\ast$}]{eval, }
\item[{{\bf sed\+\_\+commands\+\_\+t} $\ast$}]{commands, }
\item[{{\bf sed\+\_\+err\+\_\+fn\+\_\+t} $\ast$}]{errfn, }
\item[{{\bf void} $\ast$}]{data, }
\item[{{\bf sed\+\_\+write\+\_\+fn\+\_\+t} $\ast$}]{writefn, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_a2727a923b639ae081eaddd41f7ac9ee1}{}\label{sed1_8c_a2727a923b639ae081eaddd41f7ac9ee1}

\begin{DoxyCode}
245 \{
246     memset(eval, 0, \textcolor{keyword}{sizeof}(*eval));
247     eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool} = \hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p};
248     eval->\hyperlink{structsed__eval__s_a212836040501592e9e950a5c873e142a}{writefn} = writefn;
249     \textcolor{keywordflow}{return} \hyperlink{sed1_8c_a852f7ab1d5beefeb26f22afbc2eb4bd6}{sed\_reset\_eval}(eval, commands, \hyperlink{group__apr__thread__proc_ga2f0d60ad743726f6dced4ea651eaad0c}{errfn}, \hyperlink{structdata}{data});
250 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{sed1_8c_a2727a923b639ae081eaddd41f7ac9ee1_cgraph}
\end{center}
\end{figure}


\index{sed1.\+c@{sed1.\+c}!sed\+\_\+reset\+\_\+eval@{sed\+\_\+reset\+\_\+eval}}
\index{sed\+\_\+reset\+\_\+eval@{sed\+\_\+reset\+\_\+eval}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+reset\+\_\+eval(sed\+\_\+eval\+\_\+t $\ast$eval, sed\+\_\+commands\+\_\+t $\ast$commands, sed\+\_\+err\+\_\+fn\+\_\+t $\ast$errfn, void $\ast$data)}{sed_reset_eval(sed_eval_t *eval, sed_commands_t *commands, sed_err_fn_t *errfn, void *data)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} sed\+\_\+reset\+\_\+eval (
\begin{DoxyParamCaption}
\item[{{\bf sed\+\_\+eval\+\_\+t} $\ast$}]{eval, }
\item[{{\bf sed\+\_\+commands\+\_\+t} $\ast$}]{commands, }
\item[{{\bf sed\+\_\+err\+\_\+fn\+\_\+t} $\ast$}]{errfn, }
\item[{{\bf void} $\ast$}]{data}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_a852f7ab1d5beefeb26f22afbc2eb4bd6}{}\label{sed1_8c_a852f7ab1d5beefeb26f22afbc2eb4bd6}

\begin{DoxyCode}
256 \{
257     \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
258 
259     eval->\hyperlink{structsed__eval__s_a7f0105c0f6f1c11f4e03799ee37731db}{errfn} = \hyperlink{group__apr__thread__proc_ga2f0d60ad743726f6dced4ea651eaad0c}{errfn};
260     eval->\hyperlink{structsed__eval__s_a56d7a9789f4b2c725e30e93dd97ba029}{data} = \hyperlink{group__APACHE__CORE__LOG_gae4950db1dbfff8459a712737063b61aa}{data};
261 
262     eval->\hyperlink{structsed__eval__s_a5e50e5069934b1e219e3b069f42893f4}{commands} = commands;
263 
264     eval->\hyperlink{structsed__eval__s_a41903d37357b9f362b8df066db4550a5}{lnum} = 0;
265     eval->\hyperlink{structsed__eval__s_a361dd857182a9c19914e7b439fad8069}{fout} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
266 
267     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_a22649940ee1f364aadcd2e6590b803f9}{linebuf} == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
268         eval->\hyperlink{structsed__eval__s_a43204e367a5d22a40657466520638a4f}{lsize} = \hyperlink{sed1_8c_a598285922e2b62b38ee46ced0ebd9388}{INIT\_BUF\_SIZE};
269         eval->\hyperlink{structsed__eval__s_a22649940ee1f364aadcd2e6590b803f9}{linebuf} = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool}, eval->
      \hyperlink{structsed__eval__s_a43204e367a5d22a40657466520638a4f}{lsize});
270     \}
271     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_a85e518903a9b9f9fa61f00adab9bc08c}{holdbuf} == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
272         eval->\hyperlink{structsed__eval__s_a63184f8388d2de46a2d1ab81dc092bdc}{hsize} = \hyperlink{sed1_8c_a598285922e2b62b38ee46ced0ebd9388}{INIT\_BUF\_SIZE};
273         eval->\hyperlink{structsed__eval__s_a85e518903a9b9f9fa61f00adab9bc08c}{holdbuf} = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool}, eval->
      \hyperlink{structsed__eval__s_a63184f8388d2de46a2d1ab81dc092bdc}{hsize});
274     \}
275     \textcolor{keywordflow}{if} (eval->\hyperlink{structsed__eval__s_a9839f30a684d0bbdcfdf5d10264abe0e}{genbuf} == \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}) \{
276         eval->\hyperlink{structsed__eval__s_ab230d6407cf1c73f37f58f6e98339b48}{gsize} = \hyperlink{sed1_8c_a598285922e2b62b38ee46ced0ebd9388}{INIT\_BUF\_SIZE};
277         eval->\hyperlink{structsed__eval__s_a9839f30a684d0bbdcfdf5d10264abe0e}{genbuf} = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool}, eval->\hyperlink{structsed__eval__s_ab230d6407cf1c73f37f58f6e98339b48}{gsize});
278     \}
279     eval->\hyperlink{structsed__eval__s_aa8ffb12bc8d0bbef02f647bd8ee11d0f}{lspend} = eval->\hyperlink{structsed__eval__s_a22649940ee1f364aadcd2e6590b803f9}{linebuf};
280     eval->\hyperlink{structsed__eval__s_ae0c22bc397a6cd9592c4a32fe184341f}{hspend} = eval->\hyperlink{structsed__eval__s_a85e518903a9b9f9fa61f00adab9bc08c}{holdbuf};
281     eval->\hyperlink{structsed__eval__s_a755aebdc052cdc94e35de3a8d84eb310}{lcomend} = &eval->\hyperlink{structsed__eval__s_a9839f30a684d0bbdcfdf5d10264abe0e}{genbuf}[71];
282 
283     \textcolor{keywordflow}{for} (i = 0; i < \textcolor{keyword}{sizeof}(eval->\hyperlink{structsed__eval__s_a5720afc606d616b64df0e9f23f44c459}{abuf}) / \textcolor{keyword}{sizeof}(eval->\hyperlink{structsed__eval__s_a5720afc606d616b64df0e9f23f44c459}{abuf}[0]); i++)
284         eval->\hyperlink{structsed__eval__s_a5720afc606d616b64df0e9f23f44c459}{abuf}[i] = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
285     eval->\hyperlink{structsed__eval__s_a7d97d8ced99292b32c7a58b6187c0af7}{aptr} = eval->\hyperlink{structsed__eval__s_a5720afc606d616b64df0e9f23f44c459}{abuf};
286     eval->\hyperlink{structsed__eval__s_a51d3a6f0b12447d7b50943928f1b8b2b}{pending} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
287     eval->\hyperlink{structsed__eval__s_a45b610268fa1117859a814a8d82cc6ce}{inar} = \hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\_pcalloc}(eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool}, commands->\hyperlink{structsed__commands__s_a76d42c97beabb68c2e76d56f318d1d8e}{nrep} * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}));
288     eval->\hyperlink{structsed__eval__s_a5c03ee23892f5b2d1bce7b0f710815ab}{nrep} = commands->\hyperlink{structsed__commands__s_a76d42c97beabb68c2e76d56f318d1d8e}{nrep};
289 
290     eval->\hyperlink{structsed__eval__s_a4c412b6a80ea7add80745b6d09cf0338}{dolflag} = 0;
291     eval->\hyperlink{structsed__eval__s_ac80ba0bb82ac66a912f1fdaa8735c5a7}{sflag} = 0;
292     eval->\hyperlink{structsed__eval__s_a4be155a1e56df1b6f17eb1068e23c8da}{jflag} = 0;
293     eval->\hyperlink{structsed__eval__s_a6ba7b89aaca75d50bb574d84ff5e7caa}{delflag} = 0;
294     eval->\hyperlink{structsed__eval__s_a5741d3c07dc1863d02f71f55f09aa3f7}{lreadyflag} = 0;
295     eval->\hyperlink{structsed__eval__s_aaf660a3f58ace1338543f57ac5a713c2}{quitflag} = 0;
296     eval->\hyperlink{structsed__eval__s_ab8ed6e233be318dbf63f59601e3f85bf}{finalflag} = 1; \textcolor{comment}{/* assume we're evaluating only one file/stream */}
297     eval->\hyperlink{structsed__eval__s_a3aba50db19a917a04eda74e9c3ae11a7}{numpass} = 0;
298     eval->\hyperlink{structsed__eval__s_a24665d402536b600020dc04d5422514a}{nullmatch} = 0;
299     eval->\hyperlink{structsed__eval__s_a846ab25c2c0da86ab66f19aedabf4abd}{col} = 0;
300 
301     \textcolor{keywordflow}{for} (i = 0; i < commands->\hyperlink{structsed__commands__s_a8d082761b64591f9a0db1ae58e93ed25}{nfiles}; i++) \{
302         \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \hyperlink{group__APACHE__CORE__LOG_ga28849770c8bfeb04039d7dd29d4dfa35}{filename} = commands->\hyperlink{structsed__commands__s_a1ac658aedf0d7ce63e55808e6c5614c8}{fname}[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}];
303         \textcolor{keywordflow}{if} (apr\_file\_open(&eval->\hyperlink{structsed__eval__s_a100d3ef79eec9d6139585f61bfa92adb}{fcode}[i], filename,
304                           \hyperlink{group__apr__file__open__flags_ga3e427e53aceb1ccdb078d9a03cd63d01}{APR\_WRITE} | \hyperlink{group__apr__file__open__flags_gac210e96bc821dbaa83c326e775dad028}{APR\_CREATE}, 
      \hyperlink{group__apr__file__permissions_ga8552adb50d545d5fc7faeabb4f4a388f}{APR\_OS\_DEFAULT},
305                           eval->\hyperlink{structsed__eval__s_a174ec7fea803b5a7008d460a7288bd20}{pool}) != \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
306             eval\_errf(eval, \hyperlink{regexp_8h_ab0c2c6a07075dec4041ec562d50d145b}{SEDERR\_COMES}, filename);
307             \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_ga18f5678bea0c2c704a2b6a186c9e158b}{APR\_EGENERAL};
308         \}
309     \}
310 
311     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
312 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{sed1_8c_a852f7ab1d5beefeb26f22afbc2eb4bd6_icgraph}
\end{center}
\end{figure}


\index{sed1.\+c@{sed1.\+c}!sed\+\_\+step@{sed\+\_\+step}}
\index{sed\+\_\+step@{sed\+\_\+step}!sed1.\+c@{sed1.\+c}}
\subsubsection[{\texorpdfstring{sed\+\_\+step(char $\ast$p1, char $\ast$p2, int circf, step\+\_\+vars\+\_\+storage $\ast$vars)}{sed_step(char *p1, char *p2, int circf, step_vars_storage *vars)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} sed\+\_\+step (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{p1, }
\item[{char $\ast$}]{p2, }
\item[{{\bf int}}]{circf, }
\item[{{\bf step\+\_\+vars\+\_\+storage} $\ast$}]{vars}
\end{DoxyParamCaption}
)}\hypertarget{sed1_8c_a9a57da97dc285f94737a35ce1ea74709}{}\label{sed1_8c_a9a57da97dc285f94737a35ce1ea74709}

\begin{DoxyCode}
359 \{
360     \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__HTTPD_ga7cce37ef8558e46f408cb4d0f555605b}{c};
361 
362 
363     \textcolor{keywordflow}{if} (circf) \{
364         vars->\hyperlink{struct__step__vars__storage_a780c9cc2d142cbd9c48b6ec052554cb3}{loc1} = p1;
365         \textcolor{keywordflow}{return} (\_advance(p1, p2, vars));
366     \}
367     \textcolor{comment}{/* fast check for first character */}
368     \textcolor{keywordflow}{if} (*p2 == \hyperlink{regexp_8h_aaa1db86773a082b20a3912c4d35a5d97}{CCHR}) \{
369         c = p2[1];
370         \textcolor{keywordflow}{do} \{
371             \textcolor{keywordflow}{if} (*p1 != c)
372                 \textcolor{keywordflow}{continue};
373             \textcolor{keywordflow}{if} (\_advance(p1, p2, vars)) \{
374                 vars->\hyperlink{struct__step__vars__storage_a780c9cc2d142cbd9c48b6ec052554cb3}{loc1} = p1;
375                 \textcolor{keywordflow}{return} (1);
376             \}
377         \} \textcolor{keywordflow}{while} (*p1++);
378         \textcolor{keywordflow}{return} (0);
379     \}
380         \textcolor{comment}{/* regular algorithm */}
381     \textcolor{keywordflow}{do} \{
382         \textcolor{keywordflow}{if} (\_advance(p1, p2, vars)) \{
383             vars->\hyperlink{struct__step__vars__storage_a780c9cc2d142cbd9c48b6ec052554cb3}{loc1} = p1;
384             \textcolor{keywordflow}{return} (1);
385         \}
386     \} \textcolor{keywordflow}{while} (*p1++);
387     \textcolor{keywordflow}{return} (0);
388 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sed1_8c_a9a57da97dc285f94737a35ce1ea74709_icgraph}
\end{center}
\end{figure}


