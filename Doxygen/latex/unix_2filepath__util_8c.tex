\hypertarget{unix_2filepath__util_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/file\+\_\+io/unix/filepath\+\_\+util.c File Reference}
\label{unix_2filepath__util_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/file\+\_\+io/unix/filepath\+\_\+util.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/file\+\_\+io/unix/filepath\+\_\+util.\+c}}
{\ttfamily \#include \char`\"{}apr\+\_\+want.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+errno.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+pools.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+tables.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+private.\+h\char`\"{}}\\*
Include dependency graph for filepath\+\_\+util.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{unix_2filepath__util_8c__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{unix_2filepath__util_8c__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{unix_2filepath__util_8c_a88a4bf7f483aad3f3945773f3383e713}{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}
\item 
\#define \hyperlink{unix_2filepath__util_8c_a26faf43e3f61783d8b7aa928c0a41a11}{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2filepath__util_8c_aa25c4edb48945764a9323714f2b09401}{apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl} (\hyperlink{structapr__array__header__t}{apr\+\_\+array\+\_\+header\+\_\+t} $\ast$$\ast$\hyperlink{group__apr__filepath_gad1eeb94cb07aaea00d625ad784d000a1}{pathelts}, const char $\ast$\hyperlink{group__apr__filepath_ga7861f6a164f5fd1cdf1d8e9b8def2be9}{liststr}, char \hyperlink{pcregrep_8txt_a78e44b41c95783c2294b698d7bb3d70d}{separator}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\item 
\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t} \hyperlink{unix_2filepath__util_8c_a2ce192385063669de1e83eda9e50caba}{apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl} (char $\ast$$\ast$\hyperlink{group__apr__filepath_ga7861f6a164f5fd1cdf1d8e9b8def2be9}{liststr}, \hyperlink{structapr__array__header__t}{apr\+\_\+array\+\_\+header\+\_\+t} $\ast$\hyperlink{group__apr__filepath_gad1eeb94cb07aaea00d625ad784d000a1}{pathelts}, char \hyperlink{pcregrep_8txt_a78e44b41c95783c2294b698d7bb3d70d}{separator}, \hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}!A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}}
\index{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}!unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}{APR_WANT_MEMFUNC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}\hypertarget{unix_2filepath__util_8c_a26faf43e3f61783d8b7aa928c0a41a11}{}\label{unix_2filepath__util_8c_a26faf43e3f61783d8b7aa928c0a41a11}
\index{unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}!A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}}
\index{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}!unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}{APR_WANT_STRFUNC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}\hypertarget{unix_2filepath__util_8c_a88a4bf7f483aad3f3945773f3383e713}{}\label{unix_2filepath__util_8c_a88a4bf7f483aad3f3945773f3383e713}


\subsection{Function Documentation}
\index{unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}!apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl@{apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl}}
\index{apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl@{apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl}!unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl(char $\ast$$\ast$liststr, apr\+\_\+array\+\_\+header\+\_\+t $\ast$pathelts, char separator, apr\+\_\+pool\+\_\+t $\ast$p)}{apr_filepath_list_merge_impl(char **liststr, apr_array_header_t *pathelts, char separator, apr_pool_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+filepath\+\_\+list\+\_\+merge\+\_\+impl (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{liststr, }
\item[{{\bf apr\+\_\+array\+\_\+header\+\_\+t} $\ast$}]{pathelts, }
\item[{char}]{separator, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{unix_2filepath__util_8c_a2ce192385063669de1e83eda9e50caba}{}\label{unix_2filepath__util_8c_a2ce192385063669de1e83eda9e50caba}

\begin{DoxyCode}
70 \{
71     \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} path\_size = 0;
72     \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__CONFIG_gab559cff0ba49c0f92a0dc777d5730496}{path};
73     \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
74 
75     \textcolor{comment}{/* This test isn't 100% certain, but it'll catch at least some}
76 \textcolor{comment}{       invalid uses... */}
77     \textcolor{keywordflow}{if} (pathelts->\hyperlink{structapr__array__header__t_a36a690ebc781edc9e99ac1bec53c1770}{elt\_size} != \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}*))
78         \textcolor{keywordflow}{return} \hyperlink{group__APR__Error_gae3ffc41994444e71ce522c036ca1d9a4}{APR\_EINVAL};
79 
80     \textcolor{comment}{/* Calculate the size of the merged path */}
81     \textcolor{keywordflow}{for} (i = 0; i < pathelts->\hyperlink{structapr__array__header__t_ab11b88220885c5a0920a06ac85680055}{nelts}; ++\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i})
82         path\_size += strlen(((\textcolor{keywordtype}{char}**)pathelts->\hyperlink{structapr__array__header__t_af8462fa2a1ddf6406c66cd3dd441a269}{elts})[i]);
83 
84     \textcolor{keywordflow}{if} (path\_size == 0)
85     \{
86         *\hyperlink{group__apr__filepath_ga7861f6a164f5fd1cdf1d8e9b8def2be9}{liststr} = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
87         \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
88     \}
89 
90     \textcolor{keywordflow}{if} (i > 0)                  \textcolor{comment}{/* Add space for the separators */}
91         path\_size += (i - 1);
92 
93     \textcolor{comment}{/* Merge the path components */}
94     path = *\hyperlink{group__apr__filepath_ga7861f6a164f5fd1cdf1d8e9b8def2be9}{liststr} = apr\_palloc(p, path\_size + 1);
95     \textcolor{keywordflow}{for} (i = 0; i < pathelts->\hyperlink{structapr__array__header__t_ab11b88220885c5a0920a06ac85680055}{nelts}; ++\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i})
96     \{
97         \textcolor{comment}{/* ### Hmmmm. Calling strlen twice on the same string. Yuck.}
98 \textcolor{comment}{               But is is better than reallocation in apr\_pstrcat? */}
99         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *part = ((\textcolor{keywordtype}{char}**)pathelts->\hyperlink{structapr__array__header__t_af8462fa2a1ddf6406c66cd3dd441a269}{elts})[\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i}];
100         \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} part\_size = strlen(part);
101         \textcolor{keywordflow}{if} (part\_size == 0)     \textcolor{comment}{/* Ignore empty path components. */}
102             \textcolor{keywordflow}{continue};
103 
104         \textcolor{keywordflow}{if} (i > 0)
105             *path++ = \hyperlink{pcregrep_8txt_a78e44b41c95783c2294b698d7bb3d70d}{separator};
106         memcpy(path, part, part\_size);
107         path += part\_size;
108     \}
109     *path = \textcolor{charliteral}{'\(\backslash\)0'};
110     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
111 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{unix_2filepath__util_8c_a2ce192385063669de1e83eda9e50caba_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=347pt]{unix_2filepath__util_8c_a2ce192385063669de1e83eda9e50caba_icgraph}
\end{center}
\end{figure}


\index{unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}!apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl@{apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl}}
\index{apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl@{apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl}!unix/filepath\+\_\+util.\+c@{unix/filepath\+\_\+util.\+c}}
\subsubsection[{\texorpdfstring{apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl(apr\+\_\+array\+\_\+header\+\_\+t $\ast$$\ast$pathelts, const char $\ast$liststr, char separator, apr\+\_\+pool\+\_\+t $\ast$p)}{apr_filepath_list_split_impl(apr_array_header_t **pathelts, const char *liststr, char separator, apr_pool_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+status\+\_\+t} apr\+\_\+filepath\+\_\+list\+\_\+split\+\_\+impl (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+array\+\_\+header\+\_\+t} $\ast$$\ast$}]{pathelts, }
\item[{const char $\ast$}]{liststr, }
\item[{char}]{separator, }
\item[{{\bf apr\+\_\+pool\+\_\+t} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{unix_2filepath__util_8c_aa25c4edb48945764a9323714f2b09401}{}\label{unix_2filepath__util_8c_aa25c4edb48945764a9323714f2b09401}

\begin{DoxyCode}
33 \{
34     \textcolor{keywordtype}{char} *\hyperlink{group__APACHE__CORE__CONFIG_gab559cff0ba49c0f92a0dc777d5730496}{path}, *part, *\hyperlink{group__APACHE__CORE__DAEMON_gaad7fdd8e91a6edc850f20f2fede630a9}{ptr};
35     \textcolor{keywordtype}{char} separator\_string[2] = \{ \textcolor{charliteral}{'\(\backslash\)0'}, \textcolor{charliteral}{'\(\backslash\)0'} \};
36     \hyperlink{structapr__array__header__t}{apr\_array\_header\_t} *elts;
37     \textcolor{keywordtype}{int} \hyperlink{group__APACHE__CORE__PROTO_ga3f892b271cc0564b2d8e9536a96abd7c}{nelts};
38 
39     separator\_string[0] = \hyperlink{pcregrep_8txt_a78e44b41c95783c2294b698d7bb3d70d}{separator};
40     \textcolor{comment}{/* Count the number of path elements. We know there'll be at least}
41 \textcolor{comment}{       one even if path is an empty string. */}
42     path = apr\_pstrdup(p, \hyperlink{group__apr__filepath_ga7861f6a164f5fd1cdf1d8e9b8def2be9}{liststr});
43     \textcolor{keywordflow}{for} (nelts = 0, ptr = path; ptr != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}; ++\hyperlink{group__APACHE__CORE__PROTO_ga3f892b271cc0564b2d8e9536a96abd7c}{nelts})
44     \{
45         ptr = strchr(ptr, \hyperlink{pcregrep_8txt_a78e44b41c95783c2294b698d7bb3d70d}{separator});
46         \textcolor{keywordflow}{if} (ptr)
47             ++\hyperlink{group__APACHE__CORE__DAEMON_gaad7fdd8e91a6edc850f20f2fede630a9}{ptr};
48     \}
49 
50     \textcolor{comment}{/* Split the path into the array. */}
51     elts = apr\_array\_make(p, nelts, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}*));
52     \textcolor{keywordflow}{while} ((part = apr\_strtok(path, separator\_string, &ptr)) != \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL})
53     \{
54         \textcolor{keywordflow}{if} (*part == \textcolor{charliteral}{'\(\backslash\)0'})      \textcolor{comment}{/* Ignore empty path components. */}
55             \textcolor{keywordflow}{continue};
56 
57         *(\textcolor{keywordtype}{char}**)apr\_array\_push(elts) = part;
58         path = \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};            \textcolor{comment}{/* For the next call to apr\_strtok */}
59     \}
60 
61     *pathelts = elts;
62     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
63 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{unix_2filepath__util_8c_aa25c4edb48945764a9323714f2b09401_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{unix_2filepath__util_8c_aa25c4edb48945764a9323714f2b09401_icgraph}
\end{center}
\end{figure}


