\hypertarget{testucs_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/srclib/apr/test/internal/testucs.c File Reference}
\label{testucs_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/test/internal/testucs.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/srclib/apr/test/internal/testucs.\+c}}
{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}arch/win32/apr\+\_\+arch\+\_\+utf8.\+h\char`\"{}}\\*
{\ttfamily \#include $<$wchar.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
Include dependency graph for testucs.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{testucs_8c__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtestval}{testval}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw} (struct \hyperlink{structtestval}{testval} $\ast$\hyperlink{pcregrep_8txt_a588c778c1c1509e472f22dc36efb005e}{f}, struct \hyperlink{structtestval}{testval} $\ast$\hyperlink{pcregrep_8txt_a486d9936a8632c227772a15831f78e11}{l})
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee}{test\+\_\+nrange} (struct \hyperlink{structtestval}{testval} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c}{test\+\_\+wrange} (struct \hyperlink{structtestval}{testval} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p})
\item 
\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} \hyperlink{testucs_8c_a1d426df4c4bed8a514913515e0261f3c}{test\+\_\+ranges} ()
\item 
\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{testucs_8c_a3c04138a5bfe5d72780bb7e82a18e627}{main} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__apr__getopt_ga6bdebf9385dc069c90aa21989641be02}{argc}, char $\ast$$\ast$\hyperlink{group__apr__getopt_ga675a108e956f4e2ea74dae8d26e6273e}{argv})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{testucs.\+c@{testucs.\+c}!displaynw@{displaynw}}
\index{displaynw@{displaynw}!testucs.\+c@{testucs.\+c}}
\subsubsection[{\texorpdfstring{displaynw(struct testval $\ast$f, struct testval $\ast$l)}{displaynw(struct testval *f, struct testval *l)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} displaynw (
\begin{DoxyParamCaption}
\item[{struct {\bf testval} $\ast$}]{f, }
\item[{struct {\bf testval} $\ast$}]{l}
\end{DoxyParamCaption}
)}\hypertarget{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{}\label{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}

\begin{DoxyCode}
80 \{
81     \textcolor{keywordtype}{char} \hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x}[80], *\hyperlink{group__APACHE__CORE__DAEMON_gabfa74bb4f05f3b2de1a89160025e5400}{t} = \hyperlink{group__MOD__PROXY_gaa51afdb6d96b938b938dc9439be201be}{x};
82     \textcolor{keywordtype}{int} \hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i};
83     \textcolor{keywordflow}{for} (i = 0; i < f->\hyperlink{structtestval_a63d4f8e471e3dd98ff291337323ccd42}{nl}; ++\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i})
84         t += sprintf(t, \textcolor{stringliteral}{"%02X "}, f->\hyperlink{structtestval_a01eaa953a0260fd13662963c0dc1484c}{n}[i]);
85     *(t++) = \textcolor{charliteral}{'-'}; 
86     \textcolor{keywordflow}{for} (i = 0; i < l->\hyperlink{structtestval_a63d4f8e471e3dd98ff291337323ccd42}{nl}; ++\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i})
87         t += sprintf(t, \textcolor{stringliteral}{" %02X"}, l->\hyperlink{structtestval_a01eaa953a0260fd13662963c0dc1484c}{n}[i]);
88     *(t++) = \textcolor{charliteral}{' '};
89     *(t++) = \textcolor{charliteral}{'='};
90     *(t++) = \textcolor{charliteral}{' '};
91     \textcolor{keywordflow}{for} (i = 0; i < f->\hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl}; ++\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i})
92         t += sprintf(t, \textcolor{stringliteral}{"%04X "}, f->\hyperlink{structtestval_aa0cd801062d92ef17707e77469397a51}{w}[i]);
93     *(t++) = \textcolor{charliteral}{'-'};
94     \textcolor{keywordflow}{for} (i = 0; i < l->\hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl}; ++\hyperlink{group__MOD__PROXY_ga38403a0592eb8018a3ad61aef0f7ca2c}{i})
95         t += sprintf(t, \textcolor{stringliteral}{" %04X"}, l->\hyperlink{structtestval_aa0cd801062d92ef17707e77469397a51}{w}[i]);
96     *t = \textcolor{charliteral}{'\(\backslash\)0'};
97     puts(x);
98 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=320pt]{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec_icgraph}
\end{center}
\end{figure}


\index{testucs.\+c@{testucs.\+c}!main@{main}}
\index{main@{main}!testucs.\+c@{testucs.\+c}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$$\ast$argv)}{main(int argc, char **argv)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} main (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}\hypertarget{testucs_8c_a3c04138a5bfe5d72780bb7e82a18e627}{}\label{testucs_8c_a3c04138a5bfe5d72780bb7e82a18e627}

\begin{DoxyCode}
332 \{
333     \textcolor{keyword}{struct }\hyperlink{structtestval}{testval} \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
334     memset (&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, 0, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
335 
336     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc} >= 2 && \hyperlink{group__apr__ctype_gaa591f2a7eb578b1fb3ae9aeaab9eafaa}{apr\_tolower}(*\hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv}[1]) != \textcolor{charliteral}{'w'}) \{
337         printf (\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nTesting Narrow Char Ranges\(\backslash\)n"});
338         \hyperlink{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee}{test\_nrange}(&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
339     \}
340     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga073cc653debb351b563a84ac72c49614}{argc} >= 2 && \hyperlink{group__apr__ctype_gaa591f2a7eb578b1fb3ae9aeaab9eafaa}{apr\_tolower}(*\hyperlink{group__APACHE__CORE__LISTEN_ga7af4ef3a08f923773e59081c357d9adf}{argv}[1]) != \textcolor{charliteral}{'n'}) \{
341         printf (\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nTesting Wide Char Ranges\(\backslash\)n"});
342         \hyperlink{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c}{test\_wrange}(&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
343     \}
344     \textcolor{keywordflow}{else} \{
345         \hyperlink{testucs_8c_a1d426df4c4bed8a514913515e0261f3c}{test\_ranges}();
346     \}
347     \textcolor{keywordflow}{return} 0;
348 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{testucs_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}


\index{testucs.\+c@{testucs.\+c}!test\+\_\+nrange@{test\+\_\+nrange}}
\index{test\+\_\+nrange@{test\+\_\+nrange}!testucs.\+c@{testucs.\+c}}
\subsubsection[{\texorpdfstring{test\+\_\+nrange(struct testval $\ast$p)}{test_nrange(struct testval *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} test\+\_\+nrange (
\begin{DoxyParamCaption}
\item[{struct {\bf testval} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee}{}\label{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee}

\begin{DoxyCode}
106 \{
107     \textcolor{keyword}{struct }\hyperlink{structtestval}{testval} \hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
108     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc};
109     \textcolor{keywordtype}{int} \hyperlink{pcre_8txt_a3dcbbd19234731174dbb726c1c0f4f06}{success} = 0;
110     
111     memcpy (&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, p, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
112     ++\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl;    
113     
114     \textcolor{keywordflow}{do} \{
115         \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{structtestval_a63d4f8e471e3dd98ff291337323ccd42}{nl} = \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl, \hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl} = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w) / 2;
116         rc = apr\_conv\_utf8\_to\_ucs2(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n, &nl, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w, &\hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl});
117         \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl = (\textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w) / 2) - \hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl};
118         \textcolor{keywordflow}{if} (!nl && rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
119             \textcolor{keywordflow}{if} (!success) \{
120                 memcpy(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
121                 success = -1;
122             \}
123             \textcolor{keywordflow}{else} \{
124                 \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl != \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.wl 
125                  || memcmp(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w, \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.w, (\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl - 1) * 2) != 0
126                  || \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w[\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl - 1] != \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.w[\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.wl - 1] + 1) \{
127                     \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l});
128                     memcpy(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
129                 \}
130             \}            
131             memcpy(&\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}, &\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
132         \}
133         \textcolor{keywordflow}{else} \{
134             \textcolor{keywordflow}{if} (success) \{
135                 \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l});
136                 success = 0;
137             \}
138             \textcolor{keywordflow}{if} (rc == \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE}) \{
139                 \hyperlink{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee}{test\_nrange}(&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
140             \}
141         \}
142     \} \textcolor{keywordflow}{while} (++\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n[\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl - 1]);
143 
144     \textcolor{keywordflow}{if} (success) \{
145         \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l});
146         success = 0;
147     \}
148 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{testucs_8c_af3fd66e86a2d5993857538bf4238a3ee_icgraph}
\end{center}
\end{figure}


\index{testucs.\+c@{testucs.\+c}!test\+\_\+ranges@{test\+\_\+ranges}}
\index{test\+\_\+ranges@{test\+\_\+ranges}!testucs.\+c@{testucs.\+c}}
\subsubsection[{\texorpdfstring{test\+\_\+ranges()}{test_ranges()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} test\+\_\+ranges (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{testucs_8c_a1d426df4c4bed8a514913515e0261f3c}{}\label{testucs_8c_a1d426df4c4bed8a514913515e0261f3c}

\begin{DoxyCode}
214 \{
215     \textcolor{keyword}{struct }\hyperlink{structtestval}{testval} ntest, wtest;
216     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} nrc, wrc;
217     \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} inlen;
218     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \hyperlink{pcre_8txt_a21b41f6db4993dc6b82c70ec93bd5af9}{matches} = 0;
219 
220     memset(&ntest, 0, \textcolor{keyword}{sizeof}(ntest));
221     ++ntest.nl;
222 
223     memset(&wtest, 0, \textcolor{keyword}{sizeof}(wtest));
224     ++wtest.wl;
225 
226     \textcolor{keywordflow}{do} \{
227         \textcolor{keywordflow}{do} \{
228             inlen = ntest.nl;
229             ntest.wl = \textcolor{keyword}{sizeof}(ntest.w) / 2;
230             nrc = apr\_conv\_utf8\_to\_ucs2(ntest.n, &inlen, ntest.w, &ntest.wl);
231             \textcolor{keywordflow}{if} (nrc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
232                 ntest.wl = (\textcolor{keyword}{sizeof}(ntest.w) / 2) - ntest.wl;
233                 \textcolor{keywordflow}{break};
234             \}
235             \textcolor{keywordflow}{if} (nrc == \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE}) \{
236                 ++ntest.nl;
237                 \textcolor{keywordflow}{if} (ntest.nl > 6) \{
238                     printf (\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nUnexpected utf8 sequence of >6 bytes;\(\backslash\)n"});
239                     \hyperlink{group__APACHE__OS__NETWARE_gaac7f3a566d7243651a356db3fcfef6b1}{exit}(255);
240                 \}
241                 \textcolor{keywordflow}{continue};
242             \}
243             \textcolor{keywordflow}{else} \{
244                 \textcolor{keywordflow}{while} (!(++ntest.n[ntest.nl - 1])) \{
245                     \textcolor{keywordflow}{if} (!(--ntest.nl))
246                         \textcolor{keywordflow}{break};
247                 \}
248             \}
249         \} \textcolor{keywordflow}{while} (ntest.nl);
250 
251         \textcolor{keywordflow}{do} \{
252             inlen = wtest.wl;
253             wtest.nl = \textcolor{keyword}{sizeof}(wtest.n);
254             wrc = apr\_conv\_ucs2\_to\_utf8(wtest.w, &inlen, wtest.n, &wtest.nl);
255             \textcolor{keywordflow}{if} (wrc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
256                 wtest.nl = \textcolor{keyword}{sizeof}(wtest.n) - wtest.nl;
257                 \textcolor{keywordflow}{break};
258             \}
259             \textcolor{keywordflow}{else} \{
260                 \textcolor{keywordflow}{if} (!(++wtest.w[wtest.wl - 1])) \{
261                     \textcolor{keywordflow}{if} (wtest.wl == 1)
262                         ++wtest.wl;
263                     \textcolor{keywordflow}{else}
264                         ++wtest.w[0];
265 
266                     \textcolor{comment}{/* On the second pass, ensure lead word is incomplete */}
267                     \textcolor{keywordflow}{do} \{
268                         inlen = 1;
269                         wtest.nl = \textcolor{keyword}{sizeof}(wtest.n);
270                         \textcolor{keywordflow}{if} (apr\_conv\_ucs2\_to\_utf8(wtest.w, &inlen, wtest.n, &wtest.nl)
271                                 == \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE})
272                             \textcolor{keywordflow}{break};
273                         \textcolor{keywordflow}{if} (!(++wtest.w[0])) \{
274                             wtest.wl = 0;
275                             \textcolor{keywordflow}{break};
276                         \}
277                     \} \textcolor{keywordflow}{while} (1);
278                 \}
279             \}
280         \} \textcolor{keywordflow}{while} (wtest.wl);
281 
282         \textcolor{keywordflow}{if} (!ntest.nl && !wtest.wl)
283             \textcolor{keywordflow}{break};
284 
285         \textcolor{comment}{/* Identical? */}
286         \textcolor{keywordflow}{if} ((wtest.nl != ntest.nl)
287          || (memcmp(wtest.n, ntest.n, ntest.nl) != 0)
288          || (wtest.wl != ntest.wl)
289          || (memcmp(ntest.w, wtest.w, wtest.wl * 2) != 0)) \{
290             printf (\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nMismatch of w/n conversion at;\(\backslash\)n"});
291             \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&ntest, &wtest);
292             \hyperlink{group__APACHE__OS__NETWARE_gaac7f3a566d7243651a356db3fcfef6b1}{exit}(255);
293         \}
294         ++\hyperlink{pcre_8txt_a21b41f6db4993dc6b82c70ec93bd5af9}{matches};
295 
296         \textcolor{keywordflow}{while} (!(++ntest.n[ntest.nl - 1])) \{
297             \textcolor{keywordflow}{if} (!(--ntest.nl))
298                 \textcolor{keywordflow}{break};
299         \}
300 
301         \textcolor{keywordflow}{if} (!(++wtest.w[wtest.wl - 1])) \{
302             \textcolor{keywordflow}{if} (wtest.wl == 1)
303                 ++wtest.wl;
304             \textcolor{keywordflow}{else}
305                 ++wtest.w[0];
306 
307             \textcolor{comment}{/* On the second pass, ensure lead word is incomplete */}
308             \textcolor{keywordflow}{do} \{
309                 inlen = 1;
310                 wtest.nl = \textcolor{keyword}{sizeof}(wtest.n);
311                 \textcolor{keywordflow}{if} (apr\_conv\_ucs2\_to\_utf8(wtest.w, &inlen, wtest.n, &wtest.nl)
312                         == \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE})
313                     \textcolor{keywordflow}{break};
314                 \textcolor{keywordflow}{if} (!(++wtest.w[0])) \{
315                     wtest.wl = 0;
316                     \textcolor{keywordflow}{break};
317                 \}
318             \} \textcolor{keywordflow}{while} (1);
319         \}
320     \} \textcolor{keywordflow}{while} (wtest.wl || ntest.nl);
321 
322     printf (\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nutf8 and ucs2 sequences of %lu transformations matched OK.\(\backslash\)n"},
323             matches);
324 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{testucs_8c_a1d426df4c4bed8a514913515e0261f3c_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{testucs_8c_a1d426df4c4bed8a514913515e0261f3c_icgraph}
\end{center}
\end{figure}


\index{testucs.\+c@{testucs.\+c}!test\+\_\+wrange@{test\+\_\+wrange}}
\index{test\+\_\+wrange@{test\+\_\+wrange}!testucs.\+c@{testucs.\+c}}
\subsubsection[{\texorpdfstring{test\+\_\+wrange(struct testval $\ast$p)}{test_wrange(struct testval *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} test\+\_\+wrange (
\begin{DoxyParamCaption}
\item[{struct {\bf testval} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c}{}\label{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c}

\begin{DoxyCode}
158 \{
159     \textcolor{keyword}{struct }\hyperlink{structtestval}{testval} \hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
160     \hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\_status\_t} \hyperlink{group__APACHE__CORE__CONFIG_ga2e051c0ce9ee165170cd7973f2464512}{rc};
161     \textcolor{keywordtype}{int} \hyperlink{pcre_8txt_a3dcbbd19234731174dbb726c1c0f4f06}{success} = 0;
162     
163     memcpy (&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, p, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
164     ++\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl;    
165     
166     \textcolor{keywordflow}{do} \{
167         \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{structtestval_a63d4f8e471e3dd98ff291337323ccd42}{nl} = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n), \hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl} = \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl;        
168         rc = apr\_conv\_ucs2\_to\_utf8(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w, &\hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl}, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n, &nl);
169         \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n) - nl;
170         \textcolor{keywordflow}{if} (!\hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl} && rc == \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}) \{
171             \textcolor{keywordflow}{if} (!success) \{
172                 memcpy(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
173                 success = -1;
174             \}
175             \textcolor{keywordflow}{else} \{
176                 \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl != \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.nl 
177                  || memcmp(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n, \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.n, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl - 1) != 0
178                  || \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n[\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl - 1] != \hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.n[\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}.nl - 1] + 1) \{
179                     \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l});
180                     memcpy(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
181                 \}
182             \}            
183             memcpy(&\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l}, &\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}, \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}));
184         \}
185         \textcolor{keywordflow}{else} \{
186             \textcolor{keywordflow}{if} (success) \{
187                 \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l});
188                 success = 0;
189             \}
190         \}
191     \} \textcolor{keywordflow}{while} (++\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w[\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl - 1]);
192 
193     \textcolor{keywordflow}{if} (success) \{
194         \hyperlink{testucs_8c_aeee97df54f70b460e56e3303ef9eaeec}{displaynw}(&\hyperlink{group__APACHE__CORE__DAEMON_ga588c778c1c1509e472f22dc36efb005e}{f}, &\hyperlink{group__APACHE__CORE__CONFIG_ga325499caccf210ef36b605bae60930b7}{l});
195         success = 0;
196     \}
197 
198     \textcolor{keywordflow}{do} \{
199         \hyperlink{group__apr__platform_gaaa72b2253f6f3032cefea5712a27540e}{apr\_size\_t} \hyperlink{structtestval_a61e60484d4f9aeacab5e4acc3d30312d}{wl} = \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl, nl = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n);
200         rc = apr\_conv\_ucs2\_to\_utf8(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w, &wl, \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n, &nl);
201         \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl = \textcolor{keyword}{sizeof}(\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.n) - \hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.nl;
202         \hyperlink{util__expr__scan_8c_a33e91cd0cef6786e9e3a27ac67707207}{if} (rc == \hyperlink{group__APR__Error_ga64dff43b83bcefd3f3c751be6b864ca1}{APR\_INCOMPLETE}) \{
203             \hyperlink{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c}{test\_wrange}(&\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s});
204         \}
205     \} \textcolor{keywordflow}{while} (++\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.w[\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s}.wl - 1]);
206 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{testucs_8c_a02b9a3880922b11cc9bff1c5a674e38c_icgraph}
\end{center}
\end{figure}


