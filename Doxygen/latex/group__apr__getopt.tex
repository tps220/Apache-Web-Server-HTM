\hypertarget{group__apr__getopt}{}\section{Command Argument Parsing}
\label{group__apr__getopt}\index{Command Argument Parsing@{Command Argument Parsing}}
Collaboration diagram for Command Argument Parsing\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__apr__getopt}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t}
\item 
struct \hyperlink{structapr__getopt__option__t}{apr\+\_\+getopt\+\_\+option\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void}( \hyperlink{group__apr__getopt_ga67c949e3d93e50e12347acd92a3bbe18}{apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t}) (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void} $\ast$\hyperlink{group__APACHE__CORE__MUTEX_gaf6517210150d97cd5cb8a17e3768770d}{arg}, const char $\ast$\hyperlink{group__apr__thread__proc_ga156fcecee9d33dd7b55c3d8fdaba7159}{err},...)
\item 
typedef struct \hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t} \hyperlink{group__apr__getopt_gaed49565eab64803e93f76d0c40d6873d}{apr\+\_\+getopt\+\_\+t}
\item 
typedef struct \hyperlink{structapr__getopt__option__t}{apr\+\_\+getopt\+\_\+option\+\_\+t} \hyperlink{group__apr__getopt_ga114d2af52f3573eaeee2ffa73b2c4ff5}{apr\+\_\+getopt\+\_\+option\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__getopt_ga29849181eb220ccc0407026401c6639a}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__apr__errno_gaa5105fa83cc322f09382292db8b47593}{apr\+\_\+status\+\_\+t}) apr\+\_\+getopt\+\_\+init(\hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t} $\ast$$\ast$os
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$ \hyperlink{group__apr__getopt_gadb9070ef05a170aebb3bab70465af9ac}{cont}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} \hyperlink{group__apr__getopt_ga6bdebf9385dc069c90aa21989641be02}{argc}
\item 
\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} \hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int} const char $\ast$const $\ast$ \hyperlink{group__apr__getopt_ga675a108e956f4e2ea74dae8d26e6273e}{argv}
\item 
const char $\ast$ \hyperlink{group__apr__getopt_ga750f41de75ba000ae8bb4859e91835a1}{opts}
\item 
const char char $\ast$ \hyperlink{group__apr__getopt_ga4684e1412a5bbd73e963c3dbb45dc3f0}{option\+\_\+ch}
\item 
const char char const char $\ast$$\ast$ \hyperlink{group__apr__getopt_ga237497a2dba41f8f2e6999065f542e3e}{option\+\_\+arg}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Typedef Documentation}
\index{Command Argument Parsing@{Command Argument Parsing}!apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t@{apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t}}
\index{apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t@{apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t}{apr_getopt_err_fn_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf void}( apr\+\_\+getopt\+\_\+err\+\_\+fn\+\_\+t) ({\bf void} $\ast${\bf arg}, const char $\ast${\bf err},...)}\hypertarget{group__apr__getopt_ga67c949e3d93e50e12347acd92a3bbe18}{}\label{group__apr__getopt_ga67c949e3d93e50e12347acd92a3bbe18}
An {\ttfamily \hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t}} error callback function.

{\itshape arg} is this {\ttfamily \hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t}\textquotesingle{}s} {\ttfamily errarg} member. \index{Command Argument Parsing@{Command Argument Parsing}!apr\+\_\+getopt\+\_\+option\+\_\+t@{apr\+\_\+getopt\+\_\+option\+\_\+t}}
\index{apr\+\_\+getopt\+\_\+option\+\_\+t@{apr\+\_\+getopt\+\_\+option\+\_\+t}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{apr\+\_\+getopt\+\_\+option\+\_\+t}{apr_getopt_option_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf apr\+\_\+getopt\+\_\+option\+\_\+t} {\bf apr\+\_\+getopt\+\_\+option\+\_\+t}}\hypertarget{group__apr__getopt_ga114d2af52f3573eaeee2ffa73b2c4ff5}{}\label{group__apr__getopt_ga114d2af52f3573eaeee2ffa73b2c4ff5}
\begin{DoxySeeAlso}{See also}
\hyperlink{structapr__getopt__option__t}{apr\+\_\+getopt\+\_\+option\+\_\+t} 
\end{DoxySeeAlso}
\index{Command Argument Parsing@{Command Argument Parsing}!apr\+\_\+getopt\+\_\+t@{apr\+\_\+getopt\+\_\+t}}
\index{apr\+\_\+getopt\+\_\+t@{apr\+\_\+getopt\+\_\+t}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{apr\+\_\+getopt\+\_\+t}{apr_getopt_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf apr\+\_\+getopt\+\_\+t} {\bf apr\+\_\+getopt\+\_\+t}}\hypertarget{group__apr__getopt_gaed49565eab64803e93f76d0c40d6873d}{}\label{group__apr__getopt_gaed49565eab64803e93f76d0c40d6873d}
\begin{DoxySeeAlso}{See also}
\hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t} 
\end{DoxySeeAlso}


\subsection{Function Documentation}
\index{Command Argument Parsing@{Command Argument Parsing}!A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+R\+E(apr\+\_\+status\+\_\+t) apr\+\_\+getopt\+\_\+init(apr\+\_\+getopt\+\_\+t $\ast$$\ast$os}{APR_DECLARE(apr_status_t) apr_getopt_init(apr_getopt_t **os}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf apr\+\_\+status\+\_\+t}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__apr__getopt_ga29849181eb220ccc0407026401c6639a}{}\label{group__apr__getopt_ga29849181eb220ccc0407026401c6639a}
Initialize the arguments for parsing by apr\+\_\+getopt(). 
\begin{DoxyParams}{Parameters}
{\em os} & The options structure created for apr\+\_\+getopt() \\
\hline
{\em cont} & The pool to operate on \\
\hline
{\em argc} & The number of arguments to parse \\
\hline
{\em argv} & The array of arguments to parse \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Arguments 3 and 4 are most commonly argc and argv from main(argc, argv) The ($\ast$os)-\/$>$errfn is initialized to fprintf(stderr... but may be overridden.
\end{DoxyRemark}
Parse the options initialized by apr\+\_\+getopt\+\_\+init(). 
\begin{DoxyParams}{Parameters}
{\em os} & The apr\+\_\+opt\+\_\+t structure returned by apr\+\_\+getopt\+\_\+init() \\
\hline
{\em opts} & A string of characters that are acceptable options to the program. Characters followed by \char`\"{}\+:\char`\"{} are required to have an option associated \\
\hline
{\em option\+\_\+ch} & The next option character parsed \\
\hline
{\em option\+\_\+arg} & The argument following the option character\+: \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
There are four potential status values on exit. They are\+: 
\begin{DoxyPre}
            APR\_EOF      --  No more options to parse
            APR\_BADCH    --  Found a bad option character
            APR\_BADARG   --  No argument followed the option flag
            APR\_SUCCESS  --  The next option was found.
\end{DoxyPre}

\end{DoxyReturn}
Parse the options initialized by apr\+\_\+getopt\+\_\+init(), accepting long options beginning with \char`\"{}-\/-\/\char`\"{} in addition to single-\/character options beginning with \char`\"{}-\/\char`\"{}. 
\begin{DoxyParams}{Parameters}
{\em os} & The \hyperlink{structapr__getopt__t}{apr\+\_\+getopt\+\_\+t} structure created by apr\+\_\+getopt\+\_\+init() \\
\hline
{\em opts} & A pointer to a list of \hyperlink{structapr__getopt__option__t}{apr\+\_\+getopt\+\_\+option\+\_\+t} structures, which can be initialized with \{ \char`\"{}name\char`\"{}, optch, has\+\_\+args \}. has\+\_\+args is nonzero if the option requires an argument. A structure with an optch value of 0 terminates the list. \\
\hline
{\em option\+\_\+ch} & Receives the value of \char`\"{}optch\char`\"{} from the \hyperlink{structapr__getopt__option__t}{apr\+\_\+getopt\+\_\+option\+\_\+t} structure corresponding to the next option matched. \\
\hline
{\em option\+\_\+arg} & Receives the argument following the option, if any. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
There are four potential status values on exit. They are\+: 
\begin{DoxyPre}
            APR\_EOF      --  No more options to parse
            APR\_BADCH    --  Found a bad option character
            APR\_BADARG   --  No argument followed the option flag
            APR\_SUCCESS  --  The next option was found.
\end{DoxyPre}
 When A\+P\+R\+\_\+\+S\+U\+C\+C\+E\+SS is returned, os-\/$>$ind gives the index of the first non-\/option argument. On error, a message will be printed to stdout unless os-\/$>$err is set to 0. If os-\/$>$interleave is set to nonzero, options can come after arguments, and os-\/$>$argv will be permuted to leave non-\/option arguments at the end (the original argv is unaffected). 
\end{DoxyReturn}
The problem with trying to output the entire iovec is that we cannot maintain the behaviour that a real writev would have. If we iterate over the iovec one at a time, we lose the atomic properties of \hyperlink{apr__arch__os2calls_8h_a3d0f3996136a9b5ab46431c60c746efd}{writev()}. The other option is to combine the entire iovec into one buffer that we could then send in one call to write(). This is not reasonable since we do not know how much data an iovec could contain.

The only reasonable option, that maintains the semantics of a real \hyperlink{apr__arch__os2calls_8h_a3d0f3996136a9b5ab46431c60c746efd}{writev()}, is to only write the first iovec. Callers of file\+\_\+writev() must deal with partial writes as they normally would. If you want to ensure an entire iovec is written, use apr\+\_\+file\+\_\+writev\+\_\+full().
\begin{DoxyCode}
23 \{
24     \textcolor{keywordflow}{return} \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS};
25 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{Command Argument Parsing@{Command Argument Parsing}!argc@{argc}}
\index{argc@{argc}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{argc}{argc}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+pool\+\_\+t} {\bf int} argc}\hypertarget{group__apr__getopt_ga6bdebf9385dc069c90aa21989641be02}{}\label{group__apr__getopt_ga6bdebf9385dc069c90aa21989641be02}
\index{Command Argument Parsing@{Command Argument Parsing}!argv@{argv}}
\index{argv@{argv}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{argv}{argv}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+pool\+\_\+t} {\bf int} const char$\ast$ const$\ast$ argv}\hypertarget{group__apr__getopt_ga675a108e956f4e2ea74dae8d26e6273e}{}\label{group__apr__getopt_ga675a108e956f4e2ea74dae8d26e6273e}
\index{Command Argument Parsing@{Command Argument Parsing}!cont@{cont}}
\index{cont@{cont}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{cont}{cont}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\+\_\+anylock\+\_\+t} {\bf void} {\bf apr\+\_\+pool\+\_\+t} $\ast$ cont}\hypertarget{group__apr__getopt_gadb9070ef05a170aebb3bab70465af9ac}{}\label{group__apr__getopt_gadb9070ef05a170aebb3bab70465af9ac}
\index{Command Argument Parsing@{Command Argument Parsing}!option\+\_\+arg@{option\+\_\+arg}}
\index{option\+\_\+arg@{option\+\_\+arg}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{option\+\_\+arg}{option_arg}}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf apr\+\_\+getopt\+\_\+option\+\_\+t} {\bf int} const char $\ast$$\ast$ option\+\_\+arg}\hypertarget{group__apr__getopt_ga237497a2dba41f8f2e6999065f542e3e}{}\label{group__apr__getopt_ga237497a2dba41f8f2e6999065f542e3e}
\index{Command Argument Parsing@{Command Argument Parsing}!option\+\_\+ch@{option\+\_\+ch}}
\index{option\+\_\+ch@{option\+\_\+ch}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{option\+\_\+ch}{option_ch}}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf apr\+\_\+getopt\+\_\+option\+\_\+t} {\bf int} $\ast$ option\+\_\+ch}\hypertarget{group__apr__getopt_ga4684e1412a5bbd73e963c3dbb45dc3f0}{}\label{group__apr__getopt_ga4684e1412a5bbd73e963c3dbb45dc3f0}
\index{Command Argument Parsing@{Command Argument Parsing}!opts@{opts}}
\index{opts@{opts}!Command Argument Parsing@{Command Argument Parsing}}
\subsubsection[{\texorpdfstring{opts}{opts}}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf apr\+\_\+getopt\+\_\+option\+\_\+t} $\ast$ opts}\hypertarget{group__apr__getopt_ga750f41de75ba000ae8bb4859e91835a1}{}\label{group__apr__getopt_ga750f41de75ba000ae8bb4859e91835a1}
