\hypertarget{vhost_8c}{}\section{/usr/local/src/github/\+Codebase/httpd-\/2.4.29/server/vhost.c File Reference}
\label{vhost_8c}\index{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/server/vhost.\+c@{/usr/local/src/github/\+Codebase/httpd-\/2.\+4.\+29/server/vhost.\+c}}


functions pertaining to virtual host addresses (configuration and run-\/time)  


{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+strings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+lib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}apr\+\_\+want.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ap\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}httpd.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+log.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+vhost.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+protocol.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\+\_\+core.\+h\char`\"{}}\\*
Include dependency graph for vhost.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{vhost_8c__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structname__chain}{name\+\_\+chain}
\item 
struct \hyperlink{structipaddr__chain}{ipaddr\+\_\+chain}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{vhost_8c_a88a4bf7f483aad3f3945773f3383e713}{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}
\item 
\#define \hyperlink{vhost_8c_ae75325996d1b2cf6120dded4cb153a22}{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}~\hyperlink{group__APACHE__CORE__HTTPD_gaf1cdaac5f4562d9d20bae417471ad422}{A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}
\item 
\#define \hyperlink{vhost_8c_aa5130f4ba6aed7eab4b22e6d70fc27d1}{I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}~256
\item 
\#define \hyperlink{vhost_8c_a1f84a0554773fb24c57f8181e5814cad}{I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR}(ad)~(0)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structname__chain}{name\+\_\+chain} \hyperlink{vhost_8c_a1fdb2324c79925121986d6dfba977a1e}{name\+\_\+chain}
\item 
typedef struct \hyperlink{structipaddr__chain}{ipaddr\+\_\+chain} \hyperlink{vhost_8c_aaa79e0cb0098e495bb2b35bd480dafe6}{ipaddr\+\_\+chain}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__hooks_ga2991c49e63464ffbc0a6d82f1878f0cd}{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{group__MOD__ISAPI_gacd6cdbf73df3d9eed42fa493d9b621a6}{void})
\item 
const char $\ast$ \hyperlink{group__APACHE__CORE__VHOST_ga6fcf77850179edd28aaac9b0adaefa6a}{ap\+\_\+parse\+\_\+vhost\+\_\+addrs} (\hyperlink{structapr__pool__t}{apr\+\_\+pool\+\_\+t} $\ast$\hyperlink{group__APACHE__CORE__MPM_ga5cd91701e5c167f2b1a38e70ab57817e}{p}, const char $\ast$\hyperlink{ab_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname}, \hyperlink{structserver__rec}{server\+\_\+rec} $\ast$\hyperlink{pcretest_8txt_a062597889ba244b72877454b1d3adecf}{s})
\item 
\hyperlink{vhost_8c_a3c3d35fe71135329f5cf444e02610da7}{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD} (const char $\ast$)
\item 
\hyperlink{vhost_8c_ace56382e8c8bdfffe9ffc8dbab06d36c}{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE} (\hyperlink{pcre_8txt_a42dfa4ff673c82d8efe7144098fbc198}{int})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
functions pertaining to virtual host addresses (configuration and run-\/time) 



\subsection{Macro Definition Documentation}
\index{vhost.\+c@{vhost.\+c}!A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX@{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}}
\index{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX@{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}{APLOG_MODULE_INDEX}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+L\+O\+G\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX~{\bf A\+P\+\_\+\+C\+O\+R\+E\+\_\+\+M\+O\+D\+U\+L\+E\+\_\+\+I\+N\+D\+EX}}\hypertarget{vhost_8c_ae75325996d1b2cf6120dded4cb153a22}{}\label{vhost_8c_ae75325996d1b2cf6120dded4cb153a22}
\index{vhost.\+c@{vhost.\+c}!A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}}
\index{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}{APR_WANT_STRFUNC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+S\+T\+R\+F\+U\+NC}\hypertarget{vhost_8c_a88a4bf7f483aad3f3945773f3383e713}{}\label{vhost_8c_a88a4bf7f483aad3f3945773f3383e713}
\index{vhost.\+c@{vhost.\+c}!I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE@{I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}}
\index{I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE@{I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}{IPHASH_TABLE_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+P\+H\+A\+S\+H\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE~256}\hypertarget{vhost_8c_aa5130f4ba6aed7eab4b22e6d70fc27d1}{}\label{vhost_8c_aa5130f4ba6aed7eab4b22e6d70fc27d1}
\index{vhost.\+c@{vhost.\+c}!I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR@{I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR}}
\index{I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR@{I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR}{IS_IN6_ANYADDR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+S\+\_\+\+I\+N6\+\_\+\+A\+N\+Y\+A\+D\+DR(
\begin{DoxyParamCaption}
\item[{}]{ad}
\end{DoxyParamCaption}
)~(0)}\hypertarget{vhost_8c_a1f84a0554773fb24c57f8181e5814cad}{}\label{vhost_8c_a1f84a0554773fb24c57f8181e5814cad}


\subsection{Typedef Documentation}
\index{vhost.\+c@{vhost.\+c}!ipaddr\+\_\+chain@{ipaddr\+\_\+chain}}
\index{ipaddr\+\_\+chain@{ipaddr\+\_\+chain}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{ipaddr\+\_\+chain}{ipaddr_chain}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf ipaddr\+\_\+chain} {\bf ipaddr\+\_\+chain}}\hypertarget{vhost_8c_aaa79e0cb0098e495bb2b35bd480dafe6}{}\label{vhost_8c_aaa79e0cb0098e495bb2b35bd480dafe6}
\index{vhost.\+c@{vhost.\+c}!name\+\_\+chain@{name\+\_\+chain}}
\index{name\+\_\+chain@{name\+\_\+chain}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{name\+\_\+chain}{name_chain}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf name\+\_\+chain} {\bf name\+\_\+chain}}\hypertarget{vhost_8c_a1fdb2324c79925121986d6dfba977a1e}{}\label{vhost_8c_a1fdb2324c79925121986d6dfba977a1e}


\subsection{Function Documentation}
\index{vhost.\+c@{vhost.\+c}!A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE@{A\+P\+\_\+\+D\+E\+C\+L\+A\+RE}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E(int)}{AP_DECLARE(int)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+RE (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{}
\end{DoxyParamCaption}
)}\hypertarget{vhost_8c_ace56382e8c8bdfffe9ffc8dbab06d36c}{}\label{vhost_8c_ace56382e8c8bdfffe9ffc8dbab06d36c}
For every virtual host on this connection, call func\+\_\+cb. 
\begin{DoxyCode}
937 \{
938     \hyperlink{structserver__rec}{server\_rec} *\hyperlink{group__APACHE__CORE__LISTEN_ga9359ed159c8b295541e3770172d34550}{s};
939     \hyperlink{structserver__addr__rec}{server\_addr\_rec} *sar;
940 
941     s = \hyperlink{group__APACHE__CORE__CONFIG_ga091cdd45984e865a888a4f8bb8fe107a}{r}->\hyperlink{structrequest__rec_a4a8059930ce9409cb885fdeef6921b7b}{server};
942 
943     \textcolor{comment}{/* search all the <VirtualHost> values */}
944     \textcolor{comment}{/* XXX: If this is a NameVirtualHost then we may not be doing the Right Thing}
945 \textcolor{comment}{     * consider:}
946 \textcolor{comment}{     *}
947 \textcolor{comment}{     *     NameVirtualHost 10.1.1.1}
948 \textcolor{comment}{     *     <VirtualHost 10.1.1.1>}
949 \textcolor{comment}{     *     ServerName v1}
950 \textcolor{comment}{     *     </VirtualHost>}
951 \textcolor{comment}{     *     <VirtualHost 10.1.1.1>}
952 \textcolor{comment}{     *     ServerName v2}
953 \textcolor{comment}{     *     </VirtualHost>}
954 \textcolor{comment}{     *}
955 \textcolor{comment}{     * Suppose r->server is v2, and we're asked to match "10.1.1.1".  We'll say}
956 \textcolor{comment}{     * "yup it's v2", when really it isn't... if a request came in for 10.1.1.1}
957 \textcolor{comment}{     * it would really go to v1.}
958 \textcolor{comment}{     */}
959     \textcolor{keywordflow}{for} (sar = s->\hyperlink{structserver__rec_a8caec41019feeb054418b6af738cdf67}{addrs}; sar; sar = sar->\hyperlink{structserver__addr__rec_a5b8b246fe0879f9f40d0d7492e9ce8e2}{next}) \{
960         \textcolor{keywordflow}{if} ((sar->\hyperlink{structserver__addr__rec_a498bb8ff02743204f9c00865a089de9a}{host\_port} == 0 || \hyperlink{group__APACHE__CORE__VHOST_ga225c76c246a5cc263c5a2628eb99353e}{port} == sar->\hyperlink{structserver__addr__rec_a498bb8ff02743204f9c00865a089de9a}{host\_port})
961             && !\hyperlink{apr__cpystrn_8c_a4a00fc29b96a953fed9e0107a9c4548a}{strcasecmp}(\hyperlink{group__APACHE__CORE__VHOST_ga8c8ad0616f1a1fed66e67a90a116a76c}{host}, sar->\hyperlink{structserver__addr__rec_aaf703f04f5299efa3a1e81d32bfa9338}{virthost})) \{
962             \textcolor{keywordflow}{return} 1;
963         \}
964     \}
965 
966     \textcolor{comment}{/* the Port has to match now, because the rest don't have ports associated}
967 \textcolor{comment}{     * with them. */}
968     \textcolor{keywordflow}{if} (\hyperlink{group__APACHE__CORE__VHOST_ga225c76c246a5cc263c5a2628eb99353e}{port} != s->\hyperlink{structserver__rec_ae46ad679b7fd52db7100c96003738693}{port}) \{
969         \textcolor{keywordflow}{return} 0;
970     \}
971 
972     \textcolor{keywordflow}{return} matches\_aliases(s, \hyperlink{group__APACHE__CORE__VHOST_ga8c8ad0616f1a1fed66e67a90a116a76c}{host});
973 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{vhost_8c_ace56382e8c8bdfffe9ffc8dbab06d36c_cgraph}
\end{center}
\end{figure}


\index{vhost.\+c@{vhost.\+c}!A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD@{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}}
\index{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD@{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}!vhost.\+c@{vhost.\+c}}
\subsubsection[{\texorpdfstring{A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+T\+D(const char $\ast$)}{AP_DECLARE_NONSTD(const char *)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+P\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{}
\end{DoxyParamCaption}
)}\hypertarget{vhost_8c_a3c3d35fe71135329f5cf444e02610da7}{}\label{vhost_8c_a3c3d35fe71135329f5cf444e02610da7}

\begin{DoxyCode}
255 \{
256     \textcolor{keyword}{static} \textcolor{keywordtype}{int} warnonce = 0;
257     \textcolor{keywordflow}{if} (++warnonce == 1) \{
258         \hyperlink{group__APACHE__CORE__LOG_ga5e6676c87418af7a1d323a116c78ecb4}{ap\_log\_error}(\hyperlink{group__APACHE__CORE__LOG_ga655e126996849bcb82e4e5a14c616f4a}{APLOG\_MARK}, \hyperlink{group__APACHE__CORE__LOG_ga23239084d07266623cf5f5830fd28c8c}{APLOG\_NOTICE}|
      \hyperlink{group__APACHE__CORE__LOG_ga39efd19b052fb6f39d8f263c16cc82b7}{APLOG\_STARTUP}, \hyperlink{group__apr__errno_ga9ee311b7bf1c691dc521d721339ee2a6}{APR\_SUCCESS}, \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL}, \hyperlink{group__APACHE__CORE__LOG_ga1dee8a07e06bc5b3de8b89662c2cd666}{APLOGNO}(00548)
259                      \textcolor{stringliteral}{"NameVirtualHost has no effect and will be removed in the "}
260                      \textcolor{stringliteral}{"next release %s:%d"},
261                      \hyperlink{group__APACHE__CORE__DAEMON_ga504a7f40c3261db3e10e1d2776642dd6}{cmd}->directive->filename,
262                      \hyperlink{group__APACHE__CORE__DAEMON_ga504a7f40c3261db3e10e1d2776642dd6}{cmd}->directive->line\_num);
263     \}
264 
265     \textcolor{keywordflow}{return} \hyperlink{pcre_8txt_ad7f989d16aa8ca809a36bc392c07fba1}{NULL};
266 \}
\end{DoxyCode}
