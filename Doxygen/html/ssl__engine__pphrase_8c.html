<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: /usr/local/src/github/Codebase/httpd-2.4.29/modules/ssl/ssl_engine_pphrase.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2379abaa7725ab34fabdf9daa508e09.html">Codebase</a></li><li class="navelem"><a class="el" href="dir_db9466b59d24a02e023577068efc5d5d.html">httpd-2.4.29</a></li><li class="navelem"><a class="el" href="dir_04adba3a211bbed5210563c01b5ac160.html">modules</a></li><li class="navelem"><a class="el" href="dir_7f8ddd43e10e06eb8087b9cb18597541.html">ssl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ssl_engine_pphrase.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ssl__private_8h_source.html">ssl_private.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ssl_engine_pphrase.c:</div>
<div class="dyncontent">
<div class="center"><img src="ssl__engine__pphrase_8c__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2ssl_2ssl__engine__pphrase_8c" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2ssl_2ssl__engine__pphrase_8c" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2ssl_2ssl__engine__pphrase_8c">
<area shape="rect" id="node2" href="ssl__private_8h.html" title="Internal interfaces private to mod_ssl. " alt="" coords="1671,124,1767,151"/>
<area shape="rect" id="node3" href="httpd_8h.html" title="HTTP Daemon routines. " alt="" coords="727,348,790,375"/>
<area shape="rect" id="node8" href="apr_8h.html" title="APR Platform Definitions. " alt="" coords="1339,721,1389,748"/>
<area shape="rect" id="node12" href="apr__want_8h.html" title="APR Standard Headers Support. " alt="" coords="1762,647,1849,673"/>
<area shape="rect" id="node13" href="apr__tables_8h.html" title="APR Table library. " alt="" coords="1351,423,1444,449"/>
<area shape="rect" id="node19" href="http__config_8h.html" title="Apache Configuration. " alt="" coords="1191,348,1289,375"/>
<area shape="rect" id="node20" href="http__core_8h.html" title="CORE HTTP Daemon. " alt="" coords="1154,199,1241,225"/>
<area shape="rect" id="node21" href="apr__optional_8h.html" title="APR&#45;UTIL registration of functions exported by modules. " alt="" coords="618,273,721,300"/>
<area shape="rect" id="node22" href="util__filter_8h.html" title="Apache filter library. " alt="" coords="340,273,423,300"/>
<area shape="rect" id="node23" href="ap__expr_8h.html" title="Expression parser. " alt="" coords="1077,273,1155,300"/>
<area shape="rect" id="node24" href="http__log_8h.html" title="Apache Logging library. " alt="" coords="1501,273,1579,300"/>
<area shape="rect" id="node25" href="http__main_8h.html" title="Command line options. " alt="" coords="653,199,744,225"/>
<area shape="rect" id="node26" href="http__connection_8h.html" title="Apache connection library. " alt="" coords="5,348,131,375"/>
<area shape="rect" id="node27" href="http__request_8h.html" title="Apache Request library. " alt="" coords="523,199,629,225"/>
<area shape="rect" id="node28" href="http__protocol_8h.html" title="HTTP protocol handling. " alt="" coords="289,199,397,225"/>
<area shape="rect" id="node29" href="http__vhost_8h.html" title="Virtual Host package. " alt="" coords="2010,199,2105,225"/>
<area shape="rect" id="node30" href="util__script_8h.html" title="Apache script tools. " alt="" coords="206,348,295,375"/>
<area shape="rect" id="node31" href="util__ebcdic_8h.html" title="Utilities for EBCDIC conversion. " alt="" coords="447,273,542,300"/>
<area shape="rect" id="node32" href="util__mutex_8h.html" title="Apache Mutex support library. " alt="" coords="1281,273,1375,300"/>
<area shape="rect" id="node33" href="apr__global__mutex_8h.html" title="APR Global Locking Routines. " alt="" coords="1597,348,1731,375"/>
<area shape="rect" id="node34" href="apr__strings_8h.html" title="APR Strings library. " alt="" coords="1722,497,1819,524"/>
<area shape="rect" id="node35" href="apr__lib_8h.html" title="APR general purpose library routines. " alt="" coords="1863,572,1934,599"/>
<area shape="rect" id="node36" href="apr__fnmatch_8h.html" title="APR FNMatch Functions. " alt="" coords="1365,348,1470,375"/>
<area shape="rect" id="node37" href="ap__socache_8h.html" title="Small object cache provider interface. " alt="" coords="847,273,950,300"/>
<area shape="rect" id="node38" href="mod__auth_8h.html" title="Authentication and Authorization Extension for Apache. " alt="" coords="943,199,1033,225"/>
<area shape="rect" id="node50" href="ssl__util__ssl_8h.html" title="Additional Utility Functions for OpenSSL. " alt="" coords="3643,199,3741,225"/>
<area shape="rect" id="node4" href="ap__config_8h.html" title="Symbol export macros and hook functions. " alt="" coords="882,423,971,449"/>
<area shape="rect" id="node6" href="ap__mmn_8h.html" title="Module Magic Number. " alt="" coords="449,423,532,449"/>
<area shape="rect" id="node7" href="ap__release_8h.html" title="Version Release defines. " alt="" coords="711,423,807,449"/>
<area shape="rect" id="node10" href="apr__general_8h.html" title="APR Miscellaneous library routines. " alt="" coords="349,497,449,524"/>
<area shape="rect" id="node11" href="apr__pools_8h.html" title="APR memory allocation. " alt="" coords="1142,572,1231,599"/>
<area shape="rect" id="node14" href="apr__time_8h.html" title="APR Time Library. " alt="" coords="968,497,1051,524"/>
<area shape="rect" id="node15" href="apr__network__io_8h.html" title="APR Network library. " alt="" coords="555,497,677,524"/>
<area shape="rect" id="node16" href="apr__buckets_8h.html" title="APR&#45;UTIL Buckets/Bucket Brigades. " alt="" coords="169,423,273,449"/>
<area shape="rect" id="node17" href="apr__poll_8h.html" title="APR Poll interface. " alt="" coords="607,423,686,449"/>
<area shape="rect" id="node18" href="apr__thread__proc_8h.html" title="APR Thread and Process Library. " alt="" coords="1301,497,1427,524"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpphrase__cb__arg__t.html">pphrase_cb_arg_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3a07b559466a4e2916f44a28a0ae2bef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssl__engine__pphrase_8c.html#a3a07b559466a4e2916f44a28a0ae2bef">BUILTIN_DIALOG_BACKOFF</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a3a07b559466a4e2916f44a28a0ae2bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3d818ed8e8da505874e77640d3a751"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssl__engine__pphrase_8c.html#add3d818ed8e8da505874e77640d3a751">BUILTIN_DIALOG_RETRIES</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:add3d818ed8e8da505874e77640d3a751"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a385113167d9add46b16dc1000e080711"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssl__engine__pphrase_8c.html#a385113167d9add46b16dc1000e080711">ssl_pphrase_Handle_CB</a> (char *, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>, <a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *)</td></tr>
<tr class="separator:a385113167d9add46b16dc1000e080711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga594145a68cd4bcdddfcee86210599d73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MOD__SSL__PRIVATE.html#ga594145a68cd4bcdddfcee86210599d73">ssl_load_encrypted_pkey</a> (<a class="el" href="structserver__rec.html">server_rec</a> *<a class="el" href="pcretest_8txt.html#a062597889ba244b72877454b1d3adecf">s</a>, <a class="el" href="structapr__pool__t.html">apr_pool_t</a> *<a class="el" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> idx, const char *pkey_file, <a class="el" href="structapr__array__header__t.html">apr_array_header_t</a> **pphrases)</td></tr>
<tr class="separator:ga594145a68cd4bcdddfcee86210599d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a3a07b559466a4e2916f44a28a0ae2bef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUILTIN_DIALOG_BACKOFF&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="add3d818ed8e8da505874e77640d3a751"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUILTIN_DIALOG_RETRIES&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a385113167d9add46b16dc1000e080711"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> ssl_pphrase_Handle_CB </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>verify</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *&#160;</td>
          <td class="paramname"><em>srv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="structpphrase__cb__arg__t.html">pphrase_cb_arg_t</a> *ppcb_arg = (<a class="code" href="structpphrase__cb__arg__t.html">pphrase_cb_arg_t</a> *)srv;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="structSSLSrvConfigRec.html">SSLSrvConfigRec</a> *sc = <a class="code" href="group__MOD__SSL__PRIVATE.html#ga3ea8e2c288a4f4af189ae0fc4f1fd996">mySrvConfig</a>(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordtype">char</span> *cpp;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__APACHE__CORE__LOG.html#gab5a43233d60ef05c5b5bf5cba3d74468">len</a> = -1;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#ad85f1529894f1b8f7d271584bb2eb84e">nPassPhraseDialog</a>++;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a451eb1ab16d0c471defcb513d5dc5bef">nPassPhraseDialogCur</a>++;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">     * When remembered pass phrases are available use them...</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span> ((cpp = pphrase_array_get(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#ae08f1163b038c528152af8a490f09f27">aPassPhrase</a>,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                 ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#aef3e0a2bfde0f62c1bca633c5e388524">nPassPhraseCur</a>)) != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        apr_cpystrn(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, cpp, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        len = strlen(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__LOG.html#gab5a43233d60ef05c5b5bf5cba3d74468">len</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">     * Builtin or Pipe dialog</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#a1fe0b0fdd63583304dae0dfd85982771">pphrase_dialog_type</a> == <a class="code" href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971a95c73eaa9cd87a96f4a968b8c1a174bd">SSL_PPTYPE_BUILTIN</a></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          || sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#a1fe0b0fdd63583304dae0dfd85982771">pphrase_dialog_type</a> == <a class="code" href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971a33ff980280a4799be36e18829885da9a">SSL_PPTYPE_PIPE</a>) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordtype">char</span> *prompt;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#a1fe0b0fdd63583304dae0dfd85982771">pphrase_dialog_type</a> == <a class="code" href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971a33ff980280a4799be36e18829885da9a">SSL_PPTYPE_PIPE</a>) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> (!readtty) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <a class="code" href="group__APACHE__CORE__LOG.html#ga5e6676c87418af7a1d323a116c78ecb4">ap_log_error</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga47fafbef7e478babdd92e90407f95b19">APLOG_INFO</a>, 0, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                             <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(01965)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                             <span class="stringliteral">&quot;Init: Creating pass phrase dialog pipe child &quot;</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                             <span class="stringliteral">&quot;&#39;%s&#39;&quot;</span>, sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#aa49d72ee17088961d6e84bac67c99b47">pphrase_dialog_path</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <span class="keywordflow">if</span> (ssl_pipe_child_create(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>,</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                          sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#aa49d72ee17088961d6e84bac67c99b47">pphrase_dialog_path</a>)</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                        != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga5e6676c87418af7a1d323a116c78ecb4">ap_log_error</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a>, 0, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                 <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(01966)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                 <span class="stringliteral">&quot;Init: Failed to create pass phrase pipe &#39;%s&#39;&quot;</span>,</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                 sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#aa49d72ee17088961d6e84bac67c99b47">pphrase_dialog_path</a>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    PEMerr(PEM_F_PEM_DEF_CALLBACK,</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                           PEM_R_PROBLEMS_GETTING_PASSWORD);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    memset(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, 0, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    <span class="keywordflow">return</span> (-1);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga5e6676c87418af7a1d323a116c78ecb4">ap_log_error</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga47fafbef7e478babdd92e90407f95b19">APLOG_INFO</a>, 0, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(01967)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                         <span class="stringliteral">&quot;Init: Requesting pass phrase via piped dialog&quot;</span>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">else</span> { <span class="comment">/* sc-&gt;server-&gt;pphrase_dialog_type == SSL_PPTYPE_BUILTIN */</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            PEMerr(PEM_F_PEM_DEF_CALLBACK, PEM_R_PROBLEMS_GETTING_PASSWORD);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            memset(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, 0, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">return</span> (-1);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">             * stderr has already been redirected to the error_log.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">             * rather than attempting to temporarily rehook it to the terminal,</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">             * we print the prompt to stdout before EVP_read_pw_string turns</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">             * off tty echo</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            apr_file_open_stdout(&amp;writetty, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga5e6676c87418af7a1d323a116c78ecb4">ap_log_error</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga47fafbef7e478babdd92e90407f95b19">APLOG_INFO</a>, 0, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(01968)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                         <span class="stringliteral">&quot;Init: Requesting pass phrase via builtin terminal &quot;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                         <span class="stringliteral">&quot;dialog&quot;</span>);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">         * The first time display a header to inform the user about what</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">         * program he actually speaks to, which module is responsible for</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">         * this terminal dialog and why to the hell he has to enter</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">         * something...</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">if</span> (ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#ad85f1529894f1b8f7d271584bb2eb84e">nPassPhraseDialog</a> == 1) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            apr_file_printf(writetty, <span class="stringliteral">&quot;%s mod_ssl (Pass Phrase Dialog)\n&quot;</span>,</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                            <a class="code" href="ap__release_8h.html#afcbccdd5988410660e1c8cb11d269a58">AP_SERVER_BASEVERSION</a>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            apr_file_printf(writetty, <span class="stringliteral">&quot;Some of your private key files are encrypted for security reasons.\n&quot;</span>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            apr_file_printf(writetty, <span class="stringliteral">&quot;In order to read them you have to provide the pass phrases.\n&quot;</span>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> (ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#acbcb9e2843857d612329eb5c24b76856">bPassPhraseDialogOnce</a>) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#acbcb9e2843857d612329eb5c24b76856">bPassPhraseDialogOnce</a> = <a class="code" href="group__MOD__SSL__PRIVATE.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            apr_file_printf(writetty, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            apr_file_printf(writetty, <span class="stringliteral">&quot;Private key %s (%s)\n&quot;</span>,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                            ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#abb8613c809af29aa0f3ea675efc544f0">key_id</a>, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#afc01b5b93a45bd50c5aa697680921d65">pkey_file</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">         * Emulate the OpenSSL internal pass phrase dialog</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">         * (see crypto/pem/pem_lib.c:def_callback() for details)</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        prompt = <span class="stringliteral">&quot;Enter pass phrase:&quot;</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            apr_file_puts(prompt, writetty);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#a1fe0b0fdd63583304dae0dfd85982771">pphrase_dialog_type</a> == <a class="code" href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971a33ff980280a4799be36e18829885da9a">SSL_PPTYPE_PIPE</a>) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                i = pipe_get_passwd_cb(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="group__MOD__SSL__PRIVATE.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">else</span> { <span class="comment">/* sc-&gt;server-&gt;pphrase_dialog_type == SSL_PPTYPE_BUILTIN */</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                i = EVP_read_pw_string(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="group__MOD__SSL__PRIVATE.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">if</span> (i != 0) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                PEMerr(PEM_F_PEM_DEF_CALLBACK,PEM_R_PROBLEMS_GETTING_PASSWORD);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                memset(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, 0, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <span class="keywordflow">return</span> (-1);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            len = strlen(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">if</span> (len &lt; 1)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                apr_file_printf(writetty, <span class="stringliteral">&quot;Apache:mod_ssl:Error: Pass phrase empty (needs to be at least 1 character).\n&quot;</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">     * Filter program</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#a1fe0b0fdd63583304dae0dfd85982771">pphrase_dialog_type</a> == <a class="code" href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971ad52728c6f1289adcfef467800776b1d3">SSL_PPTYPE_FILTER</a>) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__APACHE__CORE__DAEMON.html#ga504a7f40c3261db3e10e1d2776642dd6">cmd</a> = sc-&gt;<a class="code" href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">server</a>-&gt;<a class="code" href="structmodssl__ctx__t.html#aa49d72ee17088961d6e84bac67c99b47">pphrase_dialog_path</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="group__APACHE__CORE__LISTEN.html#ga7af4ef3a08f923773e59081c357d9adf">argv</a> = apr_palloc(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * 4);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *idx = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga469c14311b354f1b7e3013adbde2b50b">ap_strrchr_c</a>(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#abb8613c809af29aa0f3ea675efc544f0">key_id</a>, <span class="charliteral">&#39;:&#39;</span>) + 1;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="group__APACHE__CORE__MPM.html#ga9f5959dd76d5c83e775dcf44de684686">result</a>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga5e6676c87418af7a1d323a116c78ecb4">ap_log_error</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga47fafbef7e478babdd92e90407f95b19">APLOG_INFO</a>, 0, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(01969)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                     <span class="stringliteral">&quot;Init: Requesting pass phrase from dialog filter &quot;</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                     <span class="stringliteral">&quot;program (%s)&quot;</span>, cmd);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        argv[0] = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga504a7f40c3261db3e10e1d2776642dd6">cmd</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        argv[1] = apr_pstrndup(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#abb8613c809af29aa0f3ea675efc544f0">key_id</a>,</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                               idx-1 - ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#abb8613c809af29aa0f3ea675efc544f0">key_id</a>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span> ((i = atoi(idx)) &lt; <a class="code" href="group__MOD__SSL__PRIVATE.html#gaf7c42f3ccab5cff2a01efdcd32afb4d8">CERTKEYS_IDX_MAX</a>+1) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">             * For compatibility with existing 2.4.x configurations, use</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">             * &quot;RSA&quot;, &quot;DSA&quot; and &quot;ECC&quot; strings for the first two/three keys</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            argv[2] = key_types[<a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>];</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="comment">/* Four and above: use the integer index */</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            argv[2] = apr_pstrdup(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>, idx);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        argv[3] = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        result = <a class="code" href="group__MOD__SSL__PRIVATE.html#ga651f7262ac586eb3df9e357304fd7b36">ssl_util_readfilter</a>(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">s</a>, ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>, cmd, argv);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        apr_cpystrn(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>, result, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a>);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        len = strlen(<a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">     * Ok, we now have the pass phrase, so give it back</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#af6aaf85042706fa2215ce1164a2aa7eb">cpPassPhraseCur</a> = apr_pstrdup(ppcb_arg-&gt;<a class="code" href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">p</a>, <a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">     * And return its length to OpenSSL...</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">return</span> (len);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div><div class="ttc" id="structpphrase__cb__arg__t_html_ae08f1163b038c528152af8a490f09f27"><div class="ttname"><a href="structpphrase__cb__arg__t.html#ae08f1163b038c528152af8a490f09f27">pphrase_cb_arg_t::aPassPhrase</a></div><div class="ttdeci">apr_array_header_t * aPassPhrase</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:36</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_abb8613c809af29aa0f3ea675efc544f0"><div class="ttname"><a href="structpphrase__cb__arg__t.html#abb8613c809af29aa0f3ea675efc544f0">pphrase_cb_arg_t::key_id</a></div><div class="ttdeci">const char * key_id</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:42</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_ggad9be8a03d6bba7c92cf27a00ab9f7971a95c73eaa9cd87a96f4a968b8c1a174bd"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971a95c73eaa9cd87a96f4a968b8c1a174bd">SSL_PPTYPE_BUILTIN</a></div><div class="ttdef"><b>Definition:</b> ssl_private.h:421</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga47fafbef7e478babdd92e90407f95b19"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga47fafbef7e478babdd92e90407f95b19">APLOG_INFO</a></div><div class="ttdeci">#define APLOG_INFO</div><div class="ttdef"><b>Definition:</b> http_log.h:49</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga469c14311b354f1b7e3013adbde2b50b"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga469c14311b354f1b7e3013adbde2b50b">ap_strrchr_c</a></div><div class="ttdeci">#define ap_strrchr_c(s, c)</div><div class="ttdef"><b>Definition:</b> httpd.h:2248</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga57ad94ed8c92c4306de90479251a5d58"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a></div><div class="ttdeci">#define APLOG_ERR</div><div class="ttdef"><b>Definition:</b> http_log.h:46</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_gaa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> ssl_private.h:71</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_ggad9be8a03d6bba7c92cf27a00ab9f7971a33ff980280a4799be36e18829885da9a"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971a33ff980280a4799be36e18829885da9a">SSL_PPTYPE_PIPE</a></div><div class="ttdef"><b>Definition:</b> ssl_private.h:423</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_afc01b5b93a45bd50c5aa697680921d65"><div class="ttname"><a href="structpphrase__cb__arg__t.html#afc01b5b93a45bd50c5aa697680921d65">pphrase_cb_arg_t::pkey_file</a></div><div class="ttdeci">const char * pkey_file</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:43</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_a451eb1ab16d0c471defcb513d5dc5bef"><div class="ttname"><a href="structpphrase__cb__arg__t.html#a451eb1ab16d0c471defcb513d5dc5bef">pphrase_cb_arg_t::nPassPhraseDialogCur</a></div><div class="ttdeci">int nPassPhraseDialogCur</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:40</div></div>
<div class="ttc" id="structSSLSrvConfigRec_html_a7941dbc2f9fa504b3968a4afdc4b96fc"><div class="ttname"><a href="structSSLSrvConfigRec.html#a7941dbc2f9fa504b3968a4afdc4b96fc">SSLSrvConfigRec::server</a></div><div class="ttdeci">modssl_ctx_t * server</div><div class="ttdef"><b>Definition:</b> ssl_private.h:725</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga5e6676c87418af7a1d323a116c78ecb4"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga5e6676c87418af7a1d323a116c78ecb4">ap_log_error</a></div><div class="ttdeci">#define ap_log_error</div><div class="ttdef"><b>Definition:</b> http_log.h:370</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga251f5b82593ed6f6b369185c5b220f82"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga251f5b82593ed6f6b369185c5b220f82">bufsize</a></div><div class="ttdeci">apr_size_t bufsize</div><div class="ttdef"><b>Definition:</b> http_config.h:826</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_ga3ea8e2c288a4f4af189ae0fc4f1fd996"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#ga3ea8e2c288a4f4af189ae0fc4f1fd996">mySrvConfig</a></div><div class="ttdeci">#define mySrvConfig(srv)</div><div class="ttdef"><b>Definition:</b> ssl_private.h:303</div></div>
<div class="ttc" id="group__APACHE__CORE__LISTEN_html_ga7af4ef3a08f923773e59081c357d9adf"><div class="ttname"><a href="group__APACHE__CORE__LISTEN.html#ga7af4ef3a08f923773e59081c357d9adf">argv</a></div><div class="ttdeci">void int char *const argv[]</div><div class="ttdef"><b>Definition:</b> ap_listen.h:138</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_a11be93487d30291c9efced2b8ded9101"><div class="ttname"><a href="structpphrase__cb__arg__t.html#a11be93487d30291c9efced2b8ded9101">pphrase_cb_arg_t::p</a></div><div class="ttdeci">apr_pool_t * p</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:35</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga504a7f40c3261db3e10e1d2776642dd6"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga504a7f40c3261db3e10e1d2776642dd6">cmd</a></div><div class="ttdeci">const char * cmd</div><div class="ttdef"><b>Definition:</b> httpd.h:2342</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_ad85f1529894f1b8f7d271584bb2eb84e"><div class="ttname"><a href="structpphrase__cb__arg__t.html#ad85f1529894f1b8f7d271584bb2eb84e">pphrase_cb_arg_t::nPassPhraseDialog</a></div><div class="ttdeci">int nPassPhraseDialog</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:39</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab5a43233d60ef05c5b5bf5cba3d74468"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab5a43233d60ef05c5b5bf5cba3d74468">len</a></div><div class="ttdeci">const char apr_size_t len</div><div class="ttdef"><b>Definition:</b> ap_regex.h:140</div></div>
<div class="ttc" id="ap__release_8h_html_afcbccdd5988410660e1c8cb11d269a58"><div class="ttname"><a href="ap__release_8h.html#afcbccdd5988410660e1c8cb11d269a58">AP_SERVER_BASEVERSION</a></div><div class="ttdeci">#define AP_SERVER_BASEVERSION</div><div class="ttdef"><b>Definition:</b> ap_release.h:75</div></div>
<div class="ttc" id="structmodssl__ctx__t_html_aa49d72ee17088961d6e84bac67c99b47"><div class="ttname"><a href="structmodssl__ctx__t.html#aa49d72ee17088961d6e84bac67c99b47">modssl_ctx_t::pphrase_dialog_path</a></div><div class="ttdeci">const char * pphrase_dialog_path</div><div class="ttdef"><b>Definition:</b> ssl_private.h:664</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_ga651f7262ac586eb3df9e357304fd7b36"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#ga651f7262ac586eb3df9e357304fd7b36">ssl_util_readfilter</a></div><div class="ttdeci">char * ssl_util_readfilter(server_rec *, apr_pool_t *, const char *, const char *const *)</div><div class="ttdef"><b>Definition:</b> ssl_util.c:140</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_a04abf5118944ca1717e080e3360337c7"><div class="ttname"><a href="structpphrase__cb__arg__t.html#a04abf5118944ca1717e080e3360337c7">pphrase_cb_arg_t::s</a></div><div class="ttdeci">server_rec * s</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:34</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_af6aaf85042706fa2215ce1164a2aa7eb"><div class="ttname"><a href="structpphrase__cb__arg__t.html#af6aaf85042706fa2215ce1164a2aa7eb">pphrase_cb_arg_t::cpPassPhraseCur</a></div><div class="ttdeci">char * cpPassPhraseCur</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:38</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_aef3e0a2bfde0f62c1bca633c5e388524"><div class="ttname"><a href="structpphrase__cb__arg__t.html#aef3e0a2bfde0f62c1bca633c5e388524">pphrase_cb_arg_t::nPassPhraseCur</a></div><div class="ttdeci">int nPassPhraseCur</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:37</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_gaf7c42f3ccab5cff2a01efdcd32afb4d8"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#gaf7c42f3ccab5cff2a01efdcd32afb4d8">CERTKEYS_IDX_MAX</a></div><div class="ttdeci">#define CERTKEYS_IDX_MAX</div><div class="ttdef"><b>Definition:</b> ssl_private.h:339</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html_acbcb9e2843857d612329eb5c24b76856"><div class="ttname"><a href="structpphrase__cb__arg__t.html#acbcb9e2843857d612329eb5c24b76856">pphrase_cb_arg_t::bPassPhraseDialogOnce</a></div><div class="ttdeci">BOOL bPassPhraseDialogOnce</div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:41</div></div>
<div class="ttc" id="structSSLSrvConfigRec_html"><div class="ttname"><a href="structSSLSrvConfigRec.html">SSLSrvConfigRec</a></div><div class="ttdef"><b>Definition:</b> ssl_private.h:716</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_ga17bc47ccf1b618ed082a4ff4f2cc7f7e"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a></div><div class="ttdeci">int const char * buf</div><div class="ttdef"><b>Definition:</b> http_protocol.h:974</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__MOD__SSL__PRIVATE_html_ggad9be8a03d6bba7c92cf27a00ab9f7971ad52728c6f1289adcfef467800776b1d3"><div class="ttname"><a href="group__MOD__SSL__PRIVATE.html#ggad9be8a03d6bba7c92cf27a00ab9f7971ad52728c6f1289adcfef467800776b1d3">SSL_PPTYPE_FILTER</a></div><div class="ttdef"><b>Definition:</b> ssl_private.h:422</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga1dee8a07e06bc5b3de8b89662c2cd666"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a></div><div class="ttdeci">#define APLOGNO(n)</div><div class="ttdef"><b>Definition:</b> http_log.h:117</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga9f5959dd76d5c83e775dcf44de684686"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga9f5959dd76d5c83e775dcf44de684686">result</a></div><div class="ttdeci">int * result</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:160</div></div>
<div class="ttc" id="structpphrase__cb__arg__t_html"><div class="ttname"><a href="structpphrase__cb__arg__t.html">pphrase_cb_arg_t</a></div><div class="ttdef"><b>Definition:</b> ssl_engine_pphrase.c:33</div></div>
<div class="ttc" id="structmodssl__ctx__t_html_a1fe0b0fdd63583304dae0dfd85982771"><div class="ttname"><a href="structmodssl__ctx__t.html#a1fe0b0fdd63583304dae0dfd85982771">modssl_ctx_t::pphrase_dialog_type</a></div><div class="ttdeci">ssl_pphrase_t pphrase_dialog_type</div><div class="ttdef"><b>Definition:</b> ssl_private.h:663</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_cgraph.png" border="0" usemap="#ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_cgraph" alt=""/></div>
<map name="ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_cgraph" id="ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_cgraph">
<area shape="rect" id="node2" href="group__MOD__SSL__PRIVATE.html#ga651f7262ac586eb3df9e357304fd7b36" title="ssl_util_readfilter" alt="" coords="220,31,340,57"/>
<area shape="rect" id="node3" href="group__MOD__SSL__PRIVATE.html#gaee3bbdfa1799ee28156384bc373e0156" title="ssl_util_ppopen" alt="" coords="389,5,501,32"/>
<area shape="rect" id="node4" href="group__MOD__SSL__PRIVATE.html#gafec59822590bb26521d5413c6fbf3b4e" title="ssl_util_ppclose" alt="" coords="388,56,503,83"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_icgraph.png" border="0" usemap="#ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_icgraph" alt=""/></div>
<map name="ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_icgraph" id="ssl__engine__pphrase_8c_a385113167d9add46b16dc1000e080711_icgraph">
<area shape="rect" id="node2" href="group__MOD__SSL__PRIVATE.html#ga594145a68cd4bcdddfcee86210599d73" title="ssl_load_encrypted_pkey" alt="" coords="220,29,389,56"/>
<area shape="rect" id="node3" href="group__MOD__SSL__PRIVATE.html#ga4aa47e22efe0b853cf31c3e8e9a7c70c" title="ssl_init_Module" alt="" coords="437,29,549,56"/>
<area shape="rect" id="node4" href="group__MOD__SSL__PRIVATE.html#ga41dd90c37aff54ebfb37071f8b6a3b46" title="ssl_init_ssl_connection" alt="" coords="597,29,755,56"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
