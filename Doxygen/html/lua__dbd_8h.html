<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: /usr/local/src/github/Codebase/httpd-2.4.29/modules/lua/lua_dbd.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2379abaa7725ab34fabdf9daa508e09.html">Codebase</a></li><li class="navelem"><a class="el" href="dir_db9466b59d24a02e023577068efc5d5d.html">httpd-2.4.29</a></li><li class="navelem"><a class="el" href="dir_04adba3a211bbed5210563c01b5ac160.html">modules</a></li><li class="navelem"><a class="el" href="dir_ddcdbb57a7acd69a68031611c12b991e.html">lua</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lua_dbd.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mod__lua_8h_source.html">mod_lua.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apr_8h_source.html">apr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apr__dbd_8h_source.html">apr_dbd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mod__dbd_8h_source.html">mod_dbd.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for lua_dbd.h:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2lua_2lua__dbd_8h" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2lua_2lua__dbd_8h" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2lua_2lua__dbd_8h">
<area shape="rect" id="node2" href="mod__lua_8h.html" title="mod_lua.h" alt="" coords="1890,109,1973,136"/>
<area shape="rect" id="node9" href="apr_8h.html" title="APR Platform Definitions. " alt="" coords="1585,632,1636,659"/>
<area shape="rect" id="node49" href="apr__dbd_8h.html" title="APR&#45;UTIL DBD library. " alt="" coords="1556,408,1635,435"/>
<area shape="rect" id="node50" href="mod__dbd_8h.html" title="Database Access Extension Module for Apache. " alt="" coords="1604,259,1691,285"/>
<area shape="rect" id="node4" href="httpd_8h.html" title="HTTP Daemon routines. " alt="" coords="916,333,979,360"/>
<area shape="rect" id="node5" href="ap__config_8h.html" title="Symbol export macros and hook functions. " alt="" coords="246,483,335,509"/>
<area shape="rect" id="node17" href="apr__tables_8h.html" title="APR Table library. " alt="" coords="1862,408,1956,435"/>
<area shape="rect" id="node18" href="apr__time_8h.html" title="APR Time Library. " alt="" coords="2041,483,2124,509"/>
<area shape="rect" id="node20" href="apr__buckets_8h.html" title="APR&#45;UTIL Buckets/Bucket Brigades. " alt="" coords="1428,408,1532,435"/>
<area shape="rect" id="node24" href="ap__regex_8h.html" title="Apache Regex defines. " alt="" coords="44,408,131,435"/>
<area shape="rect" id="node27" href="http__core_8h.html" title="CORE HTTP Daemon. " alt="" coords="1655,184,1742,211"/>
<area shape="rect" id="node28" href="apr__hash_8h.html" title="APR Hash Tables. " alt="" coords="1706,333,1792,360"/>
<area shape="rect" id="node30" href="util__filter_8h.html" title="Apache filter library. " alt="" coords="1097,259,1180,285"/>
<area shape="rect" id="node32" href="http__config_8h.html" title="Apache Configuration. " alt="" coords="356,333,454,360"/>
<area shape="rect" id="node34" href="http__request_8h.html" title="Apache Request library. " alt="" coords="1423,184,1528,211"/>
<area shape="rect" id="node35" href="http__log_8h.html" title="Apache Logging library. " alt="" coords="1204,259,1283,285"/>
<area shape="rect" id="node37" href="http__protocol_8h.html" title="HTTP protocol handling. " alt="" coords="1084,184,1192,211"/>
<area shape="rect" id="node39" href="apr__thread__rwlock_8h.html" title="APR Reader/Writer Lock Routines. " alt="" coords="2350,483,2489,509"/>
<area shape="rect" id="node40" href="apr__strings_8h.html" title="APR Strings library. " alt="" coords="2514,483,2611,509"/>
<area shape="rect" id="node41" href="apr__file__info_8h.html" title="APR File Information. " alt="" coords="2071,333,2174,360"/>
<area shape="rect" id="node42" href="apr__hooks_8h.html" title="Apache hook functions. " alt="" coords="1588,333,1681,360"/>
<area shape="rect" id="node43" href="apr__reslist_8h.html" title="APR&#45;UTIL Resource List Routines. " alt="" coords="2030,408,2124,435"/>
<area shape="rect" id="node47" href="lua__request_8h.html" title="lua_request.h" alt="" coords="2635,184,2735,211"/>
<area shape="rect" id="node48" href="lua__vmprep_8h.html" title="lua_vmprep.h" alt="" coords="2224,259,2324,285"/>
<area shape="rect" id="node7" href="ap__mmn_8h.html" title="Module Magic Number. " alt="" coords="581,408,664,435"/>
<area shape="rect" id="node8" href="ap__release_8h.html" title="Version Release defines. " alt="" coords="688,408,784,435"/>
<area shape="rect" id="node15" href="apr__general_8h.html" title="APR Miscellaneous library routines. " alt="" coords="1478,483,1578,509"/>
<area shape="rect" id="node16" href="apr__pools_8h.html" title="APR memory allocation. " alt="" coords="1622,557,1711,584"/>
<area shape="rect" id="node19" href="apr__network__io_8h.html" title="APR Network library. " alt="" coords="1027,483,1148,509"/>
<area shape="rect" id="node22" href="apr__poll_8h.html" title="APR Poll interface. " alt="" coords="898,408,976,435"/>
<area shape="rect" id="node23" href="apr__thread__proc_8h.html" title="APR Thread and Process Library. " alt="" coords="1224,483,1351,509"/>
<area shape="rect" id="node25" href="apr__uri_8h.html" title="APR&#45;UTIL URI Routines. " alt="" coords="1052,408,1124,435"/>
<area shape="rect" id="node21" href="apu_8h.html" title="apu.h" alt="" coords="1704,483,1759,509"/>
<area shape="rect" id="node29" href="apr__optional_8h.html" title="APR&#45;UTIL registration of functions exported by modules. " alt="" coords="1460,333,1563,360"/>
<area shape="rect" id="node31" href="ap__expr_8h.html" title="Expression parser. " alt="" coords="692,259,771,285"/>
<area shape="rect" id="node33" href="util__cfgtree_8h.html" title="Config Tree Package. " alt="" coords="155,408,252,435"/>
<area shape="rect" id="node38" href="apr__portable_8h.html" title="APR Portability Routines. " alt="" coords="1148,408,1252,435"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h__dep__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2lua_2lua__dbd_8hdep" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2lua_2lua__dbd_8hdep" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2lua_2lua__dbd_8hdep">
<area shape="rect" id="node2" href="lua__dbd_8c.html" title="/usr/local/src/github\l/Codebase/httpd&#45;2.4.29\l/modules/lua/lua_dbd.c" alt="" coords="5,109,164,165"/>
<area shape="rect" id="node3" href="lua__request_8c.html" title="/usr/local/src/github\l/Codebase/httpd&#45;2.4.29\l/modules/lua/lua_request.c" alt="" coords="189,109,367,165"/>
</map>
</div>
</div>
<p><a href="lua__dbd_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua__db__handle.html">lua_db_handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua__db__result__set.html">lua_db_result_set</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aed8f4097d7b1c2231e9713b2496efe2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aed8f4097d7b1c2231e9713b2496efe2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa65a91f6a2986b128d89604ab3e783cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#aa65a91f6a2986b128d89604ab3e783cf">LUA_DBTYPE_MOD_DBD</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa65a91f6a2986b128d89604ab3e783cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa9e1b942d64e0cb3ce05ba6c8715661f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#aa9e1b942d64e0cb3ce05ba6c8715661f">lua_db_acquire</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:aa9e1b942d64e0cb3ce05ba6c8715661f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f7d258fd595be1e37da6db62243fd62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a7f7d258fd595be1e37da6db62243fd62">lua_db_escape</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a7f7d258fd595be1e37da6db62243fd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf27b336b52586b161d51fe89262c56f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#abf27b336b52586b161d51fe89262c56f">lua_db_close</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:abf27b336b52586b161d51fe89262c56f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94ffb0c1715dbc3608178c80ffa8957"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#ad94ffb0c1715dbc3608178c80ffa8957">lua_db_prepare</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:ad94ffb0c1715dbc3608178c80ffa8957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ee364a00615b5ae4d6ec05322257c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0">lua_db_prepared</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a46ee364a00615b5ae4d6ec05322257c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dcb52a2ca220180e7fcebc24bc29067"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a0dcb52a2ca220180e7fcebc24bc29067">lua_db_select</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a0dcb52a2ca220180e7fcebc24bc29067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a736068a2c1c5ef1f7f290fbba4919671"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a736068a2c1c5ef1f7f290fbba4919671">lua_db_query</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a736068a2c1c5ef1f7f290fbba4919671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d26da9532ecd489c2efd88cd3c8e344"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a6d26da9532ecd489c2efd88cd3c8e344">lua_db_prepared_select</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a6d26da9532ecd489c2efd88cd3c8e344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc27e046d61d88a6d607f7d0e59b55f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#abc27e046d61d88a6d607f7d0e59b55f4">lua_db_prepared_query</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:abc27e046d61d88a6d607f7d0e59b55f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fb43685342aea7d448c0e517d6d9f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a76fb43685342aea7d448c0e517d6d9f6">lua_db_get_row</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a76fb43685342aea7d448c0e517d6d9f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad997e33a339ab9c76686400c96f6b746"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#ad997e33a339ab9c76686400c96f6b746">lua_db_gc</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:ad997e33a339ab9c76686400c96f6b746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2828dc702e1dd3b6ee4b566e3876d874"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lua__dbd_8h.html#a2828dc702e1dd3b6ee4b566e3876d874">lua_db_active</a> (lua_State *<a class="el" href="pcregrep_8txt.html#a680bac11554b63e0cc253f8e132350d4">L</a>)</td></tr>
<tr class="separator:a2828dc702e1dd3b6ee4b566e3876d874"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aed8f4097d7b1c2231e9713b2496efe2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUA_DBTYPE_APR_DBD&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Licensed to the <a class="el" href="namespaceApache.html">Apache</a> Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the <a class="el" href="namespaceApache.html">Apache</a> License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. </p>

</div>
</div>
<a class="anchor" id="aa65a91f6a2986b128d89604ab3e783cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUA_DBTYPE_MOD_DBD&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa9e1b942d64e0cb3ce05ba6c8715661f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_acquire </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="group__APACHE__CORE__HTTPD.html#gaafc7089562892428c4fcae486f171f5a">type</a>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="pcretest_8txt.html#a10a3a3b838670cc298974841b7588803">arguments</a>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="group__APACHE__CORE__PROTO.html#ga11614f44ef4d939bdd984953346a7572">error</a> = 0;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="structrequest__rec.html">request_rec</a>     *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db = 0;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="structap__dbd__t.html">ap_dbd_t</a>        *dbdhandle = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="structapr__pool__t.html">apr_pool_t</a>      *<a class="code" href="group__APACHE__CORE__MUTEX.html#ga8fea43b485988aa6df5dced9dddbe733">pool</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    r = ap_lua_check_request_rec(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> (r) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        type = luaL_optstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 2, <span class="stringliteral">&quot;mod_dbd&quot;</span>); <span class="comment">/* Defaults to mod_dbd */</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        </div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">if</span> (!strcmp(type, <span class="stringliteral">&quot;mod_dbd&quot;</span>)) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            lua_settop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            lua_ap_dbd_open = <a class="code" href="group__APR__Util__Opt.html#ga35f2df25ca06248d2fdd3e7463446418">APR_RETRIEVE_OPTIONAL_FN</a>(ap_dbd_open);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordflow">if</span> (lua_ap_dbd_open)</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                dbdhandle = (<a class="code" href="structap__dbd__t.html">ap_dbd_t</a> *) lua_ap_dbd_open(</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                        r-&gt;<a class="code" href="structrequest__rec.html#a4a8059930ce9409cb885fdeef6921b7b">server</a>-&gt;process-&gt;pool, r-&gt;<a class="code" href="structrequest__rec.html#a4a8059930ce9409cb885fdeef6921b7b">server</a>);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">if</span> (dbdhandle) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                db = lua_push_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, r, <a class="code" href="lua__dbd_8h.html#aa65a91f6a2986b128d89604ab3e783cf">LUA_DBTYPE_MOD_DBD</a>, dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#a851280460a614980589795f12140d7f5">pool</a>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a> = dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#aae4c35411195f3a7700b0e0414c689ee">driver</a>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a> = dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#af825005efce580e86b16ae2031b5218a">handle</a>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a> = dbdhandle;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="keywordflow">if</span> ( lua_ap_dbd_open == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> )</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                    lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>,</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                                    <span class="stringliteral">&quot;mod_dbd doesn&#39;t seem to have been loaded.&quot;</span>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    lua_pushliteral(</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                        <a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>,</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                        <span class="stringliteral">&quot;Could not acquire connection from mod_dbd. If your database is running, this may indicate a permission problem.&quot;</span>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            rc = <a class="code" href="group__apr__pools.html#gaa7c40921aae156b665e82b0a66991a39">apr_pool_create</a>(&amp;pool, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">if</span> (rc != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;Could not allocate memory for database!&quot;</span>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            apr_pool_tag(pool, <span class="stringliteral">&quot;lua_dbd_pool&quot;</span>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            apr_dbd_init(pool);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            dbdhandle = <a class="code" href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a>(pool, <span class="keyword">sizeof</span>(<a class="code" href="structap__dbd__t.html">ap_dbd_t</a>));</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            rc = apr_dbd_get_driver(pool, type, &amp;dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#aae4c35411195f3a7700b0e0414c689ee">driver</a>);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3, LUA_TSTRING);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                arguments = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                lua_settop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                </div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="keywordflow">if</span> (*arguments) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                    rc = apr_dbd_open_ex(dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#aae4c35411195f3a7700b0e0414c689ee">driver</a>, pool, </div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                            arguments, &amp;dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#af825005efce580e86b16ae2031b5218a">handle</a>, &amp;error);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                    <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                        db = lua_push_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, r, <a class="code" href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a>, pool);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                        db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a> = dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#aae4c35411195f3a7700b0e0414c689ee">driver</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                        db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a> = dbdhandle-&gt;<a class="code" href="structap__dbd__t.html#af825005efce580e86b16ae2031b5218a">handle</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                        db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a> = dbdhandle;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                    }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                        lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                            lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, error);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                            <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                        }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                    }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>,</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                                <span class="stringliteral">&quot;No database connection string was specified.&quot;</span>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                apr_pool_destroy(pool);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <span class="keywordflow">return</span> (2);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#gacab882e24f5d6491777e8ef7763d02fb">APR_STATUS_IS_ENOTIMPL</a>(rc)) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    lua_pushfstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                         <span class="stringliteral">&quot;driver for %s not available&quot;</span>, type);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#gae87f4877aa35535eb3546b499ef9d9f3">APR_STATUS_IS_EDSOOPEN</a>(rc)) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    lua_pushfstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                                <span class="stringliteral">&quot;can&#39;t find driver for %s&quot;</span>, type);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#gafab6c5fe2f9b906d533d253097a16e09">APR_STATUS_IS_ESYMNOTFOUND</a>(rc)) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                    lua_pushfstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                                <span class="stringliteral">&quot;driver for %s is invalid or corrupted&quot;</span>,</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                                type);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                    lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                <span class="stringliteral">&quot;mod_lua not compatible with APR in get_driver&quot;</span>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                lua_pushinteger(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, rc);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                apr_pool_destroy(pool);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <span class="keywordflow">return</span> 3;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div><div class="ttc" id="group__APR__STATUS__IS_html_gafab6c5fe2f9b906d533d253097a16e09"><div class="ttname"><a href="group__APR__STATUS__IS.html#gafab6c5fe2f9b906d533d253097a16e09">APR_STATUS_IS_ESYMNOTFOUND</a></div><div class="ttdeci">#define APR_STATUS_IS_ESYMNOTFOUND(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:424</div></div>
<div class="ttc" id="structapr__pool__t_html"><div class="ttname"><a href="structapr__pool__t.html">apr_pool_t</a></div><div class="ttdef"><b>Definition:</b> apr_pools.c:577</div></div>
<div class="ttc" id="structrequest__rec_html_a4a8059930ce9409cb885fdeef6921b7b"><div class="ttname"><a href="structrequest__rec.html#a4a8059930ce9409cb885fdeef6921b7b">request_rec::server</a></div><div class="ttdeci">uintptr_t server</div><div class="ttdef"><b>Definition:</b> ap.d:5</div></div>
<div class="ttc" id="group__APACHE__CORE__MUTEX_html_ga8fea43b485988aa6df5dced9dddbe733"><div class="ttname"><a href="group__APACHE__CORE__MUTEX.html#ga8fea43b485988aa6df5dced9dddbe733">pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> util_mutex.h:98</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_gacab882e24f5d6491777e8ef7763d02fb"><div class="ttname"><a href="group__APR__STATUS__IS.html#gacab882e24f5d6491777e8ef7763d02fb">APR_STATUS_IS_ENOTIMPL</a></div><div class="ttdeci">#define APR_STATUS_IS_ENOTIMPL(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:615</div></div>
<div class="ttc" id="structap__dbd__t_html_a851280460a614980589795f12140d7f5"><div class="ttname"><a href="structap__dbd__t.html#a851280460a614980589795f12140d7f5">ap_dbd_t::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> mod_dbd.h:80</div></div>
<div class="ttc" id="lua__dbd_8h_html_aa65a91f6a2986b128d89604ab3e783cf"><div class="ttname"><a href="lua__dbd_8h.html#aa65a91f6a2986b128d89604ab3e783cf">LUA_DBTYPE_MOD_DBD</a></div><div class="ttdeci">#define LUA_DBTYPE_MOD_DBD</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:27</div></div>
<div class="ttc" id="structlua__db__handle_html_a67c707584b3125e5771b5b1aaad0b2e5"><div class="ttname"><a href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">lua_db_handle::dbdhandle</a></div><div class="ttdeci">ap_dbd_t * dbdhandle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:35</div></div>
<div class="ttc" id="group__apr__pools_html_gaa7c40921aae156b665e82b0a66991a39"><div class="ttname"><a href="group__apr__pools.html#gaa7c40921aae156b665e82b0a66991a39">apr_pool_create</a></div><div class="ttdeci">#define apr_pool_create(newpool, parent)</div><div class="ttdef"><b>Definition:</b> apr_pools.h:322</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="pcretest_8txt_html_a10a3a3b838670cc298974841b7588803"><div class="ttname"><a href="pcretest_8txt.html#a10a3a3b838670cc298974841b7588803">arguments</a></div><div class="ttdeci">in other force each pattern to be studied If s is all the JIT compile options are passed to pcre[16|32] causing just in time optimization to be set up if it is for both full and partial matching Specific JIT compile options can be selected by following s with a digit in the range which selects the JIT compile modes as the either specifying no studying at or suppressing JIT com pilation If the I or D option is present on a information about the result of studying is not included when studying is caused only by s and neither i nor d is present on the command line This behaviour means that the output from tests that are run with and without s should be except when options that output information about the actual running of a match are set The and tm which give information about resources are likely to produce different output with and without s Output may also differ if the C option is present on an individual pattern This uses callouts to trace the the matching and this may be different between studied and non studied patterns If the pattern contains MARK items there may also be for the same reason The s command line option can be overridden for spe cific patterns that should never be and match many times with a and output the resulting times per or because you will then get the size output a zillion and the timing will be distorted You can control the number of iterations that are used for timing by following t with a t iter ates times The default is to iterate times tm This is like t except that it times only the matching not the compile or study phases T TM These behave like t and but in at the end of a the total times for all and matches are output DESCRIPTION If pcretest is given two filename arguments</div><div class="ttdef"><b>Definition:</b> pcretest.txt:224</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="lua__dbd_8h_html_aed8f4097d7b1c2231e9713b2496efe2a"><div class="ttname"><a href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a></div><div class="ttdeci">#define LUA_DBTYPE_APR_DBD</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:26</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_gaafc7089562892428c4fcae486f171f5a"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#gaafc7089562892428c4fcae486f171f5a">type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> http_core.h:184</div></div>
<div class="ttc" id="structap__dbd__t_html_af825005efce580e86b16ae2031b5218a"><div class="ttname"><a href="structap__dbd__t.html#af825005efce580e86b16ae2031b5218a">ap_dbd_t::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> mod_dbd.h:77</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APR__Util__Opt_html_ga35f2df25ca06248d2fdd3e7463446418"><div class="ttname"><a href="group__APR__Util__Opt.html#ga35f2df25ca06248d2fdd3e7463446418">APR_RETRIEVE_OPTIONAL_FN</a></div><div class="ttdeci">#define APR_RETRIEVE_OPTIONAL_FN(name)</div><div class="ttdef"><b>Definition:</b> apr_optional.h:84</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_gae87f4877aa35535eb3546b499ef9d9f3"><div class="ttname"><a href="group__APR__STATUS__IS.html#gae87f4877aa35535eb3546b499ef9d9f3">APR_STATUS_IS_EDSOOPEN</a></div><div class="ttdeci">#define APR_STATUS_IS_EDSOOPEN(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:403</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="structap__dbd__t_html"><div class="ttname"><a href="structap__dbd__t.html">ap_dbd_t</a></div><div class="ttdef"><b>Definition:</b> mod_dbd.h:76</div></div>
<div class="ttc" id="structrequest__rec_html"><div class="ttname"><a href="structrequest__rec.html">request_rec</a></div><div class="ttdoc">A structure that represents the current request. </div><div class="ttdef"><b>Definition:</b> ap.d:2</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__apr__pools_html_gad214fc0160de3c22b6435e29ea20fce8"><div class="ttname"><a href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a></div><div class="ttdeci">#define apr_pcalloc(p, size)</div><div class="ttdef"><b>Definition:</b> apr_pools.h:465</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_ga11614f44ef4d939bdd984953346a7572"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#ga11614f44ef4d939bdd984953346a7572">error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> http_protocol.h:974</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="structap__dbd__t_html_aae4c35411195f3a7700b0e0414c689ee"><div class="ttname"><a href="structap__dbd__t.html#aae4c35411195f3a7700b0e0414c689ee">ap_dbd_t::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> mod_dbd.h:78</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_aa9e1b942d64e0cb3ce05ba6c8715661f_icgraph.png" border="0" usemap="#lua__dbd_8h_aa9e1b942d64e0cb3ce05ba6c8715661f_icgraph" alt=""/></div>
<map name="lua__dbd_8h_aa9e1b942d64e0cb3ce05ba6c8715661f_icgraph" id="lua__dbd_8h_aa9e1b942d64e0cb3ce05ba6c8715661f_icgraph">
<area shape="rect" id="node2" href="lua__request_8h.html#afb96e7f7fe9a1bd92b4c8b9e263f2ccc" title="ap_lua_load_request\l_lmodule" alt="" coords="163,5,304,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2828dc702e1dd3b6ee4b566e3876d874"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_active </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db = 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        rc = apr_dbd_check_conn(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a38b83f2e0af4f078f138f71d2f61001f"><div class="ttname"><a href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">lua_db_handle::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:33</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a2828dc702e1dd3b6ee4b566e3876d874_icgraph.png" border="0" usemap="#lua__dbd_8h_a2828dc702e1dd3b6ee4b566e3876d874_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a2828dc702e1dd3b6ee4b566e3876d874_icgraph" id="lua__dbd_8h_a2828dc702e1dd3b6ee4b566e3876d874_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="156,29,273,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abf27b336b52586b161d51fe89262c56f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_close </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    </div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">if</span> (db-&gt;<a class="code" href="structlua__db__handle.html#ac281c2727713e84a8632568f6112cd02">type</a> == <a class="code" href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a>) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            rc = apr_dbd_close(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="keywordflow">if</span> (db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>) apr_pool_destroy(db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            lua_ap_dbd_close = <a class="code" href="group__APR__Util__Opt.html#ga35f2df25ca06248d2fdd3e7463446418">APR_RETRIEVE_OPTIONAL_FN</a>(ap_dbd_close);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">if</span> (lua_ap_dbd_close != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="keywordflow">if</span> (db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a>) lua_ap_dbd_close(db-&gt;<a class="code" href="structlua__db__handle.html#a2ecfc8b18f0f4f5dbb37c42bc1d505fd">server</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a> = 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    lua_settop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    lua_pushnumber(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, rc);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;} </div><div class="ttc" id="structlua__db__handle_html_a67c707584b3125e5771b5b1aaad0b2e5"><div class="ttname"><a href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">lua_db_handle::dbdhandle</a></div><div class="ttdeci">ap_dbd_t * dbdhandle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:35</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a38b83f2e0af4f078f138f71d2f61001f"><div class="ttname"><a href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">lua_db_handle::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:33</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="lua__dbd_8h_html_aed8f4097d7b1c2231e9713b2496efe2a"><div class="ttname"><a href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a></div><div class="ttdeci">#define LUA_DBTYPE_APR_DBD</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:26</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APR__Util__Opt_html_ga35f2df25ca06248d2fdd3e7463446418"><div class="ttname"><a href="group__APR__Util__Opt.html#ga35f2df25ca06248d2fdd3e7463446418">APR_RETRIEVE_OPTIONAL_FN</a></div><div class="ttdeci">#define APR_RETRIEVE_OPTIONAL_FN(name)</div><div class="ttdef"><b>Definition:</b> apr_optional.h:84</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="structlua__db__handle_html_a2ecfc8b18f0f4f5dbb37c42bc1d505fd"><div class="ttname"><a href="structlua__db__handle.html#a2ecfc8b18f0f4f5dbb37c42bc1d505fd">lua_db_handle::server</a></div><div class="ttdeci">server_rec * server</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:36</div></div>
<div class="ttc" id="structlua__db__handle_html_ac281c2727713e84a8632568f6112cd02"><div class="ttname"><a href="structlua__db__handle.html#ac281c2727713e84a8632568f6112cd02">lua_db_handle::type</a></div><div class="ttdeci">char type</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:34</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_abf27b336b52586b161d51fe89262c56f_icgraph.png" border="0" usemap="#lua__dbd_8h_abf27b336b52586b161d51fe89262c56f_icgraph" alt=""/></div>
<map name="lua__dbd_8h_abf27b336b52586b161d51fe89262c56f_icgraph" id="lua__dbd_8h_abf27b336b52586b161d51fe89262c56f_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="152,29,269,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7f7d258fd595be1e37da6db62243fd62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_escape </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>    *db = 0;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>       *<a class="code" href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>       *escaped = 0;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="structrequest__rec.html">request_rec</a>      *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    r = ap_lua_check_request_rec(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 2);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (r) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3, LUA_TSTRING);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        statement = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            apr_dbd_init(r-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            escaped = apr_dbd_escape(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, r-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, statement,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                     db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">if</span> (escaped) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, escaped);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="ttc" id="structrequest__rec_html_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0"><div class="ttname"><a href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">request_rec::pool</a></div><div class="ttdeci">uintptr_t pool</div><div class="ttdef"><b>Definition:</b> ap.d:3</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga4e2545dd013163aa26d4aa994db42fb6"><div class="ttname"><a href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a></div><div class="ttdeci">apr_dbd_t int const char * statement</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:271</div></div>
<div class="ttc" id="structrequest__rec_html"><div class="ttname"><a href="structrequest__rec.html">request_rec</a></div><div class="ttdoc">A structure that represents the current request. </div><div class="ttdef"><b>Definition:</b> ap.d:2</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a7f7d258fd595be1e37da6db62243fd62_icgraph.png" border="0" usemap="#lua__dbd_8h_a7f7d258fd595be1e37da6db62243fd62_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a7f7d258fd595be1e37da6db62243fd62_icgraph" id="lua__dbd_8h_a7f7d258fd595be1e37da6db62243fd62_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="163,29,280,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad997e33a339ab9c76686400c96f6b746"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_gc </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>    *db;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    db = lua_touserdata(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (db-&gt;<a class="code" href="structlua__db__handle.html#ac281c2727713e84a8632568f6112cd02">type</a> == <a class="code" href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a>) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            apr_dbd_close(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">if</span> (db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>) apr_pool_destroy(db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            lua_ap_dbd_close = <a class="code" href="group__APR__Util__Opt.html#ga35f2df25ca06248d2fdd3e7463446418">APR_RETRIEVE_OPTIONAL_FN</a>(ap_dbd_close);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordflow">if</span> (lua_ap_dbd_close != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">if</span> (db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a>) lua_ap_dbd_close(db-&gt;<a class="code" href="structlua__db__handle.html#a2ecfc8b18f0f4f5dbb37c42bc1d505fd">server</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a> = 0;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    lua_settop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="structlua__db__handle_html_a67c707584b3125e5771b5b1aaad0b2e5"><div class="ttname"><a href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">lua_db_handle::dbdhandle</a></div><div class="ttdeci">ap_dbd_t * dbdhandle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:35</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a38b83f2e0af4f078f138f71d2f61001f"><div class="ttname"><a href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">lua_db_handle::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:33</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="lua__dbd_8h_html_aed8f4097d7b1c2231e9713b2496efe2a"><div class="ttname"><a href="lua__dbd_8h.html#aed8f4097d7b1c2231e9713b2496efe2a">LUA_DBTYPE_APR_DBD</a></div><div class="ttdeci">#define LUA_DBTYPE_APR_DBD</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:26</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APR__Util__Opt_html_ga35f2df25ca06248d2fdd3e7463446418"><div class="ttname"><a href="group__APR__Util__Opt.html#ga35f2df25ca06248d2fdd3e7463446418">APR_RETRIEVE_OPTIONAL_FN</a></div><div class="ttdeci">#define APR_RETRIEVE_OPTIONAL_FN(name)</div><div class="ttdef"><b>Definition:</b> apr_optional.h:84</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="structlua__db__handle_html_a2ecfc8b18f0f4f5dbb37c42bc1d505fd"><div class="ttname"><a href="structlua__db__handle.html#a2ecfc8b18f0f4f5dbb37c42bc1d505fd">lua_db_handle::server</a></div><div class="ttdeci">server_rec * server</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:36</div></div>
<div class="ttc" id="structlua__db__handle_html_ac281c2727713e84a8632568f6112cd02"><div class="ttname"><a href="structlua__db__handle.html#ac281c2727713e84a8632568f6112cd02">lua_db_handle::type</a></div><div class="ttdeci">char type</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:34</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_ad997e33a339ab9c76686400c96f6b746_icgraph.png" border="0" usemap="#lua__dbd_8h_ad997e33a339ab9c76686400c96f6b746_icgraph" alt=""/></div>
<map name="lua__dbd_8h_ad997e33a339ab9c76686400c96f6b746_icgraph" id="lua__dbd_8h_ad997e33a339ab9c76686400c96f6b746_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="135,29,252,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a76fb43685342aea7d448c0e517d6d9f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_get_row </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">int</span> row_no,<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>,alpha = 0;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *entry, *rowname;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="group__APR__Util__DBD.html#gab890e4650a1de51725142318825103a5">apr_dbd_row_t</a>   *<a class="code" href="group__APR__Util__DBD.html#ga98834f9ea71a411bba8858886c6454ed">row</a> = 0;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="structlua__db__result__set.html">lua_db_result_set</a> *<a class="code" href="group__APR__Util__DBD.html#ga3bb17d78322a086f98b82abd8bb9a8cd">res</a> = lua_get_result_set(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    </div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    row_no = luaL_optinteger(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 2, 0);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (lua_isboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3)) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        alpha = lua_toboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    lua_settop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>,0);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    </div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">/* Fetch all rows at once? */</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (row_no == 0) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        row_no = 1;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">while</span> (apr_dbd_get_row(res-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a>, res-&gt;<a class="code" href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">pool</a>, res-&gt;<a class="code" href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">results</a>,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                            &amp;row, -1) != -1)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            lua_pushinteger(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, row_no);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; res-&gt;<a class="code" href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">cols</a>; x++) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                entry = apr_dbd_get_entry(res-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a>, row, x);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="keywordflow">if</span> (entry) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    <span class="keywordflow">if</span> (alpha == 1) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        rowname = apr_dbd_get_name(res-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a>, </div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                res-&gt;<a class="code" href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">results</a>, x);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, rowname ? rowname : <span class="stringliteral">&quot;(oob)&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                        lua_pushinteger(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, x + 1);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, entry);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            row_no++;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    </div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">/* Just fetch a single row */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (apr_dbd_get_row(res-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a>, res-&gt;<a class="code" href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">pool</a>, res-&gt;<a class="code" href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">results</a>,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                            &amp;row, row_no) != -1)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        </div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; res-&gt;<a class="code" href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">cols</a>; x++) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            entry = apr_dbd_get_entry(res-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a>, row, x);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> (entry) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">if</span> (alpha == 1) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    rowname = apr_dbd_get_name(res-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a>, </div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                            res-&gt;<a class="code" href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">results</a>, x);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                    lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, rowname ? rowname : <span class="stringliteral">&quot;(oob)&quot;</span>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    lua_pushinteger(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, x + 1);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, entry);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div><div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga3bb17d78322a086f98b82abd8bb9a8cd"><div class="ttname"><a href="group__APR__Util__DBD.html#ga3bb17d78322a086f98b82abd8bb9a8cd">res</a></div><div class="ttdeci">apr_pool_t apr_dbd_t apr_dbd_results_t ** res</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:286</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_gab890e4650a1de51725142318825103a5"><div class="ttname"><a href="group__APR__Util__DBD.html#gab890e4650a1de51725142318825103a5">apr_dbd_row_t</a></div><div class="ttdeci">struct apr_dbd_row_t apr_dbd_row_t</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:86</div></div>
<div class="ttc" id="structlua__db__result__set_html_ac7cec3e26d666243ff37e16dcab7741c"><div class="ttname"><a href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">lua_db_result_set::cols</a></div><div class="ttdeci">int cols</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:42</div></div>
<div class="ttc" id="structlua__db__result__set_html_a7c0855626d660e95ea027955e132f9c2"><div class="ttname"><a href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">lua_db_result_set::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:44</div></div>
<div class="ttc" id="structlua__db__result__set_html_a50834f059df4bede2b7f8ac193369f3c"><div class="ttname"><a href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">lua_db_result_set::results</a></div><div class="ttdeci">apr_dbd_results_t * results</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:43</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="structlua__db__result__set_html_a1cc3e423226d7417726b1ad1359d56ba"><div class="ttname"><a href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">lua_db_result_set::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:40</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga98834f9ea71a411bba8858886c6454ed"><div class="ttname"><a href="group__APR__Util__DBD.html#ga98834f9ea71a411bba8858886c6454ed">row</a></div><div class="ttdeci">apr_pool_t apr_dbd_results_t apr_dbd_row_t ** row</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:319</div></div>
<div class="ttc" id="structlua__db__result__set_html"><div class="ttname"><a href="structlua__db__result__set.html">lua_db_result_set</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:39</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a76fb43685342aea7d448c0e517d6d9f6_icgraph.png" border="0" usemap="#lua__dbd_8h_a76fb43685342aea7d448c0e517d6d9f6_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a76fb43685342aea7d448c0e517d6d9f6_icgraph" id="lua__dbd_8h_a76fb43685342aea7d448c0e517d6d9f6_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a0dcb52a2ca220180e7fcebc24bc29067" title="lua_db_select" alt="" coords="377,5,480,32"/>
<area shape="rect" id="node4" href="lua__dbd_8h.html#a6d26da9532ecd489c2efd88cd3c8e344" title="lua_db_prepared_select" alt="" coords="167,56,325,83"/>
<area shape="rect" id="node3" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="532,56,649,83"/>
<area shape="rect" id="node5" href="lua__dbd_8h.html#ad94ffb0c1715dbc3608178c80ffa8957" title="lua_db_prepare" alt="" coords="373,107,484,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad94ffb0c1715dbc3608178c80ffa8957"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_prepare </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db = 0;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a>, *at;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="structrequest__rec.html">request_rec</a>     *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>* st;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordtype">int</span> need = 0;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    </div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    r = ap_lua_check_request_rec(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 2);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">if</span> (r) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="group__APR__Util__DBD.html#ga1f1179c6480a2ee0134f2cb881106cd3">apr_dbd_prepared_t</a> *pstatement = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3, LUA_TSTRING);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        statement = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        </div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">/* Count number of variables in statement */</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        at = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a>(statement,<span class="charliteral">&#39;%&#39;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">while</span> (at != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordflow">if</span> (at[1] == <span class="charliteral">&#39;%&#39;</span>) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                at++;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                need++;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            at = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a>(at+1,<span class="charliteral">&#39;%&#39;</span>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        </div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        </div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        rc = apr_dbd_prepare(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, r-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, statement, </div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, &amp;pstatement);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span> (rc != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a> = apr_dbd_error(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, rc);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, err);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        </div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment">/* Push the prepared statement table */</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        st = lua_newuserdata(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="keyword">sizeof</span>(<a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>));</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        st-&gt;<a class="code" href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">statement</a> = pstatement;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        st-&gt;<a class="code" href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">variables</a> = need;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a> = db;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        </div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;select&quot;</span>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        lua_pushcfunction(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <a class="code" href="lua__dbd_8c.html#a6d26da9532ecd489c2efd88cd3c8e344">lua_db_prepared_select</a>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -4);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;query&quot;</span>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        lua_pushcfunction(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <a class="code" href="lua__dbd_8c.html#abc27e046d61d88a6d607f7d0e59b55f4">lua_db_prepared_query</a>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -4);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        lua_rawseti(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -2, 0);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="ttc" id="structlua__db__prepared__statement_html_a696bd485fc4b6ab3e9b6474a332db6c8"><div class="ttname"><a href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">lua_db_prepared_statement::variables</a></div><div class="ttdeci">int variables</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:49</div></div>
<div class="ttc" id="structrequest__rec_html_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0"><div class="ttname"><a href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">request_rec::pool</a></div><div class="ttdeci">uintptr_t pool</div><div class="ttdef"><b>Definition:</b> ap.d:3</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga6016b58857e4c0b11e39913bdf4ff910"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a></div><div class="ttdeci">#define ap_strchr_c(s, c)</div><div class="ttdef"><b>Definition:</b> httpd.h:2244</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_ad29b98c7951db2947945a6cd2c0733e1"><div class="ttname"><a href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">lua_db_prepared_statement::statement</a></div><div class="ttdeci">apr_dbd_prepared_t * statement</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:48</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html"><div class="ttname"><a href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:47</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_aa0e4fb9c42fa26d8c00eec7a2450ec32"><div class="ttname"><a href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">lua_db_prepared_statement::db</a></div><div class="ttdeci">lua_db_handle * db</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:50</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga4e2545dd013163aa26d4aa994db42fb6"><div class="ttname"><a href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a></div><div class="ttdeci">apr_dbd_t int const char * statement</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:271</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="structrequest__rec_html"><div class="ttname"><a href="structrequest__rec.html">request_rec</a></div><div class="ttdoc">A structure that represents the current request. </div><div class="ttdef"><b>Definition:</b> ap.d:2</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga1f1179c6480a2ee0134f2cb881106cd3"><div class="ttname"><a href="group__APR__Util__DBD.html#ga1f1179c6480a2ee0134f2cb881106cd3">apr_dbd_prepared_t</a></div><div class="ttdeci">struct apr_dbd_prepared_t apr_dbd_prepared_t</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:87</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="lua__dbd_8c_html_a6d26da9532ecd489c2efd88cd3c8e344"><div class="ttname"><a href="lua__dbd_8c.html#a6d26da9532ecd489c2efd88cd3c8e344">lua_db_prepared_select</a></div><div class="ttdeci">int lua_db_prepared_select(lua_State *L)</div><div class="ttdef"><b>Definition:</b> lua_dbd.c:382</div></div>
<div class="ttc" id="lua__dbd_8c_html_abc27e046d61d88a6d607f7d0e59b55f4"><div class="ttname"><a href="lua__dbd_8c.html#abc27e046d61d88a6d607f7d0e59b55f4">lua_db_prepared_query</a></div><div class="ttdeci">int lua_db_prepared_query(lua_State *L)</div><div class="ttdef"><b>Definition:</b> lua_dbd.c:473</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_cgraph.png" border="0" usemap="#lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_cgraph" alt=""/></div>
<map name="lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_cgraph" id="lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_cgraph">
<area shape="rect" id="node2" href="lua__dbd_8c.html#a6d26da9532ecd489c2efd88cd3c8e344" title="lua_db_prepared_select" alt="" coords="164,5,323,32"/>
<area shape="rect" id="node4" href="lua__dbd_8c.html#abc27e046d61d88a6d607f7d0e59b55f4" title="lua_db_prepared_query" alt="" coords="165,56,321,83"/>
<area shape="rect" id="node3" href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6" title="lua_db_get_row" alt="" coords="371,5,484,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_icgraph.png" border="0" usemap="#lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_icgraph" alt=""/></div>
<map name="lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_icgraph" id="lua__dbd_8h_ad94ffb0c1715dbc3608178c80ffa8957_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="164,29,281,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a46ee364a00615b5ae4d6ec05322257c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_prepared </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;{</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db = 0;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="structrequest__rec.html">request_rec</a>     *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>* st;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    </div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    r = ap_lua_check_request_rec(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 2);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (r) {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="group__APR__Util__DBD.html#ga1f1179c6480a2ee0134f2cb881106cd3">apr_dbd_prepared_t</a> *pstatement = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3, LUA_TSTRING);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        tag = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        </div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">/* Look for the statement */</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        pstatement = apr_hash_get(db-&gt;<a class="code" href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">dbdhandle</a>-&gt;<a class="code" href="structap__dbd__t.html#ad8f9283ad51cb317aabd04784498cb92">prepared</a>, tag, </div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <a class="code" href="group__apr__hash.html#ga3ba32541f2717b394000f87f38c7e12d">APR_HASH_KEY_STRING</a>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        </div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span> (pstatement == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            lua_pushfstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    <span class="stringliteral">&quot;Could not find any prepared statement called %s!&quot;</span>, tag);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        </div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        </div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">/* Push the prepared statement table */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        st = lua_newuserdata(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="keyword">sizeof</span>(<a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        st-&gt;<a class="code" href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">statement</a> = pstatement;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        st-&gt;<a class="code" href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">variables</a> = -1; <span class="comment">/* we don&#39;t know :( */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a> = db;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;select&quot;</span>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        lua_pushcfunction(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <a class="code" href="lua__dbd_8c.html#a6d26da9532ecd489c2efd88cd3c8e344">lua_db_prepared_select</a>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -4);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;query&quot;</span>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        lua_pushcfunction(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <a class="code" href="lua__dbd_8c.html#abc27e046d61d88a6d607f7d0e59b55f4">lua_db_prepared_query</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -4);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        lua_rawseti(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -2, 0);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div><div class="ttc" id="structlua__db__prepared__statement_html_a696bd485fc4b6ab3e9b6474a332db6c8"><div class="ttname"><a href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">lua_db_prepared_statement::variables</a></div><div class="ttdeci">int variables</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:49</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7bb5e40c10df6a41df64bda1f4bb3e26"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7bb5e40c10df6a41df64bda1f4bb3e26">tag</a></div><div class="ttdeci">char * tag</div><div class="ttdef"><b>Definition:</b> http_core.h:925</div></div>
<div class="ttc" id="structlua__db__handle_html_a67c707584b3125e5771b5b1aaad0b2e5"><div class="ttname"><a href="structlua__db__handle.html#a67c707584b3125e5771b5b1aaad0b2e5">lua_db_handle::dbdhandle</a></div><div class="ttdeci">ap_dbd_t * dbdhandle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:35</div></div>
<div class="ttc" id="group__apr__hash_html_ga3ba32541f2717b394000f87f38c7e12d"><div class="ttname"><a href="group__apr__hash.html#ga3ba32541f2717b394000f87f38c7e12d">APR_HASH_KEY_STRING</a></div><div class="ttdeci">#define APR_HASH_KEY_STRING</div><div class="ttdef"><b>Definition:</b> apr_hash.h:47</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_ad29b98c7951db2947945a6cd2c0733e1"><div class="ttname"><a href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">lua_db_prepared_statement::statement</a></div><div class="ttdeci">apr_dbd_prepared_t * statement</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:48</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html"><div class="ttname"><a href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:47</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_aa0e4fb9c42fa26d8c00eec7a2450ec32"><div class="ttname"><a href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">lua_db_prepared_statement::db</a></div><div class="ttdeci">lua_db_handle * db</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:50</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="structrequest__rec_html"><div class="ttname"><a href="structrequest__rec.html">request_rec</a></div><div class="ttdoc">A structure that represents the current request. </div><div class="ttdef"><b>Definition:</b> ap.d:2</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga1f1179c6480a2ee0134f2cb881106cd3"><div class="ttname"><a href="group__APR__Util__DBD.html#ga1f1179c6480a2ee0134f2cb881106cd3">apr_dbd_prepared_t</a></div><div class="ttdeci">struct apr_dbd_prepared_t apr_dbd_prepared_t</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:87</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="lua__dbd_8c_html_a6d26da9532ecd489c2efd88cd3c8e344"><div class="ttname"><a href="lua__dbd_8c.html#a6d26da9532ecd489c2efd88cd3c8e344">lua_db_prepared_select</a></div><div class="ttdeci">int lua_db_prepared_select(lua_State *L)</div><div class="ttdef"><b>Definition:</b> lua_dbd.c:382</div></div>
<div class="ttc" id="lua__dbd_8c_html_abc27e046d61d88a6d607f7d0e59b55f4"><div class="ttname"><a href="lua__dbd_8c.html#abc27e046d61d88a6d607f7d0e59b55f4">lua_db_prepared_query</a></div><div class="ttdeci">int lua_db_prepared_query(lua_State *L)</div><div class="ttdef"><b>Definition:</b> lua_dbd.c:473</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="structap__dbd__t_html_ad8f9283ad51cb317aabd04784498cb92"><div class="ttname"><a href="structap__dbd__t.html#ad8f9283ad51cb317aabd04784498cb92">ap_dbd_t::prepared</a></div><div class="ttdeci">apr_hash_t * prepared</div><div class="ttdef"><b>Definition:</b> mod_dbd.h:79</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_cgraph.png" border="0" usemap="#lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_cgraph" alt=""/></div>
<map name="lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_cgraph" id="lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_cgraph">
<area shape="rect" id="node2" href="lua__dbd_8c.html#a6d26da9532ecd489c2efd88cd3c8e344" title="lua_db_prepared_select" alt="" coords="495,207,653,234"/>
<area shape="rect" id="node4" href="lua__dbd_8c.html#abc27e046d61d88a6d607f7d0e59b55f4" title="lua_db_prepared_query" alt="" coords="496,283,652,310"/>
<area shape="rect" id="node5" href="lua__dbd_8c.html#ad997e33a339ab9c76686400c96f6b746" title="lua_db_gc" alt="" coords="351,30,432,57"/>
<area shape="rect" id="node6" href="lua__dbd_8c.html#a7f7d258fd595be1e37da6db62243fd62" title="lua_db_escape" alt="" coords="337,81,446,107"/>
<area shape="rect" id="node7" href="lua__dbd_8c.html#abf27b336b52586b161d51fe89262c56f" title="lua_db_close" alt="" coords="342,131,441,158"/>
<area shape="rect" id="node8" href="lua__dbd_8c.html#a0dcb52a2ca220180e7fcebc24bc29067" title="lua_db_select" alt="" coords="340,334,443,361"/>
<area shape="rect" id="node9" href="lua__dbd_8c.html#a736068a2c1c5ef1f7f290fbba4919671" title="lua_db_query" alt="" coords="342,385,441,411"/>
<area shape="rect" id="node10" href="lua__dbd_8c.html#a2828dc702e1dd3b6ee4b566e3876d874" title="lua_db_active" alt="" coords="340,435,443,462"/>
<area shape="rect" id="node11" href="lua__dbd_8c.html#ad94ffb0c1715dbc3608178c80ffa8957" title="lua_db_prepare" alt="" coords="336,233,447,259"/>
<area shape="rect" id="node12" href="lua__dbd_8c.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="171,209,288,235"/>
<area shape="rect" id="node3" href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6" title="lua_db_get_row" alt="" coords="701,271,815,298"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_icgraph.png" border="0" usemap="#lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_icgraph" id="lua__dbd_8h_a46ee364a00615b5ae4d6ec05322257c0_icgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abc27e046d61d88a6d607f7d0e59b55f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_prepared_query </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>  *st = 0;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>       **vars;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>, have;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    </div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/* Fetch the prepared statement and the vars passed */</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1, LUA_TTABLE);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    lua_rawgeti(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1, 0);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -1, LUA_TUSERDATA);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    st = (<a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>*) lua_topointer(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -1);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    </div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">/* Check if we got enough variables passed on to us.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">     * This, of course, only works for prepared statements made through lua. */</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    have = lua_gettop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>) - 2;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">variables</a> != -1 &amp;&amp; have &lt; st-&gt;<a class="code" href="README_8txt.html#a26f943ceba1bb0103c879f267b2863cb">variables</a> ) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        lua_pushfstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="stringliteral">&quot;Error in executing prepared statement: Expected %d arguments, got %d.&quot;</span>, </div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                st-&gt;<a class="code" href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">variables</a>, have);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    vars = <a class="code" href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a>(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>, have*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *));</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">for</span> (x = 0; x &lt; have; x++) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        vars[<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>] = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, x + 2);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">/* Fire off the query */</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a> &amp;&amp; st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="comment">/*~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordtype">int</span> affected = 0;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="comment">/*~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        rc = apr_dbd_pquery(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                &amp;affected, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">statement</a>, have, vars);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            lua_pushinteger(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, affected);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a> = apr_dbd_error(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, rc);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, err);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="stringliteral">&quot;Database connection seems to be closed, please reacquire it.&quot;</span>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> (2);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div><div class="ttc" id="structlua__db__prepared__statement_html_a696bd485fc4b6ab3e9b6474a332db6c8"><div class="ttname"><a href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">lua_db_prepared_statement::variables</a></div><div class="ttdeci">int variables</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:49</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a38b83f2e0af4f078f138f71d2f61001f"><div class="ttname"><a href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">lua_db_handle::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:33</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_ad29b98c7951db2947945a6cd2c0733e1"><div class="ttname"><a href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">lua_db_prepared_statement::statement</a></div><div class="ttdeci">apr_dbd_prepared_t * statement</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:48</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html"><div class="ttname"><a href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:47</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_aa0e4fb9c42fa26d8c00eec7a2450ec32"><div class="ttname"><a href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">lua_db_prepared_statement::db</a></div><div class="ttdeci">lua_db_handle * db</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:50</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="README_8txt_html_a26f943ceba1bb0103c879f267b2863cb"><div class="ttname"><a href="README_8txt.html#a26f943ceba1bb0103c879f267b2863cb">variables</a></div><div class="ttdeci">it is run only when the default link size of is and the thirteenth test is run only when JIT support is not available They test some JIT specific features such as information output from pcretest about JIT compilation The and sixteenth tests are run only in bit and the and nineteenth tests are run only in bit mode These are tests that generate different output in the two modes They are for general UTF and Unicode property respectively The twentieth test is run only in bit mode It tests some specific bit features of the DFA matching engine The twenty first and twenty second tests are run only in bit when the link size is set to for the bit library They test reloading pre compiled patterns The twenty third and twenty fourth tests are run only in bit mode They are for general and UTF respectively The twenty fifth and twenty sixth tests are run only in bit mode They are for general and UTF respectively Character tables For PCRE uses four tables for manipulating and identifying characters whose code point values are less than The final argument of the a set of default tables that is built into the binary is used The source file called pcre_chartables c contains the default set of tables By this is created as a copy of pcre_chartables c which contains tables for ASCII coding if enable rebuild chartables is specified for a different version of pcre_chartables c is built by the program which uses the ANSI C character handling functions such as etc to build the table sources This means that the default C locale which is set for your system will control the contents of these default tables You can change the default tables by editing pcre_chartables c and then re building PCRE If you do you should take care to ensure that the file does not get automatically re generated The best way to do this is to move pcre_chartables c dist out of the way and replace it with your customized tables When the dftables program is run as a result of enable rebuild it uses the default C locale that is set on your system It does not pay attention to the LC_xxx environment variables In other it uses the system s default locale rather than whatever the compiling user happens to have set If you really do want to build a source set of character tables in a locale that is specified by the LC_xxx variables</div><div class="ttdef"><b>Definition:</b> README.txt:809</div></div>
<div class="ttc" id="group__apr__pools_html_gad214fc0160de3c22b6435e29ea20fce8"><div class="ttname"><a href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a></div><div class="ttdeci">#define apr_pcalloc(p, size)</div><div class="ttdef"><b>Definition:</b> apr_pools.h:465</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_abc27e046d61d88a6d607f7d0e59b55f4_icgraph.png" border="0" usemap="#lua__dbd_8h_abc27e046d61d88a6d607f7d0e59b55f4_icgraph" alt=""/></div>
<map name="lua__dbd_8h_abc27e046d61d88a6d607f7d0e59b55f4_icgraph" id="lua__dbd_8h_abc27e046d61d88a6d607f7d0e59b55f4_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#ad94ffb0c1715dbc3608178c80ffa8957" title="lua_db_prepare" alt="" coords="209,5,320,32"/>
<area shape="rect" id="node3" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="368,31,485,57"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d26da9532ecd489c2efd88cd3c8e344"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_prepared_select </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>  *st = 0;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>       **vars;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>, have;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    </div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">/* Fetch the prepared statement and the vars passed */</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1, LUA_TTABLE);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    lua_rawgeti(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 1, 0);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -1, LUA_TUSERDATA);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    st = (<a class="code" href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a>*) lua_topointer(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -1);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    </div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">/* Check if we got enough variables passed on to us.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">     * This, of course, only works for prepared statements made through lua. */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    have = lua_gettop(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>) - 2;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">variables</a> != -1 &amp;&amp; have &lt; st-&gt;<a class="code" href="README_8txt.html#a26f943ceba1bb0103c879f267b2863cb">variables</a> ) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        lua_pushfstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="stringliteral">&quot;Error in executing prepared statement: Expected %d arguments, got %d.&quot;</span>, </div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                st-&gt;<a class="code" href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">variables</a>, have);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    vars = <a class="code" href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a>(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>, have*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *));</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">for</span> (x = 0; x &lt; have; x++) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        vars[<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>] = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, x + 2);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">/* Fire off the query */</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a> &amp;&amp; st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordtype">int</span> cols;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="group__APR__Util__DBD.html#ga6765891011818912e1b52fef773bfce6">apr_dbd_results_t</a>   *<a class="code" href="NON-AUTOTOOLS-BUILD_8txt.html#a9237582cb59392bdaeda6c248df4441c">results</a> = 0;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        rc = apr_dbd_pselect(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>,</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                &amp;results, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">statement</a>, 0, have, vars);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="structlua__db__result__set.html">lua_db_result_set</a> *resultset;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            cols = apr_dbd_num_cols(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, results);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            resultset = lua_newuserdata(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="keyword">sizeof</span>(<a class="code" href="structlua__db__result__set.html">lua_db_result_set</a>));</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            resultset-&gt;<a class="code" href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">cols</a> = cols;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            resultset-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a> = st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            resultset-&gt;<a class="code" href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">pool</a> = st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            resultset-&gt;<a class="code" href="structlua__db__result__set.html#ac148b93b6d46bb3ec85b08a31b9ff943">rows</a> = apr_dbd_num_tuples(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, results);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            resultset-&gt;<a class="code" href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">results</a> = <a class="code" href="NON-AUTOTOOLS-BUILD_8txt.html#a9237582cb59392bdaeda6c248df4441c">results</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            luaL_newmetatable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;lua_apr.dbselect&quot;</span>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;__call&quot;</span>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            lua_pushcfunction(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <a class="code" href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6">lua_db_get_row</a>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            lua_setmetatable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            lua_rawseti(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -2, 0);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            </div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a> = apr_dbd_error(st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, st-&gt;<a class="code" href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">db</a>-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, rc);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, err);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, </div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="stringliteral">&quot;Database connection seems to be closed, please reacquire it.&quot;</span>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> (2);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div><div class="ttc" id="structlua__db__prepared__statement_html_a696bd485fc4b6ab3e9b6474a332db6c8"><div class="ttname"><a href="structlua__db__prepared__statement.html#a696bd485fc4b6ab3e9b6474a332db6c8">lua_db_prepared_statement::variables</a></div><div class="ttdeci">int variables</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:49</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga6765891011818912e1b52fef773bfce6"><div class="ttname"><a href="group__APR__Util__DBD.html#ga6765891011818912e1b52fef773bfce6">apr_dbd_results_t</a></div><div class="ttdeci">struct apr_dbd_results_t apr_dbd_results_t</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:85</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="NON-AUTOTOOLS-BUILD_8txt_html_a9237582cb59392bdaeda6c248df4441c"><div class="ttname"><a href="NON-AUTOTOOLS-BUILD_8txt.html#a9237582cb59392bdaeda6c248df4441c">results</a></div><div class="ttdeci">building the test possibly other test programs in the build directory Pcre_test bat runs RunTest Bat with correct source and exe paths For manual testing with RunTest provided the build dir is a subdirectory of the source e chdir to the location of your bat and exe programs Run RunTest bat Test outputs will automatically be compared to expected results</div><div class="ttdef"><b>Definition:</b> NON-AUTOTOOLS-BUILD.txt:473</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__result__set_html_ac7cec3e26d666243ff37e16dcab7741c"><div class="ttname"><a href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">lua_db_result_set::cols</a></div><div class="ttdeci">int cols</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:42</div></div>
<div class="ttc" id="structlua__db__handle_html_a38b83f2e0af4f078f138f71d2f61001f"><div class="ttname"><a href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">lua_db_handle::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:33</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_ad29b98c7951db2947945a6cd2c0733e1"><div class="ttname"><a href="structlua__db__prepared__statement.html#ad29b98c7951db2947945a6cd2c0733e1">lua_db_prepared_statement::statement</a></div><div class="ttdeci">apr_dbd_prepared_t * statement</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:48</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="structlua__db__result__set_html_a7c0855626d660e95ea027955e132f9c2"><div class="ttname"><a href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">lua_db_result_set::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:44</div></div>
<div class="ttc" id="structlua__db__result__set_html_a50834f059df4bede2b7f8ac193369f3c"><div class="ttname"><a href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">lua_db_result_set::results</a></div><div class="ttdeci">apr_dbd_results_t * results</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:43</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html"><div class="ttname"><a href="structlua__db__prepared__statement.html">lua_db_prepared_statement</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:47</div></div>
<div class="ttc" id="structlua__db__result__set_html_ac148b93b6d46bb3ec85b08a31b9ff943"><div class="ttname"><a href="structlua__db__result__set.html#ac148b93b6d46bb3ec85b08a31b9ff943">lua_db_result_set::rows</a></div><div class="ttdeci">int rows</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:41</div></div>
<div class="ttc" id="structlua__db__prepared__statement_html_aa0e4fb9c42fa26d8c00eec7a2450ec32"><div class="ttname"><a href="structlua__db__prepared__statement.html#aa0e4fb9c42fa26d8c00eec7a2450ec32">lua_db_prepared_statement::db</a></div><div class="ttdeci">lua_db_handle * db</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:50</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="structlua__db__result__set_html_a1cc3e423226d7417726b1ad1359d56ba"><div class="ttname"><a href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">lua_db_result_set::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:40</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="README_8txt_html_a26f943ceba1bb0103c879f267b2863cb"><div class="ttname"><a href="README_8txt.html#a26f943ceba1bb0103c879f267b2863cb">variables</a></div><div class="ttdeci">it is run only when the default link size of is and the thirteenth test is run only when JIT support is not available They test some JIT specific features such as information output from pcretest about JIT compilation The and sixteenth tests are run only in bit and the and nineteenth tests are run only in bit mode These are tests that generate different output in the two modes They are for general UTF and Unicode property respectively The twentieth test is run only in bit mode It tests some specific bit features of the DFA matching engine The twenty first and twenty second tests are run only in bit when the link size is set to for the bit library They test reloading pre compiled patterns The twenty third and twenty fourth tests are run only in bit mode They are for general and UTF respectively The twenty fifth and twenty sixth tests are run only in bit mode They are for general and UTF respectively Character tables For PCRE uses four tables for manipulating and identifying characters whose code point values are less than The final argument of the a set of default tables that is built into the binary is used The source file called pcre_chartables c contains the default set of tables By this is created as a copy of pcre_chartables c which contains tables for ASCII coding if enable rebuild chartables is specified for a different version of pcre_chartables c is built by the program which uses the ANSI C character handling functions such as etc to build the table sources This means that the default C locale which is set for your system will control the contents of these default tables You can change the default tables by editing pcre_chartables c and then re building PCRE If you do you should take care to ensure that the file does not get automatically re generated The best way to do this is to move pcre_chartables c dist out of the way and replace it with your customized tables When the dftables program is run as a result of enable rebuild it uses the default C locale that is set on your system It does not pay attention to the LC_xxx environment variables In other it uses the system s default locale rather than whatever the compiling user happens to have set If you really do want to build a source set of character tables in a locale that is specified by the LC_xxx variables</div><div class="ttdef"><b>Definition:</b> README.txt:809</div></div>
<div class="ttc" id="group__apr__pools_html_gad214fc0160de3c22b6435e29ea20fce8"><div class="ttname"><a href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a></div><div class="ttdeci">#define apr_pcalloc(p, size)</div><div class="ttdef"><b>Definition:</b> apr_pools.h:465</div></div>
<div class="ttc" id="structlua__db__result__set_html"><div class="ttname"><a href="structlua__db__result__set.html">lua_db_result_set</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:39</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="lua__dbd_8c_html_a76fb43685342aea7d448c0e517d6d9f6"><div class="ttname"><a href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6">lua_db_get_row</a></div><div class="ttdeci">int lua_db_get_row(lua_State *L)</div><div class="ttdef"><b>Definition:</b> lua_dbd.c:230</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_cgraph.png" border="0" usemap="#lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_cgraph" alt=""/></div>
<map name="lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_cgraph" id="lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_cgraph">
<area shape="rect" id="node2" href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6" title="lua_db_get_row" alt="" coords="212,5,325,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_icgraph.png" border="0" usemap="#lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_icgraph" id="lua__dbd_8h_a6d26da9532ecd489c2efd88cd3c8e344_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#ad94ffb0c1715dbc3608178c80ffa8957" title="lua_db_prepare" alt="" coords="212,5,323,32"/>
<area shape="rect" id="node3" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="371,31,488,57"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a736068a2c1c5ef1f7f290fbba4919671"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_query </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db = 0;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a> = 0;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3, LUA_TSTRING);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    statement = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        rc = apr_dbd_query(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, &amp;x, statement);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        rc = 0;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        x = -1;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        lua_pushnumber(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, x);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a> = apr_dbd_error(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, rc);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, err);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga4e2545dd013163aa26d4aa994db42fb6"><div class="ttname"><a href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a></div><div class="ttdeci">apr_dbd_t int const char * statement</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:271</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a736068a2c1c5ef1f7f290fbba4919671_icgraph.png" border="0" usemap="#lua__dbd_8h_a736068a2c1c5ef1f7f290fbba4919671_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a736068a2c1c5ef1f7f290fbba4919671_icgraph" id="lua__dbd_8h_a736068a2c1c5ef1f7f290fbba4919671_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="152,29,269,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0dcb52a2ca220180e7fcebc24bc29067"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> lua_db_select </td>
          <td>(</td>
          <td class="paramtype">lua_State *&#160;</td>
          <td class="paramname"><em>L</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="structlua__db__handle.html">lua_db_handle</a>   *db = 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>     <a class="code" href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a> = 0;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>      *<a class="code" href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="structrequest__rec.html">request_rec</a>     *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    r = ap_lua_check_request_rec(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 2);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (r) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        luaL_checktype(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3, LUA_TSTRING);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        statement = lua_tostring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 3);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        db = lua_get_db_handle(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">alive</a>) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordtype">int</span> cols;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="group__APR__Util__DBD.html#ga6765891011818912e1b52fef773bfce6">apr_dbd_results_t</a>   *<a class="code" href="NON-AUTOTOOLS-BUILD_8txt.html#a9237582cb59392bdaeda6c248df4441c">results</a> = 0;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <a class="code" href="structlua__db__result__set.html">lua_db_result_set</a>* resultset = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            rc = apr_dbd_select(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>,</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                &amp;results, statement, 0);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">if</span> (rc == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                </div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                cols = apr_dbd_num_cols(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, results);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                </div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">if</span> (cols &gt; 0) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    lua_newtable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    resultset = lua_newuserdata(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="keyword">sizeof</span>(<a class="code" href="structlua__db__result__set.html">lua_db_result_set</a>));</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    resultset-&gt;<a class="code" href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">cols</a> = cols;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    resultset-&gt;<a class="code" href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">driver</a> = db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    resultset-&gt;<a class="code" href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">pool</a> = db-&gt;<a class="code" href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">pool</a>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    resultset-&gt;<a class="code" href="structlua__db__result__set.html#ac148b93b6d46bb3ec85b08a31b9ff943">rows</a> = apr_dbd_num_tuples(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, results);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    resultset-&gt;<a class="code" href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">results</a> = <a class="code" href="NON-AUTOTOOLS-BUILD_8txt.html#a9237582cb59392bdaeda6c248df4441c">results</a>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    luaL_newmetatable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;lua_apr.dbselect&quot;</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    lua_pushliteral(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <span class="stringliteral">&quot;__call&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                    lua_pushcfunction(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, <a class="code" href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6">lua_db_get_row</a>);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    lua_rawset(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    lua_setmetatable(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -3);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    lua_rawseti(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, -2, 0);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a> = apr_dbd_error(db-&gt;<a class="code" href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">driver</a>, db-&gt;<a class="code" href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">handle</a>, rc);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="comment">/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                lua_pushnil(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    lua_pushstring(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, err);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        lua_pushboolean(<a class="code" href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a>, 0);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="ttc" id="group__APR__Util__DBD_html_ga6765891011818912e1b52fef773bfce6"><div class="ttname"><a href="group__APR__Util__DBD.html#ga6765891011818912e1b52fef773bfce6">apr_dbd_results_t</a></div><div class="ttdeci">struct apr_dbd_results_t apr_dbd_results_t</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:85</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="NON-AUTOTOOLS-BUILD_8txt_html_a9237582cb59392bdaeda6c248df4441c"><div class="ttname"><a href="NON-AUTOTOOLS-BUILD_8txt.html#a9237582cb59392bdaeda6c248df4441c">results</a></div><div class="ttdeci">building the test possibly other test programs in the build directory Pcre_test bat runs RunTest Bat with correct source and exe paths For manual testing with RunTest provided the build dir is a subdirectory of the source e chdir to the location of your bat and exe programs Run RunTest bat Test outputs will automatically be compared to expected results</div><div class="ttdef"><b>Definition:</b> NON-AUTOTOOLS-BUILD.txt:473</div></div>
<div class="ttc" id="structlua__db__handle_html_a41a6a7301da29e09088888b8922d4edc"><div class="ttname"><a href="structlua__db__handle.html#a41a6a7301da29e09088888b8922d4edc">lua_db_handle::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:31</div></div>
<div class="ttc" id="structlua__db__result__set_html_ac7cec3e26d666243ff37e16dcab7741c"><div class="ttname"><a href="structlua__db__result__set.html#ac7cec3e26d666243ff37e16dcab7741c">lua_db_result_set::cols</a></div><div class="ttdeci">int cols</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:42</div></div>
<div class="ttc" id="structlua__db__handle_html_a38b83f2e0af4f078f138f71d2f61001f"><div class="ttname"><a href="structlua__db__handle.html#a38b83f2e0af4f078f138f71d2f61001f">lua_db_handle::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:33</div></div>
<div class="ttc" id="structlua__db__handle_html_a947c85f9e009b088d612137192fd81c6"><div class="ttname"><a href="structlua__db__handle.html#a947c85f9e009b088d612137192fd81c6">lua_db_handle::handle</a></div><div class="ttdeci">apr_dbd_t * handle</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:30</div></div>
<div class="ttc" id="structlua__db__handle_html_acbd7286b520f2cc264aee3346d611533"><div class="ttname"><a href="structlua__db__handle.html#acbd7286b520f2cc264aee3346d611533">lua_db_handle::alive</a></div><div class="ttdeci">int alive</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:32</div></div>
<div class="ttc" id="structlua__db__result__set_html_a7c0855626d660e95ea027955e132f9c2"><div class="ttname"><a href="structlua__db__result__set.html#a7c0855626d660e95ea027955e132f9c2">lua_db_result_set::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:44</div></div>
<div class="ttc" id="structlua__db__result__set_html_a50834f059df4bede2b7f8ac193369f3c"><div class="ttname"><a href="structlua__db__result__set.html#a50834f059df4bede2b7f8ac193369f3c">lua_db_result_set::results</a></div><div class="ttdeci">apr_dbd_results_t * results</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:43</div></div>
<div class="ttc" id="structlua__db__result__set_html_ac148b93b6d46bb3ec85b08a31b9ff943"><div class="ttname"><a href="structlua__db__result__set.html#ac148b93b6d46bb3ec85b08a31b9ff943">lua_db_result_set::rows</a></div><div class="ttdeci">int rows</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:41</div></div>
<div class="ttc" id="mod__lua_8h_html_a62f94dfc0036bec0c14106c2f15caf3e"><div class="ttname"><a href="mod__lua_8h.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></div><div class="ttdeci">lua_State * L</div><div class="ttdef"><b>Definition:</b> mod_lua.h:169</div></div>
<div class="ttc" id="structlua__db__result__set_html_a1cc3e423226d7417726b1ad1359d56ba"><div class="ttname"><a href="structlua__db__result__set.html#a1cc3e423226d7417726b1ad1359d56ba">lua_db_result_set::driver</a></div><div class="ttdeci">const apr_dbd_driver_t * driver</div><div class="ttdef"><b>Definition:</b> lua_dbd.h:40</div></div>
<div class="ttc" id="group__APR__Util__DBD_html_ga4e2545dd013163aa26d4aa994db42fb6"><div class="ttname"><a href="group__APR__Util__DBD.html#ga4e2545dd013163aa26d4aa994db42fb6">statement</a></div><div class="ttdeci">apr_dbd_t int const char * statement</div><div class="ttdef"><b>Definition:</b> apr_dbd.h:271</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga2e051c0ce9ee165170cd7973f2464512"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga2e051c0ce9ee165170cd7973f2464512">rc</a></div><div class="ttdeci">ap_configfile_t apr_status_t rc</div><div class="ttdef"><b>Definition:</b> http_config.h:851</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="structrequest__rec_html"><div class="ttname"><a href="structrequest__rec.html">request_rec</a></div><div class="ttdoc">A structure that represents the current request. </div><div class="ttdef"><b>Definition:</b> ap.d:2</div></div>
<div class="ttc" id="structlua__db__handle_html"><div class="ttname"><a href="structlua__db__handle.html">lua_db_handle</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:28</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="structlua__db__result__set_html"><div class="ttname"><a href="structlua__db__result__set.html">lua_db_result_set</a></div><div class="ttdef"><b>Definition:</b> lua_dbd.h:39</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="lua__dbd_8c_html_a76fb43685342aea7d448c0e517d6d9f6"><div class="ttname"><a href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6">lua_db_get_row</a></div><div class="ttdeci">int lua_db_get_row(lua_State *L)</div><div class="ttdef"><b>Definition:</b> lua_dbd.c:230</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_cgraph.png" border="0" usemap="#lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_cgraph" alt=""/></div>
<map name="lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_cgraph" id="lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_cgraph">
<area shape="rect" id="node2" href="lua__dbd_8c.html#a76fb43685342aea7d448c0e517d6d9f6" title="lua_db_get_row" alt="" coords="156,5,269,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_icgraph.png" border="0" usemap="#lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_icgraph" alt=""/></div>
<map name="lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_icgraph" id="lua__dbd_8h_a0dcb52a2ca220180e7fcebc24bc29067_icgraph">
<area shape="rect" id="node2" href="lua__dbd_8h.html#a46ee364a00615b5ae4d6ec05322257c0" title="lua_db_prepared" alt="" coords="156,29,273,56"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
