<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: Shared Memory Routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Shared Memory Routines<div class="ingroups"><a class="el" href="group__APR.html">Apache Portability Runtime library</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Shared Memory Routines:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__apr__shm.png" border="0" alt="" usemap="#group____apr____shm"/>
<map name="group____apr____shm" id="group____apr____shm">
<area shape="rect" id="node2" href="group__APR.html" title="Apache Portability\l Runtime library" alt="" coords="5,5,133,47"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga47cc28ddc5f32cf904383b9e4f82825b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga47cc28ddc5f32cf904383b9e4f82825b">APR_SHM_NS_LOCAL</a></td></tr>
<tr class="separator:ga47cc28ddc5f32cf904383b9e4f82825b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0de8e4acab42e7ff8e35e5ac9620f667"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga0de8e4acab42e7ff8e35e5ac9620f667">APR_SHM_NS_GLOBAL</a></td></tr>
<tr class="separator:ga0de8e4acab42e7ff8e35e5ac9620f667"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga79e8c16bdeaf7ade4ef0f935249e7c2f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structapr__shm__t.html">apr_shm_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a></td></tr>
<tr class="separator:ga79e8c16bdeaf7ade4ef0f935249e7c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9556068323f037a43a12d5a786531bfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga9556068323f037a43a12d5a786531bfe">APR_DECLARE</a> (<a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>) apr_shm_create(<a class="el" href="structapr__shm__t.html">apr_shm_t</a> **<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a></td></tr>
<tr class="separator:ga9556068323f037a43a12d5a786531bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a32d22bb2597ba484dbfe0668e60caa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga4a32d22bb2597ba484dbfe0668e60caa">APR_DECLARE</a> (<a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *) apr_shm_baseaddr_get(const <a class="el" href="structapr__shm__t.html">apr_shm_t</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:ga4a32d22bb2597ba484dbfe0668e60caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga916236d26c53ae751c5e56e5ae9f3b09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga916236d26c53ae751c5e56e5ae9f3b09">APR_DECLARE</a> (<a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a>) apr_shm_size_get(const <a class="el" href="structapr__shm__t.html">apr_shm_t</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:ga916236d26c53ae751c5e56e5ae9f3b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf519a2435ffc3524a8b9ba0b67fe7aa5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#gaf519a2435ffc3524a8b9ba0b67fe7aa5">APR_PERMS_SET_IMPLEMENT</a> (<a class="el" href="group__apr__portabile.html#gadb5b80323e350ae97e0793c7ef27cde7">shm</a>)</td></tr>
<tr class="separator:gaf519a2435ffc3524a8b9ba0b67fe7aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f33ef81c957af596afa3417a4748d3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga2f33ef81c957af596afa3417a4748d3e">APR_POOL_DECLARE_ACCESSOR</a> (<a class="el" href="group__apr__portabile.html#gadb5b80323e350ae97e0793c7ef27cde7">shm</a>)</td></tr>
<tr class="separator:ga2f33ef81c957af596afa3417a4748d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab0526251505fe7f4db6377b7617e16d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#gab0526251505fe7f4db6377b7617e16d9">reqsize</a></td></tr>
<tr class="separator:gab0526251505fe7f4db6377b7617e16d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7efa5e9c7494c7d4586359300221aa5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga7efa5e9c7494c7d4586359300221aa5d">filename</a></td></tr>
<tr class="separator:ga7efa5e9c7494c7d4586359300221aa5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51fbc0d90e2519e2e42e03c5dd9f441b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> const char <a class="el" href="structapr__pool__t.html">apr_pool_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga51fbc0d90e2519e2e42e03c5dd9f441b">pool</a></td></tr>
<tr class="separator:ga51fbc0d90e2519e2e42e03c5dd9f441b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4da5463a54fc275129fa27f262592b0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> const char <a class="el" href="structapr__pool__t.html">apr_pool_t</a> <a class="el" href="group__apr__platform.html#ga21ef1e35fd3ff9be386f3cb20164ff02">apr_int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga4da5463a54fc275129fa27f262592b0c">flags</a></td></tr>
<tr class="separator:ga4da5463a54fc275129fa27f262592b0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga0de8e4acab42e7ff8e35e5ac9620f667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_SHM_NS_GLOBAL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">2 <span class="comment">/* Create or attach to named shared memory</span></div><div class="line"><span class="comment">                               * segment in the &quot;Global&quot; namespace on</span></div><div class="line"><span class="comment">                               * Windows.  (Ignored on other platforms.)</span></div><div class="line"><span class="comment">                               */</span></div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga47cc28ddc5f32cf904383b9e4f82825b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APR_SHM_NS_LOCAL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">1 <span class="comment">/* Create or attach to named shared memory</span></div><div class="line"><span class="comment">                               * segment in the &quot;Local&quot; namespace on</span></div><div class="line"><span class="comment">                               * Windows.  (Ignored on other platforms.)</span></div><div class="line"><span class="comment">                               * By default, the &quot;Global&quot; namespace is</span></div><div class="line"><span class="comment">                               * used for privileged processes and the</span></div><div class="line"><span class="comment">                               * &quot;Local&quot; namespace is used otherwise.</span></div><div class="line"><span class="comment">                               */</span></div></div><!-- fragment --><p>Special processing flags for apr_shm_create_ex() and apr_shm_attach_ex(). </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga79e8c16bdeaf7ade4ef0f935249e7c2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structapr__shm__t.html">apr_shm_t</a> <a class="el" href="structapr__shm__t.html">apr_shm_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Private, platform-specific data struture representing a shared memory segment. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9556068323f037a43a12d5a786531bfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APR_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and make accessible a shared memory segment with default properties. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory structure to create. </td></tr>
    <tr><td class="paramname">reqsize</td><td>The desired size of the segment. </td></tr>
    <tr><td class="paramname">filename</td><td>The file to use for shared memory on platforms that require it. </td></tr>
    <tr><td class="paramname">pool</td><td>the pool from which to allocate the shared memory structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>A note about Anonymous vs. Named shared memory segments: Not all plaforms support anonymous shared memory segments, but in some cases it is prefered over other types of shared memory implementations. Passing a NULL 'file' parameter to this function will cause the subsystem to use anonymous shared memory segments. If such a system is not available, APR_ENOTIMPL is returned. </dd>
<dd>
A note about allocation sizes: On some platforms it is necessary to store some metainformation about the segment within the actual segment. In order to supply the caller with the requested size it may be necessary for the implementation to request a slightly greater segment length from the subsystem. In all cases, the apr_shm_baseaddr_get() function will return the first usable byte of memory.</dd></dl>
<p>Create and make accessible a shared memory segment with platform- specific processing. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory structure to create. </td></tr>
    <tr><td class="paramname">reqsize</td><td>The desired size of the segment. </td></tr>
    <tr><td class="paramname">filename</td><td>The file to use for shared memory on platforms that require it. </td></tr>
    <tr><td class="paramname">pool</td><td>the pool from which to allocate the shared memory structure. </td></tr>
    <tr><td class="paramname">flags</td><td>mask of APR_SHM_* (defined above) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>A note about Anonymous vs. Named shared memory segments: Not all plaforms support anonymous shared memory segments, but in some cases it is prefered over other types of shared memory implementations. Passing a NULL 'file' parameter to this function will cause the subsystem to use anonymous shared memory segments. If such a system is not available, APR_ENOTIMPL is returned. </dd>
<dd>
A note about allocation sizes: On some platforms it is necessary to store some metainformation about the segment within the actual segment. In order to supply the caller with the requested size it may be necessary for the implementation to request a slightly greater segment length from the subsystem. In all cases, the apr_shm_baseaddr_get() function will return the first usable byte of memory.</dd></dl>
<p>Remove named resource associated with a shared memory segment, preventing attachments to the resource, but not destroying it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename associated with shared-memory segment which needs to be removed </td></tr>
    <tr><td class="paramname">pool</td><td>The pool used for file operations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is only supported on platforms which support name-based shared memory segments, and will return APR_ENOTIMPL on platforms without such support. Removing the file while the shm is in use is not entirely portable, caller may use this to enhance obscurity of the resource, but be prepared for the call to fail, and for concurrent attempts to create a resource of the same name to also fail. The pool cleanup of apr_shm_create (apr_shm_destroy) also removes the named resource.</dd></dl>
<p>Delete named resource associated with a shared memory segment, preventing attachments to the resource. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory segment structure to delete. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is only supported on platforms which support name-based shared memory segments, and will return APR_ENOTIMPL on platforms without such support. Removing the file while the shm is in use is not entirely portable, caller may use this to enhance obscurity of the resource, but be prepared for the call to fail, and for concurrent attempts to create a resource of the same name to also fail. The pool cleanup of apr_shm_create (apr_shm_destroy) also removes the named resource.</dd></dl>
<p>Destroy a shared memory segment and associated memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory segment structure to destroy.</td></tr>
  </table>
  </dd>
</dl>
<p>Attach to a shared memory segment that was created by another process. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory structure to create. </td></tr>
    <tr><td class="paramname">filename</td><td>The file used to create the original segment. (This MUST match the original filename.) </td></tr>
    <tr><td class="paramname">pool</td><td>the pool from which to allocate the shared memory structure for this process.</td></tr>
  </table>
  </dd>
</dl>
<p>Attach to a shared memory segment that was created by another process, with platform-specific processing. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory structure to create. </td></tr>
    <tr><td class="paramname">filename</td><td>The file used to create the original segment. (This MUST match the original filename.) </td></tr>
    <tr><td class="paramname">pool</td><td>the pool from which to allocate the shared memory structure for this process. </td></tr>
    <tr><td class="paramname">flags</td><td>mask of APR_SHM_* (defined above)</td></tr>
  </table>
  </dd>
</dl>
<p>Detach from a shared memory segment without destroying it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory structure representing the segment to detach from. </td></tr>
  </table>
  </dd>
</dl>
<p>The problem with trying to output the entire iovec is that we cannot maintain the behaviour that a real writev would have. If we iterate over the iovec one at a time, we lose the atomic properties of <a class="el" href="apr__arch__os2calls_8h.html#a3d0f3996136a9b5ab46431c60c746efd">writev()</a>. The other option is to combine the entire iovec into one buffer that we could then send in one call to write(). This is not reasonable since we do not know how much data an iovec could contain.</p>
<p>The only reasonable option, that maintains the semantics of a real <a class="el" href="apr__arch__os2calls_8h.html#a3d0f3996136a9b5ab46431c60c746efd">writev()</a>, is to only write the first iovec. Callers of file_writev() must deal with partial writes as they normally would. If you want to ensure an entire iovec is written, use apr_file_writev_full().</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div><div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4a32d22bb2597ba484dbfe0668e60caa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APR_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the base address of the shared memory segment. NOTE: This address is only usable within the callers address space, since this API does not guarantee that other attaching processes will maintain the same address mapping. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory segment from which to retrieve the base address. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>address, aligned by APR_ALIGN_DEFAULT. </dd></dl>

</div>
</div>
<a class="anchor" id="ga916236d26c53ae751c5e56e5ae9f3b09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APR_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the length of a shared memory segment in bytes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The shared memory segment from which to retrieve the segment length. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf519a2435ffc3524a8b9ba0b67fe7aa5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APR_PERMS_SET_IMPLEMENT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__portabile.html#gadb5b80323e350ae97e0793c7ef27cde7">shm</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set shared memory permissions. </p>
<div class="fragment"><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">#if APR_USE_SHMEM_SHMGET || APR_USE_SHMEM_SHMGET_ANON</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keyword">struct </span>shmid_ds shmbuf;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordtype">int</span> shmid;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="structapr__shm__t.html">apr_shm_t</a> *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a> = (<a class="code" href="structapr__shm__t.html">apr_shm_t</a> *)theshm;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> ((shmid = shmget(m-&gt;shmkey, 0, <a class="code" href="apr__arch__shm_8h.html#a45da2dbfb146e926c8fd842379c0362c">SHM_R</a> | <a class="code" href="apr__arch__shm_8h.html#afd00993215ed6030ec817bf3615044d1">SHM_W</a>)) == -1) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">return</span> errno;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    shmbuf.shm_perm.uid  = uid;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    shmbuf.shm_perm.gid  = gid;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    shmbuf.shm_perm.mode = <a class="code" href="unix_2fileacc_8c.html#a6ff1e968d4350cb1184ec6ed57ac3902">apr_unix_perms2mode</a>(<a class="code" href="group__apr__file__io.html#ga1a04dd4c8d58f3a54ba16d47d78ba04c">perms</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> (shmctl(shmid, IPC_SET, &amp;shmbuf) == -1) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">return</span> errno;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APR__Error.html#ga939ddb834a30bc9a5a0a329b13000161">APR_ENOTIMPL</a>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;}</div><div class="ttc" id="apr__arch__shm_8h_html_a45da2dbfb146e926c8fd842379c0362c"><div class="ttname"><a href="apr__arch__shm_8h.html#a45da2dbfb146e926c8fd842379c0362c">SHM_R</a></div><div class="ttdeci">#define SHM_R</div><div class="ttdef"><b>Definition:</b> apr_arch_shm.h:46</div></div>
<div class="ttc" id="structapr__shm__t_html"><div class="ttname"><a href="structapr__shm__t.html">apr_shm_t</a></div><div class="ttdef"><b>Definition:</b> apr_arch_shm.h:61</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1891337ee8668593918a50b9e04be486"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a></div><div class="ttdeci">const module * m</div><div class="ttdef"><b>Definition:</b> http_config.h:516</div></div>
<div class="ttc" id="group__apr__file__io_html_ga1a04dd4c8d58f3a54ba16d47d78ba04c"><div class="ttname"><a href="group__apr__file__io.html#ga1a04dd4c8d58f3a54ba16d47d78ba04c">perms</a></div><div class="ttdeci">const char apr_fileperms_t perms</div><div class="ttdef"><b>Definition:</b> apr_file_io.h:333</div></div>
<div class="ttc" id="unix_2fileacc_8c_html_a6ff1e968d4350cb1184ec6ed57ac3902"><div class="ttname"><a href="unix_2fileacc_8c.html#a6ff1e968d4350cb1184ec6ed57ac3902">apr_unix_perms2mode</a></div><div class="ttdeci">mode_t apr_unix_perms2mode(apr_fileperms_t perms)</div><div class="ttdef"><b>Definition:</b> fileacc.c:35</div></div>
<div class="ttc" id="group__APR__Error_html_ga939ddb834a30bc9a5a0a329b13000161"><div class="ttname"><a href="group__APR__Error.html#ga939ddb834a30bc9a5a0a329b13000161">APR_ENOTIMPL</a></div><div class="ttdeci">#define APR_ENOTIMPL</div><div class="ttdef"><b>Definition:</b> apr_errno.h:476</div></div>
<div class="ttc" id="apr__arch__shm_8h_html_afd00993215ed6030ec817bf3615044d1"><div class="ttname"><a href="apr__arch__shm_8h.html#afd00993215ed6030ec817bf3615044d1">SHM_W</a></div><div class="ttdeci">#define SHM_W</div><div class="ttdef"><b>Definition:</b> apr_arch_shm.h:49</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__apr__shm_gaf519a2435ffc3524a8b9ba0b67fe7aa5_cgraph.png" border="0" usemap="#group__apr__shm_gaf519a2435ffc3524a8b9ba0b67fe7aa5_cgraph" alt=""/></div>
<map name="group__apr__shm_gaf519a2435ffc3524a8b9ba0b67fe7aa5_cgraph" id="group__apr__shm_gaf519a2435ffc3524a8b9ba0b67fe7aa5_cgraph">
<area shape="rect" id="node2" href="unix_2fileacc_8c.html#a6ff1e968d4350cb1184ec6ed57ac3902" title="apr_unix_perms2mode" alt="" coords="276,5,429,32"/>
<area shape="rect" id="node3" href="group__apr__allocator.html#ga9cb19a118179bbd8625eacfec66a9ab8" title="APR_DECLARE" alt="" coords="292,56,413,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2f33ef81c957af596afa3417a4748d3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APR_POOL_DECLARE_ACCESSOR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__portabile.html#gadb5b80323e350ae97e0793c7ef27cde7">shm</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the pool used by this shared memory segment. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga7efa5e9c7494c7d4586359300221aa5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* filename</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga4da5463a54fc275129fa27f262592b0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="structapr__pool__t.html">apr_pool_t</a> <a class="el" href="group__apr__platform.html#ga21ef1e35fd3ff9be386f3cb20164ff02">apr_int32_t</a> flags</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga51fbc0d90e2519e2e42e03c5dd9f441b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="structapr__pool__t.html">apr_pool_t</a>* pool</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gab0526251505fe7f4db6377b7617e16d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> reqsize</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
