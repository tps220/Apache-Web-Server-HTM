<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: /usr/local/src/github/Codebase/httpd-2.4.29/modules/http2/h2_session.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2379abaa7725ab34fabdf9daa508e09.html">Codebase</a></li><li class="navelem"><a class="el" href="dir_db9466b59d24a02e023577068efc5d5d.html">httpd-2.4.29</a></li><li class="navelem"><a class="el" href="dir_04adba3a211bbed5210563c01b5ac160.html">modules</a></li><li class="navelem"><a class="el" href="dir_88c6c0aa9499ad45299b9aa3183f9c31.html">http2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">h2_session.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__thread__cond_8h_source.html">apr_thread_cond.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__base64_8h_source.html">apr_base64.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__strings_8h_source.html">apr_strings.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ap__mpm_8h_source.html">ap_mpm.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="httpd_8h_source.html">httpd.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="http__core_8h_source.html">http_core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="http__config_8h_source.html">http_config.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="http__log_8h_source.html">http_log.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="scoreboard_8h_source.html">scoreboard.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mpm__common_8h_source.html">mpm_common.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="h2__private_8h_source.html">h2_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2_8h_source.html">h2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__bucket__beam_8h_source.html">h2_bucket_beam.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__bucket__eos_8h_source.html">h2_bucket_eos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__config_8h_source.html">h2_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__ctx_8h_source.html">h2_ctx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__filter_8h_source.html">h2_filter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__h2_8h_source.html">h2_h2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__mplx_8h_source.html">h2_mplx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__push_8h_source.html">h2_push.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__request_8h_source.html">h2_request.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__headers_8h_source.html">h2_headers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__stream_8h_source.html">h2_stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__task_8h_source.html">h2_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__session_8h_source.html">h2_session.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__util_8h_source.html">h2_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__version_8h_source.html">h2_version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__workers_8h_source.html">h2_workers.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for h2_session.c:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2http2_2h2__session_8c" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2http2_2h2__session_8c" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2http2_2h2__session_8c">
<area shape="rect" id="node4" href="apr__thread__cond_8h.html" title="APR Condition Variable Routines. " alt="" coords="162,333,291,360"/>
<area shape="rect" id="node12" href="apr__base64_8h.html" title="APR&#45;UTIL Base64 Encoding. " alt="" coords="481,333,581,360"/>
<area shape="rect" id="node14" href="apr__strings_8h.html" title="APR Strings library. " alt="" coords="1651,408,1749,435"/>
<area shape="rect" id="node16" href="ap__mpm_8h.html" title="Apache Multi&#45;Processing Module library. " alt="" coords="1317,184,1400,211"/>
<area shape="rect" id="node18" href="httpd_8h.html" title="HTTP Daemon routines. " alt="" coords="946,259,1009,285"/>
<area shape="rect" id="node28" href="scoreboard_8h.html" title="Apache scoreboard library. " alt="" coords="1469,259,1566,285"/>
<area shape="rect" id="node29" href="http__config_8h.html" title="Apache Configuration. " alt="" coords="1622,333,1719,360"/>
<area shape="rect" id="node30" href="http__core_8h.html" title="CORE HTTP Daemon. " alt="" coords="1795,259,1882,285"/>
<area shape="rect" id="node31" href="http__log_8h.html" title="Apache Logging library. " alt="" coords="1590,259,1669,285"/>
<area shape="rect" id="node32" href="mpm__common_8h.html" title="Multi&#45;Processing Modules functions. " alt="" coords="1401,109,1519,136"/>
<area shape="rect" id="node33" href="h2__private_8h.html" title="h2_private.h" alt="" coords="565,184,659,211"/>
<area shape="rect" id="node34" href="h2_8h.html" title="h2.h" alt="" coords="2105,184,2151,211"/>
<area shape="rect" id="node35" href="h2__bucket__beam_8h.html" title="h2_bucket_beam.h" alt="" coords="2506,109,2638,136"/>
<area shape="rect" id="node36" href="h2__bucket__eos_8h.html" title="h2_bucket_eos.h" alt="" coords="2662,109,2783,136"/>
<area shape="rect" id="node37" href="h2__config_8h.html" title="h2_config.h" alt="" coords="2807,109,2897,136"/>
<area shape="rect" id="node38" href="h2__ctx_8h.html" title="h2_ctx.h" alt="" coords="2921,109,2993,136"/>
<area shape="rect" id="node39" href="h2__filter_8h.html" title="h2_filter.h" alt="" coords="3018,109,3097,136"/>
<area shape="rect" id="node40" href="h2__h2_8h.html" title="h2_h2.h" alt="" coords="3121,109,3189,136"/>
<area shape="rect" id="node41" href="h2__mplx_8h.html" title="h2_mplx.h" alt="" coords="3213,109,3296,136"/>
<area shape="rect" id="node42" href="h2__push_8h.html" title="h2_push.h" alt="" coords="1911,109,1993,136"/>
<area shape="rect" id="node43" href="h2__request_8h.html" title="h2_request.h" alt="" coords="2018,109,2115,136"/>
<area shape="rect" id="node44" href="h2__headers_8h.html" title="h2_headers.h" alt="" coords="2139,109,2239,136"/>
<area shape="rect" id="node45" href="h2__stream_8h.html" title="h2_stream.h" alt="" coords="2263,109,2358,136"/>
<area shape="rect" id="node46" href="h2__task_8h.html" title="h2_task.h" alt="" coords="1759,184,1838,211"/>
<area shape="rect" id="node47" href="h2__session_8h.html" title="h2_session.h" alt="" coords="2383,109,2481,136"/>
<area shape="rect" id="node48" href="h2__util_8h.html" title="h2_util.h" alt="" coords="3321,109,3391,136"/>
<area shape="rect" id="node49" href="h2__version_8h.html" title="h2_version.h" alt="" coords="3416,109,3512,136"/>
<area shape="rect" id="node50" href="h2__workers_8h.html" title="h2_workers.h" alt="" coords="3537,109,3637,136"/>
<area shape="rect" id="node5" href="apr_8h.html" title="APR Platform Definitions. " alt="" coords="859,707,909,733"/>
<area shape="rect" id="node6" href="apr__pools_8h.html" title="APR memory allocation. " alt="" coords="849,483,938,509"/>
<area shape="rect" id="node7" href="apr__errno_8h.html" title="APR Error Codes. " alt="" coords="801,632,887,659"/>
<area shape="rect" id="node10" href="apr__time_8h.html" title="APR Time Library. " alt="" coords="357,408,440,435"/>
<area shape="rect" id="node11" href="apr__thread__mutex_8h.html" title="APR Thread Mutex Routines. " alt="" coords="145,408,282,435"/>
<area shape="rect" id="node8" href="apr__general_8h.html" title="APR Miscellaneous library routines. " alt="" coords="686,557,786,584"/>
<area shape="rect" id="node9" href="apr__want_8h.html" title="APR Standard Headers Support. " alt="" coords="1217,557,1303,584"/>
<area shape="rect" id="node13" href="apu_8h.html" title="apu.h" alt="" coords="617,408,671,435"/>
<area shape="rect" id="node17" href="apr__thread__proc_8h.html" title="APR Thread and Process Library. " alt="" coords="1318,333,1445,360"/>
<area shape="rect" id="node19" href="ap__config_8h.html" title="Symbol export macros and hook functions. " alt="" coords="1419,408,1509,435"/>
<area shape="rect" id="node21" href="ap__mmn_8h.html" title="Module Magic Number. " alt="" coords="1040,333,1123,360"/>
<area shape="rect" id="node22" href="ap__release_8h.html" title="Version Release defines. " alt="" coords="1147,333,1243,360"/>
<area shape="rect" id="node23" href="apr__tables_8h.html" title="APR Table library. " alt="" coords="1533,408,1627,435"/>
<area shape="rect" id="node24" href="apr__network__io_8h.html" title="APR Network library. " alt="" coords="1001,408,1122,435"/>
<area shape="rect" id="node25" href="apr__buckets_8h.html" title="APR&#45;UTIL Buckets/Bucket Brigades. " alt="" coords="656,333,760,360"/>
<area shape="rect" id="node26" href="apr__poll_8h.html" title="APR Poll interface. " alt="" coords="835,333,914,360"/>
<area shape="rect" id="node27" href="ap__regex_8h.html" title="Apache Regex defines. " alt="" coords="479,632,566,659"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af10adf4bb19ec8d5d911d01fd3dfae8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#af10adf4bb19ec8d5d911d01fd3dfae8c">NGH2_SET_CALLBACK</a>(callbacks,  <a class="el" href="pcre_8txt.html#a5a15d68aadb41c771fe50a27c400d49b">name</a>,  fn)&#160;&#160;&#160;nghttp2_session_callbacks_set_##<a class="el" href="pcre_8txt.html#a5a15d68aadb41c771fe50a27c400d49b">name</a>##_callback(callbacks, fn)</td></tr>
<tr class="separator:af10adf4bb19ec8d5d911d01fd3dfae8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad1d4897f2aa846843b8de9c00e1c75b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#ad1d4897f2aa846843b8de9c00e1c75b3">h2_session_stream_get</a> (<a class="el" href="structh2__session.html">h2_session</a> *session, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> stream_id)</td></tr>
<tr class="separator:ad1d4897f2aa846843b8de9c00e1c75b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5584e45f2ba9a38c876f3ea1c59ee703"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a5584e45f2ba9a38c876f3ea1c59ee703">h2_session_event</a> (<a class="el" href="structh2__session.html">h2_session</a> *session, <a class="el" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0">h2_session_event_t</a> ev, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> <a class="el" href="group__apr__thread__proc.html#ga156fcecee9d33dd7b55c3d8fdaba7159">err</a>, const char *msg)</td></tr>
<tr class="separator:a5584e45f2ba9a38c876f3ea1c59ee703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affefcf731ecfbf2bad38b18e8f96c2c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#affefcf731ecfbf2bad38b18e8f96c2c2">h2_session_create</a> (<a class="el" href="structh2__session.html">h2_session</a> **psession, <a class="el" href="structconn__rec.html">conn_rec</a> *<a class="el" href="pcregrep_8txt.html#aef720ae5f62fa015619d00171d917416">c</a>, <a class="el" href="structh2__ctx.html">h2_ctx</a> *<a class="el" href="group__APR__Util__Bucket__Brigades.html#ga0525238c5b09cb4ac5067ddec654d09c">ctx</a>, <a class="el" href="structh2__workers.html">h2_workers</a> *workers)</td></tr>
<tr class="separator:affefcf731ecfbf2bad38b18e8f96c2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae9b0b4724f7687e798c40d6fec41b9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#aae9b0b4724f7687e798c40d6fec41b9d">h2_session_rcreate</a> (<a class="el" href="structh2__session.html">h2_session</a> **psession, <a class="el" href="structrequest__rec.html">request_rec</a> *<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, <a class="el" href="structh2__ctx.html">h2_ctx</a> *<a class="el" href="group__APR__Util__Bucket__Brigades.html#ga0525238c5b09cb4ac5067ddec654d09c">ctx</a>, <a class="el" href="structh2__workers.html">h2_workers</a> *workers)</td></tr>
<tr class="separator:aae9b0b4724f7687e798c40d6fec41b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963d3784514be3ea425a0cc87cf3aa42"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a963d3784514be3ea425a0cc87cf3aa42">h2_session_push</a> (<a class="el" href="structh2__session.html">h2_session</a> *session, <a class="el" href="structh2__stream.html">h2_stream</a> *<a class="el" href="NON-AUTOTOOLS-BUILD_8txt.html#a2569119f3fd3f0d7d7ecea3c96acb0bf">is</a>, <a class="el" href="structh2__push.html">h2_push</a> *push)</td></tr>
<tr class="separator:a963d3784514be3ea425a0cc87cf3aa42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f2507556c255cdde8cf388d0008ee88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88">h2_session_set_prio</a> (<a class="el" href="structh2__session.html">h2_session</a> *session, <a class="el" href="structh2__stream.html">h2_stream</a> *stream, const <a class="el" href="structh2__priority.html">h2_priority</a> *prio)</td></tr>
<tr class="separator:a8f2507556c255cdde8cf388d0008ee88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2827fca84388460b3e2859326a00a3c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a2827fca84388460b3e2859326a00a3c9">h2_session_push_enabled</a> (<a class="el" href="structh2__session.html">h2_session</a> *session)</td></tr>
<tr class="separator:a2827fca84388460b3e2859326a00a3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9a44308b54a90de8859bb96e30e81f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a9d9a44308b54a90de8859bb96e30e81f">h2_session_state_str</a> (<a class="el" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23">h2_session_state</a> state)</td></tr>
<tr class="separator:a9d9a44308b54a90de8859bb96e30e81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9533cdc782ecc1f1fb81b724fabd9e77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a9533cdc782ecc1f1fb81b724fabd9e77">h2_session_process</a> (<a class="el" href="structh2__session.html">h2_session</a> *session, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> async)</td></tr>
<tr class="separator:a9533cdc782ecc1f1fb81b724fabd9e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77565c06a2d392e20a290becdb7e7941"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__session_8c.html#a77565c06a2d392e20a290becdb7e7941">h2_session_pre_close</a> (<a class="el" href="structh2__session.html">h2_session</a> *session, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> async)</td></tr>
<tr class="separator:a77565c06a2d392e20a290becdb7e7941"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af10adf4bb19ec8d5d911d01fd3dfae8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NGH2_SET_CALLBACK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">callbacks, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="pcre_8txt.html#a5a15d68aadb41c771fe50a27c400d49b">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fn&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;nghttp2_session_callbacks_set_##<a class="el" href="pcre_8txt.html#a5a15d68aadb41c771fe50a27c400d49b">name</a>##_callback(callbacks, fn)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="affefcf731ecfbf2bad38b18e8f96c2c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_session_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> **&#160;</td>
          <td class="paramname"><em>psession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structconn__rec.html">conn_rec</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__ctx.html">h2_ctx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__workers.html">h2_workers</a> *&#160;</td>
          <td class="paramname"><em>workers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="structh2__session.html">h2_session</a> for the given connection. The session will apply the configured parameter. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psession</td><td>pointer receiving the created session on success or NULL </td></tr>
    <tr><td class="paramname">c</td><td>the connection to work on </td></tr>
    <tr><td class="paramname">cfg</td><td>the module config to apply </td></tr>
    <tr><td class="paramname">workers</td><td>the worker pool to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the created session </dd></dl>
<div class="fragment"><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;{</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">return</span> h2_session_create_int(psession, c, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, ctx, workers);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div><div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_affefcf731ecfbf2bad38b18e8f96c2c2_icgraph.png" border="0" usemap="#h2__session_8c_affefcf731ecfbf2bad38b18e8f96c2c2_icgraph" alt=""/></div>
<map name="h2__session_8c_affefcf731ecfbf2bad38b18e8f96c2c2_icgraph" id="h2__session_8c_affefcf731ecfbf2bad38b18e8f96c2c2_icgraph">
<area shape="rect" id="node2" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="184,31,295,57"/>
<area shape="rect" id="node3" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="343,5,492,32"/>
<area shape="rect" id="node4" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="365,56,470,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5584e45f2ba9a38c876f3ea1c59ee703"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> h2_session_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0">h2_session_event_t</a>&#160;</td>
          <td class="paramname"><em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    dispatch_event(session, ev, <a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a>, msg);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a5584e45f2ba9a38c876f3ea1c59ee703_cgraph.png" border="0" usemap="#h2__session_8c_a5584e45f2ba9a38c876f3ea1c59ee703_cgraph" alt=""/></div>
<map name="h2__session_8c_a5584e45f2ba9a38c876f3ea1c59ee703_cgraph" id="h2__session_8c_a5584e45f2ba9a38c876f3ea1c59ee703_cgraph">
<area shape="rect" id="node2" href="h2__stream_8c.html#a4effdcd018979447d61fc105a8812419" title="h2_stream_was_closed" alt="" coords="183,157,342,184"/>
<area shape="rect" id="node3" href="h2__stream_8c.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="424,512,529,539"/>
<area shape="rect" id="node15" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="1310,855,1357,881"/>
<area shape="rect" id="node21" href="h2__session_8c.html#ad1d4897f2aa846843b8de9c00e1c75b3" title="h2_session_stream_get" alt="" coords="1031,917,1191,944"/>
<area shape="rect" id="node24" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="1264,157,1403,184"/>
<area shape="rect" id="node27" href="h2__mplx_8c.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="193,208,332,235"/>
<area shape="rect" id="node31" href="h2__stream_8c.html#aaa815324e2d332c53518ac95a84aa3cb" title="h2_stream_create" alt="" coords="199,1019,326,1045"/>
<area shape="rect" id="node32" href="h2__conn__io_8c.html#a29897e348760daf0c4f06a1f8391843d" title="h2_conn_io_write" alt="" coords="201,1069,324,1096"/>
<area shape="rect" id="node33" href="h2__util_8c.html#aa86886d1d5dbebc1df9de9b7a9a84945" title="h2_util_frame_print" alt="" coords="197,1120,329,1147"/>
<area shape="rect" id="node34" href="h2__stream_8c.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="397,867,556,893"/>
<area shape="rect" id="node35" href="h2__h2_8c.html#a7389e3f2c590bc08b5c8010a3f3fed1f" title="h2_h2_err_description" alt="" coords="188,1171,337,1197"/>
<area shape="rect" id="node36" href="h2__stream_8c.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="184,689,341,716"/>
<area shape="rect" id="node41" href="h2__stream_8c.html#af677ccda05cf3d555f0a553fbcd319c7" title="h2_stream_recv_frame" alt="" coords="185,765,340,792"/>
<area shape="rect" id="node43" href="h2__mplx_8c.html#aa9d6f882e69d5d35224da320108ae06f" title="h2_mplx_has_master\l_events" alt="" coords="189,1222,336,1263"/>
<area shape="rect" id="node45" href="h2__conn__io_8c.html#acdbc26762ef153a1f7dfb602ab8b5215" title="h2_conn_io_needs_flush" alt="" coords="180,1288,345,1315"/>
<area shape="rect" id="node47" href="h2__stream_8c.html#abab64354e5a1840484a5120355ad2c65" title="h2_stream_read_to" alt="" coords="196,1339,329,1365"/>
<area shape="rect" id="node49" href="h2__conn__io_8c.html#abb57e15de53c4515ccbb0be4781492c4" title="h2_conn_io_pass" alt="" coords="201,1389,324,1416"/>
<area shape="rect" id="node50" href="h2__stream_8c.html#a1f03d52ba4d8385ae68e569b24750577" title="h2_stream_send_frame" alt="" coords="183,816,342,843"/>
<area shape="rect" id="node4" href="h2__bucket__beam_8c.html#a18fcdf460f20b412ce76dd68c93cdbe2" title="h2_beam_abort" alt="" coords="622,512,733,539"/>
<area shape="rect" id="node5" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="621,461,734,488"/>
<area shape="rect" id="node6" href="h2__stream_8c.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="608,664,747,691"/>
<area shape="rect" id="node7" href="h2__session_8c.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="795,563,970,589"/>
<area shape="rect" id="node8" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="1058,867,1165,893"/>
<area shape="rect" id="node26" href="h2__util_8c.html#ac28f57757be5e96803c3300e2caf94f4" title="h2_push_policy_determine" alt="" coords="795,664,971,691"/>
<area shape="rect" id="node9" href="unix_2sockopt_8c.html#aa32313b54afed590367c8571075d2bc1" title="apr_socket_timeout_get" alt="" coords="1031,360,1192,387"/>
<area shape="rect" id="node10" href="unix_2sockopt_8c.html#a945bdbe807ec5635d65a6fd9ddb78c29" title="apr_socket_timeout_set" alt="" coords="1031,411,1192,437"/>
<area shape="rect" id="node11" href="h2__util_8c.html#a6b44f7b0518d2c540d313e528994d1f0" title="h2_res_create_ngtrailer" alt="" coords="1033,461,1190,488"/>
<area shape="rect" id="node12" href="h2__stream_8c.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="1022,512,1201,539"/>
<area shape="rect" id="node13" href="h2__stream_8c.html#aa12615c37d60f4cbc50ef3455eb4b77b" title="h2_stream_get_priority" alt="" coords="1034,563,1189,589"/>
<area shape="rect" id="node14" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88" title="h2_session_set_prio" alt="" coords="1041,816,1182,843"/>
<area shape="rect" id="node16" href="h2__headers_8c.html#a09ef8b60a6dcb5092fbf6c5b436fb00b" title="h2_headers_copy" alt="" coords="1049,613,1173,640"/>
<area shape="rect" id="node17" href="h2__util_8c.html#a1f8a1d013fda7e98be914213de199edf" title="h2_res_create_ngheader" alt="" coords="1029,664,1193,691"/>
<area shape="rect" id="node18" href="h2__headers_8c.html#ac241e59095a6600f7a10ddb103ecbe04" title="h2_headers_are_response" alt="" coords="1024,715,1199,741"/>
<area shape="rect" id="node19" href="h2__stream_8c.html#ab0939d34133abdcf905f5e8879e63cc1" title="h2_stream_out_prepare" alt="" coords="1032,259,1191,285"/>
<area shape="rect" id="node20" href="h2__util_8c.html#ae4c244854d49bc3a4a3f4b5f14c1b696" title="h2_iq_shift" alt="" coords="1291,728,1376,755"/>
<area shape="rect" id="node22" href="h2__stream_8c.html#a15066acf068a7b151f01f384d517ebdc" title="h2_stream_prep_processing" alt="" coords="1019,309,1204,336"/>
<area shape="rect" id="node23" href="h2__mplx_8c.html#af6c35070795724a55320fd46e77f1ec2" title="h2_mplx_process" alt="" coords="1049,208,1173,235"/>
<area shape="rect" id="node25" href="h2__bucket__beam_8c.html#a6d193e70e5d65e51644687e2e0c03762" title="h2_beam_on_consumed" alt="" coords="1252,81,1415,108"/>
<area shape="rect" id="node28" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="427,157,526,184"/>
<area shape="rect" id="node29" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="399,208,554,235"/>
<area shape="rect" id="node30" href="h2__stream_8c.html#a72e8d2062416e6e7f289eca09126f2e3" title="h2_stream_set_monitor" alt="" coords="397,5,556,32"/>
<area shape="rect" id="node37" href="h2__util_8c.html#ac810c1727dd262912822c65b45f437a9" title="h2_req_create" alt="" coords="425,664,529,691"/>
<area shape="rect" id="node38" href="h2__request_8c.html#a4e6c539529b00fe81973a1a79d300a90" title="h2_request_add_header" alt="" coords="397,765,557,792"/>
<area shape="rect" id="node40" href="h2__headers_8c.html#a3f558a0fa1dca03ad53cf32abbf92a10" title="h2_bucket_headers_get" alt="" coords="397,613,557,640"/>
<area shape="rect" id="node39" href="h2__util_8c.html#a411d190ee50bf03285ec1643482d5e53" title="h2_req_add_header" alt="" coords="610,765,745,792"/>
<area shape="rect" id="node42" href="h2__request_8c.html#a293f05d6f5a2c7aa4221468c7723a237" title="h2_request_end_headers" alt="" coords="393,816,560,843"/>
<area shape="rect" id="node44" href="atomic_8c.html#afba4de90e113d26536cff48418689771" title="apr_atomic_read32" alt="" coords="411,1229,543,1256"/>
<area shape="rect" id="node46" href="h2__util_8c.html#acc3586eb7679ec8f609cd5dd517faf27" title="h2_brigade_mem_size" alt="" coords="401,1288,553,1315"/>
<area shape="rect" id="node48" href="h2__util_8c.html#a15f3cc8f6c6453a39874a2d5c0e1cefa" title="h2_append_brigade" alt="" coords="409,1339,544,1365"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a77565c06a2d392e20a290becdb7e7941"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_session_pre_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>async</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Last chance to do anything before the connection is closed. </p>
<div class="fragment"><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;{</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    </div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>, </div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                  <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, <span class="stringliteral">&quot;pre_close&quot;</span>));</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a0c1d95376209697e4a5ca32a85ced7d6">H2_SESSION_EV_PRE_CLOSE</a>, 0, </div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        (session-&gt;<a class="code" href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">state</a> == <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f">H2_SESSION_ST_IDLE</a>)? <span class="stringliteral">&quot;timeout&quot;</span> : <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    status = session_cleanup(session, <span class="stringliteral">&quot;pre_close&quot;</span>);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        <span class="comment">/* no one should hold a reference to this session any longer and</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment">         * the h2_ctx was removed from the connection.</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment">         * Take the pool (and thus all subpools etc. down now, instead of</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment">         * during cleanup of main connection pool. */</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        apr_pool_destroy(session-&gt;<a class="code" href="structh2__session.html#afdf0f242195dccfd3dca1bd779620cfb">pool</a>);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="structh2__session_html_abe17a5d4b3c3f9e796b73ec004edb72f"><div class="ttname"><a href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">h2_session::state</a></div><div class="ttdeci">h2_session_state state</div><div class="ttdef"><b>Definition:</b> h2_session.h:89</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="h2__session_8h_html_a81438cdc00363115c17b2dab73c2b74c"><div class="ttname"><a href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a></div><div class="ttdeci">#define H2_SSSN_MSG(s, msg)</div><div class="ttdef"><b>Definition:</b> h2_session.h:218</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0a0c1d95376209697e4a5ca32a85ced7d6"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a0c1d95376209697e4a5ca32a85ced7d6">H2_SESSION_EV_PRE_CLOSE</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:71</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="structh2__session_html_afdf0f242195dccfd3dca1bd779620cfb"><div class="ttname"><a href="structh2__session.html#afdf0f242195dccfd3dca1bd779620cfb">h2_session::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> h2_session.h:82</div></div>
<div class="ttc" id="structh2__session_html_abeacbf3e093a3fc5d67609497c82daba"><div class="ttname"><a href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">h2_session::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_session.h:77</div></div>
<div class="ttc" id="h2_8h_html_ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f"><div class="ttname"><a href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f">H2_SESSION_ST_IDLE</a></div><div class="ttdef"><b>Definition:</b> h2.h:86</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a77565c06a2d392e20a290becdb7e7941_icgraph.png" border="0" usemap="#h2__session_8c_a77565c06a2d392e20a290becdb7e7941_icgraph" alt=""/></div>
<map name="h2__session_8c_a77565c06a2d392e20a290becdb7e7941_icgraph" id="h2__session_8c_a77565c06a2d392e20a290becdb7e7941_icgraph">
<area shape="rect" id="node2" href="h2__conn_8h.html#a2f4d600f45ab5ac86f3491ba0bc73c3b" title="h2_conn_pre_close" alt="" coords="204,5,339,32"/>
<area shape="rect" id="node3" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="387,5,536,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9533cdc782ecc1f1fb81b724fabd9e77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_session_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>async</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process the given HTTP/2 session until it is ended or a fatal error occurred.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>the sessionm to process </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;{</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a> = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="structconn__rec.html">conn_rec</a> *<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a> = session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="keywordtype">int</span> rv, mpm_state, trace = <a class="code" href="group__APACHE__CORE__LOG.html#gaaaa8ecc04f897a759c5125e4a3b3ddf8">APLOGctrace3</a>(c);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">if</span> (trace) {</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>( <a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                      <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, <span class="stringliteral">&quot;process start, async=%d&quot;</span>), async);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    }</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                  </div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="keywordflow">while</span> (session-&gt;<a class="code" href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">state</a> != <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a">H2_SESSION_ST_DONE</a>) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        session-&gt;<a class="code" href="structh2__session.html#abc16a59b34afed1ea2a9297107b01229">have_read</a> = session-&gt;<a class="code" href="structh2__session.html#ab8e651535bc36b8db8768471332ce4fa">have_written</a> = 0;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="keywordflow">if</span> (session-&gt;<a class="code" href="structh2__session.html#ac2afb4ae0d9cfc53e91067652dac716c">local</a>.<a class="code" href="structh2__session__props.html#a22f923106761ebfd0e35a62d8882adfa">accepting</a> </div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            &amp;&amp; !ap_mpm_query(<a class="code" href="group__APACHE__CORE__MPM.html#ga23b4d0d157612a17d54685fcd97d0341">AP_MPMQ_MPM_STATE</a>, &amp;mpm_state)) {</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="keywordflow">if</span> (mpm_state == <a class="code" href="group__APACHE__CORE__MPM.html#gafca606af8b4b151e421cd073c8467b5e">AP_MPMQ_STOPPING</a>) {</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ab0163f29f0c99eaffc1245751210982b">H2_SESSION_EV_MPM_STOPPING</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            }</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        }</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        </div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        session-&gt;<a class="code" href="structh2__session.html#ab11699f2c77d30c38703009499a31708">status</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        </div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <span class="keywordflow">switch</span> (session-&gt;<a class="code" href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">state</a>) {</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a0a3db723fb0e2dab7d44851002954e2e">H2_SESSION_ST_INIT</a>:</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                ap_update_child_status_from_conn(c-&gt;<a class="code" href="structconn__rec.html#af0e434bcb2a0a47c13e94069431fb281">sbh</a>, <a class="code" href="scoreboard_8h.html#a55668fe45849951342100533d909b9d8">SERVER_BUSY_READ</a>, c);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="h2__h2_8c.html#a10ac5d94730f9852a030b4eb0336fab2">h2_is_acceptable_connection</a>(c, 1)) {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                    update_child_status(session, <a class="code" href="scoreboard_8h.html#a55668fe45849951342100533d909b9d8">SERVER_BUSY_READ</a>, </div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                                        <span class="stringliteral">&quot;inadequate security&quot;</span>);</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                    h2_session_shutdown(session, </div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                                        NGHTTP2_INADEQUATE_SECURITY, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, 1);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                } </div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                    update_child_status(session, <a class="code" href="scoreboard_8h.html#a55668fe45849951342100533d909b9d8">SERVER_BUSY_READ</a>, <span class="stringliteral">&quot;init&quot;</span>);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                    status = h2_session_start(session, &amp;rv);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, status, c, </div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                                  <a class="code" href="h2__session_8h.html#a28df7ff9f5f9745ac52f65e5f216ed1f">H2_SSSN_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03079), session, </div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                                  <span class="stringliteral">&quot;started on %s:%d&quot;</span>), </div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                                  session-&gt;<a class="code" href="structh2__session.html#ad1d64aadf7d723fce3f895b708fb8e8e">s</a>-&gt;<a class="code" href="structserver__rec.html#aa4841163cff5e708d1e125ccbbd5fe35">server_hostname</a>,</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                                  c-&gt;<a class="code" href="structconn__rec.html#a221970681f89eb91eaa5ae591b606dd5">local_addr</a>-&gt;<a class="code" href="structapr__sockaddr__t.html#a174c19138de9c208f13ed71b5892e505">port</a>);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                        dispatch_event(session, </div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                       <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                    }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                    dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a4af6f7af504b7f2d87a1dc06a5bfe37c">H2_SESSION_EV_INIT</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                </div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f">H2_SESSION_ST_IDLE</a>:</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                <span class="comment">/* We trust our connection into the default timeout/keepalive</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">                 * handling of the core filters/mpm iff:</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">                 * - keep_sync_until is not set</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">                 * - we have an async mpm</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment">                 * - we have no open streams to process</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="comment">                 * - we are not sitting on a Upgrade: request</span></div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="comment">                 * - we already have seen at least one request</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="structh2__session.html#a821fc14674cab8fc3ed1388876fd9522">keep_sync_until</a> &amp;&amp; async &amp;&amp; !session-&gt;<a class="code" href="structh2__session.html#a604a5590a0033434c6def4d0ce7b4cfc">open_streams</a></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                    &amp;&amp; !session-&gt;<a class="code" href="structh2__session.html#abd4313edcb03e33b65e6aa0cd3aa9d45">r</a> &amp;&amp; session-&gt;<a class="code" href="structh2__session.html#a80fcd5b884ec0b7fb15339beda197f99">remote</a>.<a class="code" href="structh2__session__props.html#ae41fe68312a954de095d51f8dfe822d0">emitted_count</a>) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                    <span class="keywordflow">if</span> (trace) {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                                      <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, </div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                                      <span class="stringliteral">&quot;nonblock read, %d streams open&quot;</span>), </div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                                      session-&gt;<a class="code" href="structh2__session.html#a604a5590a0033434c6def4d0ce7b4cfc">open_streams</a>);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                    }</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                    <a class="code" href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66">h2_conn_io_flush</a>(&amp;session-&gt;<a class="code" href="structh2__session.html#a04388fcbed566fdfc1b39df649b9b171">io</a>);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                    status = h2_session_read(session, 0);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                    </div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                    <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                        session-&gt;<a class="code" href="structh2__session.html#abc16a59b34afed1ea2a9297107b01229">have_read</a> = 1;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a">H2_SESSION_EV_DATA_READ</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                    }</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga9dd578bfcd76a2d997395608ae5b3a4e">APR_STATUS_IS_EAGAIN</a>(status) </div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                        || <a class="code" href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a>(status)) {</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                        <span class="keywordflow">if</span> (apr_time_now() &gt; session-&gt;<a class="code" href="structh2__session.html#afd1f0cce4dfac9f26e4eee799db2051e">idle_until</a>) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                            dispatch_event(session, </div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                                           <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac1d3f30f2c3781fd3f12d0cc108e424c">H2_SESSION_EV_CONN_TIMEOUT</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                        }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                            status = <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                            <span class="keywordflow">goto</span> <a class="code" href="group__APACHE__CORE__MUTEX.html#gac9982b93474ad913f3fcbdcff95accf4">out</a>;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                        }</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                    }</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, status, c,</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                                      <a class="code" href="h2__session_8h.html#a28df7ff9f5f9745ac52f65e5f216ed1f">H2_SSSN_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03403), session, </div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                                      <span class="stringliteral">&quot;no data, error&quot;</span>));</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                        dispatch_event(session, </div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                                       <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <span class="stringliteral">&quot;timeout&quot;</span>);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                    }</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                }</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                    <span class="comment">/* make certain, we send everything before we idle */</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                    <a class="code" href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66">h2_conn_io_flush</a>(&amp;session-&gt;<a class="code" href="structh2__session.html#a04388fcbed566fdfc1b39df649b9b171">io</a>);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                    <span class="keywordflow">if</span> (trace) {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                                      <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, </div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                                      <span class="stringliteral">&quot;sync, stutter 1-sec, %d streams open&quot;</span>), </div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                                      session-&gt;<a class="code" href="structh2__session.html#a604a5590a0033434c6def4d0ce7b4cfc">open_streams</a>);</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                    }</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                    <span class="comment">/* We wait in smaller increments, using a 1 second timeout.</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment">                     * That gives us the chance to check for MPMQ_STOPPING often. </span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                    status = <a class="code" href="h2__mplx_8c.html#ab27042bae0b8cddb8049073f3153d28f">h2_mplx_idle</a>(session-&gt;<a class="code" href="structh2__session.html#a79ed4d816ae7efbb0f109875350c7b42">mplx</a>);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                    <span class="keywordflow">if</span> (status == <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>) {</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a">H2_SESSION_EV_DATA_READ</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                    }</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, </div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                                       <a class="code" href="h2_8h.html#acb37a714e7d3b6d5f3206d06663ea0f9">H2_ERR_ENHANCE_YOUR_CALM</a>, <span class="stringliteral">&quot;less is more&quot;</span>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                    }</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                    <a class="code" href="h2__filter_8c.html#ac5868ab658a0d4a121eb506ae7c95dce">h2_filter_cin_timeout_set</a>(session-&gt;<a class="code" href="structh2__session.html#a769e774a574d53062823fe2d798e060f">cin</a>, <a class="code" href="group__apr__time.html#gaec56c2c03299a750006bfcc08d64ec32">apr_time_from_sec</a>(1));</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                    status = h2_session_read(session, 1);</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                    <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                        session-&gt;<a class="code" href="structh2__session.html#abc16a59b34afed1ea2a9297107b01229">have_read</a> = 1;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a">H2_SESSION_EV_DATA_READ</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                    }</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>) {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                        <span class="comment">/* nothing to read */</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                    }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a>(status)) {</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                        <a class="code" href="group__apr__time.html#gadb4bde16055748190eae190c55aa02bb">apr_time_t</a> <a class="code" href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a> = apr_time_now();</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                        <span class="keywordflow">if</span> (now &gt; session-&gt;<a class="code" href="structh2__session.html#a821fc14674cab8fc3ed1388876fd9522">keep_sync_until</a>) {</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                            <span class="comment">/* if we are on an async mpm, now is the time that</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment">                             * we may dare to pass control to it. */</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                            session-&gt;<a class="code" href="structh2__session.html#a821fc14674cab8fc3ed1388876fd9522">keep_sync_until</a> = 0;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                        }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                        <span class="keywordflow">if</span> (now &gt; session-&gt;<a class="code" href="structh2__session.html#afd1f0cce4dfac9f26e4eee799db2051e">idle_until</a>) {</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                            <span class="keywordflow">if</span> (trace) {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                                <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                                              <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, </div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                              <span class="stringliteral">&quot;keepalive timeout&quot;</span>));</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                            }</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                            dispatch_event(session, </div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                                           <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac1d3f30f2c3781fd3f12d0cc108e424c">H2_SESSION_EV_CONN_TIMEOUT</a>, 0, <span class="stringliteral">&quot;timeout&quot;</span>);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                        }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trace) {                        </div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                                          <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, </div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                                          <span class="stringliteral">&quot;keepalive, %f sec left&quot;</span>),</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                                          (session-&gt;<a class="code" href="structh2__session.html#afd1f0cce4dfac9f26e4eee799db2051e">idle_until</a> - now) / 1000000.0f);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                        }</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                        <span class="comment">/* continue reading handling */</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                    }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga528a8032b13c75fbdeb9bf7e4c0be493">APR_STATUS_IS_ECONNABORTED</a>(status)</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                             || <a class="code" href="group__APR__STATUS__IS.html#ga85e2cb1b4c904a9edfbc0d94203f76b6">APR_STATUS_IS_ECONNRESET</a>(status)</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                             || <a class="code" href="group__APR__STATUS__IS.html#gaf4232cd96b47b76aec9607b1a78e694f">APR_STATUS_IS_EOF</a>(status)</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                             || <a class="code" href="group__APR__STATUS__IS.html#gaa843153a73806cca500287940e9f175f">APR_STATUS_IS_EBADF</a>(status)) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>( <a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                                      <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, <span class="stringliteral">&quot;input gone&quot;</span>));</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                    }</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>( <a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                                      <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, </div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                                      <span class="stringliteral">&quot;(1 sec timeout) read failed&quot;</span>));</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <span class="stringliteral">&quot;error&quot;</span>);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                    }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                </div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23afac442216da590ca0627605c1560bc32">H2_SESSION_ST_BUSY</a>:</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                <span class="keywordflow">if</span> (nghttp2_session_want_read(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>)) {</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                    ap_update_child_status(session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>-&gt;<a class="code" href="structconn__rec.html#af0e434bcb2a0a47c13e94069431fb281">sbh</a>, <a class="code" href="scoreboard_8h.html#a55668fe45849951342100533d909b9d8">SERVER_BUSY_READ</a>, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                    <a class="code" href="h2__filter_8c.html#ac5868ab658a0d4a121eb506ae7c95dce">h2_filter_cin_timeout_set</a>(session-&gt;<a class="code" href="structh2__session.html#a769e774a574d53062823fe2d798e060f">cin</a>, session-&gt;<a class="code" href="structh2__session.html#ad1d64aadf7d723fce3f895b708fb8e8e">s</a>-&gt;<a class="code" href="structserver__rec.html#a34ba2512b6d2d1bdb08ca9bff3615b80">timeout</a>);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                    status = h2_session_read(session, 0);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                    <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                        session-&gt;<a class="code" href="structh2__session.html#abc16a59b34afed1ea2a9297107b01229">have_read</a> = 1;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a">H2_SESSION_EV_DATA_READ</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                    }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                        <span class="comment">/* nothing to read */</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                    }</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a>(status)) {</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac1d3f30f2c3781fd3f12d0cc108e424c">H2_SESSION_EV_CONN_TIMEOUT</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                    }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                    }</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                }</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                status = dispatch_master(session);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a> &amp;&amp; status != <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                }</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                </div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                <span class="keywordflow">if</span> (nghttp2_session_want_write(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>)) {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                    ap_update_child_status(session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>-&gt;<a class="code" href="structconn__rec.html#af0e434bcb2a0a47c13e94069431fb281">sbh</a>, <a class="code" href="scoreboard_8h.html#a4c26e0aa55b3f58f5ba6bd02427ce4a7">SERVER_BUSY_WRITE</a>, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                    status = h2_session_send(session);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                    <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                        status = <a class="code" href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66">h2_conn_io_flush</a>(&amp;session-&gt;<a class="code" href="structh2__session.html#a04388fcbed566fdfc1b39df649b9b171">io</a>);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                    }</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                    <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, </div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                                       <a class="code" href="h2_8h.html#ae86a4b0a36a9976dd5e3060ea32d8023">H2_ERR_INTERNAL_ERROR</a>, <span class="stringliteral">&quot;writing&quot;</span>);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                    }</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                }</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                </div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                <span class="keywordflow">if</span> (session-&gt;<a class="code" href="structh2__session.html#abc16a59b34afed1ea2a9297107b01229">have_read</a> || session-&gt;<a class="code" href="structh2__session.html#ab8e651535bc36b8db8768471332ce4fa">have_written</a>) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                    <span class="keywordflow">if</span> (session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a>) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                        session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a> = 0;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                    }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!nghttp2_session_want_write(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>)) {</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                    dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ae8ddb77bc626c3eafd2961651b7a7016">H2_SESSION_EV_NO_IO</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                }</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                </div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23aed0488740dd43777c78552ce5381f4fe">H2_SESSION_ST_WAIT</a>:</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                <span class="keywordflow">if</span> (session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a> &lt;= 0) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                    session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a> = 10;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66">h2_conn_io_flush</a>(&amp;session-&gt;<a class="code" href="structh2__session.html#a04388fcbed566fdfc1b39df649b9b171">io</a>) != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                    }</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    <span class="comment">/* repeating, increase timer for graceful backoff */</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                    session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a> = <a class="code" href="h2_8h.html#acd3215da569b00c8a029a4810bd48f50">H2MIN</a>(session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a>*2, MAX_WAIT_MICROS);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                }</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                <span class="keywordflow">if</span> (trace) {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, 0, c,</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                                  <span class="stringliteral">&quot;h2_session: wait for data, %ld micros&quot;</span>, </div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                                  (<span class="keywordtype">long</span>)session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a>);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                status = <a class="code" href="h2__mplx_8c.html#a0dafa503789e4dd6aaa7bdb906905721">h2_mplx_out_trywait</a>(session-&gt;<a class="code" href="structh2__session.html#a79ed4d816ae7efbb0f109875350c7b42">mplx</a>, session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a>, </div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                                             session-&gt;<a class="code" href="structh2__session.html#ab9866598c740b22aa6019a36e531b421">iowait</a>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                    session-&gt;<a class="code" href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">wait_us</a> = 0;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                    dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a">H2_SESSION_EV_DATA_READ</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                }</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a>(status)) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                    <span class="comment">/* go back to checking all inputs again */</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                    transit(session, <span class="stringliteral">&quot;wait cycle&quot;</span>, session-&gt;<a class="code" href="structh2__session.html#ac2afb4ae0d9cfc53e91067652dac716c">local</a>.<a class="code" href="structh2__session__props.html#a14a0cc8252ddce4163ab21728177d060">shutdown</a>? </div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                            <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a">H2_SESSION_ST_DONE</a> : <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23afac442216da590ca0627605c1560bc32">H2_SESSION_ST_BUSY</a>);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                }</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga85e2cb1b4c904a9edfbc0d94203f76b6">APR_STATUS_IS_ECONNRESET</a>(status) </div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                         || <a class="code" href="group__APR__STATUS__IS.html#ga528a8032b13c75fbdeb9bf7e4c0be493">APR_STATUS_IS_ECONNABORTED</a>(status)) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                    dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                }</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga73e14aeff380a8a01c66d528162026fe">APLOG_WARNING</a>, status, c,</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                                  <a class="code" href="h2__session_8h.html#a28df7ff9f5f9745ac52f65e5f216ed1f">H2_SSSN_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03404), session, </div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                                  <span class="stringliteral">&quot;waiting on conditional&quot;</span>));</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                    h2_session_shutdown(session, <a class="code" href="h2_8h.html#ae86a4b0a36a9976dd5e3060ea32d8023">H2_ERR_INTERNAL_ERROR</a>, </div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                                        <span class="stringliteral">&quot;cond wait error&quot;</span>, 0);</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                }</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                </div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a>, <a class="code" href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a>, c,</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                              <a class="code" href="h2__session_8h.html#a28df7ff9f5f9745ac52f65e5f216ed1f">H2_SSSN_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03080), session, </div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                              <span class="stringliteral">&quot;unknown state&quot;</span>));</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a8c3e8f97ea774beec650313676ccae25">H2_SESSION_EV_PROTO_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">if</span> (!nghttp2_session_want_read(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>) </div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                 &amp;&amp; !nghttp2_session_want_write(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>)) {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a0d84128988e6fb32338b86ee27fe33d0">H2_SESSION_EV_NGH2_DONE</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>); </div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        }</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <span class="keywordflow">if</span> (session-&gt;<a class="code" href="structh2__session.html#a33f68aadb94445194546fc611380a203">reprioritize</a>) {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            <a class="code" href="h2__mplx_8c.html#ae4ec6ad53087e52140a02bf7fa4b238e">h2_mplx_reprioritize</a>(session-&gt;<a class="code" href="structh2__session.html#a79ed4d816ae7efbb0f109875350c7b42">mplx</a>, stream_pri_cmp, session);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;            session-&gt;<a class="code" href="structh2__session.html#a33f68aadb94445194546fc611380a203">reprioritize</a> = 0;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    }</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    </div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<a class="code" href="group__APACHE__CORE__MUTEX.html#gac9982b93474ad913f3fcbdcff95accf4">out</a>:</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordflow">if</span> (trace) {</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>( <a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a>, status, c,</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                      <a class="code" href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a>(session, <span class="stringliteral">&quot;process returns&quot;</span>)); </div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    }</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    </div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">if</span> ((session-&gt;<a class="code" href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">state</a> != <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a">H2_SESSION_ST_DONE</a>)</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        &amp;&amp; (<a class="code" href="group__APR__STATUS__IS.html#gaf4232cd96b47b76aec9607b1a78e694f">APR_STATUS_IS_EOF</a>(status)</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            || <a class="code" href="group__APR__STATUS__IS.html#ga85e2cb1b4c904a9edfbc0d94203f76b6">APR_STATUS_IS_ECONNRESET</a>(status) </div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            || <a class="code" href="group__APR__STATUS__IS.html#ga528a8032b13c75fbdeb9bf7e4c0be493">APR_STATUS_IS_ECONNABORTED</a>(status))) {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;        dispatch_event(session, <a class="code" href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a>, 0, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    }</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="keywordflow">return</span> (session-&gt;<a class="code" href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">state</a> == <a class="code" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a">H2_SESSION_ST_DONE</a>)? <a class="code" href="group__APR__Error.html#ga35d9dca2514c522a2840aca0f3e2ebd3">APR_EOF</a> : <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div><div class="ttc" id="structconn__rec_html_af0e434bcb2a0a47c13e94069431fb281"><div class="ttname"><a href="structconn__rec.html#af0e434bcb2a0a47c13e94069431fb281">conn_rec::sbh</a></div><div class="ttdeci">void * sbh</div><div class="ttdef"><b>Definition:</b> httpd.h:1140</div></div>
<div class="ttc" id="structh2__session__props_html_a14a0cc8252ddce4163ab21728177d060"><div class="ttname"><a href="structh2__session__props.html#a14a0cc8252ddce4163ab21728177d060">h2_session_props::shutdown</a></div><div class="ttdeci">unsigned int shutdown</div><div class="ttdef"><b>Definition:</b> h2.h:99</div></div>
<div class="ttc" id="structh2__session_html_add0721875b1a24e581d276149984af8f"><div class="ttname"><a href="structh2__session.html#add0721875b1a24e581d276149984af8f">h2_session::ngh2</a></div><div class="ttdeci">struct nghttp2_session * ngh2</div><div class="ttdef"><b>Definition:</b> h2_session.h:87</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0adea20e3148e8ee8e30c06469b6b5a6a3">H2_SESSION_EV_CONN_ERROR</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:64</div></div>
<div class="ttc" id="structh2__session_html_ab11699f2c77d30c38703009499a31708"><div class="ttname"><a href="structh2__session.html#ab11699f2c77d30c38703009499a31708">h2_session::status</a></div><div class="ttdeci">char status[64]</div><div class="ttdef"><b>Definition:</b> h2_session.h:125</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga57ad94ed8c92c4306de90479251a5d58"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a></div><div class="ttdeci">#define APLOG_ERR</div><div class="ttdef"><b>Definition:</b> http_log.h:46</div></div>
<div class="ttc" id="structh2__session_html_a769e774a574d53062823fe2d798e060f"><div class="ttname"><a href="structh2__session.html#a769e774a574d53062823fe2d798e060f">h2_session::cin</a></div><div class="ttdeci">struct h2_filter_cin * cin</div><div class="ttdef"><b>Definition:</b> h2_session.h:85</div></div>
<div class="ttc" id="structh2__session_html_abd4313edcb03e33b65e6aa0cd3aa9d45"><div class="ttname"><a href="structh2__session.html#abd4313edcb03e33b65e6aa0cd3aa9d45">h2_session::r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> h2_session.h:78</div></div>
<div class="ttc" id="group__apr__time_html_gaec56c2c03299a750006bfcc08d64ec32"><div class="ttname"><a href="group__apr__time.html#gaec56c2c03299a750006bfcc08d64ec32">apr_time_from_sec</a></div><div class="ttdeci">#define apr_time_from_sec(sec)</div><div class="ttdef"><b>Definition:</b> apr_time.h:79</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7cce37ef8558e46f408cb4d0f555605b"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> http_core.h:849</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__filter_8c_html_ac5868ab658a0d4a121eb506ae7c95dce"><div class="ttname"><a href="h2__filter_8c.html#ac5868ab658a0d4a121eb506ae7c95dce">h2_filter_cin_timeout_set</a></div><div class="ttdeci">void h2_filter_cin_timeout_set(h2_filter_cin *cin, apr_interval_time_t timeout)</div><div class="ttdef"><b>Definition:</b> h2_filter.c:124</div></div>
<div class="ttc" id="group__APR__Error_html_ga18f5678bea0c2c704a2b6a186c9e158b"><div class="ttname"><a href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a></div><div class="ttdeci">#define APR_EGENERAL</div><div class="ttdef"><b>Definition:</b> apr_errno.h:313</div></div>
<div class="ttc" id="scoreboard_8h_html_a55668fe45849951342100533d909b9d8"><div class="ttname"><a href="scoreboard_8h.html#a55668fe45849951342100533d909b9d8">SERVER_BUSY_READ</a></div><div class="ttdeci">#define SERVER_BUSY_READ</div><div class="ttdef"><b>Definition:</b> scoreboard.h:59</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga23b4d0d157612a17d54685fcd97d0341"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga23b4d0d157612a17d54685fcd97d0341">AP_MPMQ_MPM_STATE</a></div><div class="ttdeci">#define AP_MPMQ_MPM_STATE</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:144</div></div>
<div class="ttc" id="h2__mplx_8c_html_ab27042bae0b8cddb8049073f3153d28f"><div class="ttname"><a href="h2__mplx_8c.html#ab27042bae0b8cddb8049073f3153d28f">h2_mplx_idle</a></div><div class="ttdeci">apr_status_t h2_mplx_idle(h2_mplx *m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:985</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0a8c3e8f97ea774beec650313676ccae25"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a8c3e8f97ea774beec650313676ccae25">H2_SESSION_EV_PROTO_ERROR</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:65</div></div>
<div class="ttc" id="structserver__rec_html_a34ba2512b6d2d1bdb08ca9bff3615b80"><div class="ttname"><a href="structserver__rec.html#a34ba2512b6d2d1bdb08ca9bff3615b80">server_rec::timeout</a></div><div class="ttdeci">apr_interval_time_t timeout</div><div class="ttdef"><b>Definition:</b> httpd.h:1309</div></div>
<div class="ttc" id="structh2__session_html_a34ee9d398f9b88dbf2c3ee53ee97875a"><div class="ttname"><a href="structh2__session.html#a34ee9d398f9b88dbf2c3ee53ee97875a">h2_session::wait_us</a></div><div class="ttdeci">apr_interval_time_t wait_us</div><div class="ttdef"><b>Definition:</b> h2_session.h:98</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gadfcef90537539cf2b7d35cfbbbafeb93"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a></div><div class="ttdeci">#define APLOG_DEBUG</div><div class="ttdef"><b>Definition:</b> http_log.h:50</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0ac1d3f30f2c3781fd3f12d0cc108e424c"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac1d3f30f2c3781fd3f12d0cc108e424c">H2_SESSION_EV_CONN_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:66</div></div>
<div class="ttc" id="structserver__rec_html_aa4841163cff5e708d1e125ccbbd5fe35"><div class="ttname"><a href="structserver__rec.html#aa4841163cff5e708d1e125ccbbd5fe35">server_rec::server_hostname</a></div><div class="ttdeci">char * server_hostname</div><div class="ttdef"><b>Definition:</b> httpd.h:1302</div></div>
<div class="ttc" id="h2_8h_html_ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a"><div class="ttname"><a href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a7920e1f9e5ddf03d5297ffb07871cf0a">H2_SESSION_ST_DONE</a></div><div class="ttdef"><b>Definition:</b> h2.h:85</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_ga864b207719c86ac4deeba696943262d0"><div class="ttname"><a href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a></div><div class="ttdeci">#define APR_STATUS_IS_TIMEUP(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:534</div></div>
<div class="ttc" id="structh2__session_html_abe17a5d4b3c3f9e796b73ec004edb72f"><div class="ttname"><a href="structh2__session.html#abe17a5d4b3c3f9e796b73ec004edb72f">h2_session::state</a></div><div class="ttdeci">h2_session_state state</div><div class="ttdef"><b>Definition:</b> h2_session.h:89</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="h2__session_8h_html_a81438cdc00363115c17b2dab73c2b74c"><div class="ttname"><a href="h2__session_8h.html#a81438cdc00363115c17b2dab73c2b74c">H2_SSSN_MSG</a></div><div class="ttdeci">#define H2_SSSN_MSG(s, msg)</div><div class="ttdef"><b>Definition:</b> h2_session.h:218</div></div>
<div class="ttc" id="structh2__session__props_html_a22f923106761ebfd0e35a62d8882adfa"><div class="ttname"><a href="structh2__session__props.html#a22f923106761ebfd0e35a62d8882adfa">h2_session_props::accepting</a></div><div class="ttdeci">unsigned int accepting</div><div class="ttdef"><b>Definition:</b> h2.h:98</div></div>
<div class="ttc" id="group__MOD__CACHE_html_ga33504014e188d5d7506173cc14fb5801"><div class="ttname"><a href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a></div><div class="ttdeci">const apr_time_t apr_time_t now</div><div class="ttdef"><b>Definition:</b> mod_cache.h:131</div></div>
<div class="ttc" id="structh2__session__props_html_ae41fe68312a954de095d51f8dfe822d0"><div class="ttname"><a href="structh2__session__props.html#ae41fe68312a954de095d51f8dfe822d0">h2_session_props::emitted_count</a></div><div class="ttdeci">int emitted_count</div><div class="ttdef"><b>Definition:</b> h2.h:95</div></div>
<div class="ttc" id="structconn__rec_html"><div class="ttname"><a href="structconn__rec.html">conn_rec</a></div><div class="ttdoc">Structure to store things which are per connection. </div><div class="ttdef"><b>Definition:</b> httpd.h:1093</div></div>
<div class="ttc" id="structconn__rec_html_a221970681f89eb91eaa5ae591b606dd5"><div class="ttname"><a href="structconn__rec.html#a221970681f89eb91eaa5ae591b606dd5">conn_rec::local_addr</a></div><div class="ttdeci">apr_sockaddr_t * local_addr</div><div class="ttdef"><b>Definition:</b> httpd.h:1103</div></div>
<div class="ttc" id="h2_8h_html_ae86a4b0a36a9976dd5e3060ea32d8023"><div class="ttname"><a href="h2_8h.html#ae86a4b0a36a9976dd5e3060ea32d8023">H2_ERR_INTERNAL_ERROR</a></div><div class="ttdeci">#define H2_ERR_INTERNAL_ERROR</div><div class="ttdef"><b>Definition:</b> h2.h:27</div></div>
<div class="ttc" id="h2__conn__io_8c_html_a8b40cf67d79195745379a7cdbcfd3d66"><div class="ttname"><a href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66">h2_conn_io_flush</a></div><div class="ttdeci">apr_status_t h2_conn_io_flush(h2_conn_io *io)</div><div class="ttdef"><b>Definition:</b> h2_conn_io.c:301</div></div>
<div class="ttc" id="structh2__session_html_ad1d64aadf7d723fce3f895b708fb8e8e"><div class="ttname"><a href="structh2__session.html#ad1d64aadf7d723fce3f895b708fb8e8e">h2_session::s</a></div><div class="ttdeci">server_rec * s</div><div class="ttdef"><b>Definition:</b> h2_session.h:80</div></div>
<div class="ttc" id="group__apr__time_html_gadb4bde16055748190eae190c55aa02bb"><div class="ttname"><a href="group__apr__time.html#gadb4bde16055748190eae190c55aa02bb">apr_time_t</a></div><div class="ttdeci">apr_int64_t apr_time_t</div><div class="ttdef"><b>Definition:</b> apr_time.h:46</div></div>
<div class="ttc" id="h2_8h_html_ae2ebe57b68f1b311a5abbdb970061f23a0a3db723fb0e2dab7d44851002954e2e"><div class="ttname"><a href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a0a3db723fb0e2dab7d44851002954e2e">H2_SESSION_ST_INIT</a></div><div class="ttdef"><b>Definition:</b> h2.h:84</div></div>
<div class="ttc" id="h2_8h_html_ae2ebe57b68f1b311a5abbdb970061f23aed0488740dd43777c78552ce5381f4fe"><div class="ttname"><a href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23aed0488740dd43777c78552ce5381f4fe">H2_SESSION_ST_WAIT</a></div><div class="ttdef"><b>Definition:</b> h2.h:88</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_gaf4232cd96b47b76aec9607b1a78e694f"><div class="ttname"><a href="group__APR__STATUS__IS.html#gaf4232cd96b47b76aec9607b1a78e694f">APR_STATUS_IS_EOF</a></div><div class="ttdeci">#define APR_STATUS_IS_EOF(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:567</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="h2_8h_html_acd3215da569b00c8a029a4810bd48f50"><div class="ttname"><a href="h2_8h.html#acd3215da569b00c8a029a4810bd48f50">H2MIN</a></div><div class="ttdeci">#define H2MIN(x, y)</div><div class="ttdef"><b>Definition:</b> h2.h:63</div></div>
<div class="ttc" id="h2__h2_8c_html_a10ac5d94730f9852a030b4eb0336fab2"><div class="ttname"><a href="h2__h2_8c.html#a10ac5d94730f9852a030b4eb0336fab2">h2_is_acceptable_connection</a></div><div class="ttdeci">int h2_is_acceptable_connection(conn_rec *c, int require_all)</div><div class="ttdef"><b>Definition:</b> h2_h2.c:467</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_gafca606af8b4b151e421cd073c8467b5e"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#gafca606af8b4b151e421cd073c8467b5e">AP_MPMQ_STOPPING</a></div><div class="ttdeci">#define AP_MPMQ_STOPPING</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:130</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_gaa843153a73806cca500287940e9f175f"><div class="ttname"><a href="group__APR__STATUS__IS.html#gaa843153a73806cca500287940e9f175f">APR_STATUS_IS_EBADF</a></div><div class="ttdeci">#define APR_STATUS_IS_EBADF(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:1264</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gaaaa8ecc04f897a759c5125e4a3b3ddf8"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gaaaa8ecc04f897a759c5125e4a3b3ddf8">APLOGctrace3</a></div><div class="ttdeci">#define APLOGctrace3(c)</div><div class="ttdef"><b>Definition:</b> http_log.h:259</div></div>
<div class="ttc" id="structh2__session_html_ab8e651535bc36b8db8768471332ce4fa"><div class="ttname"><a href="structh2__session.html#ab8e651535bc36b8db8768471332ce4fa">h2_session::have_written</a></div><div class="ttdeci">unsigned int have_written</div><div class="ttdef"><b>Definition:</b> h2_session.h:97</div></div>
<div class="ttc" id="structh2__session_html_ab9866598c740b22aa6019a36e531b421"><div class="ttname"><a href="structh2__session.html#ab9866598c740b22aa6019a36e531b421">h2_session::iowait</a></div><div class="ttdeci">struct apr_thread_cond_t * iowait</div><div class="ttdef"><b>Definition:</b> h2_session.h:123</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga73e14aeff380a8a01c66d528162026fe"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga73e14aeff380a8a01c66d528162026fe">APLOG_WARNING</a></div><div class="ttdeci">#define APLOG_WARNING</div><div class="ttdef"><b>Definition:</b> http_log.h:47</div></div>
<div class="ttc" id="structh2__session_html_afd1f0cce4dfac9f26e4eee799db2051e"><div class="ttname"><a href="structh2__session.html#afd1f0cce4dfac9f26e4eee799db2051e">h2_session::idle_until</a></div><div class="ttdeci">apr_time_t idle_until</div><div class="ttdef"><b>Definition:</b> h2_session.h:119</div></div>
<div class="ttc" id="structh2__session_html_abeacbf3e093a3fc5d67609497c82daba"><div class="ttname"><a href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">h2_session::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_session.h:77</div></div>
<div class="ttc" id="h2__session_8h_html_a28df7ff9f5f9745ac52f65e5f216ed1f"><div class="ttname"><a href="h2__session_8h.html#a28df7ff9f5f9745ac52f65e5f216ed1f">H2_SSSN_LOG</a></div><div class="ttdeci">#define H2_SSSN_LOG(aplogno, s, msg)</div><div class="ttdef"><b>Definition:</b> h2_session.h:222</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_ga85e2cb1b4c904a9edfbc0d94203f76b6"><div class="ttname"><a href="group__APR__STATUS__IS.html#ga85e2cb1b4c904a9edfbc0d94203f76b6">APR_STATUS_IS_ECONNRESET</a></div><div class="ttdeci">#define APR_STATUS_IS_ECONNRESET(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:1308</div></div>
<div class="ttc" id="structh2__session_html_a604a5590a0033434c6def4d0ce7b4cfc"><div class="ttname"><a href="structh2__session.html#a604a5590a0033434c6def4d0ce7b4cfc">h2_session::open_streams</a></div><div class="ttdeci">int open_streams</div><div class="ttdef"><b>Definition:</b> h2_session.h:103</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0ae8ddb77bc626c3eafd2961651b7a7016"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ae8ddb77bc626c3eafd2961651b7a7016">H2_SESSION_EV_NO_IO</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:67</div></div>
<div class="ttc" id="structh2__session_html_abc16a59b34afed1ea2a9297107b01229"><div class="ttname"><a href="structh2__session.html#abc16a59b34afed1ea2a9297107b01229">h2_session::have_read</a></div><div class="ttdeci">unsigned int have_read</div><div class="ttdef"><b>Definition:</b> h2_session.h:96</div></div>
<div class="ttc" id="h2_8h_html_ae2ebe57b68f1b311a5abbdb970061f23afac442216da590ca0627605c1560bc32"><div class="ttname"><a href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23afac442216da590ca0627605c1560bc32">H2_SESSION_ST_BUSY</a></div><div class="ttdef"><b>Definition:</b> h2.h:87</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ac0c74219a6280718a18e15839668268a">H2_SESSION_EV_DATA_READ</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:68</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0a4af6f7af504b7f2d87a1dc06a5bfe37c"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a4af6f7af504b7f2d87a1dc06a5bfe37c">H2_SESSION_EV_INIT</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:61</div></div>
<div class="ttc" id="structh2__session_html_a04388fcbed566fdfc1b39df649b9b171"><div class="ttname"><a href="structh2__session.html#a04388fcbed566fdfc1b39df649b9b171">h2_session::io</a></div><div class="ttdeci">h2_conn_io io</div><div class="ttdef"><b>Definition:</b> h2_session.h:86</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga5e4f134ae2203dd339774d9549d814db"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga5e4f134ae2203dd339774d9549d814db">APLOG_TRACE3</a></div><div class="ttdeci">#define APLOG_TRACE3</div><div class="ttdef"><b>Definition:</b> http_log.h:53</div></div>
<div class="ttc" id="h2__mplx_8c_html_ae4ec6ad53087e52140a02bf7fa4b238e"><div class="ttname"><a href="h2__mplx_8c.html#ae4ec6ad53087e52140a02bf7fa4b238e">h2_mplx_reprioritize</a></div><div class="ttdeci">apr_status_t h2_mplx_reprioritize(h2_mplx *m, h2_stream_pri_cmp *cmp, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:637</div></div>
<div class="ttc" id="h2_8h_html_ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f"><div class="ttname"><a href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23a2387451088141be9daff4c8370b0f31f">H2_SESSION_ST_IDLE</a></div><div class="ttdef"><b>Definition:</b> h2.h:86</div></div>
<div class="ttc" id="structh2__session_html_ac2afb4ae0d9cfc53e91067652dac716c"><div class="ttname"><a href="structh2__session.html#ac2afb4ae0d9cfc53e91067652dac716c">h2_session::local</a></div><div class="ttdeci">h2_session_props local</div><div class="ttdef"><b>Definition:</b> h2_session.h:91</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0a0d84128988e6fb32338b86ee27fe33d0"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0a0d84128988e6fb32338b86ee27fe33d0">H2_SESSION_EV_NGH2_DONE</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:69</div></div>
<div class="ttc" id="h2__session_8h_html_a808086b3c1dc629ff4cbcf45a2b722c0ab0163f29f0c99eaffc1245751210982b"><div class="ttname"><a href="h2__session_8h.html#a808086b3c1dc629ff4cbcf45a2b722c0ab0163f29f0c99eaffc1245751210982b">H2_SESSION_EV_MPM_STOPPING</a></div><div class="ttdef"><b>Definition:</b> h2_session.h:70</div></div>
<div class="ttc" id="group__APR__Error_html_ga35d9dca2514c522a2840aca0f3e2ebd3"><div class="ttname"><a href="group__APR__Error.html#ga35d9dca2514c522a2840aca0f3e2ebd3">APR_EOF</a></div><div class="ttdeci">#define APR_EOF</div><div class="ttdef"><b>Definition:</b> apr_errno.h:461</div></div>
<div class="ttc" id="group__APR__Error_html_ga0b2a5ebb819de5ce93d326939b586578"><div class="ttname"><a href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a></div><div class="ttdeci">#define APR_EAGAIN</div><div class="ttdef"><b>Definition:</b> apr_errno.h:730</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="structh2__session_html_a821fc14674cab8fc3ed1388876fd9522"><div class="ttname"><a href="structh2__session.html#a821fc14674cab8fc3ed1388876fd9522">h2_session::keep_sync_until</a></div><div class="ttdeci">apr_time_t keep_sync_until</div><div class="ttdef"><b>Definition:</b> h2_session.h:120</div></div>
<div class="ttc" id="structh2__session_html_a80fcd5b884ec0b7fb15339beda197f99"><div class="ttname"><a href="structh2__session.html#a80fcd5b884ec0b7fb15339beda197f99">h2_session::remote</a></div><div class="ttdeci">h2_session_props remote</div><div class="ttdef"><b>Definition:</b> h2_session.h:92</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga1dee8a07e06bc5b3de8b89662c2cd666"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a></div><div class="ttdeci">#define APLOGNO(n)</div><div class="ttdef"><b>Definition:</b> http_log.h:117</div></div>
<div class="ttc" id="structapr__sockaddr__t_html_a174c19138de9c208f13ed71b5892e505"><div class="ttname"><a href="structapr__sockaddr__t.html#a174c19138de9c208f13ed71b5892e505">apr_sockaddr_t::port</a></div><div class="ttdeci">apr_port_t port</div><div class="ttdef"><b>Definition:</b> apr_network_io.h:274</div></div>
<div class="ttc" id="h2_8h_html_acb37a714e7d3b6d5f3206d06663ea0f9"><div class="ttname"><a href="h2_8h.html#acb37a714e7d3b6d5f3206d06663ea0f9">H2_ERR_ENHANCE_YOUR_CALM</a></div><div class="ttdeci">#define H2_ERR_ENHANCE_YOUR_CALM</div><div class="ttdef"><b>Definition:</b> h2.h:36</div></div>
<div class="ttc" id="scoreboard_8h_html_a4c26e0aa55b3f58f5ba6bd02427ce4a7"><div class="ttname"><a href="scoreboard_8h.html#a4c26e0aa55b3f58f5ba6bd02427ce4a7">SERVER_BUSY_WRITE</a></div><div class="ttdeci">#define SERVER_BUSY_WRITE</div><div class="ttdef"><b>Definition:</b> scoreboard.h:60</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_ga528a8032b13c75fbdeb9bf7e4c0be493"><div class="ttname"><a href="group__APR__STATUS__IS.html#ga528a8032b13c75fbdeb9bf7e4c0be493">APR_STATUS_IS_ECONNABORTED</a></div><div class="ttdeci">#define APR_STATUS_IS_ECONNABORTED(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:1304</div></div>
<div class="ttc" id="structh2__session_html_a79ed4d816ae7efbb0f109875350c7b42"><div class="ttname"><a href="structh2__session.html#a79ed4d816ae7efbb0f109875350c7b42">h2_session::mplx</a></div><div class="ttdeci">struct h2_mplx * mplx</div><div class="ttdef"><b>Definition:</b> h2_session.h:83</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_ga9dd578bfcd76a2d997395608ae5b3a4e"><div class="ttname"><a href="group__APR__STATUS__IS.html#ga9dd578bfcd76a2d997395608ae5b3a4e">APR_STATUS_IS_EAGAIN</a></div><div class="ttdeci">#define APR_STATUS_IS_EAGAIN(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:1272</div></div>
<div class="ttc" id="group__APACHE__CORE__MUTEX_html_gac9982b93474ad913f3fcbdcff95accf4"><div class="ttname"><a href="group__APACHE__CORE__MUTEX.html#gac9982b93474ad913f3fcbdcff95accf4">out</a></div><div class="ttdeci">server_rec apr_file_t * out</div><div class="ttdef"><b>Definition:</b> util_mutex.h:216</div></div>
<div class="ttc" id="h2__mplx_8c_html_a0dafa503789e4dd6aaa7bdb906905721"><div class="ttname"><a href="h2__mplx_8c.html#a0dafa503789e4dd6aaa7bdb906905721">h2_mplx_out_trywait</a></div><div class="ttdeci">apr_status_t h2_mplx_out_trywait(h2_mplx *m, apr_interval_time_t timeout, apr_thread_cond_t *iowait)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:595</div></div>
<div class="ttc" id="structh2__session_html_a33f68aadb94445194546fc611380a203"><div class="ttname"><a href="structh2__session.html#a33f68aadb94445194546fc611380a203">h2_session::reprioritize</a></div><div class="ttdeci">unsigned int reprioritize</div><div class="ttdef"><b>Definition:</b> h2_session.h:94</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_cgraph.png" border="0" usemap="#h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_cgraph" alt=""/></div>
<map name="h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_cgraph" id="h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_cgraph">
<area shape="rect" id="node2" href="h2__h2_8c.html#a10ac5d94730f9852a030b4eb0336fab2" title="h2_is_acceptable_connection" alt="" coords="195,81,388,108"/>
<area shape="rect" id="node9" href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66" title="h2_conn_io_flush" alt="" coords="230,208,353,235"/>
<area shape="rect" id="node10" href="h2__mplx_8c.html#ab27042bae0b8cddb8049073f3153d28f" title="h2_mplx_idle" alt="" coords="242,385,341,412"/>
<area shape="rect" id="node20" href="h2__filter_8c.html#ac5868ab658a0d4a121eb506ae7c95dce" title="h2_filter_cin_timeout_set" alt="" coords="208,693,375,720"/>
<area shape="rect" id="node21" href="h2__mplx_8c.html#a0dafa503789e4dd6aaa7bdb906905721" title="h2_mplx_out_trywait" alt="" coords="220,643,363,669"/>
<area shape="rect" id="node26" href="h2__mplx_8c.html#ae4ec6ad53087e52140a02bf7fa4b238e" title="h2_mplx_reprioritize" alt="" coords="222,259,361,285"/>
<area shape="rect" id="node3" href="h2__h2_8c.html#a12023c300181338f92ad597347c0b0b7" title="h2_h2_is_tls" alt="" coords="466,5,561,32"/>
<area shape="rect" id="node4" href="h2__config_8c.html#ac97ca2f2308ef90b2506673564f9352a" title="h2_config_get" alt="" coords="462,56,565,83"/>
<area shape="rect" id="node7" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="460,107,567,133"/>
<area shape="rect" id="node5" href="h2__ctx_8c.html#ac4ce31e55232ccac0c4fb72064dad547" title="h2_ctx_get" alt="" coords="669,5,756,32"/>
<area shape="rect" id="node6" href="h2__config_8c.html#a0c0f1e9706b7426cb14a63a08420e03d" title="h2_config_sget" alt="" coords="657,56,768,83"/>
<area shape="rect" id="node8" href="h2__config_8c.html#a51b0c2c10599587f54770a555258d209" title="h2_config_geti64" alt="" coords="653,107,773,133"/>
<area shape="rect" id="node11" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01" title="h2_ihash_count" alt="" coords="457,309,570,336"/>
<area shape="rect" id="node12" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="465,259,561,285"/>
<area shape="rect" id="node13" href="h2__util_8c.html#af155ca0df68858b7a59389e74e43afa7" title="h2_iq_count" alt="" coords="467,360,559,387"/>
<area shape="rect" id="node14" href="h2__util_8c.html#abaadc1445c5689f8dfb1ddaa94b3f8ee" title="h2_ihash_shift" alt="" coords="460,411,567,437"/>
<area shape="rect" id="node17" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="462,461,565,488"/>
<area shape="rect" id="node18" href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304" title="h2_beam_is_closed" alt="" coords="445,512,582,539"/>
<area shape="rect" id="node19" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="436,563,591,589"/>
<area shape="rect" id="node15" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="663,537,762,564"/>
<area shape="rect" id="node16" href="h2__util_8c.html#a44c7ebba8d690ecdaccf908c9c9c9efb" title="h2_ihash_remove_val" alt="" coords="639,411,787,437"/>
<area shape="rect" id="node22" href="h2__mplx_8c.html#aa9d6f882e69d5d35224da320108ae06f" title="h2_mplx_has_master\l_events" alt="" coords="440,665,587,706"/>
<area shape="rect" id="node24" href="h2__util_8c.html#ad44c263771a733fc2c474eb48373d368" title="h2_ififo_push" alt="" coords="464,731,563,757"/>
<area shape="rect" id="node25" href="atomic_8c.html#ac689de9df18c093f66959227359328bb" title="apr_atomic_set32" alt="" coords="451,781,576,808"/>
<area shape="rect" id="node23" href="atomic_8c.html#afba4de90e113d26536cff48418689771" title="apr_atomic_read32" alt="" coords="647,672,779,699"/>
<area shape="rect" id="node27" href="h2__util_8c.html#a016e6f92f8adb95b5fc12b9394ce22ca" title="h2_iq_sort" alt="" coords="472,157,555,184"/>
<area shape="rect" id="node35" href="h2__workers_8c.html#a00fb6329ef8aca683c2a90d5950c31d8" title="h2_workers_register" alt="" coords="444,208,583,235"/>
<area shape="rect" id="node28" href="util__expr__scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="687,157,739,184"/>
<area shape="rect" id="node29" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="1400,157,1447,184"/>
<area shape="rect" id="node30" href="util__expr__scan_8c.html#a0a7c4a7733cdb1eb01d004f938def83c" title="ap_expr_yyrealloc" alt="" coords="1032,157,1159,184"/>
<area shape="rect" id="node31" href="util__expr__scan_8c.html#ae306439b40fb64237eafb4c0b4524aee" title="ap_expr_yyrestart" alt="" coords="835,208,961,235"/>
<area shape="rect" id="node32" href="util__expr__scan_8c.html#a073e30a44c0e142fe3d3a1f87bbf6c5e" title="ap_expr_yy_create_buffer" alt="" coords="1009,208,1181,235"/>
<area shape="rect" id="node33" href="util__expr__scan_8c.html#a3dd61ae214da108171a1bc60b87291d0" title="ap_expr_yyalloc" alt="" coords="1229,208,1345,235"/>
<area shape="rect" id="node34" href="util__expr__parse_8c.html#a5faf6a2d99f50a4655dd390199a8db7b" title="malloc" alt="" coords="1393,208,1453,235"/>
<area shape="rect" id="node36" href="h2__util_8c.html#ac4ea1ec7b996302732577ec411ac4451" title="h2_fifo_push" alt="" coords="665,208,761,235"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_icgraph.png" border="0" usemap="#h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_icgraph" alt=""/></div>
<map name="h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_icgraph" id="h2__session_8c_a9533cdc782ecc1f1fb81b724fabd9e77_icgraph">
<area shape="rect" id="node2" href="h2__conn_8h.html#ad13eeae0e8121a9c190f729e9904af4b" title="h2_conn_run" alt="" coords="195,31,291,57"/>
<area shape="rect" id="node3" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="339,5,488,32"/>
<area shape="rect" id="node4" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="361,56,466,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a963d3784514be3ea425a0cc87cf3aa42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structh2__stream.html">h2_stream</a>* h2_session_push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__push.html">h2_push</a> *&#160;</td>
          <td class="paramname"><em>push</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Submit a push promise on the stream and schedule the new steam for processing..</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>the session to work in </td></tr>
    <tr><td class="paramname">is</td><td>the stream initiating the push </td></tr>
    <tr><td class="paramname">push</td><td>the push to promise </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new promised stream or NULL </dd></dl>
<div class="fragment"><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;{</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="structh2__stream.html">h2_stream</a> *stream;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <a class="code" href="structh2__ngheader.html">h2_ngheader</a> *ngh;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ssl__engine__vars_8c.html#a7235ef62e89328f5155846dc59c6fc37">nid</a> = 0;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    </div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    status = <a class="code" href="h2__util_8c.html#abfea8ee29c3a402209ad4f92b215b989">h2_req_create_ngheader</a>(&amp;ngh, is-&gt;<a class="code" href="structh2__stream.html#abbb079f0128ec6d60268f1944b0fa910">pool</a>, push-&gt;<a class="code" href="structh2__push.html#a4541bdab05a10c6a58a413b0493c1a80">req</a>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (status == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        nid = nghttp2_submit_push_promise(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, 0, is-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>, </div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                                          ngh-&gt;<a class="code" href="structh2__ngheader.html#abc9c88383e0dba833c21bd28d321c506">nv</a>, ngh-&gt;<a class="code" href="structh2__ngheader.html#ac9d42acb47185c2db1b68f684663e1a4">nvlen</a>, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a> || nid &lt;= 0) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, status, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>, </div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                      <a class="code" href="h2__stream_8h.html#a7dfae6c324bcb99d7925e34edc7696e4">H2_STRM_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03075), is, </div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                      <span class="stringliteral">&quot;submitting push promise fail: %s&quot;</span>), nghttp2_strerror(nid));</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    ++session-&gt;<a class="code" href="structh2__session.html#ae51a5ef37580861fcaafccdb00352be8">pushes_promised</a>;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    </div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>, </div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                  <a class="code" href="h2__stream_8h.html#a7dfae6c324bcb99d7925e34edc7696e4">H2_STRM_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03076), is, <span class="stringliteral">&quot;SERVER_PUSH %d for %s %s on %d&quot;</span>),</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                  nid, push-&gt;<a class="code" href="structh2__push.html#a4541bdab05a10c6a58a413b0493c1a80">req</a>-&gt;<a class="code" href="structh2__request.html#a1f2c96a3b6f846ebb17355b6bb17a70c">method</a>, push-&gt;<a class="code" href="structh2__push.html#a4541bdab05a10c6a58a413b0493c1a80">req</a>-&gt;<a class="code" href="structh2__request.html#a96eb1a82bf08e7d6b0320fd96bc80ca4">path</a>, is-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                  </div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    stream = h2_session_open_stream(session, nid, is-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>, </div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                      <a class="code" href="h2__stream_8h.html#a7dfae6c324bcb99d7925e34edc7696e4">H2_STRM_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03077), stream, </div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                      <span class="stringliteral">&quot;failed to create stream obj %d&quot;</span>), nid);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="comment">/* kill the push_promise */</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        nghttp2_submit_rst_stream(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, NGHTTP2_FLAG_NONE, nid,</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                  NGHTTP2_INTERNAL_ERROR);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    </div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88">h2_session_set_prio</a>(session, stream, push-&gt;<a class="code" href="structh2__push.html#a79d7ef1a9ad462fb988ee537a0d45662">priority</a>);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="h2__stream_8c.html#a2c7058536130c66cfa5f104cd2e27ccc">h2_stream_set_request</a>(stream, push-&gt;<a class="code" href="structh2__push.html#a4541bdab05a10c6a58a413b0493c1a80">req</a>);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    ++session-&gt;<a class="code" href="structh2__session.html#abbd1515c131f6aa11b07a915fc3db0ab">unsent_promises</a>;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">return</span> stream;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div><div class="ttc" id="structh2__stream_html_a83ccde49eb87a47e7ad897e4a6d86968"><div class="ttname"><a href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">h2_stream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> h2_stream.h:65</div></div>
<div class="ttc" id="structh2__session_html_add0721875b1a24e581d276149984af8f"><div class="ttname"><a href="structh2__session.html#add0721875b1a24e581d276149984af8f">h2_session::ngh2</a></div><div class="ttdeci">struct nghttp2_session * ngh2</div><div class="ttdef"><b>Definition:</b> h2_session.h:87</div></div>
<div class="ttc" id="structh2__stream_html_abbb079f0128ec6d60268f1944b0fa910"><div class="ttname"><a href="structh2__stream.html#abbb079f0128ec6d60268f1944b0fa910">h2_stream::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> h2_stream.h:67</div></div>
<div class="ttc" id="structh2__ngheader_html_abc9c88383e0dba833c21bd28d321c506"><div class="ttname"><a href="structh2__ngheader.html#abc9c88383e0dba833c21bd28d321c506">h2_ngheader::nv</a></div><div class="ttdeci">nghttp2_nv * nv</div><div class="ttdef"><b>Definition:</b> h2_util.h:403</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="ssl__engine__vars_8c_html_a7235ef62e89328f5155846dc59c6fc37"><div class="ttname"><a href="ssl__engine__vars_8c.html#a7235ef62e89328f5155846dc59c6fc37">nid</a></div><div class="ttdeci">int nid</div><div class="ttdef"><b>Definition:</b> ssl_engine_vars.c:569</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gadfcef90537539cf2b7d35cfbbbafeb93"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a></div><div class="ttdeci">#define APLOG_DEBUG</div><div class="ttdef"><b>Definition:</b> http_log.h:50</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structh2__push_html_a4541bdab05a10c6a58a413b0493c1a80"><div class="ttname"><a href="structh2__push.html#a4541bdab05a10c6a58a413b0493c1a80">h2_push::req</a></div><div class="ttdeci">const struct h2_request * req</div><div class="ttdef"><b>Definition:</b> h2_push.h:27</div></div>
<div class="ttc" id="h2__stream_8c_html_a2c7058536130c66cfa5f104cd2e27ccc"><div class="ttname"><a href="h2__stream_8c.html#a2c7058536130c66cfa5f104cd2e27ccc">h2_stream_set_request</a></div><div class="ttdeci">void h2_stream_set_request(h2_stream *stream, const h2_request *r)</div><div class="ttdef"><b>Definition:</b> h2_stream.c:646</div></div>
<div class="ttc" id="h2__session_8c_html_a8f2507556c255cdde8cf388d0008ee88"><div class="ttname"><a href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88">h2_session_set_prio</a></div><div class="ttdeci">apr_status_t h2_session_set_prio(h2_session *session, h2_stream *stream, const h2_priority *prio)</div><div class="ttdef"><b>Definition:</b> h2_session.c:1129</div></div>
<div class="ttc" id="structh2__request_html_a1f2c96a3b6f846ebb17355b6bb17a70c"><div class="ttname"><a href="structh2__request.html#a1f2c96a3b6f846ebb17355b6bb17a70c">h2_request::method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> h2.h:130</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="h2__stream_8h_html_a7dfae6c324bcb99d7925e34edc7696e4"><div class="ttname"><a href="h2__stream_8h.html#a7dfae6c324bcb99d7925e34edc7696e4">H2_STRM_LOG</a></div><div class="ttdeci">#define H2_STRM_LOG(aplogno, s, msg)</div><div class="ttdef"><b>Definition:</b> h2_stream.h:312</div></div>
<div class="ttc" id="structh2__push_html_a79d7ef1a9ad462fb988ee537a0d45662"><div class="ttname"><a href="structh2__push.html#a79d7ef1a9ad462fb988ee537a0d45662">h2_push::priority</a></div><div class="ttdeci">h2_priority * priority</div><div class="ttdef"><b>Definition:</b> h2_push.h:28</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="structh2__session_html_abeacbf3e093a3fc5d67609497c82daba"><div class="ttname"><a href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">h2_session::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_session.h:77</div></div>
<div class="ttc" id="h2__util_8c_html_abfea8ee29c3a402209ad4f92b215b989"><div class="ttname"><a href="h2__util_8c.html#abfea8ee29c3a402209ad4f92b215b989">h2_req_create_ngheader</a></div><div class="ttdeci">apr_status_t h2_req_create_ngheader(h2_ngheader **ph, apr_pool_t *p, const struct h2_request *req)</div><div class="ttdef"><b>Definition:</b> h2_util.c:1733</div></div>
<div class="ttc" id="structh2__ngheader_html_ac9d42acb47185c2db1b68f684663e1a4"><div class="ttname"><a href="structh2__ngheader.html#ac9d42acb47185c2db1b68f684663e1a4">h2_ngheader::nvlen</a></div><div class="ttdeci">apr_size_t nvlen</div><div class="ttdef"><b>Definition:</b> h2_util.h:404</div></div>
<div class="ttc" id="structh2__request_html_a96eb1a82bf08e7d6b0320fd96bc80ca4"><div class="ttname"><a href="structh2__request.html#a96eb1a82bf08e7d6b0320fd96bc80ca4">h2_request::path</a></div><div class="ttdeci">const char * path</div><div class="ttdef"><b>Definition:</b> h2.h:133</div></div>
<div class="ttc" id="structh2__ngheader_html"><div class="ttname"><a href="structh2__ngheader.html">h2_ngheader</a></div><div class="ttdef"><b>Definition:</b> h2_util.h:402</div></div>
<div class="ttc" id="structh2__session_html_abbd1515c131f6aa11b07a915fc3db0ab"><div class="ttname"><a href="structh2__session.html#abbd1515c131f6aa11b07a915fc3db0ab">h2_session::unsent_promises</a></div><div class="ttdeci">int unsent_promises</div><div class="ttdef"><b>Definition:</b> h2_session.h:105</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="structh2__session_html_ae51a5ef37580861fcaafccdb00352be8"><div class="ttname"><a href="structh2__session.html#ae51a5ef37580861fcaafccdb00352be8">h2_session::pushes_promised</a></div><div class="ttdeci">int pushes_promised</div><div class="ttdef"><b>Definition:</b> h2_session.h:109</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga1dee8a07e06bc5b3de8b89662c2cd666"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a></div><div class="ttdeci">#define APLOGNO(n)</div><div class="ttdef"><b>Definition:</b> http_log.h:117</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_cgraph.png" border="0" usemap="#h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_cgraph" alt=""/></div>
<map name="h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_cgraph" id="h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#abfea8ee29c3a402209ad4f92b215b989" title="h2_req_create_ngheader" alt="" coords="176,5,340,32"/>
<area shape="rect" id="node3" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88" title="h2_session_set_prio" alt="" coords="187,56,329,83"/>
<area shape="rect" id="node5" href="h2__stream_8c.html#a2c7058536130c66cfa5f104cd2e27ccc" title="h2_stream_set_request" alt="" coords="179,157,337,184"/>
<area shape="rect" id="node4" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="454,5,501,32"/>
<area shape="rect" id="node6" href="h2__request_8c.html#abd1a394d05040898a973507a59831aa8" title="h2_request_clone" alt="" coords="415,56,539,83"/>
<area shape="rect" id="node7" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="408,107,547,133"/>
<area shape="rect" id="node8" href="h2__headers_8c.html#a6c008bbf8496b71be6163e25cf108b2a" title="h2_headers_die" alt="" coords="421,157,534,184"/>
<area shape="rect" id="node9" href="h2__headers_8c.html#a12a65836d69f5bd8cba891e30eced0a0" title="h2_bucket_headers_create" alt="" coords="388,208,567,235"/>
<area shape="rect" id="node11" href="h2__util_8c.html#a68c2c0d580440747c17c19d3cfa5d186" title="h2_req_ignore_trailer" alt="" coords="406,259,549,285"/>
<area shape="rect" id="node13" href="h2__util_8c.html#a7711a423a3aaa843a2df6f6b37a33651" title="h2_util_camel_case\l_header" alt="" coords="409,310,546,351"/>
<area shape="rect" id="node10" href="h2__headers_8c.html#acb1e2b7fb71dfc105d10033359002721" title="h2_bucket_headers_make" alt="" coords="615,208,789,235"/>
<area shape="rect" id="node12" href="h2__util_8c.html#a0a78a074950597c5797e6b4d766b4b82" title="h2_req_ignore_header" alt="" coords="627,259,777,285"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_icgraph.png" border="0" usemap="#h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_icgraph" alt=""/></div>
<map name="h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_icgraph" id="h2__session_8c_a963d3784514be3ea425a0cc87cf3aa42_icgraph">
<area shape="rect" id="node2" href="h2__stream_8h.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="176,172,355,199"/>
<area shape="rect" id="node3" href="h2__session_8h.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="403,172,577,199"/>
<area shape="rect" id="node4" href="h2__filter_8h.html#ab3bd5a1630af5762487a01bfb486d198" title="h2_bucket_observer_beam" alt="" coords="1455,5,1633,32"/>
<area shape="rect" id="node6" href="h2__stream_8h.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="625,172,764,199"/>
<area shape="rect" id="node5" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="1840,92,1989,119"/>
<area shape="rect" id="node7" href="h2__bucket__eos_8h.html#a7af1686f9a06910c60d7e123ac4e3d86" title="h2_bucket_eos_create" alt="" coords="815,121,968,148"/>
<area shape="rect" id="node9" href="h2__mplx_8h.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="1028,172,1167,199"/>
<area shape="rect" id="node11" href="h2__stream_8h.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="812,59,971,85"/>
<area shape="rect" id="node12" href="h2__stream_8h.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="839,273,944,300"/>
<area shape="rect" id="node18" href="h2__stream_8h.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="1019,223,1176,249"/>
<area shape="rect" id="node8" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="1024,121,1171,148"/>
<area shape="rect" id="node10" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="1252,223,1379,249"/>
<area shape="rect" id="node13" href="h2__stream_8h.html#a87d8887db632345afe5e3881844a1bab" title="h2_stream_recv_frame" alt="" coords="1020,324,1175,351"/>
<area shape="rect" id="node14" href="h2__stream_8h.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="1224,316,1407,343"/>
<area shape="rect" id="node15" href="h2__session_8h.html#a9e2e042cb4d3efa0625cc55bbd145a65" title="h2_session_rcreate" alt="" coords="1477,177,1611,204"/>
<area shape="rect" id="node16" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="1681,160,1792,187"/>
<area shape="rect" id="node17" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="1862,160,1967,187"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2827fca84388460b3e2859326a00a3c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> h2_session_push_enabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns if client settings have push enabled. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">!=</td><td>0 iff push is enabled in client settings </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;{</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">/* iff we can and they can and want */</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">return</span> (session-&gt;<a class="code" href="structh2__session.html#a80fcd5b884ec0b7fb15339beda197f99">remote</a>.<a class="code" href="structh2__session__props.html#a22f923106761ebfd0e35a62d8882adfa">accepting</a> <span class="comment">/* remote GOAWAY received */</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            &amp;&amp; <a class="code" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04">h2_config_geti</a>(session-&gt;<a class="code" href="structh2__session.html#a6a834c27d772bd80f1837723e3ef04b8">config</a>, <a class="code" href="h2__config_8h.html#a9ba9f682e77cb3b39514432a14fce8d4ab10a86ee19ebd9ae79a772c4c8ba47ea">H2_CONF_PUSH</a>)</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            &amp;&amp; nghttp2_session_get_remote_settings(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, </div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                   NGHTTP2_SETTINGS_ENABLE_PUSH));</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;}</div><div class="ttc" id="structh2__session_html_add0721875b1a24e581d276149984af8f"><div class="ttname"><a href="structh2__session.html#add0721875b1a24e581d276149984af8f">h2_session::ngh2</a></div><div class="ttdeci">struct nghttp2_session * ngh2</div><div class="ttdef"><b>Definition:</b> h2_session.h:87</div></div>
<div class="ttc" id="structh2__session__props_html_a22f923106761ebfd0e35a62d8882adfa"><div class="ttname"><a href="structh2__session__props.html#a22f923106761ebfd0e35a62d8882adfa">h2_session_props::accepting</a></div><div class="ttdeci">unsigned int accepting</div><div class="ttdef"><b>Definition:</b> h2.h:98</div></div>
<div class="ttc" id="h2__config_8h_html_a9ba9f682e77cb3b39514432a14fce8d4ab10a86ee19ebd9ae79a772c4c8ba47ea"><div class="ttname"><a href="h2__config_8h.html#a9ba9f682e77cb3b39514432a14fce8d4ab10a86ee19ebd9ae79a772c4c8ba47ea">H2_CONF_PUSH</a></div><div class="ttdef"><b>Definition:</b> h2_config.h:40</div></div>
<div class="ttc" id="h2__config_8c_html_a22d672856fe674becba5e4e07ba0ae04"><div class="ttname"><a href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04">h2_config_geti</a></div><div class="ttdeci">int h2_config_geti(const h2_config *conf, h2_config_var_t var)</div><div class="ttdef"><b>Definition:</b> h2_config.c:164</div></div>
<div class="ttc" id="structh2__session_html_a6a834c27d772bd80f1837723e3ef04b8"><div class="ttname"><a href="structh2__session.html#a6a834c27d772bd80f1837723e3ef04b8">h2_session::config</a></div><div class="ttdeci">const struct h2_config * config</div><div class="ttdef"><b>Definition:</b> h2_session.h:81</div></div>
<div class="ttc" id="structh2__session_html_a80fcd5b884ec0b7fb15339beda197f99"><div class="ttname"><a href="structh2__session.html#a80fcd5b884ec0b7fb15339beda197f99">h2_session::remote</a></div><div class="ttdeci">h2_session_props remote</div><div class="ttdef"><b>Definition:</b> h2_session.h:92</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a2827fca84388460b3e2859326a00a3c9_cgraph.png" border="0" usemap="#h2__session_8c_a2827fca84388460b3e2859326a00a3c9_cgraph" alt=""/></div>
<map name="h2__session_8c_a2827fca84388460b3e2859326a00a3c9_cgraph" id="h2__session_8c_a2827fca84388460b3e2859326a00a3c9_cgraph">
<area shape="rect" id="node2" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="712,26,819,52"/>
<area shape="rect" id="node4" href="unix_2sockopt_8c.html#aa32313b54afed590367c8571075d2bc1" title="apr_socket_timeout_get" alt="" coords="240,222,401,248"/>
<area shape="rect" id="node5" href="unix_2sockopt_8c.html#a945bdbe807ec5635d65a6fd9ddb78c29" title="apr_socket_timeout_set" alt="" coords="240,272,401,299"/>
<area shape="rect" id="node6" href="h2__stream_8c.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="268,146,373,172"/>
<area shape="rect" id="node11" href="h2__util_8c.html#a6b44f7b0518d2c540d313e528994d1f0" title="h2_res_create_ngtrailer" alt="" coords="242,323,399,350"/>
<area shape="rect" id="node12" href="h2__stream_8c.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="231,374,410,400"/>
<area shape="rect" id="node19" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88" title="h2_session_set_prio" alt="" coords="695,380,836,407"/>
<area shape="rect" id="node23" href="h2__stream_8c.html#aa12615c37d60f4cbc50ef3455eb4b77b" title="h2_stream_get_priority" alt="" coords="243,475,398,502"/>
<area shape="rect" id="node28" href="h2__headers_8c.html#a09ef8b60a6dcb5092fbf6c5b436fb00b" title="h2_headers_copy" alt="" coords="259,652,383,679"/>
<area shape="rect" id="node30" href="h2__util_8c.html#a1f8a1d013fda7e98be914213de199edf" title="h2_res_create_ngheader" alt="" coords="239,703,403,730"/>
<area shape="rect" id="node31" href="h2__headers_8c.html#ac241e59095a6600f7a10ddb103ecbe04" title="h2_headers_are_response" alt="" coords="233,754,408,780"/>
<area shape="rect" id="node32" href="h2__stream_8c.html#ab0939d34133abdcf905f5e8879e63cc1" title="h2_stream_out_prepare" alt="" coords="241,804,400,831"/>
<area shape="rect" id="node35" href="h2__util_8c.html#ae4c244854d49bc3a4a3f4b5f14c1b696" title="h2_iq_shift" alt="" coords="500,526,585,552"/>
<area shape="rect" id="node36" href="h2__session_8c.html#ad1d4897f2aa846843b8de9c00e1c75b3" title="h2_session_stream_get" alt="" coords="241,855,401,882"/>
<area shape="rect" id="node37" href="h2__stream_8c.html#a15066acf068a7b151f01f384d517ebdc" title="h2_stream_prep_processing" alt="" coords="228,906,413,932"/>
<area shape="rect" id="node38" href="h2__mplx_8c.html#af6c35070795724a55320fd46e77f1ec2" title="h2_mplx_process" alt="" coords="259,602,383,628"/>
<area shape="rect" id="node47" href="h2__stream_8c.html#abe2b7cf31575b9058feb0abb4f19f657" title="h2_stream_flush_input" alt="" coords="244,1108,397,1135"/>
<area shape="rect" id="node3" href="h2__config_8c.html#a51b0c2c10599587f54770a555258d209" title="h2_config_geti64" alt="" coords="916,26,1036,52"/>
<area shape="rect" id="node7" href="h2__bucket__beam_8c.html#a18fcdf460f20b412ce76dd68c93cdbe2" title="h2_beam_abort" alt="" coords="487,127,598,154"/>
<area shape="rect" id="node8" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="486,178,599,204"/>
<area shape="rect" id="node9" href="h2__stream_8c.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="473,76,612,103"/>
<area shape="rect" id="node10" href="h2__util_8c.html#ac28f57757be5e96803c3300e2caf94f4" title="h2_push_policy_determine" alt="" coords="677,76,853,103"/>
<area shape="rect" id="node13" href="h2__push_8c.html#a472b2fcc2974feb81969d04dd1aa07cf" title="h2_push_collect_update" alt="" coords="461,228,624,255"/>
<area shape="rect" id="node17" href="h2__session_8c.html#a963d3784514be3ea425a0cc87cf3aa42" title="h2_session_push" alt="" coords="481,374,604,400"/>
<area shape="rect" id="node14" href="h2__push_8c.html#a3acefab6eecc2c75624d6bec56424929" title="h2_push_diary_digest64_set" alt="" coords="672,127,859,154"/>
<area shape="rect" id="node15" href="h2__push_8c.html#a59d6a4f024f9bad56b3023de17d5137d" title="h2_push_collect" alt="" coords="707,178,823,204"/>
<area shape="rect" id="node16" href="h2__push_8c.html#a84db00b607fb6e1ef26ffa022282ee1f" title="h2_push_diary_update" alt="" coords="689,228,841,255"/>
<area shape="rect" id="node18" href="h2__util_8c.html#abfea8ee29c3a402209ad4f92b215b989" title="h2_req_create_ngheader" alt="" coords="683,279,847,306"/>
<area shape="rect" id="node21" href="h2__stream_8c.html#a2c7058536130c66cfa5f104cd2e27ccc" title="h2_stream_set_request" alt="" coords="686,330,845,356"/>
<area shape="rect" id="node20" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="953,406,999,432"/>
<area shape="rect" id="node22" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="907,532,1045,559"/>
<area shape="rect" id="node24" href="h2__config_8c.html#a0c867c8f46306da65aab3a5112f27c4a" title="h2_config_get_priority" alt="" coords="468,475,617,502"/>
<area shape="rect" id="node25" href="h2__config_8c.html#a0c0f1e9706b7426cb14a63a08420e03d" title="h2_config_sget" alt="" coords="710,482,821,508"/>
<area shape="rect" id="node26" href="h2__alt__svc_8c.html#ad3269f553e14a701ad442e813bee5167" title="h2_alt_svc_parse" alt="" coords="703,532,827,559"/>
<area shape="rect" id="node27" href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a" title="strcasecmp" alt="" coords="720,583,811,610"/>
<area shape="rect" id="node29" href="h2__headers_8c.html#a374f6ee5d97690b7613c76be360eb970" title="h2_headers_create" alt="" coords="477,931,609,958"/>
<area shape="rect" id="node33" href="h2__mplx_8c.html#a2635034633242ada1070ca3e4fab411f" title="h2_mplx_keep_active" alt="" coords="469,982,617,1008"/>
<area shape="rect" id="node34" href="h2__bucket__beam_8c.html#afb11867e565237b6b2e7797444e445d7" title="h2_beam_receive" alt="" coords="481,1032,605,1059"/>
<area shape="rect" id="node39" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="491,779,594,806"/>
<area shape="rect" id="node40" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0" title="h2_iq_add" alt="" coords="502,830,583,856"/>
<area shape="rect" id="node43" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="493,880,592,907"/>
<area shape="rect" id="node44" href="h2__conn_8c.html#a1e38739f4ba1fd9f06d27ee6beadaf3a" title="h2_slave_create" alt="" coords="484,627,601,654"/>
<area shape="rect" id="node45" href="h2__bucket__beam_8c.html#a6d193e70e5d65e51644687e2e0c03762" title="h2_beam_on_consumed" alt="" coords="461,678,624,704"/>
<area shape="rect" id="node46" href="h2__task_8c.html#a864cff0b1216bbe6057dabec78e23b32" title="h2_task_create" alt="" coords="487,728,598,755"/>
<area shape="rect" id="node41" href="h2__util_8c.html#a4bf6bbee2be663a01e97be92bcfbab45" title="h2_iq_contains" alt="" coords="711,855,820,882"/>
<area shape="rect" id="node42" href="util__expr__scan_8c.html#a33e91cd0cef6786e9e3a27ac67707207" title="if" alt="" coords="746,804,785,831"/>
<area shape="rect" id="node48" href="h2__bucket__beam_8c.html#abd0e8829e808a93cccdec17e06448a80" title="h2_beam_send" alt="" coords="487,1083,598,1110"/>
<area shape="rect" id="node49" href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304" title="h2_beam_is_closed" alt="" coords="474,1134,611,1160"/>
<area shape="rect" id="node50" href="h2__bucket__beam_8c.html#a756a84813d57b4df12deb88314374277" title="h2_beam_close" alt="" coords="486,1184,599,1211"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a2827fca84388460b3e2859326a00a3c9_icgraph.png" border="0" usemap="#h2__session_8c_a2827fca84388460b3e2859326a00a3c9_icgraph" alt=""/></div>
<map name="h2__session_8c_a2827fca84388460b3e2859326a00a3c9_icgraph" id="h2__session_8c_a2827fca84388460b3e2859326a00a3c9_icgraph">
<area shape="rect" id="node2" href="h2__filter_8h.html#ab3bd5a1630af5762487a01bfb486d198" title="h2_bucket_observer_beam" alt="" coords="451,32,629,59"/>
<area shape="rect" id="node4" href="h2__session_8h.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="228,107,403,133"/>
<area shape="rect" id="node5" href="h2__stream_8h.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="471,157,609,184"/>
<area shape="rect" id="node3" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="1661,5,1811,32"/>
<area shape="rect" id="node6" href="h2__bucket__eos_8h.html#a7af1686f9a06910c60d7e123ac4e3d86" title="h2_bucket_eos_create" alt="" coords="680,321,833,348"/>
<area shape="rect" id="node8" href="h2__mplx_8h.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="893,157,1032,184"/>
<area shape="rect" id="node10" href="h2__stream_8h.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="677,259,836,285"/>
<area shape="rect" id="node11" href="h2__stream_8h.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="704,107,809,133"/>
<area shape="rect" id="node17" href="h2__stream_8h.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="884,208,1041,235"/>
<area shape="rect" id="node7" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="889,333,1036,360"/>
<area shape="rect" id="node9" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="1117,157,1244,184"/>
<area shape="rect" id="node12" href="h2__stream_8h.html#a87d8887db632345afe5e3881844a1bab" title="h2_stream_recv_frame" alt="" coords="885,56,1040,83"/>
<area shape="rect" id="node13" href="h2__stream_8h.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="1089,56,1272,83"/>
<area shape="rect" id="node14" href="h2__session_8h.html#a9e2e042cb4d3efa0625cc55bbd145a65" title="h2_session_rcreate" alt="" coords="1320,56,1455,83"/>
<area shape="rect" id="node15" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="1503,56,1613,83"/>
<area shape="rect" id="node16" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="1683,56,1789,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aae9b0b4724f7687e798c40d6fec41b9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_session_rcreate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> **&#160;</td>
          <td class="paramname"><em>psession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrequest__rec.html">request_rec</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__ctx.html">h2_ctx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__workers.html">h2_workers</a> *&#160;</td>
          <td class="paramname"><em>workers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="structh2__session.html">h2_session</a> for the given request. The session will apply the configured parameter. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psession</td><td>pointer receiving the created session on success or NULL </td></tr>
    <tr><td class="paramname">r</td><td>the request that was upgraded </td></tr>
    <tr><td class="paramname">cfg</td><td>the module config to apply </td></tr>
    <tr><td class="paramname">workers</td><td>the worker pool to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the created session </dd></dl>
<div class="fragment"><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">return</span> h2_session_create_int(psession, r-&gt;<a class="code" href="structrequest__rec.html#a0924aae55826638314f76952ca5d60b1">connection</a>, r, ctx, workers);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div><div class="ttc" id="structrequest__rec_html_a0924aae55826638314f76952ca5d60b1"><div class="ttname"><a href="structrequest__rec.html#a0924aae55826638314f76952ca5d60b1">request_rec::connection</a></div><div class="ttdeci">uintptr_t connection</div><div class="ttdef"><b>Definition:</b> ap.d:4</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_cgraph.png" border="0" usemap="#h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_cgraph" alt=""/></div>
<map name="h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_cgraph" id="h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#ac5ef011a192124e3388bbcea2e1924e3" title="h2_util_base64url_decode" alt="" coords="1925,194,2097,221"/>
<area shape="rect" id="node3" href="h2__util_8c.html#a09bba2c9e1022c1f97ae1edf0a2e84f4" title="h2_util_hex_dump" alt="" coords="216,67,343,94"/>
<area shape="rect" id="node4" href="h2__stream_8c.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="188,853,371,879"/>
<area shape="rect" id="node6" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="1286,929,1393,955"/>
<area shape="rect" id="node24" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="1988,738,2035,765"/>
<area shape="rect" id="node31" href="h2__stream_8c.html#ab0939d34133abdcf905f5e8879e63cc1" title="h2_stream_out_prepare" alt="" coords="1260,1030,1419,1057"/>
<area shape="rect" id="node35" href="h2__session_8c.html#ad1d4897f2aa846843b8de9c00e1c75b3" title="h2_session_stream_get" alt="" coords="1259,1081,1419,1107"/>
<area shape="rect" id="node5" href="h2__request_8c.html#a1d35290fb0e699147310e780183e2626" title="h2_request_rcreate" alt="" coords="1044,979,1177,1006"/>
<area shape="rect" id="node9" href="h2__stream_8c.html#af677ccda05cf3d555f0a553fbcd319c7" title="h2_stream_recv_frame" alt="" coords="419,827,573,854"/>
<area shape="rect" id="node8" href="h2__config_8c.html#a0c0f1e9706b7426cb14a63a08420e03d" title="h2_config_sget" alt="" coords="1729,929,1839,955"/>
<area shape="rect" id="node7" href="h2__config_8c.html#a51b0c2c10599587f54770a555258d209" title="h2_config_geti64" alt="" coords="1501,929,1621,955"/>
<area shape="rect" id="node10" href="h2__stream_8c.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="652,777,757,803"/>
<area shape="rect" id="node50" href="h2__request_8c.html#a293f05d6f5a2c7aa4221468c7723a237" title="h2_request_end_headers" alt="" coords="621,827,788,854"/>
<area shape="rect" id="node11" href="h2__bucket__beam_8c.html#a18fcdf460f20b412ce76dd68c93cdbe2" title="h2_beam_abort" alt="" coords="850,777,961,803"/>
<area shape="rect" id="node12" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="849,827,962,854"/>
<area shape="rect" id="node13" href="h2__stream_8c.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="836,726,975,753"/>
<area shape="rect" id="node14" href="h2__session_8c.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="1023,675,1198,702"/>
<area shape="rect" id="node49" href="h2__util_8c.html#ac28f57757be5e96803c3300e2caf94f4" title="h2_push_policy_determine" alt="" coords="1023,726,1199,753"/>
<area shape="rect" id="node15" href="unix_2sockopt_8c.html#aa32313b54afed590367c8571075d2bc1" title="apr_socket_timeout_get" alt="" coords="1259,574,1420,601"/>
<area shape="rect" id="node16" href="unix_2sockopt_8c.html#a945bdbe807ec5635d65a6fd9ddb78c29" title="apr_socket_timeout_set" alt="" coords="1259,625,1420,651"/>
<area shape="rect" id="node17" href="h2__util_8c.html#a6b44f7b0518d2c540d313e528994d1f0" title="h2_res_create_ngtrailer" alt="" coords="1261,675,1418,702"/>
<area shape="rect" id="node18" href="h2__stream_8c.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="1250,726,1429,753"/>
<area shape="rect" id="node23" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88" title="h2_session_set_prio" alt="" coords="1713,738,1855,765"/>
<area shape="rect" id="node25" href="h2__stream_8c.html#aa12615c37d60f4cbc50ef3455eb4b77b" title="h2_stream_get_priority" alt="" coords="1262,878,1417,905"/>
<area shape="rect" id="node27" href="h2__headers_8c.html#a09ef8b60a6dcb5092fbf6c5b436fb00b" title="h2_headers_copy" alt="" coords="1277,827,1401,854"/>
<area shape="rect" id="node29" href="h2__util_8c.html#a1f8a1d013fda7e98be914213de199edf" title="h2_res_create_ngheader" alt="" coords="1257,194,1421,221"/>
<area shape="rect" id="node30" href="h2__headers_8c.html#ac241e59095a6600f7a10ddb103ecbe04" title="h2_headers_are_response" alt="" coords="1252,245,1427,271"/>
<area shape="rect" id="node34" href="h2__util_8c.html#ae4c244854d49bc3a4a3f4b5f14c1b696" title="h2_iq_shift" alt="" coords="1519,118,1604,145"/>
<area shape="rect" id="node36" href="h2__stream_8c.html#a15066acf068a7b151f01f384d517ebdc" title="h2_stream_prep_processing" alt="" coords="1247,346,1432,373"/>
<area shape="rect" id="node37" href="h2__mplx_8c.html#af6c35070795724a55320fd46e77f1ec2" title="h2_mplx_process" alt="" coords="1277,397,1401,423"/>
<area shape="rect" id="node45" href="h2__stream_8c.html#abe2b7cf31575b9058feb0abb4f19f657" title="h2_stream_flush_input" alt="" coords="1263,523,1416,550"/>
<area shape="rect" id="node19" href="h2__push_8c.html#a472b2fcc2974feb81969d04dd1aa07cf" title="h2_push_collect_update" alt="" coords="1480,675,1643,702"/>
<area shape="rect" id="node22" href="h2__session_8c.html#a963d3784514be3ea425a0cc87cf3aa42" title="h2_session_push" alt="" coords="1500,726,1623,753"/>
<area shape="rect" id="node20" href="h2__push_8c.html#a3acefab6eecc2c75624d6bec56424929" title="h2_push_diary_digest64_set" alt="" coords="1691,371,1877,398"/>
<area shape="rect" id="node21" href="h2__push_8c.html#a59d6a4f024f9bad56b3023de17d5137d" title="h2_push_collect" alt="" coords="1726,675,1842,702"/>
<area shape="rect" id="node26" href="h2__config_8c.html#a0c867c8f46306da65aab3a5112f27c4a" title="h2_config_get_priority" alt="" coords="1487,878,1636,905"/>
<area shape="rect" id="node28" href="h2__headers_8c.html#a374f6ee5d97690b7613c76be360eb970" title="h2_headers_create" alt="" coords="1495,827,1627,854"/>
<area shape="rect" id="node32" href="h2__mplx_8c.html#a2635034633242ada1070ca3e4fab411f" title="h2_mplx_keep_active" alt="" coords="1487,1081,1635,1107"/>
<area shape="rect" id="node33" href="h2__bucket__beam_8c.html#afb11867e565237b6b2e7797444e445d7" title="h2_beam_receive" alt="" coords="1499,1030,1623,1057"/>
<area shape="rect" id="node38" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="1510,219,1613,246"/>
<area shape="rect" id="node39" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="1492,270,1631,297"/>
<area shape="rect" id="node40" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0" title="h2_iq_add" alt="" coords="1521,321,1602,347"/>
<area shape="rect" id="node41" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="1512,371,1611,398"/>
<area shape="rect" id="node42" href="h2__conn_8c.html#a1e38739f4ba1fd9f06d27ee6beadaf3a" title="h2_slave_create" alt="" coords="1503,422,1620,449"/>
<area shape="rect" id="node43" href="h2__bucket__beam_8c.html#a6d193e70e5d65e51644687e2e0c03762" title="h2_beam_on_consumed" alt="" coords="1480,473,1643,499"/>
<area shape="rect" id="node44" href="h2__task_8c.html#a864cff0b1216bbe6057dabec78e23b32" title="h2_task_create" alt="" coords="1506,169,1617,195"/>
<area shape="rect" id="node46" href="h2__bucket__beam_8c.html#abd0e8829e808a93cccdec17e06448a80" title="h2_beam_send" alt="" coords="1506,574,1617,601"/>
<area shape="rect" id="node47" href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304" title="h2_beam_is_closed" alt="" coords="1493,625,1630,651"/>
<area shape="rect" id="node48" href="h2__bucket__beam_8c.html#a756a84813d57b4df12deb88314374277" title="h2_beam_close" alt="" coords="1505,523,1618,550"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_icgraph.png" border="0" usemap="#h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_icgraph" alt=""/></div>
<map name="h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_icgraph" id="h2__session_8c_aae9b0b4724f7687e798c40d6fec41b9d_icgraph">
<area shape="rect" id="node2" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="188,31,299,57"/>
<area shape="rect" id="node3" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="347,5,496,32"/>
<area shape="rect" id="node4" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="369,56,474,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8f2507556c255cdde8cf388d0008ee88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_session_set_prio </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structh2__priority.html">h2_priority</a> *&#160;</td>
          <td class="paramname"><em>prio</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;{</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a> = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="preprocessor">#ifdef H2_NG2_CHANGE_PRIO</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    nghttp2_stream *s_grandpa, *s_parent, *<a class="code" href="group__APACHE__CORE__LISTEN.html#ga9359ed159c8b295541e3770172d34550">s</a>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    </div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span> (prio == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="comment">/* we treat this as a NOP */</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    s = nghttp2_session_find_stream(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, stream-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">if</span> (!s) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>,</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                      <a class="code" href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a>(stream, <span class="stringliteral">&quot;lookup of nghttp2_stream failed&quot;</span>));</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__APR__Error.html#gae3ffc41994444e71ce522c036ca1d9a4">APR_EINVAL</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    </div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    s_parent = nghttp2_stream_get_parent(s);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span> (s_parent) {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        nghttp2_priority_spec <a class="code" href="group__APACHE__CORE__CONFIG.html#gac3433ab45961daa0aed079830e52d54b">ps</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <span class="keywordtype">int</span> id_parent, id_grandpa, w_parent, <a class="code" href="group__MOD__PROXY.html#gab9a0c51666082a4ca5dd995ee972f77e">w</a>;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordtype">int</span> rv = 0;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *ptype = <span class="stringliteral">&quot;AFTER&quot;</span>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771">h2_dependency</a> dep = prio-&gt;<a class="code" href="structh2__priority.html#ad0a95afad7af7a2dc4ffec78fc819f40">dependency</a>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        </div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        id_parent = nghttp2_stream_get_stream_id(s_parent);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        s_grandpa = nghttp2_stream_get_parent(s_parent);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordflow">if</span> (s_grandpa) {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            id_grandpa = nghttp2_stream_get_stream_id(s_grandpa);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <span class="comment">/* parent of parent does not exist, </span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">             * only possible if parent == root */</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            dep = <a class="code" href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771a0f41fa000e98ce62cde65148c4d78e58">H2_DEPENDANT_AFTER</a>;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        </div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">switch</span> (dep) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771a14d93a933529ccca960043ab42fb40b2">H2_DEPENDANT_INTERLEAVED</a>:</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="comment">/* PUSHed stream is to be interleaved with initiating stream.</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">                 * It is made a sibling of the initiating stream and gets a</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">                 * proportional weight [1, MAX_WEIGHT] of the initiaing</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">                 * stream weight.</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                ptype = <span class="stringliteral">&quot;INTERLEAVED&quot;</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                w_parent = nghttp2_stream_get_weight(s_parent);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                w = valid_weight(w_parent * ((<span class="keywordtype">float</span>)prio-&gt;<a class="code" href="structh2__priority.html#a3501a5e9d3cff58e1b18760fa100b1c3">weight</a> / NGHTTP2_MAX_WEIGHT));</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                nghttp2_priority_spec_init(&amp;ps, id_grandpa, w, 0);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                </div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771aeebd0f1ee8c6ad87c4b5c7e6eea8067d">H2_DEPENDANT_BEFORE</a>:</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="comment">/* PUSHed stream os to be sent BEFORE the initiating stream.</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">                 * It gets the same weight as the initiating stream, replaces</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">                 * that stream in the dependency tree and has the initiating</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">                 * stream as child.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                ptype = <span class="stringliteral">&quot;BEFORE&quot;</span>;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                w = w_parent = nghttp2_stream_get_weight(s_parent);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                nghttp2_priority_spec_init(&amp;ps, stream-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>, w_parent, 0);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                id_grandpa = nghttp2_stream_get_stream_id(s_grandpa);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                rv = nghttp2_session_change_stream_priority(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, id_parent, &amp;ps);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keywordflow">if</span> (rv &lt; 0) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03202)</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                                  <span class="stringliteral">&quot;h2_stream(%ld-%d): PUSH BEFORE, weight=%d, &quot;</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                                  <span class="stringliteral">&quot;depends=%d, returned=%d&quot;</span>,</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                                  session-&gt;<a class="code" href="structh2__session.html#a00e5945662f1e1b72b9d22c384f5a46f">id</a>, id_parent, ps.weight, ps.stream_id, rv);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                }</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                nghttp2_priority_spec_init(&amp;ps, id_grandpa, w, 0);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                </div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771a0f41fa000e98ce62cde65148c4d78e58">H2_DEPENDANT_AFTER</a>:</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                <span class="comment">/* The PUSHed stream is to be sent after the initiating stream.</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">                 * Give if the specified weight and let it depend on the intiating</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">                 * stream.</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="comment">/* fall through, it&#39;s the default */</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                nghttp2_priority_spec_init(&amp;ps, id_parent, valid_weight(prio-&gt;<a class="code" href="structh2__priority.html#a3501a5e9d3cff58e1b18760fa100b1c3">weight</a>), 0);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        rv = nghttp2_session_change_stream_priority(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, stream-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>, &amp;ps);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, session-&gt;<a class="code" href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">c</a>, </div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                      <span class="stringliteral">&quot;&quot;</span><a class="code" href="h2__stream_8h.html#a7dfae6c324bcb99d7925e34edc7696e4">H2_STRM_LOG</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03203), stream, </div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                      <span class="stringliteral">&quot;PUSH %s, weight=%d, depends=%d, returned=%d&quot;</span>),</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                      ptype, ps.weight, ps.stream_id, rv);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        status = (rv &lt; 0)? <a class="code" href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a> : <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    (<a class="code" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>)session;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    (<a class="code" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>)stream;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    (<a class="code" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>)prio;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    (<a class="code" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>)valid_weight;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;}</div><div class="ttc" id="structh2__stream_html_a83ccde49eb87a47e7ad897e4a6d86968"><div class="ttname"><a href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">h2_stream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> h2_stream.h:65</div></div>
<div class="ttc" id="structh2__session_html_add0721875b1a24e581d276149984af8f"><div class="ttname"><a href="structh2__session.html#add0721875b1a24e581d276149984af8f">h2_session::ngh2</a></div><div class="ttdeci">struct nghttp2_session * ngh2</div><div class="ttdef"><b>Definition:</b> h2_session.h:87</div></div>
<div class="ttc" id="structh2__priority_html_ad0a95afad7af7a2dc4ffec78fc819f40"><div class="ttname"><a href="structh2__priority.html#ad0a95afad7af7a2dc4ffec78fc819f40">h2_priority::dependency</a></div><div class="ttdeci">h2_dependency dependency</div><div class="ttdef"><b>Definition:</b> h2.h:72</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="group__APR__Error_html_ga18f5678bea0c2c704a2b6a186c9e158b"><div class="ttname"><a href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a></div><div class="ttdeci">#define APR_EGENERAL</div><div class="ttdef"><b>Definition:</b> apr_errno.h:313</div></div>
<div class="ttc" id="h2_8h_html_a3b85fbe95e6fa95a738d8d8f2706c771aeebd0f1ee8c6ad87c4b5c7e6eea8067d"><div class="ttname"><a href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771aeebd0f1ee8c6ad87c4b5c7e6eea8067d">H2_DEPENDANT_BEFORE</a></div><div class="ttdef"><b>Definition:</b> h2.h:68</div></div>
<div class="ttc" id="h2_8h_html_a3b85fbe95e6fa95a738d8d8f2706c771a0f41fa000e98ce62cde65148c4d78e58"><div class="ttname"><a href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771a0f41fa000e98ce62cde65148c4d78e58">H2_DEPENDANT_AFTER</a></div><div class="ttdef"><b>Definition:</b> h2.h:66</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gadfcef90537539cf2b7d35cfbbbafeb93"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a></div><div class="ttdeci">#define APLOG_DEBUG</div><div class="ttdef"><b>Definition:</b> http_log.h:50</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="h2_8h_html_a3b85fbe95e6fa95a738d8d8f2706c771a14d93a933529ccca960043ab42fb40b2"><div class="ttname"><a href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771a14d93a933529ccca960043ab42fb40b2">H2_DEPENDANT_INTERLEAVED</a></div><div class="ttdef"><b>Definition:</b> h2.h:67</div></div>
<div class="ttc" id="h2_8h_html_a3b85fbe95e6fa95a738d8d8f2706c771"><div class="ttname"><a href="h2_8h.html#a3b85fbe95e6fa95a738d8d8f2706c771">h2_dependency</a></div><div class="ttdeci">h2_dependency</div><div class="ttdef"><b>Definition:</b> h2.h:65</div></div>
<div class="ttc" id="group__APR__Error_html_gae3ffc41994444e71ce522c036ca1d9a4"><div class="ttname"><a href="group__APR__Error.html#gae3ffc41994444e71ce522c036ca1d9a4">APR_EINVAL</a></div><div class="ttdeci">#define APR_EINVAL</div><div class="ttdef"><b>Definition:</b> apr_errno.h:711</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="h2__stream_8h_html_a7dfae6c324bcb99d7925e34edc7696e4"><div class="ttname"><a href="h2__stream_8h.html#a7dfae6c324bcb99d7925e34edc7696e4">H2_STRM_LOG</a></div><div class="ttdeci">#define H2_STRM_LOG(aplogno, s, msg)</div><div class="ttdef"><b>Definition:</b> h2_stream.h:312</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_gac3433ab45961daa0aed079830e52d54b"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#gac3433ab45961daa0aed079830e52d54b">ps</a></div><div class="ttdeci">const char server_rec server_rec ** ps</div><div class="ttdef"><b>Definition:</b> http_config.h:1139</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gab9a0c51666082a4ca5dd995ee972f77e"><div class="ttname"><a href="group__MOD__PROXY.html#gab9a0c51666082a4ca5dd995ee972f77e">w</a></div><div class="ttdeci">int proxy_worker * w</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1026</div></div>
<div class="ttc" id="structh2__session_html_abeacbf3e093a3fc5d67609497c82daba"><div class="ttname"><a href="structh2__session.html#abeacbf3e093a3fc5d67609497c82daba">h2_session::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_session.h:77</div></div>
<div class="ttc" id="group__APACHE__CORE__LISTEN_html_ga9359ed159c8b295541e3770172d34550"><div class="ttname"><a href="group__APACHE__CORE__LISTEN.html#ga9359ed159c8b295541e3770172d34550">s</a></div><div class="ttdeci">server_rec * s</div><div class="ttdef"><b>Definition:</b> ap_listen.h:109</div></div>
<div class="ttc" id="h2__stream_8h_html_a5d2429e78d1a9c910f654300062147be"><div class="ttname"><a href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a></div><div class="ttdeci">#define H2_STRM_MSG(s, msg)</div><div class="ttdef"><b>Definition:</b> h2_stream.h:309</div></div>
<div class="ttc" id="structh2__priority_html_a3501a5e9d3cff58e1b18760fa100b1c3"><div class="ttname"><a href="structh2__priority.html#a3501a5e9d3cff58e1b18760fa100b1c3">h2_priority::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> h2.h:73</div></div>
<div class="ttc" id="group__MOD__ISAPI_html_gacd6cdbf73df3d9eed42fa493d9b621a6"><div class="ttname"><a href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a></div><div class="ttdeci">typedef void(APR_THREAD_FUNC *PFN_HSE_IO_COMPLETION)(EXTENSION_CONTROL_BLOCK *ecb</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga1dee8a07e06bc5b3de8b89662c2cd666"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a></div><div class="ttdeci">#define APLOGNO(n)</div><div class="ttdef"><b>Definition:</b> http_log.h:117</div></div>
<div class="ttc" id="structh2__session_html_a00e5945662f1e1b72b9d22c384f5a46f"><div class="ttname"><a href="structh2__session.html#a00e5945662f1e1b72b9d22c384f5a46f">h2_session::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_session.h:75</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_cgraph.png" border="0" usemap="#h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_cgraph" alt=""/></div>
<map name="h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_cgraph" id="h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_cgraph">
<area shape="rect" id="node2" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="195,5,241,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_icgraph.png" border="0" usemap="#h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_icgraph" alt=""/></div>
<map name="h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_icgraph" id="h2__session_8c_a8f2507556c255cdde8cf388d0008ee88_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#aca52abcbff55d0202fa4199078fb09f0" title="h2_session_push" alt="" coords="195,197,317,224"/>
<area shape="rect" id="node4" href="h2__session_8h.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="592,172,767,199"/>
<area shape="rect" id="node3" href="h2__stream_8h.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="365,197,544,224"/>
<area shape="rect" id="node5" href="h2__filter_8h.html#ab3bd5a1630af5762487a01bfb486d198" title="h2_bucket_observer_beam" alt="" coords="1644,5,1823,32"/>
<area shape="rect" id="node7" href="h2__stream_8h.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="815,172,953,199"/>
<area shape="rect" id="node6" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="2029,92,2179,119"/>
<area shape="rect" id="node8" href="h2__bucket__eos_8h.html#a7af1686f9a06910c60d7e123ac4e3d86" title="h2_bucket_eos_create" alt="" coords="1004,121,1157,148"/>
<area shape="rect" id="node10" href="h2__mplx_8h.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="1217,172,1356,199"/>
<area shape="rect" id="node12" href="h2__stream_8h.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="1001,59,1160,85"/>
<area shape="rect" id="node13" href="h2__stream_8h.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="1028,273,1133,300"/>
<area shape="rect" id="node19" href="h2__stream_8h.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="1208,223,1365,249"/>
<area shape="rect" id="node9" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="1213,121,1360,148"/>
<area shape="rect" id="node11" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="1441,223,1568,249"/>
<area shape="rect" id="node14" href="h2__stream_8h.html#a87d8887db632345afe5e3881844a1bab" title="h2_stream_recv_frame" alt="" coords="1209,324,1364,351"/>
<area shape="rect" id="node15" href="h2__stream_8h.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="1413,316,1596,343"/>
<area shape="rect" id="node16" href="h2__session_8h.html#a9e2e042cb4d3efa0625cc55bbd145a65" title="h2_session_rcreate" alt="" coords="1666,177,1801,204"/>
<area shape="rect" id="node17" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="1871,160,1981,187"/>
<area shape="rect" id="node18" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="2051,160,2157,187"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d9a44308b54a90de8859bb96e30e81f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* h2_session_state_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="h2_8h.html#ae2ebe57b68f1b311a5abbdb970061f23">h2_session_state</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;{</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span> (state &gt;= (<span class="keyword">sizeof</span>(StateNames)/<span class="keyword">sizeof</span>(StateNames[0]))) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    }</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">return</span> StateNames[state];</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_cgraph.png" border="0" usemap="#h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_cgraph" alt=""/></div>
<map name="h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_cgraph" id="h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_cgraph">
<area shape="rect" id="node2" href="h2__conn__io_8c.html#a8b40cf67d79195745379a7cdbcfd3d66" title="h2_conn_io_flush" alt="" coords="226,657,349,684"/>
<area shape="rect" id="node3" href="h2__mplx_8c.html#aa4e8ad2194fde52c7dd7fe5007a5ac77" title="h2_mplx_awaits_data" alt="" coords="213,708,361,735"/>
<area shape="rect" id="node7" href="h2__util_8c.html#a5fdef491f6e3a8e24bb03e11ce00acca" title="h2_iq_append" alt="" coords="657,852,759,879"/>
<area shape="rect" id="node14" href="h2__bucket__eos_8c.html#ab15aeb649549db2e3812ce93191bd941" title="h2_bucket_eos_create" alt="" coords="211,759,364,785"/>
<area shape="rect" id="node45" href="h2__conn__io_8c.html#abb57e15de53c4515ccbb0be4781492c4" title="h2_conn_io_pass" alt="" coords="226,860,349,887"/>
<area shape="rect" id="node46" href="h2__mplx_8c.html#a44229c7f9b1de82631ee8f088c000b45" title="h2_mplx_stream_cleanup" alt="" coords="202,911,373,937"/>
<area shape="rect" id="node47" href="h2__mplx_8c.html#a3ca0bf0869ce6462a66107c950eb70f2" title="h2_mplx_dispatch_master\l_events" alt="" coords="200,962,375,1003"/>
<area shape="rect" id="node4" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828" title="h2_ihash_empty" alt="" coords="439,607,556,633"/>
<area shape="rect" id="node5" href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a" title="h2_ififo_count" alt="" coords="446,864,549,891"/>
<area shape="rect" id="node6" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="449,657,545,684"/>
<area shape="rect" id="node8" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0" title="h2_iq_add" alt="" coords="1118,563,1199,589"/>
<area shape="rect" id="node9" href="h2__util_8c.html#a4bf6bbee2be663a01e97be92bcfbab45" title="h2_iq_contains" alt="" coords="1304,512,1413,539"/>
<area shape="rect" id="node10" href="util__expr__scan_8c.html#a33e91cd0cef6786e9e3a27ac67707207" title="if" alt="" coords="1339,563,1378,589"/>
<area shape="rect" id="node11" href="util__expr__scan_8c.html#a073e30a44c0e142fe3d3a1f87bbf6c5e" title="ap_expr_yy_create_buffer" alt="" coords="1477,436,1649,463"/>
<area shape="rect" id="node12" href="util__expr__scan_8c.html#a3dd61ae214da108171a1bc60b87291d0" title="ap_expr_yyalloc" alt="" coords="1697,372,1813,399"/>
<area shape="rect" id="node13" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="1861,259,1908,285"/>
<area shape="rect" id="node15" href="h2__bucket__eos_8c.html#acf4b1defa1188072d3d91d149bafc01c" title="h2_bucket_eos_make" alt="" coords="423,759,572,785"/>
<area shape="rect" id="node16" href="h2__stream_8c.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="428,708,567,735"/>
<area shape="rect" id="node17" href="h2__session_8c.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="621,436,795,463"/>
<area shape="rect" id="node18" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="883,5,990,32"/>
<area shape="rect" id="node44" href="h2__util_8c.html#ac28f57757be5e96803c3300e2caf94f4" title="h2_push_policy_determine" alt="" coords="620,708,796,735"/>
<area shape="rect" id="node20" href="unix_2sockopt_8c.html#aa32313b54afed590367c8571075d2bc1" title="apr_socket_timeout_get" alt="" coords="856,715,1017,741"/>
<area shape="rect" id="node21" href="unix_2sockopt_8c.html#a945bdbe807ec5635d65a6fd9ddb78c29" title="apr_socket_timeout_set" alt="" coords="856,765,1017,792"/>
<area shape="rect" id="node22" href="h2__stream_8c.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="884,816,989,843"/>
<area shape="rect" id="node25" href="h2__util_8c.html#a6b44f7b0518d2c540d313e528994d1f0" title="h2_res_create_ngtrailer" alt="" coords="858,56,1015,83"/>
<area shape="rect" id="node26" href="h2__stream_8c.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="847,157,1026,184"/>
<area shape="rect" id="node29" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88" title="h2_session_set_prio" alt="" coords="1288,208,1429,235"/>
<area shape="rect" id="node30" href="h2__stream_8c.html#aa12615c37d60f4cbc50ef3455eb4b77b" title="h2_stream_get_priority" alt="" coords="859,259,1014,285"/>
<area shape="rect" id="node32" href="h2__headers_8c.html#a09ef8b60a6dcb5092fbf6c5b436fb00b" title="h2_headers_copy" alt="" coords="875,360,999,387"/>
<area shape="rect" id="node34" href="h2__util_8c.html#a1f8a1d013fda7e98be914213de199edf" title="h2_res_create_ngheader" alt="" coords="855,309,1019,336"/>
<area shape="rect" id="node35" href="h2__headers_8c.html#ac241e59095a6600f7a10ddb103ecbe04" title="h2_headers_are_response" alt="" coords="849,411,1024,437"/>
<area shape="rect" id="node36" href="h2__stream_8c.html#ab0939d34133abdcf905f5e8879e63cc1" title="h2_stream_out_prepare" alt="" coords="857,461,1016,488"/>
<area shape="rect" id="node38" href="h2__util_8c.html#ae4c244854d49bc3a4a3f4b5f14c1b696" title="h2_iq_shift" alt="" coords="1116,512,1201,539"/>
<area shape="rect" id="node39" href="h2__session_8c.html#ad1d4897f2aa846843b8de9c00e1c75b3" title="h2_session_stream_get" alt="" coords="857,613,1017,640"/>
<area shape="rect" id="node40" href="h2__stream_8c.html#a15066acf068a7b151f01f384d517ebdc" title="h2_stream_prep_processing" alt="" coords="844,664,1029,691"/>
<area shape="rect" id="node41" href="h2__mplx_8c.html#af6c35070795724a55320fd46e77f1ec2" title="h2_mplx_process" alt="" coords="875,563,999,589"/>
<area shape="rect" id="node43" href="h2__stream_8c.html#abe2b7cf31575b9058feb0abb4f19f657" title="h2_stream_flush_input" alt="" coords="860,107,1013,133"/>
<area shape="rect" id="node19" href="h2__config_8c.html#a51b0c2c10599587f54770a555258d209" title="h2_config_geti64" alt="" coords="1099,5,1219,32"/>
<area shape="rect" id="node23" href="h2__bucket__beam_8c.html#a18fcdf460f20b412ce76dd68c93cdbe2" title="h2_beam_abort" alt="" coords="1103,791,1214,817"/>
<area shape="rect" id="node24" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="1102,841,1215,868"/>
<area shape="rect" id="node27" href="h2__push_8c.html#a472b2fcc2974feb81969d04dd1aa07cf" title="h2_push_collect_update" alt="" coords="1077,107,1240,133"/>
<area shape="rect" id="node28" href="h2__session_8c.html#a963d3784514be3ea425a0cc87cf3aa42" title="h2_session_push" alt="" coords="1097,157,1220,184"/>
<area shape="rect" id="node31" href="h2__config_8c.html#a0c867c8f46306da65aab3a5112f27c4a" title="h2_config_get_priority" alt="" coords="1489,259,1638,285"/>
<area shape="rect" id="node33" href="h2__headers_8c.html#a374f6ee5d97690b7613c76be360eb970" title="h2_headers_create" alt="" coords="1093,360,1225,387"/>
<area shape="rect" id="node37" href="h2__mplx_8c.html#a2635034633242ada1070ca3e4fab411f" title="h2_mplx_keep_active" alt="" coords="1085,461,1233,488"/>
<area shape="rect" id="node42" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="1109,664,1208,691"/>
<area shape="rect" id="node48" href="atomic_8c.html#ac689de9df18c093f66959227359328bb" title="apr_atomic_set32" alt="" coords="435,968,560,995"/>
<area shape="rect" id="node49" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="448,1019,547,1045"/>
<area shape="rect" id="node50" href="h2__util_8c.html#ade611cbb8c202f0c969b7a60a16da4ea" title="h2_ififo_try_pull" alt="" coords="441,1069,554,1096"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_icgraph.png" border="0" usemap="#h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_icgraph" alt=""/></div>
<map name="h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_icgraph" id="h2__session_8c_a9d9a44308b54a90de8859bb96e30e81f_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="200,29,347,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad1d4897f2aa846843b8de9c00e1c75b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structh2__stream.html">h2_stream</a>* h2_session_stream_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__session.html">h2_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>stream_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look up the stream in this session with the given id. </p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> nghttp2_session_get_stream_user_data(session-&gt;<a class="code" href="structh2__session.html#add0721875b1a24e581d276149984af8f">ngh2</a>, stream_id);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div><div class="ttc" id="structh2__session_html_add0721875b1a24e581d276149984af8f"><div class="ttname"><a href="structh2__session.html#add0721875b1a24e581d276149984af8f">h2_session::ngh2</a></div><div class="ttdeci">struct nghttp2_session * ngh2</div><div class="ttdef"><b>Definition:</b> h2_session.h:87</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__session_8c_ad1d4897f2aa846843b8de9c00e1c75b3_icgraph.png" border="0" usemap="#h2__session_8c_ad1d4897f2aa846843b8de9c00e1c75b3_icgraph" alt=""/></div>
<map name="h2__session_8c_ad1d4897f2aa846843b8de9c00e1c75b3_icgraph" id="h2__session_8c_ad1d4897f2aa846843b8de9c00e1c75b3_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="1063,169,1189,196"/>
<area shape="rect" id="node3" href="h2__session_8h.html#a9e2e042cb4d3efa0625cc55bbd145a65" title="h2_session_rcreate" alt="" coords="1287,43,1422,69"/>
<area shape="rect" id="node7" href="h2__session_8h.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="213,195,388,221"/>
<area shape="rect" id="node4" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="1492,181,1603,208"/>
<area shape="rect" id="node5" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="1651,267,1800,293"/>
<area shape="rect" id="node6" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="1673,181,1778,208"/>
<area shape="rect" id="node8" href="h2__filter_8h.html#ab3bd5a1630af5762487a01bfb486d198" title="h2_bucket_observer_beam" alt="" coords="1265,336,1444,363"/>
<area shape="rect" id="node9" href="h2__stream_8h.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="436,195,575,221"/>
<area shape="rect" id="node10" href="h2__bucket__eos_8h.html#a7af1686f9a06910c60d7e123ac4e3d86" title="h2_bucket_eos_create" alt="" coords="625,308,779,335"/>
<area shape="rect" id="node12" href="h2__mplx_8h.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="839,144,977,171"/>
<area shape="rect" id="node13" href="h2__stream_8h.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="623,245,781,272"/>
<area shape="rect" id="node14" href="h2__stream_8h.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="649,93,755,120"/>
<area shape="rect" id="node17" href="h2__stream_8h.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="829,195,987,221"/>
<area shape="rect" id="node11" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="835,320,981,347"/>
<area shape="rect" id="node15" href="h2__stream_8h.html#a87d8887db632345afe5e3881844a1bab" title="h2_stream_recv_frame" alt="" coords="831,43,985,69"/>
<area shape="rect" id="node16" href="h2__stream_8h.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="1035,43,1217,69"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
