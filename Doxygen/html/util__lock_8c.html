<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: /usr/local/src/github/Codebase/httpd-2.4.29/modules/dav/main/util_lock.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2379abaa7725ab34fabdf9daa508e09.html">Codebase</a></li><li class="navelem"><a class="el" href="dir_db9466b59d24a02e023577068efc5d5d.html">httpd-2.4.29</a></li><li class="navelem"><a class="el" href="dir_04adba3a211bbed5210563c01b5ac160.html">modules</a></li><li class="navelem"><a class="el" href="dir_bb61aca7001bd4c99c7f726a00a7b822.html">dav</a></li><li class="navelem"><a class="el" href="dir_78543bab373045db8feade7e123e38fe.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">util_lock.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="apr_8h_source.html">apr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apr__strings_8h_source.html">apr_strings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mod__dav_8h_source.html">mod_dav.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="http__log_8h_source.html">http_log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="http__config_8h_source.html">http_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="http__protocol_8h_source.html">http_protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="http__core_8h_source.html">http_core.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for util_lock.c:</div>
<div class="dyncontent">
<div class="center"><img src="util__lock_8c__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2dav_2main_2util__lock_8c" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2dav_2main_2util__lock_8c" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2dav_2main_2util__lock_8c">
<area shape="rect" id="node2" href="apr_8h.html" title="APR Platform Definitions. " alt="" coords="1479,931,1529,957"/>
<area shape="rect" id="node8" href="apr__strings_8h.html" title="APR Strings library. " alt="" coords="635,632,733,659"/>
<area shape="rect" id="node17" href="mod__dav_8h.html" title="DAV extension module for Apache 2.0.*. " alt="" coords="617,109,703,136"/>
<area shape="rect" id="node42" href="http__log_8h.html" title="Apache Logging library. " alt="" coords="1403,184,1482,211"/>
<area shape="rect" id="node43" href="http__config_8h.html" title="Apache Configuration. " alt="" coords="1783,259,1881,285"/>
<area shape="rect" id="node46" href="http__protocol_8h.html" title="HTTP protocol handling. " alt="" coords="1573,109,1681,136"/>
<area shape="rect" id="node48" href="http__core_8h.html" title="CORE HTTP Daemon. " alt="" coords="1462,109,1549,136"/>
<area shape="rect" id="node9" href="apr__errno_8h.html" title="APR Error Codes. " alt="" coords="554,856,641,883"/>
<area shape="rect" id="node11" href="apr__pools_8h.html" title="APR memory allocation. " alt="" coords="1318,707,1407,733"/>
<area shape="rect" id="node13" href="apr__want_8h.html" title="APR Standard Headers Support. " alt="" coords="1461,856,1547,883"/>
<area shape="rect" id="node12" href="apr__general_8h.html" title="APR Miscellaneous library routines. " alt="" coords="1083,781,1183,808"/>
<area shape="rect" id="node15" href="apr__allocator_8h.html" title="APR Internal Memory Allocation. " alt="" coords="1309,781,1416,808"/>
<area shape="rect" id="node18" href="apr__hooks_8h.html" title="Apache hook functions. " alt="" coords="453,408,547,435"/>
<area shape="rect" id="node20" href="apr__tables_8h.html" title="APR Table library. " alt="" coords="757,632,851,659"/>
<area shape="rect" id="node21" href="apr__hash_8h.html" title="APR Hash Tables. " alt="" coords="825,184,911,211"/>
<area shape="rect" id="node22" href="apr__dbm_8h.html" title="APR&#45;UTIL DBM library. " alt="" coords="347,408,429,435"/>
<area shape="rect" id="node25" href="httpd_8h.html" title="HTTP Daemon routines. " alt="" coords="1665,259,1727,285"/>
<area shape="rect" id="node38" href="util__filter_8h.html" title="Apache filter library. " alt="" coords="1507,184,1589,211"/>
<area shape="rect" id="node39" href="util__xml_8h.html" title="Apache XML library. " alt="" coords="722,184,801,211"/>
<area shape="rect" id="node19" href="apu_8h.html" title="apu.h" alt="" coords="655,483,710,509"/>
<area shape="rect" id="node23" href="apr__file__info_8h.html" title="APR File Information. " alt="" coords="905,557,1007,584"/>
<area shape="rect" id="node24" href="apr__time_8h.html" title="APR Time Library. " alt="" coords="1128,632,1211,659"/>
<area shape="rect" id="node26" href="ap__config_8h.html" title="Symbol export macros and hook functions. " alt="" coords="2293,408,2382,435"/>
<area shape="rect" id="node28" href="ap__mmn_8h.html" title="Module Magic Number. " alt="" coords="1227,333,1309,360"/>
<area shape="rect" id="node29" href="ap__release_8h.html" title="Version Release defines. " alt="" coords="1333,333,1429,360"/>
<area shape="rect" id="node30" href="apr__network__io_8h.html" title="APR Network library. " alt="" coords="1570,408,1691,435"/>
<area shape="rect" id="node32" href="apr__buckets_8h.html" title="APR&#45;UTIL Buckets/Bucket Brigades. " alt="" coords="997,333,1101,360"/>
<area shape="rect" id="node34" href="apr__poll_8h.html" title="APR Poll interface. " alt="" coords="1785,333,1863,360"/>
<area shape="rect" id="node35" href="apr__thread__proc_8h.html" title="APR Thread and Process Library. " alt="" coords="1419,408,1546,435"/>
<area shape="rect" id="node36" href="ap__regex_8h.html" title="Apache Regex defines. " alt="" coords="2458,333,2545,360"/>
<area shape="rect" id="node37" href="apr__uri_8h.html" title="APR&#45;UTIL URI Routines. " alt="" coords="901,333,973,360"/>
<area shape="rect" id="node31" href="apr__file__io_8h.html" title="APR File I/O Handling. " alt="" coords="1405,483,1497,509"/>
<area shape="rect" id="node33" href="apr__mmap_8h.html" title="APR MMAP routines. " alt="" coords="1767,408,1862,435"/>
<area shape="rect" id="node40" href="apr__xml_8h.html" title="APR&#45;UTIL XML Library. " alt="" coords="825,408,903,435"/>
<area shape="rect" id="node44" href="util__cfgtree_8h.html" title="Config Tree Package. " alt="" coords="2234,333,2331,360"/>
<area shape="rect" id="node47" href="apr__portable_8h.html" title="APR Portability Routines. " alt="" coords="1504,333,1608,360"/>
<area shape="rect" id="node49" href="apr__optional_8h.html" title="APR&#45;UTIL registration of functions exported by modules. " alt="" coords="622,259,725,285"/>
<area shape="rect" id="node50" href="ap__expr_8h.html" title="Expression parser. " alt="" coords="1715,184,1794,211"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a69d6c57c8f0568435ad44220639b5129"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util__lock_8c.html#a69d6c57c8f0568435ad44220639b5129">APLOG_USE_MODULE</a> (dav)</td></tr>
<tr class="separator:a69d6c57c8f0568435ad44220639b5129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a814f27f5b49e60ccbab42f6d7e9ec83b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util__lock_8c.html#a814f27f5b49e60ccbab42f6d7e9ec83b">DAV_DECLARE</a> (const char *)</td></tr>
<tr class="separator:a814f27f5b49e60ccbab42f6d7e9ec83b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf889c691920d48451a89dc46fef863"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util__lock_8c.html#a6cf889c691920d48451a89dc46fef863">DAV_DECLARE</a> (<a class="el" href="structdav__error.html">dav_error</a> *)</td></tr>
<tr class="separator:a6cf889c691920d48451a89dc46fef863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2f14122c74bb061f2f1f6545627af0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util__lock_8c.html#afe2f14122c74bb061f2f1f6545627af0">DAV_DECLARE</a> (<a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>)</td></tr>
<tr class="separator:afe2f14122c74bb061f2f1f6545627af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a69d6c57c8f0568435ad44220639b5129"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APLOG_USE_MODULE </td>
          <td>(</td>
          <td class="paramtype">dav&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a814f27f5b49e60ccbab42f6d7e9ec83b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DAV_DECLARE </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="structdav__lock.html">dav_lock</a> *lock_scan;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdav__hooks__locks.html">dav_hooks_locks</a> *<a class="code" href="group__MOD__DAV.html#ga2f89c7cfd67d24769756d6d2df79bf5c">hooks</a> = <a class="code" href="group__MOD__DAV.html#ga0300526f19a870f40f3827266111add5">DAV_GET_HOOKS_LOCKS</a>(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__APR__MD5.html#ga16ff2d8e15ade4948398b0aeb80124a8">count</a> = 0;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="structdav__buffer.html">dav_buffer</a> work_buf = { 0 };</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="structapr__pool__t.html">apr_pool_t</a> *<a class="code" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a> = <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">/* If no locks or no lock provider, there are no locks */</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a> == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> || hooks == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">        ** Since resourcediscovery is defined with (activelock)*,</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">        ** &lt;D:activelock/&gt; shouldn&#39;t be necessary for an empty lock.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">        */</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    ** Note: it could be interesting to sum the lengths of the owners</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">    **       and locktokens during this loop. However, the buffer</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">    **       mechanism provides some rough padding so that we don&#39;t</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">    **       really need to have an exact size. Further, constructing</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">    **       locktoken strings could be relatively expensive.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">for</span> (lock_scan = <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>; lock_scan != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>; lock_scan = lock_scan-&gt;<a class="code" href="structdav__lock.html#a66477789d4e9ff6e7c5b50c334805b85">next</a>)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        count++;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">/* if a buffer was not provided, then use an internal buffer */</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a> == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a> = &amp;work_buf;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">/* reset the length before we start appending stuff */</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>-&gt;<a class="code" href="structdav__buffer.html#a8d43337c127b3e07aada116e7f3cb2a9">cur_len</a> = 0;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">/* prep the buffer with a &quot;good&quot; size */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    dav_check_bufsize(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, count * 300);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a> != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>; <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a> = <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;next) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordtype">char</span> tmp[100];</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#if DAV_DEBUG</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;rectype == <a class="code" href="group__MOD__DAV.html#gga35626623c09f0611245743b5868eb936a54f61e288144fbd760131e3c98356d41">DAV_LOCKREC_INDIRECT_PARTIAL</a>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="comment">/* ### crap. design error */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                              <span class="stringliteral">&quot;DESIGN ERROR: attempted to product an &quot;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                              <span class="stringliteral">&quot;activelock element from a partial, indirect &quot;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                              <span class="stringliteral">&quot;lock record. Creating an XML parsing error &quot;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                              <span class="stringliteral">&quot;to ease detection of this situation: &lt;&quot;</span>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;D:activelock&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a> <span class="stringliteral">&quot;&lt;D:locktype&gt;&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;<a class="code" href="structapr__anylock__t.html#abe78b2ee0daaee1b19c952c4f8fc903a">type</a>) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__MOD__DAV.html#gga9089e677b6d1b25daccbc1efa484a829ad71440467fd4e5e5268f2fddbe658819">DAV_LOCKTYPE_WRITE</a>:</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;D:write/&gt;&quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="comment">/* ### internal error. log something? */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;/D:locktype&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a> <span class="stringliteral">&quot;&lt;D:lockscope&gt;&quot;</span>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;scope) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88aeb6d70b4e2b1c2968b4bff039c79d43c">DAV_LOCKSCOPE_EXCLUSIVE</a>:</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;D:exclusive/&gt;&quot;</span>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a9961b30fb47aa623dc82f41f979d6912">DAV_LOCKSCOPE_SHARED</a>:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;D:shared/&gt;&quot;</span>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="comment">/* ### internal error. log something? */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;/D:lockscope&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        apr_snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;&lt;D:depth&gt;%s&lt;/D:depth&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a>,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                     <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;depth == <a class="code" href="group__MOD__DAV.html#ga72b95fe139d3f6c6eeceed598b721ce1">DAV_INFINITY</a> ? <span class="stringliteral">&quot;infinity&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, tmp);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;owner) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">            ** This contains a complete, self-contained &lt;DAV:owner&gt; element,</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">            ** with namespace declarations and xml:lang handling. Just drop</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">            ** it in.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;owner);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;&lt;D:timeout&gt;&quot;</span>);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;timeout == <a class="code" href="group__MOD__DAV.html#gac73dd532e3e6fa30d2e18ba644c5816a">DAV_TIMEOUT_INFINITE</a>) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;Infinite&quot;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            time_t <a class="code" href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a> = <a class="code" href="pcre_8txt.html#aafdc0b2481cb13eb2e0183db31aa1c5d">time</a>(<a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            </div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">            ** Check if the timeout is not, for any reason, already elapsed.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">            ** (e.g., because of a large collection, or disk under heavy load...)</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">if</span> (now &gt;= <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;timeout) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, <span class="stringliteral">&quot;Second-0&quot;</span>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                apr_snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;Second-%lu&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;timeout - now));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>, tmp);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                          <span class="stringliteral">&quot;&lt;/D:timeout&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                          <span class="stringliteral">&quot;&lt;D:locktoken&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                          <span class="stringliteral">&quot;&lt;D:href&gt;&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                          (*hooks-&gt;<a class="code" href="structdav__hooks__locks.html#a2a0a2169e202d658d9afc9e2b8b53238">format_locktoken</a>)(p, <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>-&gt;locktoken));</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        dav_buffer_append(p, <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                          <span class="stringliteral">&quot;&lt;/D:href&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                          <span class="stringliteral">&quot;&lt;/D:locktoken&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                          <span class="stringliteral">&quot;&lt;/D:activelock&gt;&quot;</span> <a class="code" href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a>-&gt;<a class="code" href="structdav__buffer.html#ab55f9f7e74cadc2abbc7f4fc99090f01">buf</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="ttc" id="structapr__pool__t_html"><div class="ttname"><a href="structapr__pool__t.html">apr_pool_t</a></div><div class="ttdef"><b>Definition:</b> apr_pools.c:577</div></div>
<div class="ttc" id="group__MOD__DAV_html_gae1a94d2dbbb7065be386af579bdbe312"><div class="ttname"><a href="group__MOD__DAV.html#gae1a94d2dbbb7065be386af579bdbe312">pbuf</a></div><div class="ttdeci">dav_buffer * pbuf</div><div class="ttdef"><b>Definition:</b> mod_dav.h:451</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga5cd91701e5c167f2b1a38e70ab57817e"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a></div><div class="ttdeci">apr_proc_t const char const char *const const char *const apr_procattr_t apr_pool_t * p</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:109</div></div>
<div class="ttc" id="pcre_8txt_html_aafdc0b2481cb13eb2e0183db31aa1c5d"><div class="ttname"><a href="pcre_8txt.html#aafdc0b2481cb13eb2e0183db31aa1c5d">time</a></div><div class="ttdeci">this overrides any other settings See the pcrepattern page for details of the special character sequences In the PCRE documentation the word newline is used to mean the char acter or pair of characters that indicate a line break The choice of newline convention affects the handling of the and dollar the handling of CRLF is a recognized line ending the match position advance ment for a non anchored pattern There is more detail about this in the section on nor does it affect what R which is controlled in a similar but by separate options MULTITHREADING The PCRE functions can be used in multi threading with the proviso that the memory management functions pointed to by and and the callout and stack checking functions pointed to by pcre_callout and are shared by all threads The compiled form of a regular expression is not altered during match so the same compiled pattern can safely be used by several threads at once If the just in time optimization feature is being it needs sepa rate memory stack areas for each thread See the pcrejit documentation for more details SAVING PRECOMPILED PATTERNS FOR LATER USE The compiled form of a regular expression can be saved and re used at a later time</div><div class="ttdef"><b>Definition:</b> pcre.txt:1865</div></div>
<div class="ttc" id="structdav__hooks__locks_html"><div class="ttname"><a href="structdav__hooks__locks.html">dav_hooks_locks</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1369</div></div>
<div class="ttc" id="structdav__lock_html"><div class="ttname"><a href="structdav__lock.html">dav_lock</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1289</div></div>
<div class="ttc" id="group__APR__Util__RMM_html_ga0353fe7d0bd33c38d9a7a57a73b6407e"><div class="ttname"><a href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a></div><div class="ttdeci">apr_anylock_t * lock</div><div class="ttdef"><b>Definition:</b> apr_rmm.h:56</div></div>
<div class="ttc" id="structrequest__rec_html_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0"><div class="ttname"><a href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">request_rec::pool</a></div><div class="ttdeci">uintptr_t pool</div><div class="ttdef"><b>Definition:</b> ap.d:3</div></div>
<div class="ttc" id="group__MOD__CACHE_html_ga33504014e188d5d7506173cc14fb5801"><div class="ttname"><a href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a></div><div class="ttdeci">const apr_time_t apr_time_t now</div><div class="ttdef"><b>Definition:</b> mod_cache.h:131</div></div>
<div class="ttc" id="structapr__anylock__t_html_abe78b2ee0daaee1b19c952c4f8fc903a"><div class="ttname"><a href="structapr__anylock__t.html#abe78b2ee0daaee1b19c952c4f8fc903a">apr_anylock_t::type</a></div><div class="ttdeci">enum apr_anylock_t::tm_lock type</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga0300526f19a870f40f3827266111add5"><div class="ttname"><a href="group__MOD__DAV.html#ga0300526f19a870f40f3827266111add5">DAV_GET_HOOKS_LOCKS</a></div><div class="ttdeci">#define DAV_GET_HOOKS_LOCKS(r)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:728</div></div>
<div class="ttc" id="structdav__hooks__locks_html_a2a0a2169e202d658d9afc9e2b8b53238"><div class="ttname"><a href="structdav__hooks__locks.html#a2a0a2169e202d658d9afc9e2b8b53238">dav_hooks_locks::format_locktoken</a></div><div class="ttdeci">const char *(* format_locktoken)(apr_pool_t *p, const dav_locktoken *locktoken)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1390</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga72b95fe139d3f6c6eeceed598b721ce1"><div class="ttname"><a href="group__MOD__DAV.html#ga72b95fe139d3f6c6eeceed598b721ce1">DAV_INFINITY</a></div><div class="ttdeci">#define DAV_INFINITY</div><div class="ttdef"><b>Definition:</b> mod_dav.h:79</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga5a242a2983fe78462523e34b6d6e3628"><div class="ttname"><a href="group__MOD__DAV.html#ga5a242a2983fe78462523e34b6d6e3628">DEBUG_CR</a></div><div class="ttdeci">#define DEBUG_CR</div><div class="ttdef"><b>Definition:</b> mod_dav.h:65</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga9089e677b6d1b25daccbc1efa484a829ad71440467fd4e5e5268f2fddbe658819"><div class="ttname"><a href="group__MOD__DAV.html#gga9089e677b6d1b25daccbc1efa484a829ad71440467fd4e5e5268f2fddbe658819">DAV_LOCKTYPE_WRITE</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1250</div></div>
<div class="ttc" id="structdav__buffer_html_ab55f9f7e74cadc2abbc7f4fc99090f01"><div class="ttname"><a href="structdav__buffer.html#ab55f9f7e74cadc2abbc7f4fc99090f01">dav_buffer::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> mod_dav.h:445</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga4840019bf9343c4c1a95befb97b12a88aeb6d70b4e2b1c2968b4bff039c79d43c"><div class="ttname"><a href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88aeb6d70b4e2b1c2968b4bff039c79d43c">DAV_LOCKSCOPE_EXCLUSIVE</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1244</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga2f89c7cfd67d24769756d6d2df79bf5c"><div class="ttname"><a href="group__MOD__DAV.html#ga2f89c7cfd67d24769756d6d2df79bf5c">hooks</a></div><div class="ttdeci">const char const dav_provider * hooks</div><div class="ttdef"><b>Definition:</b> mod_dav.h:720</div></div>
<div class="ttc" id="structdav__lock_html_a66477789d4e9ff6e7c5b50c334805b85"><div class="ttname"><a href="structdav__lock.html#a66477789d4e9ff6e7c5b50c334805b85">dav_lock::next</a></div><div class="ttdeci">struct dav_lock * next</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1308</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga35626623c09f0611245743b5868eb936a54f61e288144fbd760131e3c98356d41"><div class="ttname"><a href="group__MOD__DAV.html#gga35626623c09f0611245743b5868eb936a54f61e288144fbd760131e3c98356d41">DAV_LOCKREC_INDIRECT_PARTIAL</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1256</div></div>
<div class="ttc" id="structdav__buffer_html_a8d43337c127b3e07aada116e7f3cb2a9"><div class="ttname"><a href="structdav__buffer.html#a8d43337c127b3e07aada116e7f3cb2a9">dav_buffer::cur_len</a></div><div class="ttdeci">apr_size_t cur_len</div><div class="ttdef"><b>Definition:</b> mod_dav.h:444</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="group__APR__MD5_html_ga16ff2d8e15ade4948398b0aeb80124a8"><div class="ttname"><a href="group__APR__MD5.html#ga16ff2d8e15ade4948398b0aeb80124a8">count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> apr_md5.h:152</div></div>
<div class="ttc" id="group__MOD__DAV_html_gac73dd532e3e6fa30d2e18ba644c5816a"><div class="ttname"><a href="group__MOD__DAV.html#gac73dd532e3e6fa30d2e18ba644c5816a">DAV_TIMEOUT_INFINITE</a></div><div class="ttdeci">#define DAV_TIMEOUT_INFINITE</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1215</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga4840019bf9343c4c1a95befb97b12a88a9961b30fb47aa623dc82f41f979d6912"><div class="ttname"><a href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a9961b30fb47aa623dc82f41f979d6912">DAV_LOCKSCOPE_SHARED</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1245</div></div>
<div class="ttc" id="structdav__buffer_html"><div class="ttname"><a href="structdav__buffer.html">dav_buffer</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:441</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="util__lock_8c_a814f27f5b49e60ccbab42f6d7e9ec83b_icgraph.png" border="0" usemap="#util__lock_8c_a814f27f5b49e60ccbab42f6d7e9ec83b_icgraph" alt=""/></div>
<map name="util__lock_8c_a814f27f5b49e60ccbab42f6d7e9ec83b_icgraph" id="util__lock_8c_a814f27f5b49e60ccbab42f6d7e9ec83b_icgraph">
<area shape="rect" id="node2" href="util__lock_8c.html#a6cf889c691920d48451a89dc46fef863" title="DAV_DECLARE" alt="" coords="175,5,296,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6cf889c691920d48451a89dc46fef863"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DAV_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdav__error.html">dav_error</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="structapr__pool__t.html">apr_pool_t</a> *<a class="code" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a> = <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="structdav__error.html">dav_error</a> *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="structapr__xml__elem.html">apr_xml_elem</a> *child;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="structdav__lock.html">dav_lock</a> *<a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (!dav_validate_root(<a class="code" href="group__MOD__DAV.html#gab79aad8aa27988a0e86b9397d43541e8">doc</a>, <span class="stringliteral">&quot;lockinfo&quot;</span>)) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">return</span> dav_new_error(p, <a class="code" href="group__HTTP__Status.html#ga0c1fdbbb10800664989907cbd3a5a023">HTTP_BAD_REQUEST</a>, 0, 0,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                             <span class="stringliteral">&quot;The request body contains an unexpected &quot;</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                             <span class="stringliteral">&quot;XML root element.&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> ((err = (*<a class="code" href="group__MOD__DAV.html#ga4d2e2ae951dbf7731ef129422cb95674">lockdb</a>-&gt;<a class="code" href="structdav__resource.html#a68b6668d61d787457251783e1caf4f12">hooks</a>-&gt;create_lock)(<a class="code" href="group__MOD__DAV.html#ga4d2e2ae951dbf7731ef129422cb95674">lockdb</a>, <a class="code" href="group__MOD__DAV.html#gace5ccd456846e6c0fdd4da4136bd9a44">resource</a>,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                             &amp;lock)) != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> dav_push_error(p, err-&gt;<a class="code" href="structdav__error.html#a128d24c8403fc5525e754f96700d4e41">status</a>, 0,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                              <span class="stringliteral">&quot;Could not parse the lockinfo due to an &quot;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                              <span class="stringliteral">&quot;internal problem creating a lock structure.&quot;</span>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                              err);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    lock-&gt;<a class="code" href="structdav__lock.html#a5bb85bc71ec6944b0f93c9b7b80877ae">depth</a> = dav_get_depth(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>, <a class="code" href="group__MOD__DAV.html#ga72b95fe139d3f6c6eeceed598b721ce1">DAV_INFINITY</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (lock-&gt;<a class="code" href="structdav__lock.html#a5bb85bc71ec6944b0f93c9b7b80877ae">depth</a> == -1) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> dav_new_error(p, <a class="code" href="group__HTTP__Status.html#ga0c1fdbbb10800664989907cbd3a5a023">HTTP_BAD_REQUEST</a>, 0, 0,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                             <span class="stringliteral">&quot;An invalid Depth header was specified.&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    lock-&gt;<a class="code" href="structdav__lock.html#a03cbe5184a1fb4a732c41180dee9f669">timeout</a> = dav_get_timeout(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* Parse elements in the XML body */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">for</span> (child = <a class="code" href="group__MOD__DAV.html#gab79aad8aa27988a0e86b9397d43541e8">doc</a>-&gt;root-&gt;first_child; child; child = child-&gt;<a class="code" href="structapr__xml__elem.html#a8687253d504b1c1363c47117611042ac">next</a>) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> (strcmp(child-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>, <span class="stringliteral">&quot;locktype&quot;</span>) == 0</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            &amp;&amp; child-&gt;<a class="code" href="structapr__xml__elem.html#a620a28337f36592d4cb1f6dd3d2e97e0">first_child</a></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            &amp;&amp; lock-&gt;<a class="code" href="structdav__lock.html#a4aa3e9701a82c81261524a82dc6e7416">type</a> == <a class="code" href="group__MOD__DAV.html#gga9089e677b6d1b25daccbc1efa484a829a599e4abedd7d53d6d448fc769698af4f">DAV_LOCKTYPE_UNKNOWN</a>) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">if</span> (strcmp(child-&gt;<a class="code" href="structapr__xml__elem.html#a620a28337f36592d4cb1f6dd3d2e97e0">first_child</a>-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>, <span class="stringliteral">&quot;write&quot;</span>) == 0) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                lock-&gt;<a class="code" href="structdav__lock.html#a4aa3e9701a82c81261524a82dc6e7416">type</a> = <a class="code" href="group__MOD__DAV.html#gga9089e677b6d1b25daccbc1efa484a829ad71440467fd4e5e5268f2fddbe658819">DAV_LOCKTYPE_WRITE</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span> (strcmp(child-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>, <span class="stringliteral">&quot;lockscope&quot;</span>) == 0</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            &amp;&amp; child-&gt;<a class="code" href="structapr__xml__elem.html#a620a28337f36592d4cb1f6dd3d2e97e0">first_child</a></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            &amp;&amp; lock-&gt;<a class="code" href="structdav__lock.html#a8ba66b35529c414fed105e134f14ee3d">scope</a> == <a class="code" href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a3e019b5ebe87778ed144aad7cfc9d2e7">DAV_LOCKSCOPE_UNKNOWN</a>) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">if</span> (strcmp(child-&gt;<a class="code" href="structapr__xml__elem.html#a620a28337f36592d4cb1f6dd3d2e97e0">first_child</a>-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>, <span class="stringliteral">&quot;exclusive&quot;</span>) == 0)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                lock-&gt;<a class="code" href="structdav__lock.html#a8ba66b35529c414fed105e134f14ee3d">scope</a> = <a class="code" href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88aeb6d70b4e2b1c2968b4bff039c79d43c">DAV_LOCKSCOPE_EXCLUSIVE</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(child-&gt;<a class="code" href="structapr__xml__elem.html#a620a28337f36592d4cb1f6dd3d2e97e0">first_child</a>-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>, <span class="stringliteral">&quot;shared&quot;</span>) == 0)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                lock-&gt;<a class="code" href="structdav__lock.html#a8ba66b35529c414fed105e134f14ee3d">scope</a> = <a class="code" href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a9961b30fb47aa623dc82f41f979d6912">DAV_LOCKSCOPE_SHARED</a>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">if</span> (lock-&gt;<a class="code" href="structdav__lock.html#a8ba66b35529c414fed105e134f14ee3d">scope</a> != <a class="code" href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a3e019b5ebe87778ed144aad7cfc9d2e7">DAV_LOCKSCOPE_UNKNOWN</a>)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (strcmp(child-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>, <span class="stringliteral">&quot;owner&quot;</span>) == 0 &amp;&amp; lock-&gt;<a class="code" href="structdav__lock.html#ae78ed4ddbc46974c039442c376f84167">owner</a> == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__APR__Util__XML.html#ga6f353ddc97cf6dc93417f58016afe82c">text</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">/* quote all the values in the &lt;DAV:owner&gt; element */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            apr_xml_quote_elem(p, child);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">            ** Store a full &lt;DAV:owner&gt; element with namespace definitions</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">            ** and an xml:lang definition, if applicable.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            apr_xml_to_text(p, child, <a class="code" href="group__APR__Util__XML.html#ga7b2cd4c48940cd95a56ace294a94d938">APR_XML_X2T_FULL_NS_LANG</a>, <a class="code" href="group__MOD__DAV.html#gab79aad8aa27988a0e86b9397d43541e8">doc</a>-&gt;namespaces,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                            <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, &amp;text, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            lock-&gt;<a class="code" href="structdav__lock.html#ae78ed4ddbc46974c039442c376f84167">owner</a> = <a class="code" href="group__APR__Util__XML.html#ga6f353ddc97cf6dc93417f58016afe82c">text</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> dav_new_error(p, <a class="code" href="group__HTTP__Status.html#ga2861af5b328c5c8209dbd3a7147e9727">HTTP_PRECONDITION_FAILED</a>, 0, 0,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                             apr_psprintf(p,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                         <span class="stringliteral">&quot;The server cannot satisfy the &quot;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                         <span class="stringliteral">&quot;LOCK request due to an unknown XML &quot;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                                         <span class="stringliteral">&quot;element (\&quot;%s\&quot;) within the &quot;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                         <span class="stringliteral">&quot;DAV:lockinfo element.&quot;</span>,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                         child-&gt;<a class="code" href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">name</a>));</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    *<a class="code" href="group__MOD__DAV.html#gab4436a0928746b4d531ca686d2a0c0bf">lock_request</a> = <a class="code" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div><div class="ttc" id="structapr__pool__t_html"><div class="ttname"><a href="structapr__pool__t.html">apr_pool_t</a></div><div class="ttdef"><b>Definition:</b> apr_pools.c:577</div></div>
<div class="ttc" id="group__MOD__DAV_html_gab4436a0928746b4d531ca686d2a0c0bf"><div class="ttname"><a href="group__MOD__DAV.html#gab4436a0928746b4d531ca686d2a0c0bf">lock_request</a></div><div class="ttdeci">const dav_resource dav_lockdb const apr_xml_doc dav_lock ** lock_request</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1318</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga5cd91701e5c167f2b1a38e70ab57817e"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a></div><div class="ttdeci">apr_proc_t const char const char *const const char *const apr_procattr_t apr_pool_t * p</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:109</div></div>
<div class="ttc" id="structdav__lock_html"><div class="ttname"><a href="structdav__lock.html">dav_lock</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1289</div></div>
<div class="ttc" id="group__APR__Util__RMM_html_ga0353fe7d0bd33c38d9a7a57a73b6407e"><div class="ttname"><a href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a></div><div class="ttdeci">apr_anylock_t * lock</div><div class="ttdef"><b>Definition:</b> apr_rmm.h:56</div></div>
<div class="ttc" id="structapr__xml__elem_html"><div class="ttname"><a href="structapr__xml__elem.html">apr_xml_elem</a></div><div class="ttdef"><b>Definition:</b> apr_xml.h:162</div></div>
<div class="ttc" id="structrequest__rec_html_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0"><div class="ttname"><a href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">request_rec::pool</a></div><div class="ttdeci">uintptr_t pool</div><div class="ttdef"><b>Definition:</b> ap.d:3</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga0c1fdbbb10800664989907cbd3a5a023"><div class="ttname"><a href="group__HTTP__Status.html#ga0c1fdbbb10800664989907cbd3a5a023">HTTP_BAD_REQUEST</a></div><div class="ttdeci">#define HTTP_BAD_REQUEST</div><div class="ttdef"><b>Definition:</b> httpd.h:510</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga2861af5b328c5c8209dbd3a7147e9727"><div class="ttname"><a href="group__HTTP__Status.html#ga2861af5b328c5c8209dbd3a7147e9727">HTTP_PRECONDITION_FAILED</a></div><div class="ttdeci">#define HTTP_PRECONDITION_FAILED</div><div class="ttdef"><b>Definition:</b> httpd.h:522</div></div>
<div class="ttc" id="group__APR__Util__XML_html_ga6f353ddc97cf6dc93417f58016afe82c"><div class="ttname"><a href="group__APR__Util__XML.html#ga6f353ddc97cf6dc93417f58016afe82c">text</a></div><div class="ttdeci">apr_text_header const char * text</div><div class="ttdef"><b>Definition:</b> apr_xml.h:77</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga72b95fe139d3f6c6eeceed598b721ce1"><div class="ttname"><a href="group__MOD__DAV.html#ga72b95fe139d3f6c6eeceed598b721ce1">DAV_INFINITY</a></div><div class="ttdeci">#define DAV_INFINITY</div><div class="ttdef"><b>Definition:</b> mod_dav.h:79</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga9089e677b6d1b25daccbc1efa484a829a599e4abedd7d53d6d448fc769698af4f"><div class="ttname"><a href="group__MOD__DAV.html#gga9089e677b6d1b25daccbc1efa484a829a599e4abedd7d53d6d448fc769698af4f">DAV_LOCKTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1249</div></div>
<div class="ttc" id="structdav__lock_html_a03cbe5184a1fb4a732c41180dee9f669"><div class="ttname"><a href="structdav__lock.html#a03cbe5184a1fb4a732c41180dee9f669">dav_lock::timeout</a></div><div class="ttdeci">time_t timeout</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1299</div></div>
<div class="ttc" id="group__APR__Util__XML_html_ga7b2cd4c48940cd95a56ace294a94d938"><div class="ttname"><a href="group__APR__Util__XML.html#ga7b2cd4c48940cd95a56ace294a94d938">APR_XML_X2T_FULL_NS_LANG</a></div><div class="ttdeci">#define APR_XML_X2T_FULL_NS_LANG</div><div class="ttdef"><b>Definition:</b> apr_xml.h:295</div></div>
<div class="ttc" id="structdav__error_html_a128d24c8403fc5525e754f96700d4e41"><div class="ttname"><a href="structdav__error.html#a128d24c8403fc5525e754f96700d4e41">dav_error::status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> mod_dav.h:122</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga9089e677b6d1b25daccbc1efa484a829ad71440467fd4e5e5268f2fddbe658819"><div class="ttname"><a href="group__MOD__DAV.html#gga9089e677b6d1b25daccbc1efa484a829ad71440467fd4e5e5268f2fddbe658819">DAV_LOCKTYPE_WRITE</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1250</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga4840019bf9343c4c1a95befb97b12a88aeb6d70b4e2b1c2968b4bff039c79d43c"><div class="ttname"><a href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88aeb6d70b4e2b1c2968b4bff039c79d43c">DAV_LOCKSCOPE_EXCLUSIVE</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1244</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="group__MOD__DAV_html_gace5ccd456846e6c0fdd4da4136bd9a44"><div class="ttname"><a href="group__MOD__DAV.html#gace5ccd456846e6c0fdd4da4136bd9a44">resource</a></div><div class="ttdeci">const dav_resource * resource</div><div class="ttdef"><b>Definition:</b> mod_dav.h:694</div></div>
<div class="ttc" id="structdav__lock_html_a4aa3e9701a82c81261524a82dc6e7416"><div class="ttname"><a href="structdav__lock.html#a4aa3e9701a82c81261524a82dc6e7416">dav_lock::type</a></div><div class="ttdeci">dav_lock_type type</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1297</div></div>
<div class="ttc" id="structapr__xml__elem_html_a620a28337f36592d4cb1f6dd3d2e97e0"><div class="ttname"><a href="structapr__xml__elem.html#a620a28337f36592d4cb1f6dd3d2e97e0">apr_xml_elem::first_child</a></div><div class="ttdeci">struct apr_xml_elem * first_child</div><div class="ttdef"><b>Definition:</b> apr_xml.h:180</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga4d2e2ae951dbf7731ef129422cb95674"><div class="ttname"><a href="group__MOD__DAV.html#ga4d2e2ae951dbf7731ef129422cb95674">lockdb</a></div><div class="ttdeci">const dav_resource dav_lockdb * lockdb</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1318</div></div>
<div class="ttc" id="group__MOD__DAV_html_gab79aad8aa27988a0e86b9397d43541e8"><div class="ttname"><a href="group__MOD__DAV.html#gab79aad8aa27988a0e86b9397d43541e8">doc</a></div><div class="ttdeci">const dav_resource dav_lockdb const apr_xml_doc * doc</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1318</div></div>
<div class="ttc" id="structdav__error_html"><div class="ttname"><a href="structdav__error.html">dav_error</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:121</div></div>
<div class="ttc" id="structdav__lock_html_a5bb85bc71ec6944b0f93c9b7b80877ae"><div class="ttname"><a href="structdav__lock.html#a5bb85bc71ec6944b0f93c9b7b80877ae">dav_lock::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1298</div></div>
<div class="ttc" id="structapr__xml__elem_html_a5b2fb684a9cfb244f88ad88f539fe3d6"><div class="ttname"><a href="structapr__xml__elem.html#a5b2fb684a9cfb244f88ad88f539fe3d6">apr_xml_elem::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> apr_xml.h:164</div></div>
<div class="ttc" id="structdav__lock_html_a8ba66b35529c414fed105e134f14ee3d"><div class="ttname"><a href="structdav__lock.html#a8ba66b35529c414fed105e134f14ee3d">dav_lock::scope</a></div><div class="ttdeci">dav_lock_scope scope</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1296</div></div>
<div class="ttc" id="structdav__resource_html_a68b6668d61d787457251783e1caf4f12"><div class="ttname"><a href="structdav__resource.html#a68b6668d61d787457251783e1caf4f12">dav_resource::hooks</a></div><div class="ttdeci">const dav_hooks_repository * hooks</div><div class="ttdef"><b>Definition:</b> mod_dav.h:414</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="structapr__xml__elem_html_a8687253d504b1c1363c47117611042ac"><div class="ttname"><a href="structapr__xml__elem.html#a8687253d504b1c1363c47117611042ac">apr_xml_elem::next</a></div><div class="ttdeci">struct apr_xml_elem * next</div><div class="ttdef"><b>Definition:</b> apr_xml.h:178</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga4840019bf9343c4c1a95befb97b12a88a3e019b5ebe87778ed144aad7cfc9d2e7"><div class="ttname"><a href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a3e019b5ebe87778ed144aad7cfc9d2e7">DAV_LOCKSCOPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1243</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__MOD__DAV_html_gga4840019bf9343c4c1a95befb97b12a88a9961b30fb47aa623dc82f41f979d6912"><div class="ttname"><a href="group__MOD__DAV.html#gga4840019bf9343c4c1a95befb97b12a88a9961b30fb47aa623dc82f41f979d6912">DAV_LOCKSCOPE_SHARED</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1245</div></div>
<div class="ttc" id="structdav__lock_html_ae78ed4ddbc46974c039442c376f84167"><div class="ttname"><a href="structdav__lock.html#ae78ed4ddbc46974c039442c376f84167">dav_lock::owner</a></div><div class="ttdeci">const char * owner</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1303</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="util__lock_8c_a6cf889c691920d48451a89dc46fef863_cgraph.png" border="0" usemap="#util__lock_8c_a6cf889c691920d48451a89dc46fef863_cgraph" alt=""/></div>
<map name="util__lock_8c_a6cf889c691920d48451a89dc46fef863_cgraph" id="util__lock_8c_a6cf889c691920d48451a89dc46fef863_cgraph">
<area shape="rect" id="node2" href="util__lock_8c.html#a814f27f5b49e60ccbab42f6d7e9ec83b" title="DAV_DECLARE" alt="" coords="175,5,296,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afe2f14122c74bb061f2f1f6545627af0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DAV_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__APACHE__CORE__MPM.html#ga9f5959dd76d5c83e775dcf44de684686">result</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="structdav__lockdb.html">dav_lockdb</a> *<a class="code" href="group__MOD__DAV.html#ga4d2e2ae951dbf7731ef129422cb95674">lockdb</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdav__resource.html">dav_resource</a> *lock_resource = <a class="code" href="group__MOD__DAV.html#gace5ccd456846e6c0fdd4da4136bd9a44">resource</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdav__hooks__locks.html">dav_hooks_locks</a> *<a class="code" href="group__MOD__DAV.html#ga2f89c7cfd67d24769756d6d2df79bf5c">hooks</a> = <a class="code" href="group__MOD__DAV.html#ga0300526f19a870f40f3827266111add5">DAV_GET_HOOKS_LOCKS</a>(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdav__hooks__repository.html">dav_hooks_repository</a> *repos_hooks = <a class="code" href="group__MOD__DAV.html#gace5ccd456846e6c0fdd4da4136bd9a44">resource</a>-&gt;<a class="code" href="structdav__resource.html#a68b6668d61d787457251783e1caf4f12">hooks</a>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="structdav__walker__ctx.html">dav_walker_ctx</a> <a class="code" href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a> = { { 0 } };</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="structdav__response.html">dav_response</a> *multi_status;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="structdav__error.html">dav_error</a> *<a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">/* If no locks provider, then there is nothing to unlock. */</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (hooks == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">/* 2518 requires the entire lock to be removed if resource/locktoken</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">     * point to an indirect lock.  We need resource of the _direct_</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">     * lock in order to walk down the tree and remove the locks.  So,</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">     * If locktoken != null_locktoken,</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">     *    Walk up the resource hierarchy until we see a direct lock.</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">     *    Or, we could get the direct lock&#39;s db/key, pick out the URL</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">     *    and do a subrequest.  I think walking up is faster and will work</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">     *    all the time.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">     * Else</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">     *    Just start removing all locks at and below resource.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> ((err = (*hooks-&gt;<a class="code" href="structdav__hooks__locks.html#a84b994d542610dace4ae1fe42126d65a">open_lockdb</a>)(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>, 0, 1, &amp;lockdb)) != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="comment">/* ### return err! maybe add a higher-level desc */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">/* ### map result to something nice; log an error */</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__HTTP__Status.html#ga5d9777e02c26063c2985e39ef71091d2">HTTP_INTERNAL_SERVER_ERROR</a>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__MOD__DAV.html#gaa2478c643fbd5d72dc6c31696dfc6a03">locktoken</a> != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        &amp;&amp; (err = dav_get_direct_resource(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, lockdb,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                                          <a class="code" href="group__MOD__DAV.html#gaa2478c643fbd5d72dc6c31696dfc6a03">locktoken</a>, <a class="code" href="group__MOD__DAV.html#gace5ccd456846e6c0fdd4da4136bd9a44">resource</a>,</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                          &amp;lock_resource)) != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="comment">/* ### add a higher-level desc? */</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment">/* ### should return err! */</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">return</span> err-&gt;<a class="code" href="structdav__error.html#a128d24c8403fc5525e754f96700d4e41">status</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">/* At this point, lock_resource/locktoken refers to a direct lock (key), ie</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">     * the root of a depth &gt; 0 lock, or locktoken is null.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>.<a class="code" href="structdav__walk__params.html#a10c05b514a19d58e7a2874db19b97663">walk_type</a> = <a class="code" href="mod__dav_8h.html#af880dad2a6a3faa599e31adb2505d9f9">DAV_WALKTYPE_NORMAL</a> | <a class="code" href="mod__dav_8h.html#adfdb6aec1afd2b4928f382f848fe6bdd">DAV_WALKTYPE_LOCKNULL</a>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>.<a class="code" href="structdav__walk__params.html#a3a2101d369ce35dba3330205375d871f">func</a> = dav_unlock_walker;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>.<a class="code" href="structdav__walk__params.html#a476b879ce49370324a3b150f2bfa77ea">walk_ctx</a> = &amp;<a class="code" href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>.<a class="code" href="structdav__walk__params.html#a510a9eb72f64d77f780f3a5b83e73165">pool</a> = <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>.<a class="code" href="structdav__walk__params.html#a42b1e5b5b1a86ded12015260dc28ce89">root</a> = lock_resource;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>.<a class="code" href="structdav__walk__params.html#a2e861fbd5fbcc684d61d464a7186c906">lockdb</a> = <a class="code" href="group__MOD__DAV.html#ga4d2e2ae951dbf7731ef129422cb95674">lockdb</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#af55712be4c33037660ba0eb114448f40">r</a> = <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    ctx.<a class="code" href="structdav__walker__ctx.html#a1f3340d6f2109b48955872ad9437309c">locktoken</a> = <a class="code" href="group__MOD__DAV.html#gaa2478c643fbd5d72dc6c31696dfc6a03">locktoken</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    err = (*repos_hooks-&gt;<a class="code" href="structdav__hooks__repository.html#a2b96b1b50859933db39ec1831656e006">walk</a>)(&amp;ctx.<a class="code" href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">w</a>, <a class="code" href="group__MOD__DAV.html#ga72b95fe139d3f6c6eeceed598b721ce1">DAV_INFINITY</a>, &amp;multi_status);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">/* ### fix this! */</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">/* ### do something with multi_status */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    result = err == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> ? <a class="code" href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a> : err-&gt;<a class="code" href="structdav__error.html#a128d24c8403fc5525e754f96700d4e41">status</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    (*hooks-&gt;<a class="code" href="structdav__hooks__locks.html#a24228d41a138f1eab1252ea3cc6e927d">close_lockdb</a>)(lockdb);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__MPM.html#ga9f5959dd76d5c83e775dcf44de684686">result</a>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div><div class="ttc" id="mod__dav_8h_html_af880dad2a6a3faa599e31adb2505d9f9"><div class="ttname"><a href="mod__dav_8h.html#af880dad2a6a3faa599e31adb2505d9f9">DAV_WALKTYPE_NORMAL</a></div><div class="ttdeci">#define DAV_WALKTYPE_NORMAL</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1707</div></div>
<div class="ttc" id="mod__dav_8h_html_adfdb6aec1afd2b4928f382f848fe6bdd"><div class="ttname"><a href="mod__dav_8h.html#adfdb6aec1afd2b4928f382f848fe6bdd">DAV_WALKTYPE_LOCKNULL</a></div><div class="ttdeci">#define DAV_WALKTYPE_LOCKNULL</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1708</div></div>
<div class="ttc" id="structdav__hooks__locks_html_a84b994d542610dace4ae1fe42126d65a"><div class="ttname"><a href="structdav__hooks__locks.html#a84b994d542610dace4ae1fe42126d65a">dav_hooks_locks::open_lockdb</a></div><div class="ttdeci">dav_error *(* open_lockdb)(request_rec *r, int ro, int force, dav_lockdb **lockdb)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1423</div></div>
<div class="ttc" id="structdav__hooks__locks_html"><div class="ttname"><a href="structdav__hooks__locks.html">dav_hooks_locks</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1369</div></div>
<div class="ttc" id="structdav__walk__params_html_a42b1e5b5b1a86ded12015260dc28ce89"><div class="ttname"><a href="structdav__walk__params.html#a42b1e5b5b1a86ded12015260dc28ce89">dav_walk_params::root</a></div><div class="ttdeci">const dav_resource * root</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1718</div></div>
<div class="ttc" id="structrequest__rec_html_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0"><div class="ttname"><a href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">request_rec::pool</a></div><div class="ttdeci">uintptr_t pool</div><div class="ttdef"><b>Definition:</b> ap.d:3</div></div>
<div class="ttc" id="structdav__walk__params_html_a3a2101d369ce35dba3330205375d871f"><div class="ttname"><a href="structdav__walk__params.html#a3a2101d369ce35dba3330205375d871f">dav_walk_params::func</a></div><div class="ttdeci">dav_error *(* func)(dav_walk_resource *wres, int calltype)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1711</div></div>
<div class="ttc" id="structdav__resource_html"><div class="ttname"><a href="structdav__resource.html">dav_resource</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:387</div></div>
<div class="ttc" id="structdav__hooks__locks_html_a24228d41a138f1eab1252ea3cc6e927d"><div class="ttname"><a href="structdav__hooks__locks.html#a24228d41a138f1eab1252ea3cc6e927d">dav_hooks_locks::close_lockdb</a></div><div class="ttdeci">void(* close_lockdb)(dav_lockdb *lockdb)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1431</div></div>
<div class="ttc" id="group__MOD__DAV_html_gaa2478c643fbd5d72dc6c31696dfc6a03"><div class="ttname"><a href="group__MOD__DAV.html#gaa2478c643fbd5d72dc6c31696dfc6a03">locktoken</a></div><div class="ttdeci">const dav_resource const dav_locktoken * locktoken</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1323</div></div>
<div class="ttc" id="structdav__walk__params_html_a510a9eb72f64d77f780f3a5b83e73165"><div class="ttname"><a href="structdav__walk__params.html#a510a9eb72f64d77f780f3a5b83e73165">dav_walk_params::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1715</div></div>
<div class="ttc" id="structdav__hooks__repository_html"><div class="ttname"><a href="structdav__hooks__repository.html">dav_hooks_repository</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1797</div></div>
<div class="ttc" id="structdav__walker__ctx_html_af55712be4c33037660ba0eb114448f40"><div class="ttname"><a href="structdav__walker__ctx.html#af55712be4c33037660ba0eb114448f40">dav_walker_ctx::r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1740</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga0300526f19a870f40f3827266111add5"><div class="ttname"><a href="group__MOD__DAV.html#ga0300526f19a870f40f3827266111add5">DAV_GET_HOOKS_LOCKS</a></div><div class="ttdeci">#define DAV_GET_HOOKS_LOCKS(r)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:728</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga72b95fe139d3f6c6eeceed598b721ce1"><div class="ttname"><a href="group__MOD__DAV.html#ga72b95fe139d3f6c6eeceed598b721ce1">DAV_INFINITY</a></div><div class="ttdeci">#define DAV_INFINITY</div><div class="ttdef"><b>Definition:</b> mod_dav.h:79</div></div>
<div class="ttc" id="structdav__lockdb_html"><div class="ttname"><a href="structdav__lockdb.html">dav_lockdb</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1233</div></div>
<div class="ttc" id="structdav__walker__ctx_html"><div class="ttname"><a href="structdav__walker__ctx.html">dav_walker_ctx</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:1726</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_gaba51915c87d64af47fb1cc59348961c9"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a></div><div class="ttdeci">#define OK</div><div class="ttdef"><b>Definition:</b> httpd.h:455</div></div>
<div class="ttc" id="structdav__walker__ctx_html_a1f3340d6f2109b48955872ad9437309c"><div class="ttname"><a href="structdav__walker__ctx.html#a1f3340d6f2109b48955872ad9437309c">dav_walker_ctx::locktoken</a></div><div class="ttdeci">const dav_locktoken * locktoken</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1752</div></div>
<div class="ttc" id="structdav__error_html_a128d24c8403fc5525e754f96700d4e41"><div class="ttname"><a href="structdav__error.html#a128d24c8403fc5525e754f96700d4e41">dav_error::status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> mod_dav.h:122</div></div>
<div class="ttc" id="group__APACHE__CORE__FILTER_html_ga94af791485570bea922969fef12d6259"><div class="ttname"><a href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> util_filter.h:409</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga2f89c7cfd67d24769756d6d2df79bf5c"><div class="ttname"><a href="group__MOD__DAV.html#ga2f89c7cfd67d24769756d6d2df79bf5c">hooks</a></div><div class="ttdeci">const char const dav_provider * hooks</div><div class="ttdef"><b>Definition:</b> mod_dav.h:720</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="group__MOD__DAV_html_gace5ccd456846e6c0fdd4da4136bd9a44"><div class="ttname"><a href="group__MOD__DAV.html#gace5ccd456846e6c0fdd4da4136bd9a44">resource</a></div><div class="ttdeci">const dav_resource * resource</div><div class="ttdef"><b>Definition:</b> mod_dav.h:694</div></div>
<div class="ttc" id="group__MOD__DAV_html_ga4d2e2ae951dbf7731ef129422cb95674"><div class="ttname"><a href="group__MOD__DAV.html#ga4d2e2ae951dbf7731ef129422cb95674">lockdb</a></div><div class="ttdeci">const dav_resource dav_lockdb * lockdb</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1318</div></div>
<div class="ttc" id="structdav__error_html"><div class="ttname"><a href="structdav__error.html">dav_error</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:121</div></div>
<div class="ttc" id="structdav__resource_html_a68b6668d61d787457251783e1caf4f12"><div class="ttname"><a href="structdav__resource.html#a68b6668d61d787457251783e1caf4f12">dav_resource::hooks</a></div><div class="ttdeci">const dav_hooks_repository * hooks</div><div class="ttdef"><b>Definition:</b> mod_dav.h:414</div></div>
<div class="ttc" id="structdav__walker__ctx_html_a0139e9bc9666780fd522efd2b48fd599"><div class="ttname"><a href="structdav__walker__ctx.html#a0139e9bc9666780fd522efd2b48fd599">dav_walker_ctx::w</a></div><div class="ttdeci">dav_walk_params w</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1729</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="structdav__walk__params_html_a10c05b514a19d58e7a2874db19b97663"><div class="ttname"><a href="structdav__walk__params.html#a10c05b514a19d58e7a2874db19b97663">dav_walk_params::walk_type</a></div><div class="ttdeci">int walk_type</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1705</div></div>
<div class="ttc" id="structdav__walk__params_html_a2e861fbd5fbcc684d61d464a7186c906"><div class="ttname"><a href="structdav__walk__params.html#a2e861fbd5fbcc684d61d464a7186c906">dav_walk_params::lockdb</a></div><div class="ttdeci">dav_lockdb * lockdb</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1721</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga5d9777e02c26063c2985e39ef71091d2"><div class="ttname"><a href="group__HTTP__Status.html#ga5d9777e02c26063c2985e39ef71091d2">HTTP_INTERNAL_SERVER_ERROR</a></div><div class="ttdeci">#define HTTP_INTERNAL_SERVER_ERROR</div><div class="ttdef"><b>Definition:</b> httpd.h:537</div></div>
<div class="ttc" id="structdav__walk__params_html_a476b879ce49370324a3b150f2bfa77ea"><div class="ttname"><a href="structdav__walk__params.html#a476b879ce49370324a3b150f2bfa77ea">dav_walk_params::walk_ctx</a></div><div class="ttdeci">void * walk_ctx</div><div class="ttdef"><b>Definition:</b> mod_dav.h:1712</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga9f5959dd76d5c83e775dcf44de684686"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga9f5959dd76d5c83e775dcf44de684686">result</a></div><div class="ttdeci">int * result</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:160</div></div>
<div class="ttc" id="structdav__response_html"><div class="ttname"><a href="structdav__response.html">dav_response</a></div><div class="ttdef"><b>Definition:</b> mod_dav.h:489</div></div>
<div class="ttc" id="structdav__hooks__repository_html_a2b96b1b50859933db39ec1831656e006"><div class="ttname"><a href="structdav__hooks__repository.html#a2b96b1b50859933db39ec1831656e006">dav_hooks_repository::walk</a></div><div class="ttdeci">dav_error *(* walk)(const dav_walk_params *params, int depth, dav_response **response)</div><div class="ttdef"><b>Definition:</b> mod_dav.h:2009</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="util__lock_8c_afe2f14122c74bb061f2f1f6545627af0_cgraph.png" border="0" usemap="#util__lock_8c_afe2f14122c74bb061f2f1f6545627af0_cgraph" alt=""/></div>
<map name="util__lock_8c_afe2f14122c74bb061f2f1f6545627af0_cgraph" id="util__lock_8c_afe2f14122c74bb061f2f1f6545627af0_cgraph">
<area shape="rect" id="node2" href="util__lock_8c.html#a814f27f5b49e60ccbab42f6d7e9ec83b" title="DAV_DECLARE" alt="" coords="175,5,296,32"/>
<area shape="rect" id="node3" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="212,56,259,83"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
