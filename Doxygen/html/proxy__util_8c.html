<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: /usr/local/src/github/Codebase/httpd-2.4.29/modules/proxy/proxy_util.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2379abaa7725ab34fabdf9daa508e09.html">Codebase</a></li><li class="navelem"><a class="el" href="dir_db9466b59d24a02e023577068efc5d5d.html">httpd-2.4.29</a></li><li class="navelem"><a class="el" href="dir_04adba3a211bbed5210563c01b5ac160.html">modules</a></li><li class="navelem"><a class="el" href="dir_06688d795abae7ba4d64ba7c8fd0d339.html">proxy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">proxy_util.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mod__proxy_8h_source.html">mod_proxy.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ap__mpm_8h_source.html">ap_mpm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="scoreboard_8h_source.html">scoreboard.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apr__version_8h_source.html">apr_version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apr__hash_8h_source.html">apr_hash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="proxy__util_8h_source.html">proxy_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ajp_8h_source.html">ajp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="scgi_8h_source.html">scgi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apr__support_8h_source.html">apr_support.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for proxy_util.c:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2proxy_2proxy__util_8c" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2proxy_2proxy__util_8c" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2proxy_2proxy__util_8c">
<area shape="rect" id="node2" href="mod__proxy_8h.html" title="Proxy Extension Module for Apache. " alt="" coords="1932,184,2029,211"/>
<area shape="rect" id="node31" href="apr__hash_8h.html" title="APR Hash Tables. " alt="" coords="1808,333,1895,360"/>
<area shape="rect" id="node44" href="ap__mpm_8h.html" title="Apache Multi&#45;Processing Module library. " alt="" coords="935,259,1018,285"/>
<area shape="rect" id="node45" href="scoreboard_8h.html" title="Apache scoreboard library. " alt="" coords="727,333,824,360"/>
<area shape="rect" id="node46" href="apr__version_8h.html" title="APR Versioning Interface. " alt="" coords="3771,184,3871,211"/>
<area shape="rect" id="node47" href="proxy__util_8h.html" title="Internal interfaces private to mod_proxy. " alt="" coords="2947,109,3036,136"/>
<area shape="rect" id="node48" href="ajp_8h.html" title="Apache Jserv Protocol. " alt="" coords="2871,109,2922,136"/>
<area shape="rect" id="node49" href="scgi_8h.html" title="Shared SCGI&#45;related definitions. " alt="" coords="3744,109,3801,136"/>
<area shape="rect" id="node50" href="apr__support_8h.html" title="APR Support functions. " alt="" coords="3118,483,3219,509"/>
<area shape="rect" id="node3" href="apr__hooks_8h.html" title="Apache hook functions. " alt="" coords="2185,408,2278,435"/>
<area shape="rect" id="node6" href="apr_8h.html" title="APR Platform Definitions. " alt="" coords="2650,856,2701,883"/>
<area shape="rect" id="node7" href="apr__pools_8h.html" title="APR memory allocation. " alt="" coords="1725,707,1815,733"/>
<area shape="rect" id="node8" href="apr__want_8h.html" title="APR Standard Headers Support. " alt="" coords="2632,781,2719,808"/>
<area shape="rect" id="node9" href="apr__optional_8h.html" title="APR&#45;UTIL registration of functions exported by modules. " alt="" coords="2007,408,2109,435"/>
<area shape="rect" id="node10" href="apr__lib_8h.html" title="APR general purpose library routines. " alt="" coords="3611,259,3681,285"/>
<area shape="rect" id="node11" href="apr__strings_8h.html" title="APR Strings library. " alt="" coords="529,557,627,584"/>
<area shape="rect" id="node12" href="apr__buckets_8h.html" title="APR&#45;UTIL Buckets/Bucket Brigades. " alt="" coords="2785,483,2889,509"/>
<area shape="rect" id="node13" href="apr__network__io_8h.html" title="APR Network library. " alt="" coords="2617,557,2739,584"/>
<area shape="rect" id="node15" href="apr__md5_8h.html" title="APR MD5 Routines. " alt="" coords="1447,333,1530,360"/>
<area shape="rect" id="node16" href="apr__uri_8h.html" title="APR&#45;UTIL URI Routines. " alt="" coords="2381,483,2453,509"/>
<area shape="rect" id="node17" href="apr__date_8h.html" title="APR&#45;UTIL date routines. " alt="" coords="2181,259,2263,285"/>
<area shape="rect" id="node18" href="apr__strmatch_8h.html" title="APR&#45;UTIL string matching routines. " alt="" coords="1715,483,1825,509"/>
<area shape="rect" id="node19" href="apr__fnmatch_8h.html" title="APR FNMatch Functions. " alt="" coords="2643,259,2748,285"/>
<area shape="rect" id="node20" href="apr__reslist_8h.html" title="APR&#45;UTIL Resource List Routines. " alt="" coords="1497,483,1590,509"/>
<area shape="rect" id="node21" href="apr__uuid_8h.html" title="APR UUID library. " alt="" coords="1899,408,1982,435"/>
<area shape="rect" id="node22" href="util__mutex_8h.html" title="Apache Mutex support library. " alt="" coords="1229,333,1322,360"/>
<area shape="rect" id="node23" href="httpd_8h.html" title="HTTP Daemon routines. " alt="" coords="2465,408,2528,435"/>
<area shape="rect" id="node24" href="ap__config_8h.html" title="Symbol export macros and hook functions. " alt="" coords="1368,483,1457,509"/>
<area shape="rect" id="node27" href="http__config_8h.html" title="Apache Configuration. " alt="" coords="1227,408,1324,435"/>
<area shape="rect" id="node28" href="apr__global__mutex_8h.html" title="APR Global Locking Routines. " alt="" coords="791,483,925,509"/>
<area shape="rect" id="node29" href="apr__thread__mutex_8h.html" title="APR Thread Mutex Routines. " alt="" coords="1048,632,1185,659"/>
<area shape="rect" id="node30" href="http__core_8h.html" title="CORE HTTP Daemon. " alt="" coords="2019,259,2105,285"/>
<area shape="rect" id="node32" href="util__filter_8h.html" title="Apache filter library. " alt="" coords="2946,333,3029,360"/>
<area shape="rect" id="node33" href="http__protocol_8h.html" title="HTTP protocol handling. " alt="" coords="3072,259,3180,285"/>
<area shape="rect" id="node36" href="http__request_8h.html" title="Apache Request library. " alt="" coords="2772,259,2877,285"/>
<area shape="rect" id="node37" href="http__vhost_8h.html" title="Virtual Host package. " alt="" coords="1696,259,1791,285"/>
<area shape="rect" id="node38" href="http__main_8h.html" title="Command line options. " alt="" coords="2375,333,2466,360"/>
<area shape="rect" id="node39" href="http__log_8h.html" title="Apache Logging library. " alt="" coords="1024,333,1103,360"/>
<area shape="rect" id="node40" href="http__connection_8h.html" title="Apache connection library. " alt="" coords="2774,408,2899,435"/>
<area shape="rect" id="node41" href="util__ebcdic_8h.html" title="Utilities for EBCDIC conversion. " alt="" coords="2953,259,3048,285"/>
<area shape="rect" id="node42" href="ap__provider_8h.html" title="Apache Provider API. " alt="" coords="848,333,948,360"/>
<area shape="rect" id="node43" href="ap__slotmem_8h.html" title="Memory Slot Extension Storage Module for Apache. " alt="" coords="807,259,911,285"/>
<area shape="rect" id="node4" href="apu_8h.html" title="apu.h" alt="" coords="2037,557,2092,584"/>
<area shape="rect" id="node5" href="apr__tables_8h.html" title="APR Table library. " alt="" coords="2263,483,2357,509"/>
<area shape="rect" id="node14" href="apr__file__io_8h.html" title="APR File I/O Handling. " alt="" coords="2668,632,2760,659"/>
<area shape="rect" id="node25" href="apr__poll_8h.html" title="APR Poll interface. " alt="" coords="2964,483,3043,509"/>
<area shape="rect" id="node26" href="apr__thread__proc_8h.html" title="APR Thread and Process Library. " alt="" coords="949,483,1076,509"/>
<area shape="rect" id="node34" href="apr__portable_8h.html" title="APR Portability Routines. " alt="" coords="997,408,1101,435"/>
<area shape="rect" id="node35" href="apr__shm_8h.html" title="APR Shared Memory Routines. " alt="" coords="633,483,715,509"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structforward__info.html">forward_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structheader__connection.html">header_connection</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structproxy__schemes__t.html">proxy_schemes_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad650fae448b62e217bcf3f0f8ddc52ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ad650fae448b62e217bcf3f0f8ddc52ef">apr_socket_create</a>&#160;&#160;&#160;apr_socket_create_ex</td></tr>
<tr class="separator:ad650fae448b62e217bcf3f0f8ddc52ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac60a0619319528d607d18ab47a007103"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ac60a0619319528d607d18ab47a007103">MAX_IP_STR_LEN</a>&#160;&#160;&#160;(46)</td></tr>
<tr class="separator:ac60a0619319528d607d18ab47a007103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6f65d3c5e25044b1b655efbc52c9f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ace6f65d3c5e25044b1b655efbc52c9f3">PROXY_UNSET_NONCE</a>&#160;&#160;&#160;'\<a class="el" href="pcregrep_8txt.html#ab232d334efb9173a12ae2940d035f460">n</a>'</td></tr>
<tr class="separator:ace6f65d3c5e25044b1b655efbc52c9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110deb1c7cdf0fe2300c9e034b2ce7c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a110deb1c7cdf0fe2300c9e034b2ce7c8">USE_ALTERNATE_IS_CONNECTED</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a110deb1c7cdf0fe2300c9e034b2ce7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae0f1aba1d09e67d1464361264869b2d8"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structheader__connection.html">header_connection</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ae0f1aba1d09e67d1464361264869b2d8">header_connection</a></td></tr>
<tr class="separator:ae0f1aba1d09e67d1464361264869b2d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1e225efe81b8029285451fa3c90374"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structproxy__schemes__t.html">proxy_schemes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a2f1e225efe81b8029285451fa3c90374">proxy_schemes_t</a></td></tr>
<tr class="separator:a2f1e225efe81b8029285451fa3c90374"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aee811a1f31a5fa14ab95b0c83df0cf2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#aee811a1f31a5fa14ab95b0c83df0cf2a">APLOG_USE_MODULE</a> (proxy)</td></tr>
<tr class="separator:aee811a1f31a5fa14ab95b0c83df0cf2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e77ebd2481f040c75b5d246b5c487c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a35e77ebd2481f040c75b5d246b5c487c">APR_IMPLEMENT_OPTIONAL_HOOK_RUN_ALL</a> (proxy, <a class="el" href="group__MOD__PROXY.html#ga8a2d0523d70a5ec877fe8d89ef4ecd96">PROXY</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>, create_req,(<a class="el" href="structrequest__rec.html">request_rec</a> *<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, <a class="el" href="structrequest__rec.html">request_rec</a> *pr),(<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, pr), <a class="el" href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a>, <a class="el" href="group__APACHE__CORE__DAEMON.html#ga9eba11ca86461a3ae319311d64682dda">DECLINED</a>)</td></tr>
<tr class="separator:a35e77ebd2481f040c75b5d246b5c487c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b131b879f2da190de9e2d128450143"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143">PROXY_DECLARE</a> (<a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>)</td></tr>
<tr class="separator:ab8b131b879f2da190de9e2d128450143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ced80174d35950697817a36a655de23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a9ced80174d35950697817a36a655de23">PROXY_DECLARE</a> (<a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>)</td></tr>
<tr class="separator:a9ced80174d35950697817a36a655de23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c03b3f7f69d399a646d84db4caaed65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a1c03b3f7f69d399a646d84db4caaed65">PROXY_DECLARE</a> (char *)</td></tr>
<tr class="separator:a1c03b3f7f69d399a646d84db4caaed65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae17d5feb294b5544536dba5e9b8a02ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ae17d5feb294b5544536dba5e9b8a02ee">ap_proxy_canon_netloc</a> (<a class="el" href="structapr__pool__t.html">apr_pool_t</a> *<a class="el" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, char **const <a class="el" href="group__MOD__PROXY.html#ga974d9b4d643e6776a5a12061b88b3ae3">urlp</a>, char **<a class="el" href="group__MOD__PROXY.html#gafab7f01dc92afd3e79a59fe3a2ea5932">userp</a>, char **<a class="el" href="group__MOD__PROXY.html#ga93be1099b442eb117913f581e856e788">passwordp</a>, char **<a class="el" href="group__MOD__PROXY.html#ga85ac436260ffb27bcf16dae08faaebd4">hostp</a>, <a class="el" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a> *<a class="el" href="ab_8c.html#ab3bdaca3e004f9926a8c2530f1d9e9dc">port</a>)</td></tr>
<tr class="separator:ae17d5feb294b5544536dba5e9b8a02ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a994976c3ebd4838c2112ff7cbdb15547"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a994976c3ebd4838c2112ff7cbdb15547">PROXY_DECLARE</a> (const char *)</td></tr>
<tr class="separator:a994976c3ebd4838c2112ff7cbdb15547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79099e6d2f71bcc882b6b64ecd59fe8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a79099e6d2f71bcc882b6b64ecd59fe8c">PROXY_DECLARE</a> (<a class="el" href="structproxy__balancer.html">proxy_balancer</a> *)</td></tr>
<tr class="separator:a79099e6d2f71bcc882b6b64ecd59fe8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43277b2a3035c3bb12ff3588a58a01e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a43277b2a3035c3bb12ff3588a58a01e4">PROXY_DECLARE</a> (<a class="el" href="structproxy__worker.html">proxy_worker</a> *)</td></tr>
<tr class="separator:a43277b2a3035c3bb12ff3588a58a01e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade616416cb4f3a7356fa87cd3011325c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ade616416cb4f3a7356fa87cd3011325c">ap_proxy_determine_connection</a> (<a class="el" href="structapr__pool__t.html">apr_pool_t</a> *<a class="el" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, <a class="el" href="structrequest__rec.html">request_rec</a> *<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, <a class="el" href="structproxy__server__conf.html">proxy_server_conf</a> *<a class="el" href="group__MOD__PROXY.html#ga4d7edd451c4bb8ed9ce9012e5dea2b14">conf</a>, <a class="el" href="structproxy__worker.html">proxy_worker</a> *<a class="el" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a>, <a class="el" href="structproxy__conn__rec.html">proxy_conn_rec</a> *<a class="el" href="group__MOD__PROXY.html#gaf26a520a5f2c0d567cd7732f04c925c2">conn</a>, <a class="el" href="structapr__uri__t.html">apr_uri_t</a> *<a class="el" href="group__APR__Util__XML.html#ga69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>, char **<a class="el" href="group__APR__Util__Escaping.html#gaec657bef26e5ff27b9442563a591d9ec">url</a>, const char *<a class="el" href="group__MOD__PROXY.html#gaa1c038713fefa564c88a58477a1b2001">proxyname</a>, <a class="el" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a> <a class="el" href="ab_8c.html#aafd282ad1fd2b2937f45c1cd22f143da">proxyport</a>, char *<a class="el" href="group__MOD__PROXY.html#ga802fad35b3c2f0228598874c678130a6">server_portstr</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> <a class="el" href="group__MOD__PROXY.html#gace3850b28542570d38229df96ad5cdb8">server_portstr_size</a>)</td></tr>
<tr class="separator:ade616416cb4f3a7356fa87cd3011325c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec2ac8c37bf0cede6cbe1628a60a59a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MOD__PROXY.html#gaaec2ac8c37bf0cede6cbe1628a60a59a">ap_proxy_lb_workers</a> (<a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>)</td></tr>
<tr class="separator:gaaec2ac8c37bf0cede6cbe1628a60a59a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894a8f960939418e2122523aa81b5dd0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0">ap_proxy_hashfunc</a> (const char *<a class="el" href="group__APR__Util__Bucket__Brigades.html#ga6a62b60443be1d042194af15ce934193">str</a>, <a class="el" href="group__MOD__PROXY.html#gad04e421d409d5c4b460cd62694ada47c">proxy_hash_t</a> <a class="el" href="ab_8c.html#a77deaf9d3339f8d07d067fa3c685023e">method</a>)</td></tr>
<tr class="separator:a894a8f960939418e2122523aa81b5dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1beab2264f256cb4c71d873d7ca3ff26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a1beab2264f256cb4c71d873d7ca3ff26">PROXY_DECLARE</a> (<a class="el" href="structproxy__worker__shared.html">proxy_worker_shared</a> *)</td></tr>
<tr class="separator:a1beab2264f256cb4c71d873d7ca3ff26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3cbd83fd7551835af4b1e11ded1e4a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a0f3cbd83fd7551835af4b1e11ded1e4a">PROXY_DECLARE</a> (<a class="el" href="structproxy__balancer__shared.html">proxy_balancer_shared</a> *)</td></tr>
<tr class="separator:a0f3cbd83fd7551835af4b1e11ded1e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c014c25a18c7216833afbd3e8498c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#ac3c014c25a18c7216833afbd3e8498c5">PROXY_DECLARE</a> (<a class="el" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a>)</td></tr>
<tr class="separator:ac3c014c25a18c7216833afbd3e8498c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c7cf405b2ffa890bad1419c0a6fd5ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MOD__PROXY__PRIVATE.html#ga8c7cf405b2ffa890bad1419c0a6fd5ca">proxy_util_register_hooks</a> (<a class="el" href="structapr__pool__t.html">apr_pool_t</a> *<a class="el" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>)</td></tr>
<tr class="separator:ga8c7cf405b2ffa890bad1419c0a6fd5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga748653e1e5c4afc14fca2a4b57136259"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> <a class="el" href="group__MOD__PROXY.html#ga0446e2d44d50898071a7dcb4fd9172b0">PROXY_DECLARE_DATA</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MOD__PROXY__PRIVATE.html#ga748653e1e5c4afc14fca2a4b57136259">proxy_lb_workers</a> = 0</td></tr>
<tr class="separator:ga748653e1e5c4afc14fca2a4b57136259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18e4b565b0367b56f721343a9cb1b583"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structapr__strmatch__pattern.html">apr_strmatch_pattern</a> <a class="el" href="group__MOD__PROXY.html#ga0446e2d44d50898071a7dcb4fd9172b0">PROXY_DECLARE_DATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MOD__PROXY__PRIVATE.html#ga18e4b565b0367b56f721343a9cb1b583">ap_proxy_strmatch_path</a></td></tr>
<tr class="separator:ga18e4b565b0367b56f721343a9cb1b583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51ea3d4bbbae6e20c70369b859365103"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structapr__strmatch__pattern.html">apr_strmatch_pattern</a> <a class="el" href="group__MOD__PROXY.html#ga0446e2d44d50898071a7dcb4fd9172b0">PROXY_DECLARE_DATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MOD__PROXY__PRIVATE.html#ga51ea3d4bbbae6e20c70369b859365103">ap_proxy_strmatch_domain</a></td></tr>
<tr class="separator:ga51ea3d4bbbae6e20c70369b859365103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b0fcd14bd51e35876e3ed7ec589d85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structapr__global__mutex__t.html">apr_global_mutex_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proxy__util_8c.html#a93b0fcd14bd51e35876e3ed7ec589d85">proxy_mutex</a></td></tr>
<tr class="separator:a93b0fcd14bd51e35876e3ed7ec589d85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad650fae448b62e217bcf3f0f8ddc52ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define apr_socket_create&#160;&#160;&#160;apr_socket_create_ex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac60a0619319528d607d18ab47a007103"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_IP_STR_LEN&#160;&#160;&#160;(46)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ace6f65d3c5e25044b1b655efbc52c9f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROXY_UNSET_NONCE&#160;&#160;&#160;'\<a class="el" href="pcregrep_8txt.html#ab232d334efb9173a12ae2940d035f460">n</a>'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a110deb1c7cdf0fe2300c9e034b2ce7c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_ALTERNATE_IS_CONNECTED&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ae0f1aba1d09e67d1464361264869b2d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structheader__connection.html">header_connection</a>  <a class="el" href="structheader__connection.html">header_connection</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2f1e225efe81b8029285451fa3c90374"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structproxy__schemes__t.html">proxy_schemes_t</a>  <a class="el" href="structproxy__schemes__t.html">proxy_schemes_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae17d5feb294b5544536dba5e9b8a02ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ap_proxy_canon_netloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapr__pool__t.html">apr_pool_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **const&#160;</td>
          <td class="paramname"><em>urlp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>userp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>passwordp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>hostp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a> *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="group__MOD__PROXY.html#ga6d5ecaf37baca2c5cd2dfca34109da7e">addr</a>, *<a class="code" href="group__apr__network__io.html#gac03f4c1705dcf958f913d4fdcaab00b5">scope_id</a>, *strp, *<a class="code" href="group__APACHE__CORE__VHOST.html#ga8c8ad0616f1a1fed66e67a90a116a76c">host</a>, *<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a> = *<a class="code" href="group__MOD__PROXY.html#ga974d9b4d643e6776a5a12061b88b3ae3">urlp</a>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">char</span> *user = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, *<a class="code" href="group__APACHE__CORE__PROTO.html#ga69b970a42043daa64861aba281a1e6f0">password</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a> tmp_port;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> rv;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (url[0] != <span class="charliteral">&#39;/&#39;</span> || url[1] != <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Malformed URL&quot;</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    host = url + 2;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    url = strchr(host, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (url == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        url = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        *(url++) = <span class="charliteral">&#39;\0&#39;</span>;    <span class="comment">/* skip separating &#39;/&#39; */</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">/* find _last_ &#39;@&#39; since it might occur in user/password part */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    strp = strrchr(host, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (strp != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        *strp = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        user = <a class="code" href="group__APACHE__CORE__VHOST.html#ga8c8ad0616f1a1fed66e67a90a116a76c">host</a>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        host = strp + 1;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/* find password */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        strp = strchr(user, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> (strp != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            *strp = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            password = ap_proxy_canonenc(p, strp + 1, strlen(strp + 1), <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb">enc_user</a>, 1, 0);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">if</span> (password == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;Bad %-escape in URL (password)&quot;</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        user = ap_proxy_canonenc(p, user, strlen(user), <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb">enc_user</a>, 1, 0);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span> (user == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;Bad %-escape in URL (username)&quot;</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__MOD__PROXY.html#gafab7f01dc92afd3e79a59fe3a2ea5932">userp</a> != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        *<a class="code" href="group__MOD__PROXY.html#gafab7f01dc92afd3e79a59fe3a2ea5932">userp</a> = user;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__MOD__PROXY.html#ga93be1099b442eb117913f581e856e788">passwordp</a> != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        *<a class="code" href="group__MOD__PROXY.html#ga93be1099b442eb117913f581e856e788">passwordp</a> = <a class="code" href="group__APACHE__CORE__PROTO.html#ga69b970a42043daa64861aba281a1e6f0">password</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">     * Parse the host string to separate host portion from optional port.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">     * Perform range checking on port.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    rv = apr_parse_addr_port(&amp;addr, &amp;scope_id, &amp;tmp_port, host, p);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (rv != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a> || addr == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> || scope_id != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Invalid host/port&quot;</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (tmp_port != 0) { <span class="comment">/* only update caller&#39;s port if port was specified */</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        *<a class="code" href="group__APACHE__CORE__VHOST.html#ga225c76c246a5cc263c5a2628eb99353e">port</a> = tmp_port;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    ap_str_tolower(addr); <span class="comment">/* DNS names are case-insensitive */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    *<a class="code" href="group__MOD__PROXY.html#ga974d9b4d643e6776a5a12061b88b3ae3">urlp</a> = <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    *<a class="code" href="group__MOD__PROXY.html#ga85ac436260ffb27bcf16dae08faaebd4">hostp</a> = <a class="code" href="group__MOD__PROXY.html#ga6d5ecaf37baca2c5cd2dfca34109da7e">addr</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="ttc" id="group__MOD__PROXY_html_ga974d9b4d643e6776a5a12061b88b3ae3"><div class="ttname"><a href="group__MOD__PROXY.html#ga974d9b4d643e6776a5a12061b88b3ae3">urlp</a></div><div class="ttdeci">char **const urlp</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:622</div></div>
<div class="ttc" id="group__APACHE__CORE__VHOST_html_ga225c76c246a5cc263c5a2628eb99353e"><div class="ttname"><a href="group__APACHE__CORE__VHOST.html#ga225c76c246a5cc263c5a2628eb99353e">port</a></div><div class="ttdeci">const char apr_port_t port</div><div class="ttdef"><b>Definition:</b> http_vhost.h:111</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga93be1099b442eb117913f581e856e788"><div class="ttname"><a href="group__MOD__PROXY.html#ga93be1099b442eb117913f581e856e788">passwordp</a></div><div class="ttdeci">char **const char char ** passwordp</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:622</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga85ac436260ffb27bcf16dae08faaebd4"><div class="ttname"><a href="group__MOD__PROXY.html#ga85ac436260ffb27bcf16dae08faaebd4">hostp</a></div><div class="ttdeci">char **const char char char ** hostp</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:622</div></div>
<div class="ttc" id="group__APACHE__CORE__VHOST_html_ga8c8ad0616f1a1fed66e67a90a116a76c"><div class="ttname"><a href="group__APACHE__CORE__VHOST.html#ga8c8ad0616f1a1fed66e67a90a116a76c">host</a></div><div class="ttdeci">const char * host</div><div class="ttdef"><b>Definition:</b> http_vhost.h:111</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gafab7f01dc92afd3e79a59fe3a2ea5932"><div class="ttname"><a href="group__MOD__PROXY.html#gafab7f01dc92afd3e79a59fe3a2ea5932">userp</a></div><div class="ttdeci">char **const char ** userp</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:622</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__apr__network__io_html_gac03f4c1705dcf958f913d4fdcaab00b5"><div class="ttname"><a href="group__apr__network__io.html#gac03f4c1705dcf958f913d4fdcaab00b5">scope_id</a></div><div class="ttdeci">char ** scope_id</div><div class="ttdef"><b>Definition:</b> apr_network_io.h:514</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb"><div class="ttname"><a href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb">enc_user</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:75</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga05d2db9f2dd75d18170f192bd1cc9b4e"><div class="ttname"><a href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a></div><div class="ttdeci">proxy_dir_conf const char * url</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:650</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga6d5ecaf37baca2c5cd2dfca34109da7e"><div class="ttname"><a href="group__MOD__PROXY.html#ga6d5ecaf37baca2c5cd2dfca34109da7e">addr</a></div><div class="ttdeci">proxy_server_conf const char apr_sockaddr_t * addr</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:635</div></div>
<div class="ttc" id="group__apr__network__io_html_gaa670a71960f6eb4fe0d0de2a1e7aba03"><div class="ttname"><a href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a></div><div class="ttdeci">apr_uint16_t apr_port_t</div><div class="ttdef"><b>Definition:</b> apr_network_io.h:257</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_ga69b970a42043daa64861aba281a1e6f0"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#ga69b970a42043daa64861aba281a1e6f0">password</a></div><div class="ttdeci">const char const char ** password</div><div class="ttdef"><b>Definition:</b> http_protocol.h:594</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_ae17d5feb294b5544536dba5e9b8a02ee_cgraph.png" border="0" usemap="#proxy__util_8c_ae17d5feb294b5544536dba5e9b8a02ee_cgraph" alt=""/></div>
<map name="proxy__util_8c_ae17d5feb294b5544536dba5e9b8a02ee_cgraph" id="proxy__util_8c_ae17d5feb294b5544536dba5e9b8a02ee_cgraph">
<area shape="rect" id="node2" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="212,5,352,32"/>
<area shape="rect" id="node3" href="util__expr__scan_8c.html#a33e91cd0cef6786e9e3a27ac67707207" title="if" alt="" coords="263,56,301,83"/>
<area shape="rect" id="node8" href="apr__cpystrn_8c.html#a8a019f6d84acf570175ecfc8b3382170" title="strncasecmp" alt="" coords="233,107,331,133"/>
<area shape="rect" id="node4" href="util__expr__scan_8c.html#a073e30a44c0e142fe3d3a1f87bbf6c5e" title="ap_expr_yy_create_buffer" alt="" coords="400,56,572,83"/>
<area shape="rect" id="node5" href="util__expr__scan_8c.html#a3dd61ae214da108171a1bc60b87291d0" title="ap_expr_yyalloc" alt="" coords="620,56,736,83"/>
<area shape="rect" id="node6" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="791,31,837,57"/>
<area shape="rect" id="node7" href="util__expr__parse_8c.html#a5faf6a2d99f50a4655dd390199a8db7b" title="malloc" alt="" coords="784,81,844,108"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ade616416cb4f3a7356fa87cd3011325c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ap_proxy_determine_connection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapr__pool__t.html">apr_pool_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrequest__rec.html">request_rec</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxy__server__conf.html">proxy_server_conf</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxy__worker.html">proxy_worker</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxy__conn__rec.html">proxy_conn_rec</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapr__uri__t.html">apr_uri_t</a> *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>proxyname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a>&#160;</td>
          <td class="paramname"><em>proxyport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>server_portstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>server_portstr_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;{</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordtype">int</span> server_port;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a> = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> uerr = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__MOD__PROXY.html#ga46b82947aff7f666d626b556a8378392">uds_path</a>;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">     * Break up the URL to determine the host to connect to</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="comment">/* we break the URL into host, port, uri */</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a> != apr_uri_parse(p, *<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, uri)) {</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        <span class="keywordflow">return</span> ap_proxyerror(r, <a class="code" href="group__HTTP__Status.html#ga0c1fdbbb10800664989907cbd3a5a023">HTTP_BAD_REQUEST</a>,</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                             apr_pstrcat(p,<span class="stringliteral">&quot;URI cannot be parsed: &quot;</span>, *<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>,</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                                         <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>));</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">if</span> (!uri-&gt;<a class="code" href="structapr__uri__t.html#a6e6e858ce56b5d58389287c1cc1134fa">port</a>) {</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        uri-&gt;<a class="code" href="structapr__uri__t.html#a6e6e858ce56b5d58389287c1cc1134fa">port</a> = ap_proxy_port_of_scheme(uri-&gt;<a class="code" href="structapr__uri__t.html#a5d62fa370265b6bc956aa86d36024a5d">scheme</a>);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    }</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, r, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(00944)</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                 <span class="stringliteral">&quot;connecting %s to %s:%d&quot;</span>, *<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, uri-&gt;<a class="code" href="structapr__uri__t.html#a8c6bf3dfca3d159f091377d9f7228aec">hostname</a>, uri-&gt;<a class="code" href="structapr__uri__t.html#a6e6e858ce56b5d58389287c1cc1134fa">port</a>);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">     * allocate these out of the specified connection pool</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">     * The scheme handler decides if this is permanent or</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">     * short living pool.</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="comment">/* Unless we are connecting the backend via a (forward Proxy)Remote, we</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">     * have to use the original form of the URI (non absolute), but this is</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">     * also the case via a remote proxy using the CONNECT method since the</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment">     * original request (and URI) is to be embedded in the body.</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="group__MOD__PROXY.html#gaa1c038713fefa564c88a58477a1b2001">proxyname</a> || conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa94e7ad5ae965ab446679e42a3f9b0ab">is_ssl</a>) {</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        *<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a> = apr_pstrcat(p, uri-&gt;<a class="code" href="structapr__uri__t.html#a61cff1baadb3c1b52a34b502c25bba7f">path</a>, uri-&gt;<a class="code" href="structapr__uri__t.html#a88d889bcda9e95696022f04ffb470678">query</a> ? <span class="stringliteral">&quot;?&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                           uri-&gt;<a class="code" href="structapr__uri__t.html#a88d889bcda9e95696022f04ffb470678">query</a> ? uri-&gt;<a class="code" href="structapr__uri__t.html#a88d889bcda9e95696022f04ffb470678">query</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                           uri-&gt;<a class="code" href="structapr__uri__t.html#a0e4abeaa1379c79dcc6fdac01d76715a">fragment</a> ? <span class="stringliteral">&quot;#&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                           uri-&gt;<a class="code" href="structapr__uri__t.html#a0e4abeaa1379c79dcc6fdac01d76715a">fragment</a> ? uri-&gt;<a class="code" href="structapr__uri__t.html#a0e4abeaa1379c79dcc6fdac01d76715a">fragment</a> : <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    }</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">     * Figure out if our passed in proxy_conn_rec has a usable</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">     * address cached.</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">     * TODO: Handle this much better... </span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">     * XXX: If generic workers are ever address-reusable, we need </span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">     *      to check host and port on the conn and be careful about</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">     *      spilling the cached addr from the worker.</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    uds_path = (*worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#a2a079addb146a66a1246eb8518b7b299">uds_path</a> ? worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#a2a079addb146a66a1246eb8518b7b299">uds_path</a> : apr_table_get(r-&gt;<a class="code" href="structrequest__rec.html#a8be66d4328766cf1da8913c9b51e0e30">notes</a>, <span class="stringliteral">&quot;uds_path&quot;</span>));</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">if</span> (uds_path) {</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#a05cf8ee2b1f688ca7bc107d64d9b1e5c">uds_path</a> == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>) {</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <span class="comment">/* use (*conn)-&gt;pool instead of worker-&gt;cp-&gt;pool to match lifetime */</span></div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            conn-&gt;<a class="code" href="structproxy__conn__rec.html#a05cf8ee2b1f688ca7bc107d64d9b1e5c">uds_path</a> = apr_pstrdup(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>, uds_path);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        }</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#a05cf8ee2b1f688ca7bc107d64d9b1e5c">uds_path</a>) {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, r, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(02545)</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                         <span class="stringliteral">&quot;%s: has determined UDS as %s&quot;</span>,</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                         uri-&gt;<a class="code" href="structapr__uri__t.html#a5d62fa370265b6bc956aa86d36024a5d">scheme</a>, conn-&gt;<a class="code" href="structproxy__conn__rec.html#a05cf8ee2b1f688ca7bc107d64d9b1e5c">uds_path</a>);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        }</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            <span class="comment">/* should never happen */</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, r, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(02546)</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                         <span class="stringliteral">&quot;%s: cannot determine UDS (%s)&quot;</span>,</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                         uri-&gt;<a class="code" href="structapr__uri__t.html#a5d62fa370265b6bc956aa86d36024a5d">scheme</a>, uds_path);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        }</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">         * In UDS cases, some structs are NULL. Protect from de-refs</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment">         * and provide info for logging at the same time.</span></div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordflow">if</span> (!conn-&gt;<a class="code" href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">addr</a>) {</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            <a class="code" href="structapr__sockaddr__t.html">apr_sockaddr_t</a> *<a class="code" href="group__apr__network__io.html#ga5dc1cb3876df6ab646ee9b3d528cbd9f">sa</a>;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            apr_sockaddr_info_get(&amp;sa, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, <a class="code" href="group__apr__network__io.html#gaa7a33b17a7d0820b09ef489bd3328f85">APR_UNSPEC</a>, 0, 0, conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;            conn-&gt;<a class="code" href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">addr</a> = <a class="code" href="group__apr__network__io.html#ga5dc1cb3876df6ab646ee9b3d528cbd9f">sa</a>;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        }</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a> = <span class="stringliteral">&quot;httpd-UDS&quot;</span>;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;        conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">port</a> = 0;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    }</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="keywordtype">int</span> will_reuse = worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#aca8efb07ebb639cf52fdc9b6524b6327">is_address_reusable</a> &amp;&amp; !worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#ad4a4cca9ea31d862d7ef4e41c97af257">disablereuse</a>;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <span class="keywordflow">if</span> (!conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a> || !will_reuse) {</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__MOD__PROXY.html#gaa1c038713fefa564c88a58477a1b2001">proxyname</a>) {</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a> = apr_pstrdup(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>, <a class="code" href="group__MOD__PROXY.html#gaa1c038713fefa564c88a58477a1b2001">proxyname</a>);</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">port</a> = <a class="code" href="group__MOD__PROXY.html#ga9913582faaffe156d1b3b9330f5d0e6e">proxyport</a>;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment">                 * If we have a forward proxy and the protocol is HTTPS,</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">                 * then we need to prepend a HTTP CONNECT request before</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">                 * sending our actual HTTPS requests.</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">                 * Save our real backend data for using it later during HTTP CONNECT.</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa94e7ad5ae965ab446679e42a3f9b0ab">is_ssl</a>) {</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> *proxy_auth;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                    <a class="code" href="structforward__info.html">forward_info</a> *forward = <a class="code" href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a>(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>, <span class="keyword">sizeof</span>(<a class="code" href="structforward__info.html">forward_info</a>));</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                    conn-&gt;<a class="code" href="structproxy__conn__rec.html#a27586ca1faf991d81e6bd3dc2f769240">forward</a> = forward;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                    forward-&gt;<a class="code" href="structforward__info.html#a2470d137feb904af212a5d9e524d5d3a">use_http_connect</a> = 1;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                    forward-&gt;<a class="code" href="structforward__info.html#aead08ba3b9577d3735a465be340dbea7">target_host</a> = apr_pstrdup(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>, uri-&gt;<a class="code" href="structapr__uri__t.html#a8c6bf3dfca3d159f091377d9f7228aec">hostname</a>);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                    forward-&gt;<a class="code" href="structforward__info.html#a8869e21f61a36353e6a0e56e56d54d11">target_port</a> = uri-&gt;<a class="code" href="structapr__uri__t.html#a6e6e858ce56b5d58389287c1cc1134fa">port</a>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                    <span class="comment">/* Do we want to pass Proxy-Authorization along?</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="comment">                     * If we haven&#39;t used it, then YES</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="comment">                     * If we have used it then MAYBE: RFC2616 says we MAY propagate it.</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="comment">                     * So let&#39;s make it configurable by env.</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">                     * The logic here is the same used in mod_proxy_http.</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                    proxy_auth = apr_table_get(r-&gt;<a class="code" href="structrequest__rec.html#a5497da6c01af49acf70a4a9b975c1c83">headers_in</a>, <span class="stringliteral">&quot;Proxy-Authorization&quot;</span>);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                    <span class="keywordflow">if</span> (proxy_auth != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> &amp;&amp;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                        proxy_auth[0] != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                        r-&gt;<a class="code" href="structrequest__rec.html#a63f3abd83f53633f9d0069bc39aeb424">user</a> == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> &amp;&amp; <span class="comment">/* we haven&#39;t yet authenticated */</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                        apr_table_get(r-&gt;<a class="code" href="structrequest__rec.html#a36fa8def3b9cb16fe49d0b4d78099085">subprocess_env</a>, <span class="stringliteral">&quot;Proxy-Chain-Auth&quot;</span>)) {</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                        forward-&gt;<a class="code" href="structforward__info.html#a8d2838aa6f8c5f477a3403c3ff404c3a">proxy_auth</a> = apr_pstrdup(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>, proxy_auth);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                    }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                }</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;            }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a> = apr_pstrdup(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>, uri-&gt;<a class="code" href="structapr__uri__t.html#a8c6bf3dfca3d159f091377d9f7228aec">hostname</a>);</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">port</a> = uri-&gt;<a class="code" href="structapr__uri__t.html#a6e6e858ce56b5d58389287c1cc1134fa">port</a>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            <span class="keywordflow">if</span> (!will_reuse) {</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment">                 * Only do a lookup if we should not reuse the backend address.</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment">                 * Otherwise we will look it up once for the worker.</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                err = apr_sockaddr_info_get(&amp;(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">addr</a>),</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                                            conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a>, <a class="code" href="group__apr__network__io.html#gaa7a33b17a7d0820b09ef489bd3328f85">APR_UNSPEC</a>,</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                                            conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">port</a>, 0,</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                                            conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">pool</a>);</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            socket_cleanup(conn);</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            conn-&gt;<a class="code" href="structproxy__conn__rec.html#acb5fb6e7736c1833e3da6bfdb2bbe55f">close</a> = 0;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        }</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <span class="keywordflow">if</span> (will_reuse) {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment">             * Looking up the backend address for the worker only makes sense if</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">             * we can reuse the address.</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            <span class="keywordflow">if</span> (!worker-&gt;<a class="code" href="structproxy__worker.html#aa3b1761756ad260fc52589501c9f6fe0">cp</a>-&gt;<a class="code" href="structproxy__conn__pool.html#ace4435ae1625464d94beb6c4d6de7c2b">addr</a>) {</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                <span class="keywordflow">if</span> ((err = <a class="code" href="group__MOD__PROXY.html#ga4fa0e4229760fdbc94c35580e2e466bb">PROXY_THREAD_LOCK</a>(worker)) != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a>, err, r, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(00945) <span class="stringliteral">&quot;lock&quot;</span>);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__HTTP__Status.html#ga5d9777e02c26063c2985e39ef71091d2">HTTP_INTERNAL_SERVER_ERROR</a>;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="comment">                 * Worker can have the single constant backend address.</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="comment">                 * The single DNS lookup is used once per worker.</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="comment">                 * If dynamic change is needed then set the addr to NULL</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="comment">                 * inside dynamic config to force the lookup.</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                err = apr_sockaddr_info_get(&amp;(worker-&gt;<a class="code" href="structproxy__worker.html#aa3b1761756ad260fc52589501c9f6fe0">cp</a>-&gt;<a class="code" href="structproxy__conn__pool.html#ace4435ae1625464d94beb6c4d6de7c2b">addr</a>),</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                                            conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a>, <a class="code" href="group__apr__network__io.html#gaa7a33b17a7d0820b09ef489bd3328f85">APR_UNSPEC</a>,</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                                            conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">port</a>, 0,</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                                            worker-&gt;<a class="code" href="structproxy__worker.html#aa3b1761756ad260fc52589501c9f6fe0">cp</a>-&gt;<a class="code" href="structproxy__conn__pool.html#aa683a756f120a4482de8289705ff5faa">pool</a>);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                conn-&gt;<a class="code" href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">addr</a> = worker-&gt;<a class="code" href="structproxy__worker.html#aa3b1761756ad260fc52589501c9f6fe0">cp</a>-&gt;<a class="code" href="structproxy__conn__pool.html#ace4435ae1625464d94beb6c4d6de7c2b">addr</a>;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                <span class="keywordflow">if</span> ((uerr = <a class="code" href="group__MOD__PROXY.html#ga704882df51862165ac773183f2a63cbc">PROXY_THREAD_UNLOCK</a>(worker)) != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a>, uerr, r, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(00946) <span class="stringliteral">&quot;unlock&quot;</span>);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                }</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                conn-&gt;<a class="code" href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">addr</a> = worker-&gt;<a class="code" href="structproxy__worker.html#aa3b1761756ad260fc52589501c9f6fe0">cp</a>-&gt;<a class="code" href="structproxy__conn__pool.html#ace4435ae1625464d94beb6c4d6de7c2b">addr</a>;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;            }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        }</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="comment">/* Close a possible existing socket if we are told to do so */</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#acb5fb6e7736c1833e3da6bfdb2bbe55f">close</a>) {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        socket_cleanup(conn);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;        conn-&gt;<a class="code" href="structproxy__conn__rec.html#acb5fb6e7736c1833e3da6bfdb2bbe55f">close</a> = 0;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    }</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    <span class="keywordflow">if</span> (err != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        <span class="keywordflow">return</span> ap_proxyerror(r, <a class="code" href="group__HTTP__Status.html#ga57ddfb82346d6efc864c3e164e574b10">HTTP_BAD_GATEWAY</a>,</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                             apr_pstrcat(p, <span class="stringliteral">&quot;DNS lookup failure for: &quot;</span>,</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                                         conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a>, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>));</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    }</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="comment">/* Get the server port for the Via headers */</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    server_port = ap_get_server_port(r);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <a class="code" href="group__APACHE__CORE__DAEMON.html#ga85dbc1e4d9600422461f815193f8ace8">AP_DEBUG_ASSERT</a>(<a class="code" href="group__MOD__PROXY.html#gace3850b28542570d38229df96ad5cdb8">server_portstr_size</a> &gt; 0);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gae5bc38a44a7c51bef163b8208559f3a1">ap_is_default_port</a>(server_port, r)) {</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <a class="code" href="group__MOD__PROXY.html#ga802fad35b3c2f0228598874c678130a6">server_portstr</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        apr_snprintf(<a class="code" href="group__MOD__PROXY.html#ga802fad35b3c2f0228598874c678130a6">server_portstr</a>, <a class="code" href="group__MOD__PROXY.html#gace3850b28542570d38229df96ad5cdb8">server_portstr_size</a>, <span class="stringliteral">&quot;:%d&quot;</span>,</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                     server_port);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    }</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="comment">/* check if ProxyBlock directive on this host */</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a> != ap_proxy_checkproxyblock2(r, conf, uri-&gt;<a class="code" href="structapr__uri__t.html#a8c6bf3dfca3d159f091377d9f7228aec">hostname</a>, </div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                                       <a class="code" href="group__MOD__PROXY.html#gaa1c038713fefa564c88a58477a1b2001">proxyname</a> ? <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> : conn-&gt;<a class="code" href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">addr</a>)) {</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <span class="keywordflow">return</span> ap_proxyerror(r, <a class="code" href="group__HTTP__Status.html#ga92646f876056a1e5013e0050496dc04d">HTTP_FORBIDDEN</a>,</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                             <span class="stringliteral">&quot;Connect to remote machine blocked&quot;</span>);</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    }</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">     * When SSL is configured, determine the hostname (SNI) for the request</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment">     * and save it in conn-&gt;ssl_hostname. Close any reused connection whose</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment">     * SNI differs.</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa94e7ad5ae965ab446679e42a3f9b0ab">is_ssl</a>) {</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <a class="code" href="structproxy__dir__conf.html">proxy_dir_conf</a> *<a class="code" href="group__MOD__PROXY.html#ga01226e8c588429d47a24e72bda63a5e3">dconf</a>;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *ssl_hostname;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment">         * In the case of ProxyPreserveHost on use the hostname of</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment">         * the request if present otherwise use the one from the</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment">         * backend request URI.</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        dconf = <a class="code" href="group__APACHE__CORE__CONFIG.html#ga1093a5908a384eacc929b028c79f2a02">ap_get_module_config</a>(r-&gt;<a class="code" href="structrequest__rec.html#a0935ac19a61c462c8986898b4c30547d">per_dir_config</a>, &amp;<a class="code" href="group__MOD__PROXY.html#ga27b03f85d7a77ee10f73b8df6f58aa0e">proxy_module</a>);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        <span class="keywordflow">if</span> (dconf-&gt;<a class="code" href="structproxy__dir__conf.html#ab866a9816beea17c38a145be11807857">preserve_host</a>) {</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;            ssl_hostname = r-&gt;<a class="code" href="structrequest__rec.html#a93baa938b6e2f6c4648cb2429495cd1b">hostname</a>;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        }</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#a27586ca1faf991d81e6bd3dc2f769240">forward</a></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                 &amp;&amp; ((<a class="code" href="structforward__info.html">forward_info</a> *)(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a27586ca1faf991d81e6bd3dc2f769240">forward</a>))-&gt;use_http_connect) {</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;            ssl_hostname = ((<a class="code" href="structforward__info.html">forward_info</a> *)conn-&gt;<a class="code" href="structproxy__conn__rec.html#a27586ca1faf991d81e6bd3dc2f769240">forward</a>)-&gt;target_host;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        }</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            ssl_hostname = conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a>;</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        }</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment">         * Close if a SNI is in use but this request requires no or</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment">         * a different one, or no SNI is in use but one is required.</span></div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <span class="keywordflow">if</span> ((conn-&gt;<a class="code" href="structproxy__conn__rec.html#ab6205c31f7ed891e0a9b133bb4195f51">ssl_hostname</a> &amp;&amp; (!ssl_hostname ||</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                                    <a class="code" href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a">strcasecmp</a>(conn-&gt;<a class="code" href="structproxy__conn__rec.html#ab6205c31f7ed891e0a9b133bb4195f51">ssl_hostname</a>,</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                                               ssl_hostname) != 0)) ||</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                (!conn-&gt;<a class="code" href="structproxy__conn__rec.html#ab6205c31f7ed891e0a9b133bb4195f51">ssl_hostname</a> &amp;&amp; ssl_hostname &amp;&amp; conn-&gt;<a class="code" href="structproxy__conn__rec.html#a8793b656730c1978e7886f249eff739d">sock</a>)) {</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;            socket_cleanup(conn);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        }</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <span class="keywordflow">if</span> (conn-&gt;<a class="code" href="structproxy__conn__rec.html#ab6205c31f7ed891e0a9b133bb4195f51">ssl_hostname</a> == NULL) {</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            conn-&gt;<a class="code" href="structproxy__conn__rec.html#ab6205c31f7ed891e0a9b133bb4195f51">ssl_hostname</a> = apr_pstrdup(conn-&gt;<a class="code" href="structproxy__conn__rec.html#a572f7275ff328d6181a01389b95a7761">scpool</a>, ssl_hostname);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    }</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, r, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(00947)</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                 <span class="stringliteral">&quot;connected %s to %s:%d&quot;</span>, *<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, conn-&gt;<a class="code" href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">hostname</a>, conn-&gt;<a class="code" href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">port</a>);</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a>;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;}</div><div class="ttc" id="structproxy__worker_html_abeaebad014908a4f108fba27313187aa"><div class="ttname"><a href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">proxy_worker::s</a></div><div class="ttdeci">proxy_worker_shared * s</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:456</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a1e898616b25ea637fc7bbfdb9bc8a04e"><div class="ttname"><a href="structproxy__conn__rec.html#a1e898616b25ea637fc7bbfdb9bc8a04e">proxy_conn_rec::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:259</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a743a0aac62712d38e0a7f55675dfaa98"><div class="ttname"><a href="structproxy__conn__rec.html#a743a0aac62712d38e0a7f55675dfaa98">proxy_conn_rec::addr</a></div><div class="ttdeci">apr_sockaddr_t * addr</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:261</div></div>
<div class="ttc" id="group__apr__network__io_html_gaa7a33b17a7d0820b09ef489bd3328f85"><div class="ttname"><a href="group__apr__network__io.html#gaa7a33b17a7d0820b09ef489bd3328f85">APR_UNSPEC</a></div><div class="ttdeci">#define APR_UNSPEC</div><div class="ttdef"><b>Definition:</b> apr_network_io.h:183</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga46b82947aff7f666d626b556a8378392"><div class="ttname"><a href="group__MOD__PROXY.html#ga46b82947aff7f666d626b556a8378392">uds_path</a></div><div class="ttdeci">const char * uds_path</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:971</div></div>
<div class="ttc" id="structforward__info_html_a8d2838aa6f8c5f477a3403c3ff404c3a"><div class="ttname"><a href="structforward__info.html#a8d2838aa6f8c5f477a3403c3ff404c3a">forward_info::proxy_auth</a></div><div class="ttdeci">const char * proxy_auth</div><div class="ttdef"><b>Definition:</b> proxy_util.c:54</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga57ad94ed8c92c4306de90479251a5d58"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga57ad94ed8c92c4306de90479251a5d58">APLOG_ERR</a></div><div class="ttdeci">#define APLOG_ERR</div><div class="ttdef"><b>Definition:</b> http_log.h:46</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga9913582faaffe156d1b3b9330f5d0e6e"><div class="ttname"><a href="group__MOD__PROXY.html#ga9913582faaffe156d1b3b9330f5d0e6e">proxyport</a></div><div class="ttdeci">request_rec proxy_server_conf proxy_worker proxy_conn_rec apr_uri_t char const char apr_port_t proxyport</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:877</div></div>
<div class="ttc" id="structproxy__conn__rec_html_aa3e507bc0bd0e23c0bedaae83b0307c7"><div class="ttname"><a href="structproxy__conn__rec.html#aa3e507bc0bd0e23c0bedaae83b0307c7">proxy_conn_rec::port</a></div><div class="ttdeci">apr_port_t port</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:267</div></div>
<div class="ttc" id="structrequest__rec_html_a8be66d4328766cf1da8913c9b51e0e30"><div class="ttname"><a href="structrequest__rec.html#a8be66d4328766cf1da8913c9b51e0e30">request_rec::notes</a></div><div class="ttdeci">uintptr_t notes</div><div class="ttdef"><b>Definition:</b> ap.d:39</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga4fa0e4229760fdbc94c35580e2e466bb"><div class="ttname"><a href="group__MOD__PROXY.html#ga4fa0e4229760fdbc94c35580e2e466bb">PROXY_THREAD_LOCK</a></div><div class="ttdeci">#define PROXY_THREAD_LOCK(x)</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:528</div></div>
<div class="ttc" id="structproxy__worker_html_aa3b1761756ad260fc52589501c9f6fe0"><div class="ttname"><a href="structproxy__worker.html#aa3b1761756ad260fc52589501c9f6fe0">proxy_worker::cp</a></div><div class="ttdeci">proxy_conn_pool * cp</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:455</div></div>
<div class="ttc" id="structproxy__conn__rec_html_ab6205c31f7ed891e0a9b133bb4195f51"><div class="ttname"><a href="structproxy__conn__rec.html#ab6205c31f7ed891e0a9b133bb4195f51">proxy_conn_rec::ssl_hostname</a></div><div class="ttdeci">const char * ssl_hostname</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:274</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a05cf8ee2b1f688ca7bc107d64d9b1e5c"><div class="ttname"><a href="structproxy__conn__rec.html#a05cf8ee2b1f688ca7bc107d64d9b1e5c">proxy_conn_rec::uds_path</a></div><div class="ttdeci">const char * uds_path</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:273</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga704882df51862165ac773183f2a63cbc"><div class="ttname"><a href="group__MOD__PROXY.html#ga704882df51862165ac773183f2a63cbc">PROXY_THREAD_UNLOCK</a></div><div class="ttdeci">#define PROXY_THREAD_UNLOCK(x)</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:529</div></div>
<div class="ttc" id="structproxy__conn__pool_html_ace4435ae1625464d94beb6c4d6de7c2b"><div class="ttname"><a href="structproxy__conn__pool.html#ace4435ae1625464d94beb6c4d6de7c2b">proxy_conn_pool::addr</a></div><div class="ttdeci">apr_sockaddr_t * addr</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:289</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gadfcef90537539cf2b7d35cfbbbafeb93"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a></div><div class="ttdeci">#define APLOG_DEBUG</div><div class="ttdef"><b>Definition:</b> http_log.h:50</div></div>
<div class="ttc" id="structapr__uri__t_html_a6e6e858ce56b5d58389287c1cc1134fa"><div class="ttname"><a href="structapr__uri__t.html#a6e6e858ce56b5d58389287c1cc1134fa">apr_uri_t::port</a></div><div class="ttdeci">apr_port_t port</div><div class="ttdef"><b>Definition:</b> apr_uri.h:109</div></div>
<div class="ttc" id="structforward__info_html"><div class="ttname"><a href="structforward__info.html">forward_info</a></div><div class="ttdef"><b>Definition:</b> proxy_util.c:50</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga0c1fdbbb10800664989907cbd3a5a023"><div class="ttname"><a href="group__HTTP__Status.html#ga0c1fdbbb10800664989907cbd3a5a023">HTTP_BAD_REQUEST</a></div><div class="ttdeci">#define HTTP_BAD_REQUEST</div><div class="ttdef"><b>Definition:</b> httpd.h:510</div></div>
<div class="ttc" id="structapr__uri__t_html_a88d889bcda9e95696022f04ffb470678"><div class="ttname"><a href="structapr__uri__t.html#a88d889bcda9e95696022f04ffb470678">apr_uri_t::query</a></div><div class="ttdeci">char * query</div><div class="ttdef"><b>Definition:</b> apr_uri.h:101</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga27b03f85d7a77ee10f73b8df6f58aa0e"><div class="ttname"><a href="group__MOD__PROXY.html#ga27b03f85d7a77ee10f73b8df6f58aa0e">proxy_module</a></div><div class="ttdeci">module PROXY_DECLARE_DATA proxy_module</div></div>
<div class="ttc" id="structforward__info_html_a2470d137feb904af212a5d9e524d5d3a"><div class="ttname"><a href="structforward__info.html#a2470d137feb904af212a5d9e524d5d3a">forward_info::use_http_connect</a></div><div class="ttdeci">int use_http_connect</div><div class="ttdef"><b>Definition:</b> proxy_util.c:51</div></div>
<div class="ttc" id="structproxy__worker__shared_html_ad4a4cca9ea31d862d7ef4e41c97af257"><div class="ttname"><a href="structproxy__worker__shared.html#ad4a4cca9ea31d862d7ef4e41c97af257">proxy_worker_shared::disablereuse</a></div><div class="ttdeci">unsigned int disablereuse</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:426</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a27586ca1faf991d81e6bd3dc2f769240"><div class="ttname"><a href="structproxy__conn__rec.html#a27586ca1faf991d81e6bd3dc2f769240">proxy_conn_rec::forward</a></div><div class="ttdeci">void * forward</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:265</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaa1c038713fefa564c88a58477a1b2001"><div class="ttname"><a href="group__MOD__PROXY.html#gaa1c038713fefa564c88a58477a1b2001">proxyname</a></div><div class="ttdeci">request_rec proxy_server_conf proxy_worker proxy_conn_rec apr_uri_t char const char * proxyname</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:877</div></div>
<div class="ttc" id="structproxy__conn__rec_html_aa94e7ad5ae965ab446679e42a3f9b0ab"><div class="ttname"><a href="structproxy__conn__rec.html#aa94e7ad5ae965ab446679e42a3f9b0ab">proxy_conn_rec::is_ssl</a></div><div class="ttdeci">unsigned int is_ssl</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:268</div></div>
<div class="ttc" id="structproxy__dir__conf_html_ab866a9816beea17c38a145be11807857"><div class="ttname"><a href="structproxy__dir__conf.html#ab866a9816beea17c38a145be11807857">proxy_dir_conf::preserve_host</a></div><div class="ttdeci">unsigned int preserve_host</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:233</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1093a5908a384eacc929b028c79f2a02"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1093a5908a384eacc929b028c79f2a02">ap_get_module_config</a></div><div class="ttdeci">#define ap_get_module_config(v, m)</div><div class="ttdef"><b>Definition:</b> http_config.h:531</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_gaba51915c87d64af47fb1cc59348961c9"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a></div><div class="ttdeci">#define OK</div><div class="ttdef"><b>Definition:</b> httpd.h:455</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a8793b656730c1978e7886f249eff739d"><div class="ttname"><a href="structproxy__conn__rec.html#a8793b656730c1978e7886f249eff739d">proxy_conn_rec::sock</a></div><div class="ttdeci">apr_socket_t * sock</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:263</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga4c112558ccffd6b363da102b2052d2a6"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga4c112558ccffd6b363da102b2052d2a6">ap_log_rerror</a></div><div class="ttdeci">#define ap_log_rerror</div><div class="ttdef"><b>Definition:</b> http_log.h:454</div></div>
<div class="ttc" id="group__apr__network__io_html_ga5dc1cb3876df6ab646ee9b3d528cbd9f"><div class="ttname"><a href="group__apr__network__io.html#ga5dc1cb3876df6ab646ee9b3d528cbd9f">sa</a></div><div class="ttdeci">apr_sockaddr_t * sa</div><div class="ttdef"><b>Definition:</b> apr_network_io.h:379</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga01226e8c588429d47a24e72bda63a5e3"><div class="ttname"><a href="group__MOD__PROXY.html#ga01226e8c588429d47a24e72bda63a5e3">dconf</a></div><div class="ttdeci">struct proxy_alias proxy_dir_conf * dconf</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1058</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga57ddfb82346d6efc864c3e164e574b10"><div class="ttname"><a href="group__HTTP__Status.html#ga57ddfb82346d6efc864c3e164e574b10">HTTP_BAD_GATEWAY</a></div><div class="ttdeci">#define HTTP_BAD_GATEWAY</div><div class="ttdef"><b>Definition:</b> httpd.h:539</div></div>
<div class="ttc" id="group__AP__EXPR_html_gaccebe6c638c552d2845014cf8bdea8d8"><div class="ttname"><a href="group__AP__EXPR.html#gaccebe6c638c552d2845014cf8bdea8d8">err</a></div><div class="ttdeci">const ap_expr_info_t const char ** err</div><div class="ttdef"><b>Definition:</b> ap_expr.h:81</div></div>
<div class="ttc" id="apr__cpystrn_8c_html_a4a00fc29b96a953fed9e0107a9c4548a"><div class="ttname"><a href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a">strcasecmp</a></div><div class="ttdeci">int strcasecmp(const char *a, const char *b)</div><div class="ttdef"><b>Definition:</b> apr_cpystrn.c:248</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a572f7275ff328d6181a01389b95a7761"><div class="ttname"><a href="structproxy__conn__rec.html#a572f7275ff328d6181a01389b95a7761">proxy_conn_rec::scpool</a></div><div class="ttdeci">apr_pool_t * scpool</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:262</div></div>
<div class="ttc" id="structapr__uri__t_html_a0e4abeaa1379c79dcc6fdac01d76715a"><div class="ttname"><a href="structapr__uri__t.html#a0e4abeaa1379c79dcc6fdac01d76715a">apr_uri_t::fragment</a></div><div class="ttdeci">char * fragment</div><div class="ttdef"><b>Definition:</b> apr_uri.h:103</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_gae5bc38a44a7c51bef163b8208559f3a1"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#gae5bc38a44a7c51bef163b8208559f3a1">ap_is_default_port</a></div><div class="ttdeci">#define ap_is_default_port(port, r)</div><div class="ttdef"><b>Definition:</b> httpd.h:286</div></div>
<div class="ttc" id="structproxy__conn__rec_html_a1ab19f0a00dd603547746818640ce583"><div class="ttname"><a href="structproxy__conn__rec.html#a1ab19f0a00dd603547746818640ce583">proxy_conn_rec::hostname</a></div><div class="ttdeci">const char * hostname</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:260</div></div>
<div class="ttc" id="structforward__info_html_aead08ba3b9577d3735a465be340dbea7"><div class="ttname"><a href="structforward__info.html#aead08ba3b9577d3735a465be340dbea7">forward_info::target_host</a></div><div class="ttdeci">const char * target_host</div><div class="ttdef"><b>Definition:</b> proxy_util.c:52</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga802fad35b3c2f0228598874c678130a6"><div class="ttname"><a href="group__MOD__PROXY.html#ga802fad35b3c2f0228598874c678130a6">server_portstr</a></div><div class="ttdeci">request_rec proxy_server_conf proxy_worker proxy_conn_rec apr_uri_t char const char apr_port_t char * server_portstr</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:877</div></div>
<div class="ttc" id="structapr__uri__t_html_a5d62fa370265b6bc956aa86d36024a5d"><div class="ttname"><a href="structapr__uri__t.html#a5d62fa370265b6bc956aa86d36024a5d">apr_uri_t::scheme</a></div><div class="ttdeci">char * scheme</div><div class="ttdef"><b>Definition:</b> apr_uri.h:87</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga05d2db9f2dd75d18170f192bd1cc9b4e"><div class="ttname"><a href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a></div><div class="ttdeci">proxy_dir_conf const char * url</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:650</div></div>
<div class="ttc" id="group__apr__pools_html_gad214fc0160de3c22b6435e29ea20fce8"><div class="ttname"><a href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a></div><div class="ttdeci">#define apr_pcalloc(p, size)</div><div class="ttdef"><b>Definition:</b> apr_pools.h:465</div></div>
<div class="ttc" id="structapr__uri__t_html_a61cff1baadb3c1b52a34b502c25bba7f"><div class="ttname"><a href="structapr__uri__t.html#a61cff1baadb3c1b52a34b502c25bba7f">apr_uri_t::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> apr_uri.h:99</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga85dbc1e4d9600422461f815193f8ace8"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga85dbc1e4d9600422461f815193f8ace8">AP_DEBUG_ASSERT</a></div><div class="ttdeci">#define AP_DEBUG_ASSERT(exp)</div><div class="ttdef"><b>Definition:</b> httpd.h:2174</div></div>
<div class="ttc" id="structproxy__conn__rec_html_acb5fb6e7736c1833e3da6bfdb2bbe55f"><div class="ttname"><a href="structproxy__conn__rec.html#acb5fb6e7736c1833e3da6bfdb2bbe55f">proxy_conn_rec::close</a></div><div class="ttdeci">unsigned int close</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:269</div></div>
<div class="ttc" id="structapr__uri__t_html_a8c6bf3dfca3d159f091377d9f7228aec"><div class="ttname"><a href="structapr__uri__t.html#a8c6bf3dfca3d159f091377d9f7228aec">apr_uri_t::hostname</a></div><div class="ttdeci">char * hostname</div><div class="ttdef"><b>Definition:</b> apr_uri.h:95</div></div>
<div class="ttc" id="structproxy__worker__shared_html_aca8efb07ebb639cf52fdc9b6524b6327"><div class="ttname"><a href="structproxy__worker__shared.html#aca8efb07ebb639cf52fdc9b6524b6327">proxy_worker_shared::is_address_reusable</a></div><div class="ttdeci">unsigned int is_address_reusable</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:427</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga5d9777e02c26063c2985e39ef71091d2"><div class="ttname"><a href="group__HTTP__Status.html#ga5d9777e02c26063c2985e39ef71091d2">HTTP_INTERNAL_SERVER_ERROR</a></div><div class="ttdeci">#define HTTP_INTERNAL_SERVER_ERROR</div><div class="ttdef"><b>Definition:</b> httpd.h:537</div></div>
<div class="ttc" id="structproxy__worker__shared_html_a2a079addb146a66a1246eb8518b7b299"><div class="ttname"><a href="structproxy__worker__shared.html#a2a079addb146a66a1246eb8518b7b299">proxy_worker_shared::uds_path</a></div><div class="ttdeci">char uds_path[PROXY_WORKER_MAX_NAME_SIZE]</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:391</div></div>
<div class="ttc" id="structproxy__conn__pool_html_aa683a756f120a4482de8289705ff5faa"><div class="ttname"><a href="structproxy__conn__pool.html#aa683a756f120a4482de8289705ff5faa">proxy_conn_pool::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:288</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="structrequest__rec_html_a5497da6c01af49acf70a4a9b975c1c83"><div class="ttname"><a href="structrequest__rec.html#a5497da6c01af49acf70a4a9b975c1c83">request_rec::headers_in</a></div><div class="ttdeci">uintptr_t headers_in</div><div class="ttdef"><b>Definition:</b> ap.d:35</div></div>
<div class="ttc" id="structproxy__dir__conf_html"><div class="ttname"><a href="structproxy__dir__conf.html">proxy_dir_conf</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:205</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga1dee8a07e06bc5b3de8b89662c2cd666"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a></div><div class="ttdeci">#define APLOGNO(n)</div><div class="ttdef"><b>Definition:</b> http_log.h:117</div></div>
<div class="ttc" id="structrequest__rec_html_a0935ac19a61c462c8986898b4c30547d"><div class="ttname"><a href="structrequest__rec.html#a0935ac19a61c462c8986898b4c30547d">request_rec::per_dir_config</a></div><div class="ttdeci">uintptr_t per_dir_config</div><div class="ttdef"><b>Definition:</b> ap.d:91</div></div>
<div class="ttc" id="structrequest__rec_html_a63f3abd83f53633f9d0069bc39aeb424"><div class="ttname"><a href="structrequest__rec.html#a63f3abd83f53633f9d0069bc39aeb424">request_rec::user</a></div><div class="ttdeci">char * user</div><div class="ttdef"><b>Definition:</b> ap.d:45</div></div>
<div class="ttc" id="structforward__info_html_a8869e21f61a36353e6a0e56e56d54d11"><div class="ttname"><a href="structforward__info.html#a8869e21f61a36353e6a0e56e56d54d11">forward_info::target_port</a></div><div class="ttdeci">apr_port_t target_port</div><div class="ttdef"><b>Definition:</b> proxy_util.c:53</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gace3850b28542570d38229df96ad5cdb8"><div class="ttname"><a href="group__MOD__PROXY.html#gace3850b28542570d38229df96ad5cdb8">server_portstr_size</a></div><div class="ttdeci">request_rec proxy_server_conf proxy_worker proxy_conn_rec apr_uri_t char const char apr_port_t char int server_portstr_size</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:877</div></div>
<div class="ttc" id="structapr__sockaddr__t_html"><div class="ttname"><a href="structapr__sockaddr__t.html">apr_sockaddr_t</a></div><div class="ttdef"><b>Definition:</b> apr_network_io.h:266</div></div>
<div class="ttc" id="group__HTTP__Status_html_ga92646f876056a1e5013e0050496dc04d"><div class="ttname"><a href="group__HTTP__Status.html#ga92646f876056a1e5013e0050496dc04d">HTTP_FORBIDDEN</a></div><div class="ttdeci">#define HTTP_FORBIDDEN</div><div class="ttdef"><b>Definition:</b> httpd.h:513</div></div>
<div class="ttc" id="structrequest__rec_html_a93baa938b6e2f6c4648cb2429495cd1b"><div class="ttname"><a href="structrequest__rec.html#a93baa938b6e2f6c4648cb2429495cd1b">request_rec::hostname</a></div><div class="ttdeci">char * hostname</div><div class="ttdef"><b>Definition:</b> ap.d:15</div></div>
<div class="ttc" id="structrequest__rec_html_a36fa8def3b9cb16fe49d0b4d78099085"><div class="ttname"><a href="structrequest__rec.html#a36fa8def3b9cb16fe49d0b4d78099085">request_rec::subprocess_env</a></div><div class="ttdeci">uintptr_t subprocess_env</div><div class="ttdef"><b>Definition:</b> ap.d:38</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_ade616416cb4f3a7356fa87cd3011325c_cgraph.png" border="0" usemap="#proxy__util_8c_ade616416cb4f3a7356fa87cd3011325c_cgraph" alt=""/></div>
<map name="proxy__util_8c_ade616416cb4f3a7356fa87cd3011325c_cgraph" id="proxy__util_8c_ade616416cb4f3a7356fa87cd3011325c_cgraph">
<area shape="rect" id="node2" href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a" title="strcasecmp" alt="" coords="192,13,283,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a894a8f960939418e2122523aa81b5dd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ap_proxy_hashfunc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__PROXY.html#gad04e421d409d5c4b460cd62694ada47c">proxy_hash_t</a>&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;{</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__CONFIG.html#ga6c1b16298acdfc2ca3cba871da0daa17">method</a> == <a class="code" href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca974beb94711f8b9d072dbec227b5255c">PROXY_HASHFUNC_APR</a>) {</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <a class="code" href="group__apr__platform.html#ga215ebb88932bee220b766263ebbfe6fa">apr_ssize_t</a> <a class="code" href="group__APR__Util__Escaping.html#ga00eba03f583932b8cdcec6e0847f08b3">slen</a> = strlen(<a class="code" href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a>);</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <span class="keywordflow">return</span> apr_hashfunc_default(<a class="code" href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a>, &amp;slen);</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    }</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__CONFIG.html#ga6c1b16298acdfc2ca3cba871da0daa17">method</a> == <a class="code" href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca4af344ec2e59dc7162cd4c20f85d8c19">PROXY_HASHFUNC_FNV</a>) {</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        <span class="comment">/* FNV model */</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a>;</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fnv_prime = 0x811C9DC5;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        <span class="keywordflow">for</span> (hash = 0; *<a class="code" href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a>; <a class="code" href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a>++) {</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            hash *= fnv_prime;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            hash ^= (*str);</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        }</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a>;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    }</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">/* method == PROXY_HASHFUNC_DEFAULT */</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="comment">/* SDBM model */</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a>;</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        <span class="keywordflow">for</span> (hash = 0; *<a class="code" href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a>; <a class="code" href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a>++) {</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            hash = (*str) + (hash &lt;&lt; 6) + (hash &lt;&lt; 16) - <a class="code" href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a>;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        }</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a>;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    }</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga6c1b16298acdfc2ca3cba871da0daa17"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga6c1b16298acdfc2ca3cba871da0daa17">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> http_config.h:667</div></div>
<div class="ttc" id="group__MOD__DAV_html_gaab9226fe8f632e1f998e24276d478f30"><div class="ttname"><a href="group__MOD__DAV.html#gaab9226fe8f632e1f998e24276d478f30">str</a></div><div class="ttdeci">#define str</div><div class="ttdef"><b>Definition:</b> util_expr_scan.c:621</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ggad04e421d409d5c4b460cd62694ada47ca4af344ec2e59dc7162cd4c20f85d8c19"><div class="ttname"><a href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca4af344ec2e59dc7162cd4c20f85d8c19">PROXY_HASHFUNC_FNV</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1014</div></div>
<div class="ttc" id="apr__random_8c_html_a1961406c0af51085f634defe740cbf52"><div class="ttname"><a href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a></div><div class="ttdeci">#define hash(h, r, b, n)</div><div class="ttdef"><b>Definition:</b> apr_random.c:51</div></div>
<div class="ttc" id="group__apr__platform_html_ga215ebb88932bee220b766263ebbfe6fa"><div class="ttname"><a href="group__apr__platform.html#ga215ebb88932bee220b766263ebbfe6fa">apr_ssize_t</a></div><div class="ttdeci">ssize_t apr_ssize_t</div><div class="ttdef"><b>Definition:</b> apr.h:358</div></div>
<div class="ttc" id="group__APR__Util__Escaping_html_ga00eba03f583932b8cdcec6e0847f08b3"><div class="ttname"><a href="group__APR__Util__Escaping.html#ga00eba03f583932b8cdcec6e0847f08b3">slen</a></div><div class="ttdeci">const char apr_ssize_t slen</div><div class="ttdef"><b>Definition:</b> apr_escape.h:72</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ggad04e421d409d5c4b460cd62694ada47ca974beb94711f8b9d072dbec227b5255c"><div class="ttname"><a href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca974beb94711f8b9d072dbec227b5255c">PROXY_HASHFUNC_APR</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1014</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_cgraph.png" border="0" usemap="#proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_cgraph" alt=""/></div>
<map name="proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_cgraph" id="proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_cgraph">
<area shape="rect" id="node2" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="188,5,328,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_icgraph.png" border="0" usemap="#proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_icgraph" alt=""/></div>
<map name="proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_icgraph" id="proxy__util_8c_a894a8f960939418e2122523aa81b5dd0_icgraph">
<area shape="rect" id="node2" href="mod__proxy_8c.html#ga45846d8c2168498ea908d2c8d6a9a320" title="PROXY_DECLARE" alt="" coords="188,5,328,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aee811a1f31a5fa14ab95b0c83df0cf2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APLOG_USE_MODULE </td>
          <td>(</td>
          <td class="paramtype">proxy&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a35e77ebd2481f040c75b5d246b5c487c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APR_IMPLEMENT_OPTIONAL_HOOK_RUN_ALL </td>
          <td>(</td>
          <td class="paramtype">proxy&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__PROXY.html#ga8a2d0523d70a5ec877fe8d89ef4ecd96">PROXY</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">create_req&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="structrequest__rec.html">request_rec</a> *<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, <a class="el" href="structrequest__rec.html">request_rec</a> *pr)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, pr)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__APACHE__CORE__DAEMON.html#gaba51915c87d64af47fb1cc59348961c9">OK</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__APACHE__CORE__DAEMON.html#ga9eba11ca86461a3ae319311d64682dda">DECLINED</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">char</span> *thenil;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> thelen;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">/* special case handling */</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="group__MOD__PROXY.html#ga63ef3f66045cd6e20f6ea5a82363580d">dlen</a>) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">/* XXX: APR_ENOSPACE would be better */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="group__APACHE__CORE__PROTO.html#ga3250c7d76063d957a24f2ecbb3d93c2c">src</a>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        *dst = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    thenil = apr_cpystrn(dst, <a class="code" href="group__APACHE__CORE__PROTO.html#ga3250c7d76063d957a24f2ecbb3d93c2c">src</a>, <a class="code" href="group__MOD__PROXY.html#ga63ef3f66045cd6e20f6ea5a82363580d">dlen</a>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    thelen = thenil - dst;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__PROTO.html#ga3250c7d76063d957a24f2ecbb3d93c2c">src</a>[thelen] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div><div class="ttc" id="group__apr__platform_html_gaaa72b2253f6f3032cefea5712a27540e"><div class="ttname"><a href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a></div><div class="ttdeci">size_t apr_size_t</div><div class="ttdef"><b>Definition:</b> apr.h:357</div></div>
<div class="ttc" id="group__APR__Error_html_ga18f5678bea0c2c704a2b6a186c9e158b"><div class="ttname"><a href="group__APR__Error.html#ga18f5678bea0c2c704a2b6a186c9e158b">APR_EGENERAL</a></div><div class="ttdeci">#define APR_EGENERAL</div><div class="ttdef"><b>Definition:</b> apr_errno.h:313</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga63ef3f66045cd6e20f6ea5a82363580d"><div class="ttname"><a href="group__MOD__PROXY.html#ga63ef3f66045cd6e20f6ea5a82363580d">dlen</a></div><div class="ttdeci">request_rec char *url proxy_worker proxy_balancer request_rec proxy_server_conf *conf const char apr_size_t dlen</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:616</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_ga3250c7d76063d957a24f2ecbb3d93c2c"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#ga3250c7d76063d957a24f2ecbb3d93c2c">src</a></div><div class="ttdeci">ap_method_list_t * src</div><div class="ttdef"><b>Definition:</b> http_protocol.h:328</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab8b131b879f2da190de9e2d128450143"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#if !APR_CHARSET_EBCDIC</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">int</span> ch = <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[0];</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__apr__ctype.html#ga8c453b1d66015b357c3d3a3ddb7d97d7">apr_isdigit</a>(ch)) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        i = ch - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__apr__ctype.html#ga362f53cc44aab662aaf04fa87e36035b">apr_isupper</a>(ch)) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        i = ch - (<span class="charliteral">&#39;A&#39;</span> - 10);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        i = ch - (<span class="charliteral">&#39;a&#39;</span> - 10);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    i &lt;&lt;= 4;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    ch = <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[1];</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__apr__ctype.html#ga8c453b1d66015b357c3d3a3ddb7d97d7">apr_isdigit</a>(ch)) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        i += ch - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__apr__ctype.html#ga362f53cc44aab662aaf04fa87e36035b">apr_isupper</a>(ch)) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        i += ch - (<span class="charliteral">&#39;A&#39;</span> - 10);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        i += ch - (<span class="charliteral">&#39;a&#39;</span> - 10);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#else </span><span class="comment">/*APR_CHARSET_EBCDIC*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">     * we assume that the hex value refers to an ASCII character</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">     * so convert to EBCDIC so that it makes sense locally;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">     * example:</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">     * client specifies %20 in URL to refer to a space char;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">     * at this point we&#39;re called with EBCDIC &quot;20&quot;; after turning</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">     * EBCDIC &quot;20&quot; into binary 0x20, we then need to assume that 0x20</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">     * represents an ASCII char and convert 0x20 to EBCDIC, yielding</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">     * 0x40</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>[1];</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (1 == sscanf(<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>, <span class="stringliteral">&quot;%2x&quot;</span>, &amp;i)) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        buf[0] = i &amp; 0xFF;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="group__APACHE__CORE__EBCDIC.html#gad8d6e268d45b4380e6b00371795b12c7">ap_xlate_proto_from_ascii</a>(buf, 1);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> buf[0];</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*APR_CHARSET_EBCDIC*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__apr__ctype_html_ga8c453b1d66015b357c3d3a3ddb7d97d7"><div class="ttname"><a href="group__apr__ctype.html#ga8c453b1d66015b357c3d3a3ddb7d97d7">apr_isdigit</a></div><div class="ttdeci">#define apr_isdigit(c)</div><div class="ttdef"><b>Definition:</b> apr_lib.h:209</div></div>
<div class="ttc" id="group__apr__ctype_html_ga362f53cc44aab662aaf04fa87e36035b"><div class="ttname"><a href="group__apr__ctype.html#ga362f53cc44aab662aaf04fa87e36035b">apr_isupper</a></div><div class="ttdeci">#define apr_isupper(c)</div><div class="ttdef"><b>Definition:</b> apr_lib.h:227</div></div>
<div class="ttc" id="group__APACHE__CORE__EBCDIC_html_gad8d6e268d45b4380e6b00371795b12c7"><div class="ttname"><a href="group__APACHE__CORE__EBCDIC.html#gad8d6e268d45b4380e6b00371795b12c7">ap_xlate_proto_from_ascii</a></div><div class="ttdeci">#define ap_xlate_proto_from_ascii(x, y)</div><div class="ttdef"><b>Definition:</b> util_ebcdic.h:81</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_ga17bc47ccf1b618ed082a4ff4f2cc7f7e"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a></div><div class="ttdeci">int const char * buf</div><div class="ttdef"><b>Definition:</b> http_protocol.h:974</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_ab8b131b879f2da190de9e2d128450143_icgraph.png" border="0" usemap="#proxy__util_8c_ab8b131b879f2da190de9e2d128450143_icgraph" alt=""/></div>
<map name="proxy__util_8c_ab8b131b879f2da190de9e2d128450143_icgraph" id="proxy__util_8c_ab8b131b879f2da190de9e2d128450143_icgraph">
<area shape="rect" id="node2" href="proxy__util_8c.html#a1c03b3f7f69d399a646d84db4caaed65" title="PROXY_DECLARE" alt="" coords="203,5,343,32"/>
<area shape="rect" id="node3" href="proxy__util_8c.html#ae17d5feb294b5544536dba5e9b8a02ee" title="ap_proxy_canon_netloc" alt="" coords="193,56,352,83"/>
<area shape="rect" id="node4" href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0" title="ap_proxy_hashfunc" alt="" coords="205,107,340,133"/>
<area shape="rect" id="node5" href="mod__proxy_8c.html#ga45846d8c2168498ea908d2c8d6a9a320" title="PROXY_DECLARE" alt="" coords="400,107,540,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9ced80174d35950697817a36a655de23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#if !APR_CHARSET_EBCDIC</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[0] = <span class="charliteral">&#39;%&#39;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    i = (ch &amp; 0xF0) &gt;&gt; 4;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span> (i &gt;= 10) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[1] = (<span class="charliteral">&#39;A&#39;</span> - 10) + i;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[1] = <span class="charliteral">&#39;0&#39;</span> + <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    i = ch &amp; 0x0F;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (i &gt;= 10) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[2] = (<span class="charliteral">&#39;A&#39;</span> - 10) + i;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[2] = <span class="charliteral">&#39;0&#39;</span> + <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#else </span><span class="comment">/*APR_CHARSET_EBCDIC*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> ntoa[] = { <span class="stringliteral">&quot;0123456789ABCDEF&quot;</span> };</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a>[1];</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    ch &amp;= 0xFF;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    buf[0] = ch;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="group__APACHE__CORE__EBCDIC.html#gab64dbae9ff27269fd9e52c43cb142c16">ap_xlate_proto_to_ascii</a>(buf, 1);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[0] = <span class="charliteral">&#39;%&#39;</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[1] = ntoa[(buf[0] &gt;&gt; 4) &amp; 0x0F];</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[2] = ntoa[buf[0] &amp; 0x0F];</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    x[3] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*APR_CHARSET_EBCDIC*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__EBCDIC_html_gab64dbae9ff27269fd9e52c43cb142c16"><div class="ttname"><a href="group__APACHE__CORE__EBCDIC.html#gab64dbae9ff27269fd9e52c43cb142c16">ap_xlate_proto_to_ascii</a></div><div class="ttdeci">#define ap_xlate_proto_to_ascii(x, y)</div><div class="ttdef"><b>Definition:</b> util_ebcdic.h:80</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_ga17bc47ccf1b618ed082a4ff4f2cc7f7e"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#ga17bc47ccf1b618ed082a4ff4f2cc7f7e">buf</a></div><div class="ttdeci">int const char * buf</div><div class="ttdef"><b>Definition:</b> http_protocol.h:974</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1c03b3f7f69d399a646d84db4caaed65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>, j, ch;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="group__MOD__CACHE.html#gad4d47f76a849e2c428e3dd7f8c4eab1f">y</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">char</span> *allowed;  <span class="comment">/* characters which should not be encoded */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="group__APR__Util__Escaping.html#ga8934de0ca6ba44b94f1e61b77c1dda41">reserved</a>; <span class="comment">/* characters which much not be en/de-coded */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> * N.B. in addition to :@&amp;=, this allows &#39;;&#39; in an http path</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> * and &#39;?&#39; in an ftp path -- this may be revised</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"> * Also, it makes a &#39;+&#39; character in a search string reserved, as</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"> * it may be form-encoded. (Although RFC 1738 doesn&#39;t allow this -</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"> * it only permits ; / ? : @ = &amp; as reserved chars.)</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a> == <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a4a906f76cb6afc6083fed6de6f47b853">enc_path</a>) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        allowed = <span class="stringliteral">&quot;~$-_.+!*&#39;(),;:@&amp;=&quot;</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a> == <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629ae2aea57f1d25f433e0dcd16ff29df2ae">enc_search</a>) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        allowed = <span class="stringliteral">&quot;$-_.!*&#39;(),;:@&amp;=&quot;</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a> == <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb">enc_user</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        allowed = <span class="stringliteral">&quot;$-_.+!*&#39;(),;@&amp;=&quot;</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a> == <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a60960ded4f746303ffa6da62959e1071">enc_fpath</a>) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        allowed = <span class="stringliteral">&quot;$-_.+!*&#39;(),?:@&amp;=&quot;</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">else</span> {            <span class="comment">/* if (t == enc_parm) */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        allowed = <span class="stringliteral">&quot;$-_.+!*&#39;(),?/:@&amp;=&quot;</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a> == <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a4a906f76cb6afc6083fed6de6f47b853">enc_path</a>) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        reserved = <span class="stringliteral">&quot;/&quot;</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a> == <a class="code" href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629ae2aea57f1d25f433e0dcd16ff29df2ae">enc_search</a>) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        reserved = <span class="stringliteral">&quot;+&quot;</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        reserved = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    y = apr_palloc(<a class="code" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, 3 * <a class="code" href="group__APACHE__CORE__LOG.html#gab5a43233d60ef05c5b5bf5cba3d74468">len</a> + 1);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">for</span> (i = 0, j = 0; i &lt; <a class="code" href="group__APACHE__CORE__LOG.html#gab5a43233d60ef05c5b5bf5cba3d74468">len</a>; i++, j++) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">/* always handle &#39;/&#39; first */</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        ch = <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[<a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>];</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span> (strchr(reserved, ch)) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            y[j] = ch;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"> * decode it if not already done. do not decode reverse proxied URLs</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"> * unless specifically forced</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">if</span> ((forcedec || (<a class="code" href="group__MOD__PROXY.html#ga7adaa91224b884116382c7c9a5b86ff4">proxyreq</a> &amp;&amp; <a class="code" href="group__MOD__PROXY.html#ga7adaa91224b884116382c7c9a5b86ff4">proxyreq</a> != <a class="code" href="group__ProxyReq.html#gada87167650249c33339a5992ad199219">PROXYREQ_REVERSE</a>)) &amp;&amp; ch == <span class="charliteral">&#39;%&#39;</span>) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="group__apr__ctype.html#ga9d30f3c5d538c21c6d50565cda8654d0">apr_isxdigit</a>(<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[i + 1]) || !<a class="code" href="group__apr__ctype.html#ga9d30f3c5d538c21c6d50565cda8654d0">apr_isxdigit</a>(<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[i + 2])) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            ch = ap_proxy_hex2c(&amp;<a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>[i + 1]);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            i += 2;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span> (ch != 0 &amp;&amp; strchr(reserved, ch)) {  <span class="comment">/* keep it encoded */</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                ap_proxy_c2hex(ch, &amp;y[j]);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                j += 2;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/* recode it, if necessary */</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="group__apr__ctype.html#ga4fa78e6e7272dae64731768a17a2e003">apr_isalnum</a>(ch) &amp;&amp; !strchr(allowed, ch)) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            ap_proxy_c2hex(ch, &amp;y[j]);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            j += 2;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            y[j] = ch;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    y[j] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__MOD__CACHE.html#gad4d47f76a849e2c428e3dd7f8c4eab1f">y</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga5cd91701e5c167f2b1a38e70ab57817e"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a></div><div class="ttdeci">apr_proc_t const char const char *const const char *const apr_procattr_t apr_pool_t * p</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:109</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_gabfa74bb4f05f3b2de1a89160025e5400"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#gabfa74bb4f05f3b2de1a89160025e5400">t</a></div><div class="ttdeci">apr_time_t t</div><div class="ttdef"><b>Definition:</b> httpd.h:1426</div></div>
<div class="ttc" id="group__apr__ctype_html_ga4fa78e6e7272dae64731768a17a2e003"><div class="ttname"><a href="group__apr__ctype.html#ga4fa78e6e7272dae64731768a17a2e003">apr_isalnum</a></div><div class="ttdeci">#define apr_isalnum(c)</div><div class="ttdef"><b>Definition:</b> apr_lib.h:203</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gga4484631c7debf2a3a8d82d27273eb629a60960ded4f746303ffa6da62959e1071"><div class="ttname"><a href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a60960ded4f746303ffa6da62959e1071">enc_fpath</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:75</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gga4484631c7debf2a3a8d82d27273eb629ae2aea57f1d25f433e0dcd16ff29df2ae"><div class="ttname"><a href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629ae2aea57f1d25f433e0dcd16ff29df2ae">enc_search</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:75</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb"><div class="ttname"><a href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a1d653a7e4cd137d0274990adf74b9efb">enc_user</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:75</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab5a43233d60ef05c5b5bf5cba3d74468"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab5a43233d60ef05c5b5bf5cba3d74468">len</a></div><div class="ttdeci">const char apr_size_t len</div><div class="ttdef"><b>Definition:</b> ap_regex.h:140</div></div>
<div class="ttc" id="group__MOD__CACHE_html_gad4d47f76a849e2c428e3dd7f8c4eab1f"><div class="ttname"><a href="group__MOD__CACHE.html#gad4d47f76a849e2c428e3dd7f8c4eab1f">y</a></div><div class="ttdeci">char * y</div><div class="ttdef"><b>Definition:</b> mod_cache.h:135</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gga4484631c7debf2a3a8d82d27273eb629a4a906f76cb6afc6083fed6de6f47b853"><div class="ttname"><a href="group__MOD__PROXY.html#gga4484631c7debf2a3a8d82d27273eb629a4a906f76cb6afc6083fed6de6f47b853">enc_path</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:75</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga7adaa91224b884116382c7c9a5b86ff4"><div class="ttname"><a href="group__MOD__PROXY.html#ga7adaa91224b884116382c7c9a5b86ff4">proxyreq</a></div><div class="ttdeci">const char int enum enctype t int forcedec int proxyreq</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:620</div></div>
<div class="ttc" id="group__ProxyReq_html_gada87167650249c33339a5992ad199219"><div class="ttname"><a href="group__ProxyReq.html#gada87167650249c33339a5992ad199219">PROXYREQ_REVERSE</a></div><div class="ttdeci">#define PROXYREQ_REVERSE</div><div class="ttdef"><b>Definition:</b> httpd.h:1076</div></div>
<div class="ttc" id="group__APR__Util__Escaping_html_ga8934de0ca6ba44b94f1e61b77c1dda41"><div class="ttname"><a href="group__APR__Util__Escaping.html#ga8934de0ca6ba44b94f1e61b77c1dda41">reserved</a></div><div class="ttdeci">const char apr_ssize_t const char const char * reserved</div><div class="ttdef"><b>Definition:</b> apr_escape.h:107</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__ctype_html_ga9d30f3c5d538c21c6d50565cda8654d0"><div class="ttname"><a href="group__apr__ctype.html#ga9d30f3c5d538c21c6d50565cda8654d0">apr_isxdigit</a></div><div class="ttdeci">#define apr_isxdigit(c)</div><div class="ttdef"><b>Definition:</b> apr_lib.h:229</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_a1c03b3f7f69d399a646d84db4caaed65_cgraph.png" border="0" usemap="#proxy__util_8c_a1c03b3f7f69d399a646d84db4caaed65_cgraph" alt=""/></div>
<map name="proxy__util_8c_a1c03b3f7f69d399a646d84db4caaed65_cgraph" id="proxy__util_8c_a1c03b3f7f69d399a646d84db4caaed65_cgraph">
<area shape="rect" id="node2" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="193,5,333,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a994976c3ebd4838c2112ff7cbdb15547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;{</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="structproxy__req__conf.html">proxy_req_conf</a> *rconf;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keyword">struct </span><a class="code" href="structproxy__alias.html">proxy_alias</a> *<a class="code" href="group__MOD__PROXY.html#ga34404405efb1bb7f5b6dfd95e43d0181">ent</a>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>, l1, l2;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="pcregrep_8txt.html#a313eed54a0385c4d4c4c3ef54236123d">u</a>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">     * XXX FIXME: Make sure this handled the ambiguous case of the :&lt;PORT&gt;</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">     * after the hostname</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">     * XXX FIXME: Ensure the /uri component is a case sensitive match</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#a82ca03c6dcfcacbf7001ff85e462289d">proxyreq</a> != <a class="code" href="group__ProxyReq.html#gada87167650249c33339a5992ad199219">PROXYREQ_REVERSE</a>) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    l1 = strlen(<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;interpolate_env == 1) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        rconf = <a class="code" href="group__APACHE__CORE__CONFIG.html#ga1093a5908a384eacc929b028c79f2a02">ap_get_module_config</a>(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#a64ddc7e883db1473c43254766c0c0c07">request_config</a>, &amp;<a class="code" href="group__MOD__PROXY.html#ga27b03f85d7a77ee10f73b8df6f58aa0e">proxy_module</a>);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        ent = (<span class="keyword">struct </span><a class="code" href="structproxy__alias.html">proxy_alias</a> *)rconf-&gt;<a class="code" href="structproxy__req__conf.html#a2a7db0adc7b6be3b7f280028b6ac19bb">raliases</a>-&gt;<a class="code" href="structapr__array__header__t.html#af8462fa2a1ddf6406c66cd3dd441a269">elts</a>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        ent = (<span class="keyword">struct </span><a class="code" href="structproxy__alias.html">proxy_alias</a> *)<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;raliases-&gt;elts;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;raliases-&gt;nelts; i++) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="structproxy__server__conf.html">proxy_server_conf</a> *sconf = (<a class="code" href="structproxy__server__conf.html">proxy_server_conf</a> *)</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <a class="code" href="group__APACHE__CORE__CONFIG.html#ga1093a5908a384eacc929b028c79f2a02">ap_get_module_config</a>(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#a4a8059930ce9409cb885fdeef6921b7b">server</a>-&gt;module_config, &amp;<a class="code" href="group__MOD__PROXY.html#ga27b03f85d7a77ee10f73b8df6f58aa0e">proxy_module</a>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="structproxy__balancer.html">proxy_balancer</a> *<a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structproxy__alias.html#a62e250f96fd9f5756c85c3df047282c7">real</a> = ent[<a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>].<a class="code" href="structproxy__alias.html#a62e250f96fd9f5756c85c3df047282c7">real</a>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">         * First check if mapping against a balancer and see</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">         * if we have such a entity. If so, then we need to</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">         * find the particulars of the actual worker which may</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">         * or may not be the right one... basically, we need</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">         * to find which member actually handled this request.</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">if</span> (ap_proxy_valid_balancer_name((<span class="keywordtype">char</span> *)<a class="code" href="structproxy__alias.html#a62e250f96fd9f5756c85c3df047282c7">real</a>, 0) &amp;&amp;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            (balancer = ap_proxy_get_balancer(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, sconf, real, 1))) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="group__APACHE__CORE__PROTO.html#gad484edfd58b9127caa8f0f59b4004d09">n</a>, l3 = 0;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="structproxy__worker.html">proxy_worker</a> **<a class="code" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a> = (<a class="code" href="structproxy__worker.html">proxy_worker</a> **)balancer-&gt;<a class="code" href="structproxy__balancer.html#ae3b2618b5893903a9ddd19f77473efde">workers</a>-&gt;<a class="code" href="structapr__array__header__t.html#af8462fa2a1ddf6406c66cd3dd441a269">elts</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *urlpart = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a>(real + <span class="keyword">sizeof</span>(<a class="code" href="group__MOD__PROXY.html#gaaf7d23b31bf384aa5486370ad925880f">BALANCER_PREFIX</a>) - 1, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordflow">if</span> (urlpart) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                <span class="keywordflow">if</span> (!urlpart[1])</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                    urlpart = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                    l3 = strlen(urlpart);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <span class="comment">/* The balancer comparison is a bit trickier.  Given the context</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">             *   BalancerMember balancer://alias http://example.com/foo</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">             *   ProxyPassReverse /bash balancer://alias/bar</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">             * translate url http://example.com/foo/bar/that to /bash/that</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">for</span> (n = 0; n &lt; balancer-&gt;<a class="code" href="structproxy__balancer.html#ae3b2618b5893903a9ddd19f77473efde">workers</a>-&gt;<a class="code" href="structapr__array__header__t.html#ab11b88220885c5a0920a06ac85680055">nelts</a>; n++) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                l2 = strlen((*worker)-&gt;s-&gt;name);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                <span class="keywordflow">if</span> (urlpart) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                    <span class="comment">/* urlpart (l3) assuredly starts with its own &#39;/&#39; */</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                    <span class="keywordflow">if</span> ((*worker)-&gt;s-&gt;name[l2 - 1] == <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        --l2;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                    <span class="keywordflow">if</span> (l1 &gt;= l2 + l3</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                            &amp;&amp; <a class="code" href="apr__cpystrn_8c.html#a8a019f6d84acf570175ecfc8b3382170">strncasecmp</a>((*worker)-&gt;s-&gt;name, <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, l2) == 0</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                            &amp;&amp; strncmp(urlpart, <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a> + l2, l3) == 0) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                        u = apr_pstrcat(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, ent[i].<a class="code" href="structproxy__alias.html#ae4561a39b8d452bd0cb2e9616ac5a29a">fake</a>, &amp;<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>[l2 + l3],</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                                        <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                        <span class="keywordflow">return</span> ap_is_url(u) ? u : ap_construct_url(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, u, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (l1 &gt;= l2 &amp;&amp; <a class="code" href="apr__cpystrn_8c.html#a8a019f6d84acf570175ecfc8b3382170">strncasecmp</a>((*worker)-&gt;s-&gt;name, <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, l2) == 0) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    <span class="comment">/* edge case where fake is just &quot;/&quot;... avoid double slash */</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                    <span class="keywordflow">if</span> ((ent[i].<a class="code" href="structproxy__alias.html#ae4561a39b8d452bd0cb2e9616ac5a29a">fake</a>[0] == <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (ent[i].<a class="code" href="structproxy__alias.html#ae4561a39b8d452bd0cb2e9616ac5a29a">fake</a>[1] == 0) &amp;&amp; (<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>[l2] == <span class="charliteral">&#39;/&#39;</span>)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                        u = apr_pstrdup(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, &amp;<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>[l2]);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                        u = apr_pstrcat(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, ent[i].<a class="code" href="structproxy__alias.html#ae4561a39b8d452bd0cb2e9616ac5a29a">fake</a>, &amp;<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>[l2], <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    <span class="keywordflow">return</span> ap_is_url(u) ? u : ap_construct_url(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, u, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                worker++;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            }</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *part = <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            l2 = strlen(real);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="keywordflow">if</span> (real[0] == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                part = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga48f6ba4ea178ad3a334403ec7206d7a3">ap_strstr_c</a>(<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, <span class="stringliteral">&quot;://&quot;</span>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <span class="keywordflow">if</span> (part) {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    part = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a>(part+3, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    <span class="keywordflow">if</span> (part) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                        l1 = strlen(part);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                        part = <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                    part = <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <span class="keywordflow">if</span> (l2 &gt; 0 &amp;&amp; l1 &gt;= l2 &amp;&amp; <a class="code" href="apr__cpystrn_8c.html#a8a019f6d84acf570175ecfc8b3382170">strncasecmp</a>(real, part, l2) == 0) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                u = apr_pstrcat(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, ent[i].<a class="code" href="structproxy__alias.html#ae4561a39b8d452bd0cb2e9616ac5a29a">fake</a>, &amp;part[l2], <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordflow">return</span> ap_is_url(u) ? u : ap_construct_url(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>-&gt;<a class="code" href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">pool</a>, u, <a class="code" href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a>);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        }</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div><div class="ttc" id="structrequest__rec_html_a4a8059930ce9409cb885fdeef6921b7b"><div class="ttname"><a href="structrequest__rec.html#a4a8059930ce9409cb885fdeef6921b7b">request_rec::server</a></div><div class="ttdeci">uintptr_t server</div><div class="ttdef"><b>Definition:</b> ap.d:5</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaaf7d23b31bf384aa5486370ad925880f"><div class="ttname"><a href="group__MOD__PROXY.html#gaaf7d23b31bf384aa5486370ad925880f">BALANCER_PREFIX</a></div><div class="ttdeci">#define BALANCER_PREFIX</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:94</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gad62a732febc2b789c7a84e2fdb3c5aa8"><div class="ttname"><a href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a></div><div class="ttdeci">request_rec char *url proxy_worker * worker</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga48f6ba4ea178ad3a334403ec7206d7a3"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga48f6ba4ea178ad3a334403ec7206d7a3">ap_strstr_c</a></div><div class="ttdeci">#define ap_strstr_c(s, c)</div><div class="ttdef"><b>Definition:</b> httpd.h:2252</div></div>
<div class="ttc" id="apr__cpystrn_8c_html_a8a019f6d84acf570175ecfc8b3382170"><div class="ttname"><a href="apr__cpystrn_8c.html#a8a019f6d84acf570175ecfc8b3382170">strncasecmp</a></div><div class="ttdeci">int strncasecmp(const char *a, const char *b, size_t n)</div><div class="ttdef"><b>Definition:</b> apr_cpystrn.c:267</div></div>
<div class="ttc" id="structrequest__rec_html_aa0a0c16f9a9ab3901cdb3f3c9c9d83d0"><div class="ttname"><a href="structrequest__rec.html#aa0a0c16f9a9ab3901cdb3f3c9c9d83d0">request_rec::pool</a></div><div class="ttdeci">uintptr_t pool</div><div class="ttdef"><b>Definition:</b> ap.d:3</div></div>
<div class="ttc" id="structproxy__req__conf_html"><div class="ttname"><a href="structproxy__req__conf.html">proxy_req_conf</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:248</div></div>
<div class="ttc" id="structproxy__alias_html_a62e250f96fd9f5756c85c3df047282c7"><div class="ttname"><a href="structproxy__alias.html#a62e250f96fd9f5756c85c3df047282c7">proxy_alias::real</a></div><div class="ttdeci">const char * real</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:127</div></div>
<div class="ttc" id="pcregrep_8txt_html_a313eed54a0385c4d4c4c3ef54236123d"><div class="ttname"><a href="pcregrep_8txt.html#a313eed54a0385c4d4c4c3ef54236123d">u</a></div><div class="ttdeci">in some operating systems this gives an immediate end of file This option is a shorthand for setting the d option to recurse recursion no messages Suppress error messages about non existent or unreadable files Such files are quietly skipped the return code is even if matches were found in other files u</div><div class="ttdef"><b>Definition:</b> pcregrep.txt:585</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga6016b58857e4c0b11e39913bdf4ff910"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a></div><div class="ttdeci">#define ap_strchr_c(s, c)</div><div class="ttdef"><b>Definition:</b> httpd.h:2244</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="structapr__array__header__t_html_ab11b88220885c5a0920a06ac85680055"><div class="ttname"><a href="structapr__array__header__t.html#ab11b88220885c5a0920a06ac85680055">apr_array_header_t::nelts</a></div><div class="ttdeci">int nelts</div><div class="ttdef"><b>Definition:</b> apr_tables.h:68</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga27b03f85d7a77ee10f73b8df6f58aa0e"><div class="ttname"><a href="group__MOD__PROXY.html#ga27b03f85d7a77ee10f73b8df6f58aa0e">proxy_module</a></div><div class="ttdeci">module PROXY_DECLARE_DATA proxy_module</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_gad484edfd58b9127caa8f0f59b4004d09"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#gad484edfd58b9127caa8f0f59b4004d09">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> ap_regex.h:230</div></div>
<div class="ttc" id="structproxy__server__conf_html"><div class="ttname"><a href="structproxy__server__conf.html">proxy_server_conf</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:146</div></div>
<div class="ttc" id="structproxy__req__conf_html_a2a7db0adc7b6be3b7f280028b6ac19bb"><div class="ttname"><a href="structproxy__req__conf.html#a2a7db0adc7b6be3b7f280028b6ac19bb">proxy_req_conf::raliases</a></div><div class="ttdeci">apr_array_header_t * raliases</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:249</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1093a5908a384eacc929b028c79f2a02"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1093a5908a384eacc929b028c79f2a02">ap_get_module_config</a></div><div class="ttdeci">#define ap_get_module_config(v, m)</div><div class="ttdef"><b>Definition:</b> http_config.h:531</div></div>
<div class="ttc" id="structproxy__balancer_html"><div class="ttname"><a href="structproxy__balancer.html">proxy_balancer</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:500</div></div>
<div class="ttc" id="structproxy__alias_html"><div class="ttname"><a href="structproxy__alias.html">proxy_alias</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:126</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7be6dfd9155648f64d6e9abcd78c38cd"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a></div><div class="ttdeci">core_dir_config * conf</div><div class="ttdef"><b>Definition:</b> http_core.h:755</div></div>
<div class="ttc" id="structrequest__rec_html_a64ddc7e883db1473c43254766c0c0c07"><div class="ttname"><a href="structrequest__rec.html#a64ddc7e883db1473c43254766c0c0c07">request_rec::request_config</a></div><div class="ttdeci">uintptr_t request_config</div><div class="ttdef"><b>Definition:</b> ap.d:92</div></div>
<div class="ttc" id="structproxy__balancer_html_ae3b2618b5893903a9ddd19f77473efde"><div class="ttname"><a href="structproxy__balancer.html#ae3b2618b5893903a9ddd19f77473efde">proxy_balancer::workers</a></div><div class="ttdeci">apr_array_header_t * workers</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:501</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga7d902f564a33cf9c787a5670b026737b"><div class="ttname"><a href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a></div><div class="ttdeci">request_rec char *url proxy_worker proxy_balancer * balancer</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="structrequest__rec_html_a82ca03c6dcfcacbf7001ff85e462289d"><div class="ttname"><a href="structrequest__rec.html#a82ca03c6dcfcacbf7001ff85e462289d">request_rec::proxyreq</a></div><div class="ttdeci">int proxyreq</div><div class="ttdef"><b>Definition:</b> ap.d:11</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga34404405efb1bb7f5b6dfd95e43d0181"><div class="ttname"><a href="group__MOD__PROXY.html#ga34404405efb1bb7f5b6dfd95e43d0181">ent</a></div><div class="ttdeci">struct proxy_alias * ent</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1058</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga05d2db9f2dd75d18170f192bd1cc9b4e"><div class="ttname"><a href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a></div><div class="ttdeci">proxy_dir_conf const char * url</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:650</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga091cdd45984e865a888a4f8bb8fe107a"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga091cdd45984e865a888a4f8bb8fe107a">r</a></div><div class="ttdeci">request_rec * r</div><div class="ttdef"><b>Definition:</b> http_config.h:1123</div></div>
<div class="ttc" id="group__ProxyReq_html_gada87167650249c33339a5992ad199219"><div class="ttname"><a href="group__ProxyReq.html#gada87167650249c33339a5992ad199219">PROXYREQ_REVERSE</a></div><div class="ttdeci">#define PROXYREQ_REVERSE</div><div class="ttdef"><b>Definition:</b> httpd.h:1076</div></div>
<div class="ttc" id="structproxy__worker_html"><div class="ttname"><a href="structproxy__worker.html">proxy_worker</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:452</div></div>
<div class="ttc" id="structapr__array__header__t_html_af8462fa2a1ddf6406c66cd3dd441a269"><div class="ttname"><a href="structapr__array__header__t.html#af8462fa2a1ddf6406c66cd3dd441a269">apr_array_header_t::elts</a></div><div class="ttdeci">char * elts</div><div class="ttdef"><b>Definition:</b> apr_tables.h:72</div></div>
<div class="ttc" id="structproxy__alias_html_ae4561a39b8d452bd0cb2e9616ac5a29a"><div class="ttname"><a href="structproxy__alias.html#ae4561a39b8d452bd0cb2e9616ac5a29a">proxy_alias::fake</a></div><div class="ttdeci">const char * fake</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:128</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_a994976c3ebd4838c2112ff7cbdb15547_cgraph.png" border="0" usemap="#proxy__util_8c_a994976c3ebd4838c2112ff7cbdb15547_cgraph" alt=""/></div>
<map name="proxy__util_8c_a994976c3ebd4838c2112ff7cbdb15547_cgraph" id="proxy__util_8c_a994976c3ebd4838c2112ff7cbdb15547_cgraph">
<area shape="rect" id="node2" href="apr__cpystrn_8c.html#a8a019f6d84acf570175ecfc8b3382170" title="strncasecmp" alt="" coords="215,5,312,32"/>
<area shape="rect" id="node3" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="193,56,333,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a79099e6d2f71bcc882b6b64ecd59fe8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproxy__balancer.html">proxy_balancer</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;{</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="structproxy__balancer.html">proxy_balancer</a> *<a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a>, *<a class="code" href="group__APACHE__CORE__HTTPD.html#gaaf802cf1817bf45bcf1a5f266ef18bbd">uri</a> = apr_pstrdup(<a class="code" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="structproxy__hashes.html">proxy_hashes</a> <a class="code" href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    c = strchr(uri, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">if</span> (c == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> || c[1] != <span class="charliteral">&#39;/&#39;</span> || c[2] != <span class="charliteral">&#39;/&#39;</span> || c[3] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">/* remove path from uri */</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">if</span> ((c = strchr(c + 3, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    ap_str_tolower(uri);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    hash.<a class="code" href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">def</a> = <a class="code" href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0">ap_proxy_hashfunc</a>(uri, <a class="code" href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca1e5ad274df0e7ce6dd6f12686640f446">PROXY_HASHFUNC_DEFAULT</a>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    hash.<a class="code" href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">fnv</a> = <a class="code" href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0">ap_proxy_hashfunc</a>(uri, <a class="code" href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca4af344ec2e59dc7162cd4c20f85d8c19">PROXY_HASHFUNC_FNV</a>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    balancer = (<a class="code" href="structproxy__balancer.html">proxy_balancer</a> *)<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;balancers-&gt;elts;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    for (i = 0; i &lt; <a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;balancers-&gt;nelts; i++) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> (balancer-&gt;<a class="code" href="structproxy__balancer.html#afc9835916ce7788d2ef378d2483eaaed">hash</a>.<a class="code" href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">def</a> == hash.<a class="code" href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">def</a> &amp;&amp; balancer-&gt;<a class="code" href="structproxy__balancer.html#afc9835916ce7788d2ef378d2483eaaed">hash</a>.<a class="code" href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">fnv</a> == hash.<a class="code" href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">fnv</a>) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">if</span> (!care || !balancer-&gt;<a class="code" href="structproxy__balancer.html#a4604afa7d99a6cc1f411eb723f35e458">s</a>-&gt;<a class="code" href="structproxy__balancer__shared.html#ac2d10d9760ffd4d0bf8afcdea1f68a31">inactive</a>) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        balancer++;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;}</div><div class="ttc" id="structproxy__hashes_html_a229642e1523de07c9edb64b67174dd90"><div class="ttname"><a href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">proxy_hashes::fnv</a></div><div class="ttdeci">unsigned int fnv</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:379</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7cce37ef8558e46f408cb4d0f555605b"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> http_core.h:849</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga5cd91701e5c167f2b1a38e70ab57817e"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a></div><div class="ttdeci">apr_proc_t const char const char *const const char *const apr_procattr_t apr_pool_t * p</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:109</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_gaaf802cf1817bf45bcf1a5f266ef18bbd"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#gaaf802cf1817bf45bcf1a5f266ef18bbd">uri</a></div><div class="ttdeci">const char * uri</div><div class="ttdef"><b>Definition:</b> http_core.h:231</div></div>
<div class="ttc" id="structproxy__hashes_html"><div class="ttname"><a href="structproxy__hashes.html">proxy_hashes</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:377</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ggad04e421d409d5c4b460cd62694ada47ca4af344ec2e59dc7162cd4c20f85d8c19"><div class="ttname"><a href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca4af344ec2e59dc7162cd4c20f85d8c19">PROXY_HASHFUNC_FNV</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1014</div></div>
<div class="ttc" id="structproxy__balancer_html_a4604afa7d99a6cc1f411eb723f35e458"><div class="ttname"><a href="structproxy__balancer.html#a4604afa7d99a6cc1f411eb723f35e458">proxy_balancer::s</a></div><div class="ttdeci">proxy_balancer_shared * s</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:514</div></div>
<div class="ttc" id="structproxy__balancer_html"><div class="ttname"><a href="structproxy__balancer.html">proxy_balancer</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:500</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7be6dfd9155648f64d6e9abcd78c38cd"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a></div><div class="ttdeci">core_dir_config * conf</div><div class="ttdef"><b>Definition:</b> http_core.h:755</div></div>
<div class="ttc" id="apr__random_8c_html_a1961406c0af51085f634defe740cbf52"><div class="ttname"><a href="apr__random_8c.html#a1961406c0af51085f634defe740cbf52">hash</a></div><div class="ttdeci">#define hash(h, r, b, n)</div><div class="ttdef"><b>Definition:</b> apr_random.c:51</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ggad04e421d409d5c4b460cd62694ada47ca1e5ad274df0e7ce6dd6f12686640f446"><div class="ttname"><a href="group__MOD__PROXY.html#ggad04e421d409d5c4b460cd62694ada47ca1e5ad274df0e7ce6dd6f12686640f446">PROXY_HASHFUNC_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:1014</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga7d902f564a33cf9c787a5670b026737b"><div class="ttname"><a href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a></div><div class="ttdeci">request_rec char *url proxy_worker proxy_balancer * balancer</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga05d2db9f2dd75d18170f192bd1cc9b4e"><div class="ttname"><a href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a></div><div class="ttdeci">proxy_dir_conf const char * url</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:650</div></div>
<div class="ttc" id="structproxy__balancer__shared_html_ac2d10d9760ffd4d0bf8afcdea1f68a31"><div class="ttname"><a href="structproxy__balancer__shared.html#ac2d10d9760ffd4d0bf8afcdea1f68a31">proxy_balancer_shared::inactive</a></div><div class="ttdeci">unsigned int inactive</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:493</div></div>
<div class="ttc" id="proxy__util_8c_html_a894a8f960939418e2122523aa81b5dd0"><div class="ttname"><a href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0">ap_proxy_hashfunc</a></div><div class="ttdeci">ap_proxy_hashfunc(const char *str, proxy_hash_t method)</div><div class="ttdef"><b>Definition:</b> proxy_util.c:3121</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="structproxy__hashes_html_acb9f2008dcbfc80b3545d2df2219284a"><div class="ttname"><a href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">proxy_hashes::def</a></div><div class="ttdeci">unsigned int def</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:378</div></div>
<div class="ttc" id="structproxy__balancer_html_afc9835916ce7788d2ef378d2483eaaed"><div class="ttname"><a href="structproxy__balancer.html#afc9835916ce7788d2ef378d2483eaaed">proxy_balancer::hash</a></div><div class="ttdeci">proxy_hashes hash</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:507</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_a79099e6d2f71bcc882b6b64ecd59fe8c_cgraph.png" border="0" usemap="#proxy__util_8c_a79099e6d2f71bcc882b6b64ecd59fe8c_cgraph" alt=""/></div>
<map name="proxy__util_8c_a79099e6d2f71bcc882b6b64ecd59fe8c_cgraph" id="proxy__util_8c_a79099e6d2f71bcc882b6b64ecd59fe8c_cgraph">
<area shape="rect" id="node2" href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0" title="ap_proxy_hashfunc" alt="" coords="193,5,328,32"/>
<area shape="rect" id="node3" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="376,5,516,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a43277b2a3035c3bb12ff3588a58a01e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproxy__worker.html">proxy_worker</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;{</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="structproxy__worker.html">proxy_worker</a> *<a class="code" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a>;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <a class="code" href="structproxy__worker.html">proxy_worker</a> *max_worker = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordtype">int</span> max_match = 0;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordtype">int</span> url_length;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordtype">int</span> min_match;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordtype">int</span> worker_name_length;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordtype">char</span> *url_copy;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a> = ap_proxy_de_socketfy(<a class="code" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    c = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a>(<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">if</span> (c == <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> || c[1] != <span class="charliteral">&#39;/&#39;</span> || c[2] != <span class="charliteral">&#39;/&#39;</span> || c[3] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    url_length = strlen(<a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    url_copy = apr_pstrmemdup(<a class="code" href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a>, <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>, url_length);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">     * We need to find the start of the path and</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="comment">     * therefore we know the length of the scheme://hostname/</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment">     * part to we can force-lowercase everything up to</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">     * the start of the path.</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    c = <a class="code" href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a>(c+3, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordtype">char</span> *pathstart;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        pathstart = url_copy + (c - <a class="code" href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a>);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        *pathstart = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        ap_str_tolower(url_copy);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        min_match = strlen(url_copy);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        *pathstart = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    }</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        ap_str_tolower(url_copy);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        min_match = strlen(url_copy);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">     * Do a &quot;longest match&quot; on the worker name to find the worker that</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">     * fits best to the URL, but keep in mind that we must have at least</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">     * a minimum matching of length min_match such that</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">     * scheme://hostname[:port] matches between worker and url.</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>) {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <a class="code" href="structproxy__worker.html">proxy_worker</a> **workers = (<a class="code" href="structproxy__worker.html">proxy_worker</a> **)<a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>-&gt;workers-&gt;elts;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        for (i = 0; i &lt; <a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>-&gt;workers-&gt;nelts; i++, workers++) {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;            worker = *workers;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;            <span class="keywordflow">if</span> ( ((worker_name_length = strlen(worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#a5cc7bac10e746c287d81e723ddd5bad4">name</a>)) &lt;= url_length)</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                &amp;&amp; (worker_name_length &gt;= min_match)</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                &amp;&amp; (worker_name_length &gt; max_match)</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                &amp;&amp; (strncmp(url_copy, worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#a5cc7bac10e746c287d81e723ddd5bad4">name</a>, worker_name_length) == 0) ) {</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                max_worker = <a class="code" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                max_match = worker_name_length;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            }</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        }</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        worker = (<a class="code" href="structproxy__worker.html">proxy_worker</a> *)<a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;workers-&gt;elts;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        for (i = 0; i &lt; <a class="code" href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a>-&gt;workers-&gt;nelts; i++, worker++) {</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <span class="keywordflow">if</span> ( ((worker_name_length = strlen(worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#a5cc7bac10e746c287d81e723ddd5bad4">name</a>)) &lt;= url_length)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                &amp;&amp; (worker_name_length &gt;= min_match)</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                &amp;&amp; (worker_name_length &gt; max_match)</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                &amp;&amp; (strncmp(url_copy, worker-&gt;<a class="code" href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">s</a>-&gt;<a class="code" href="structproxy__worker__shared.html#a5cc7bac10e746c287d81e723ddd5bad4">name</a>, worker_name_length) == 0) ) {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                max_worker = <a class="code" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                max_match = worker_name_length;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            }</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">return</span> max_worker;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div><div class="ttc" id="structproxy__worker_html_abeaebad014908a4f108fba27313187aa"><div class="ttname"><a href="structproxy__worker.html#abeaebad014908a4f108fba27313187aa">proxy_worker::s</a></div><div class="ttdeci">proxy_worker_shared * s</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:456</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7cce37ef8558e46f408cb4d0f555605b"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> http_core.h:849</div></div>
<div class="ttc" id="group__APACHE__CORE__MPM_html_ga5cd91701e5c167f2b1a38e70ab57817e"><div class="ttname"><a href="group__APACHE__CORE__MPM.html#ga5cd91701e5c167f2b1a38e70ab57817e">p</a></div><div class="ttdeci">apr_proc_t const char const char *const const char *const apr_procattr_t apr_pool_t * p</div><div class="ttdef"><b>Definition:</b> ap_mpm.h:109</div></div>
<div class="ttc" id="structproxy__worker__shared_html_a5cc7bac10e746c287d81e723ddd5bad4"><div class="ttname"><a href="structproxy__worker__shared.html#a5cc7bac10e746c287d81e723ddd5bad4">proxy_worker_shared::name</a></div><div class="ttdeci">char name[PROXY_WORKER_MAX_NAME_SIZE]</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:385</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gad62a732febc2b789c7a84e2fdb3c5aa8"><div class="ttname"><a href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a></div><div class="ttdeci">request_rec char *url proxy_worker * worker</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga6016b58857e4c0b11e39913bdf4ff910"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga6016b58857e4c0b11e39913bdf4ff910">ap_strchr_c</a></div><div class="ttdeci">#define ap_strchr_c(s, c)</div><div class="ttdef"><b>Definition:</b> httpd.h:2244</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7be6dfd9155648f64d6e9abcd78c38cd"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7be6dfd9155648f64d6e9abcd78c38cd">conf</a></div><div class="ttdeci">core_dir_config * conf</div><div class="ttdef"><b>Definition:</b> http_core.h:755</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga7d902f564a33cf9c787a5670b026737b"><div class="ttname"><a href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a></div><div class="ttdeci">request_rec char *url proxy_worker proxy_balancer * balancer</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga05d2db9f2dd75d18170f192bd1cc9b4e"><div class="ttname"><a href="group__MOD__PROXY.html#ga05d2db9f2dd75d18170f192bd1cc9b4e">url</a></div><div class="ttdeci">proxy_dir_conf const char * url</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:650</div></div>
<div class="ttc" id="structproxy__worker_html"><div class="ttname"><a href="structproxy__worker.html">proxy_worker</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:452</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_a43277b2a3035c3bb12ff3588a58a01e4_cgraph.png" border="0" usemap="#proxy__util_8c_a43277b2a3035c3bb12ff3588a58a01e4_cgraph" alt=""/></div>
<map name="proxy__util_8c_a43277b2a3035c3bb12ff3588a58a01e4_cgraph" id="proxy__util_8c_a43277b2a3035c3bb12ff3588a58a01e4_cgraph">
<area shape="rect" id="node2" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="411,39,551,66"/>
<area shape="rect" id="node3" href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a" title="strcasecmp" alt="" coords="229,39,319,66"/>
<area shape="rect" id="node4" href="proxy__util_8c.html#a894a8f960939418e2122523aa81b5dd0" title="ap_proxy_hashfunc" alt="" coords="207,90,341,116"/>
<area shape="rect" id="node5" href="util__expr__parse_8c.html#af07d89f5ceaea0c7c8252cc41fd75f37" title="free" alt="" coords="252,140,296,167"/>
<area shape="rect" id="node6" href="unix_2sockopt_8c.html#a08f5e505fa611005f56c12783269ffa9" title="apr_socket_opt_set" alt="" coords="206,191,342,218"/>
<area shape="rect" id="node7" href="unix_2sockopt_8c.html#a945bdbe807ec5635d65a6fd9ddb78c29" title="apr_socket_timeout_set" alt="" coords="193,242,355,268"/>
<area shape="rect" id="node8" href="unix_2sockets_8c.html#a512882c9979c2b9cad7cbc2508516d65" title="apr_socket_bind" alt="" coords="215,292,333,319"/>
<area shape="rect" id="node9" href="unix_2sockets_8c.html#a8e58bd8112ed2ce5004487918cd9275e" title="apr_socket_connect" alt="" coords="205,343,343,370"/>
<area shape="rect" id="node12" href="unix_2sockets_8c.html#a88779f243ce19a2563544aee81894e6d" title="apr_socket_close" alt="" coords="212,394,336,420"/>
<area shape="rect" id="node10" href="group__apr__support.html#ga324ffc66a6d42df2325ce999001c1c36" title="apr_wait_for_io_or\l_timeout" alt="" coords="417,306,545,348"/>
<area shape="rect" id="node11" href="os2_2apr__arch__networkio_8h.html#a3ed59de41b95fa5b9ef695a2bccbdc3a" title="apr_sockaddr_vars_set" alt="" coords="403,372,560,399"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1beab2264f256cb4c71d873d7ca3ff26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproxy__worker__shared.html">proxy_worker_shared</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;{</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <a class="code" href="structproxy__worker__shared.html">proxy_worker_shared</a> *<a class="code" href="group__MOD__PROXY.html#gaa4ebe098e8dd67428afcaa1f9bca45bd">shm</a>;</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>, <a class="code" href="group__apr__thread__proc.html#ga915cb5b6b271c146b5198c51cff16f9a">limit</a>;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    limit = <a class="code" href="mod__proxy__balancer_8c.html#a609a617b3142b92c83376840773f50bf">storage</a>-&gt;<a class="code" href="structap__slotmem__provider__t.html#ab6ef040311cb142505aaa57793e1c23b">num_slots</a>(<a class="code" href="group__MOD__PROXY.html#ga272f60c5e6cce1bfc743cd17b683d5a3">slot</a>);</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__apr__thread__proc.html#ga915cb5b6b271c146b5198c51cff16f9a">limit</a>; i++) {</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mod__proxy__balancer_8c.html#a609a617b3142b92c83376840773f50bf">storage</a>-&gt;<a class="code" href="structap__slotmem__provider__t.html#a66fb8f1a2e6ca94d6bed2e222bfb145d">dptr</a>(<a class="code" href="group__MOD__PROXY.html#ga272f60c5e6cce1bfc743cd17b683d5a3">slot</a>, i, (<span class="keywordtype">void</span> *)&amp;shm) != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        }</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a>-&gt;s-&gt;hash.def == shm-&gt;<a class="code" href="structproxy__worker__shared.html#aade40e2000e67a4cd33f6015336da649">hash</a>.<a class="code" href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">def</a>) &amp;&amp;</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;            (<a class="code" href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a>-&gt;s-&gt;hash.fnv == shm-&gt;<a class="code" href="structproxy__worker__shared.html#aade40e2000e67a4cd33f6015336da649">hash</a>.<a class="code" href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">fnv</a>)) {</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;            *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga186c402ad812159f19596ff36a42bf20">index</a> = <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__MOD__PROXY.html#gaa4ebe098e8dd67428afcaa1f9bca45bd">shm</a>;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        }</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    }</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;}</div><div class="ttc" id="structproxy__hashes_html_a229642e1523de07c9edb64b67174dd90"><div class="ttname"><a href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">proxy_hashes::fnv</a></div><div class="ttdeci">unsigned int fnv</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:379</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaa4ebe098e8dd67428afcaa1f9bca45bd"><div class="ttname"><a href="group__MOD__PROXY.html#gaa4ebe098e8dd67428afcaa1f9bca45bd">shm</a></div><div class="ttdeci">apr_shm_t ** shm</div><div class="ttdef"><b>Definition:</b> scoreboard.h:173</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gad62a732febc2b789c7a84e2fdb3c5aa8"><div class="ttname"><a href="group__MOD__PROXY.html#gad62a732febc2b789c7a84e2fdb3c5aa8">worker</a></div><div class="ttdeci">request_rec char *url proxy_worker * worker</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="structproxy__worker__shared_html_aade40e2000e67a4cd33f6015336da649"><div class="ttname"><a href="structproxy__worker__shared.html#aade40e2000e67a4cd33f6015336da649">proxy_worker_shared::hash</a></div><div class="ttdeci">proxy_hashes hash</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:401</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga272f60c5e6cce1bfc743cd17b683d5a3"><div class="ttname"><a href="group__MOD__PROXY.html#ga272f60c5e6cce1bfc743cd17b683d5a3">slot</a></div><div class="ttdeci">ap_slotmem_instance_t * slot</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:813</div></div>
<div class="ttc" id="structproxy__worker__shared_html"><div class="ttname"><a href="structproxy__worker__shared.html">proxy_worker_shared</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:384</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga186c402ad812159f19596ff36a42bf20"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga186c402ad812159f19596ff36a42bf20">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> http_config.h:545</div></div>
<div class="ttc" id="structap__slotmem__provider__t_html_ab6ef040311cb142505aaa57793e1c23b"><div class="ttname"><a href="structap__slotmem__provider__t.html#ab6ef040311cb142505aaa57793e1c23b">ap_slotmem_provider_t::num_slots</a></div><div class="ttdeci">unsigned int(* num_slots)(ap_slotmem_instance_t *s)</div><div class="ttdef"><b>Definition:</b> ap_slotmem.h:154</div></div>
<div class="ttc" id="mod__proxy__balancer_8c_html_a609a617b3142b92c83376840773f50bf"><div class="ttname"><a href="mod__proxy__balancer_8c.html#a609a617b3142b92c83376840773f50bf">storage</a></div><div class="ttdeci">ap_slotmem_provider_t * storage</div><div class="ttdef"><b>Definition:</b> mod_proxy_balancer.c:28</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="structproxy__hashes_html_acb9f2008dcbfc80b3545d2df2219284a"><div class="ttname"><a href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">proxy_hashes::def</a></div><div class="ttdeci">unsigned int def</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:378</div></div>
<div class="ttc" id="group__apr__thread__proc_html_ga915cb5b6b271c146b5198c51cff16f9a"><div class="ttname"><a href="group__apr__thread__proc.html#ga915cb5b6b271c146b5198c51cff16f9a">limit</a></div><div class="ttdeci">apr_int32_t struct rlimit * limit</div><div class="ttdef"><b>Definition:</b> apr_thread_proc.h:530</div></div>
<div class="ttc" id="structap__slotmem__provider__t_html_a66fb8f1a2e6ca94d6bed2e222bfb145d"><div class="ttname"><a href="structap__slotmem__provider__t.html#a66fb8f1a2e6ca94d6bed2e222bfb145d">ap_slotmem_provider_t::dptr</a></div><div class="ttdeci">apr_status_t(* dptr)(ap_slotmem_instance_t *s, unsigned int item_id, void **mem)</div><div class="ttdef"><b>Definition:</b> ap_slotmem.h:130</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f3cbd83fd7551835af4b1e11ded1e4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproxy__balancer__shared.html">proxy_balancer_shared</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;{</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <a class="code" href="structproxy__balancer__shared.html">proxy_balancer_shared</a> *<a class="code" href="group__MOD__PROXY.html#gaa4ebe098e8dd67428afcaa1f9bca45bd">shm</a>;</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>, <a class="code" href="group__apr__thread__proc.html#ga915cb5b6b271c146b5198c51cff16f9a">limit</a>;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    limit = <a class="code" href="mod__proxy__balancer_8c.html#a609a617b3142b92c83376840773f50bf">storage</a>-&gt;<a class="code" href="structap__slotmem__provider__t.html#ab6ef040311cb142505aaa57793e1c23b">num_slots</a>(<a class="code" href="group__MOD__PROXY.html#ga272f60c5e6cce1bfc743cd17b683d5a3">slot</a>);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__apr__thread__proc.html#ga915cb5b6b271c146b5198c51cff16f9a">limit</a>; i++) {</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mod__proxy__balancer_8c.html#a609a617b3142b92c83376840773f50bf">storage</a>-&gt;<a class="code" href="structap__slotmem__provider__t.html#a66fb8f1a2e6ca94d6bed2e222bfb145d">dptr</a>(<a class="code" href="group__MOD__PROXY.html#ga272f60c5e6cce1bfc743cd17b683d5a3">slot</a>, i, (<span class="keywordtype">void</span> *)&amp;shm) != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        }</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>-&gt;s-&gt;hash.def == shm-&gt;<a class="code" href="structproxy__balancer__shared.html#a126cbb1a44416a4d95987edec23c480e">hash</a>.<a class="code" href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">def</a>) &amp;&amp;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;            (<a class="code" href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a>-&gt;s-&gt;hash.fnv == shm-&gt;<a class="code" href="structproxy__balancer__shared.html#a126cbb1a44416a4d95987edec23c480e">hash</a>.<a class="code" href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">fnv</a>)) {</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga186c402ad812159f19596ff36a42bf20">index</a> = <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__MOD__PROXY.html#gaa4ebe098e8dd67428afcaa1f9bca45bd">shm</a>;</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        }</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    }</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;}</div><div class="ttc" id="structproxy__hashes_html_a229642e1523de07c9edb64b67174dd90"><div class="ttname"><a href="structproxy__hashes.html#a229642e1523de07c9edb64b67174dd90">proxy_hashes::fnv</a></div><div class="ttdeci">unsigned int fnv</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:379</div></div>
<div class="ttc" id="group__MOD__PROXY_html_gaa4ebe098e8dd67428afcaa1f9bca45bd"><div class="ttname"><a href="group__MOD__PROXY.html#gaa4ebe098e8dd67428afcaa1f9bca45bd">shm</a></div><div class="ttdeci">apr_shm_t ** shm</div><div class="ttdef"><b>Definition:</b> scoreboard.h:173</div></div>
<div class="ttc" id="structproxy__balancer__shared_html"><div class="ttname"><a href="structproxy__balancer__shared.html">proxy_balancer_shared</a></div><div class="ttdef"><b>Definition:</b> mod_proxy.h:473</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga272f60c5e6cce1bfc743cd17b683d5a3"><div class="ttname"><a href="group__MOD__PROXY.html#ga272f60c5e6cce1bfc743cd17b683d5a3">slot</a></div><div class="ttdeci">ap_slotmem_instance_t * slot</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:813</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga186c402ad812159f19596ff36a42bf20"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga186c402ad812159f19596ff36a42bf20">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> http_config.h:545</div></div>
<div class="ttc" id="structap__slotmem__provider__t_html_ab6ef040311cb142505aaa57793e1c23b"><div class="ttname"><a href="structap__slotmem__provider__t.html#ab6ef040311cb142505aaa57793e1c23b">ap_slotmem_provider_t::num_slots</a></div><div class="ttdeci">unsigned int(* num_slots)(ap_slotmem_instance_t *s)</div><div class="ttdef"><b>Definition:</b> ap_slotmem.h:154</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga7d902f564a33cf9c787a5670b026737b"><div class="ttname"><a href="group__MOD__PROXY.html#ga7d902f564a33cf9c787a5670b026737b">balancer</a></div><div class="ttdeci">request_rec char *url proxy_worker proxy_balancer * balancer</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:602</div></div>
<div class="ttc" id="mod__proxy__balancer_8c_html_a609a617b3142b92c83376840773f50bf"><div class="ttname"><a href="mod__proxy__balancer_8c.html#a609a617b3142b92c83376840773f50bf">storage</a></div><div class="ttdeci">ap_slotmem_provider_t * storage</div><div class="ttdef"><b>Definition:</b> mod_proxy_balancer.c:28</div></div>
<div class="ttc" id="structproxy__balancer__shared_html_a126cbb1a44416a4d95987edec23c480e"><div class="ttname"><a href="structproxy__balancer__shared.html#a126cbb1a44416a4d95987edec23c480e">proxy_balancer_shared::hash</a></div><div class="ttdeci">proxy_hashes hash</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:486</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="structproxy__hashes_html_acb9f2008dcbfc80b3545d2df2219284a"><div class="ttname"><a href="structproxy__hashes.html#acb9f2008dcbfc80b3545d2df2219284a">proxy_hashes::def</a></div><div class="ttdeci">unsigned int def</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:378</div></div>
<div class="ttc" id="group__apr__thread__proc_html_ga915cb5b6b271c146b5198c51cff16f9a"><div class="ttname"><a href="group__apr__thread__proc.html#ga915cb5b6b271c146b5198c51cff16f9a">limit</a></div><div class="ttdeci">apr_int32_t struct rlimit * limit</div><div class="ttdef"><b>Definition:</b> apr_thread_proc.h:530</div></div>
<div class="ttc" id="structap__slotmem__provider__t_html_a66fb8f1a2e6ca94d6bed2e222bfb145d"><div class="ttname"><a href="structap__slotmem__provider__t.html#a66fb8f1a2e6ca94d6bed2e222bfb145d">ap_slotmem_provider_t::dptr</a></div><div class="ttdeci">apr_status_t(* dptr)(ap_slotmem_instance_t *s, unsigned int item_id, void **mem)</div><div class="ttdef"><b>Definition:</b> ap_slotmem.h:130</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3c014c25a18c7216833afbd3e8498c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROXY_DECLARE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;{</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    <span class="keywordflow">if</span> (scheme) {</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;        <a class="code" href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a> <a class="code" href="group__APACHE__CORE__VHOST.html#ga225c76c246a5cc263c5a2628eb99353e">port</a>;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        <span class="keywordflow">if</span> ((port = apr_uri_port_of_scheme(scheme)) != 0) {</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__VHOST.html#ga225c76c246a5cc263c5a2628eb99353e">port</a>;</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;            <a class="code" href="structproxy__schemes__t.html">proxy_schemes_t</a> *pscheme;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            <span class="keywordflow">for</span> (pscheme = pschemes; pscheme-&gt;<a class="code" href="structproxy__schemes__t.html#aabe6c40adfd8db23b65d36d687b76f2b">name</a> != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>; ++pscheme) {</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a">strcasecmp</a>(scheme, pscheme-&gt;<a class="code" href="structproxy__schemes__t.html#aabe6c40adfd8db23b65d36d687b76f2b">name</a>) == 0) {</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;                    <span class="keywordflow">return</span> pscheme-&gt;<a class="code" href="structproxy__schemes__t.html#a5a8c3d9a6458dd3417ab69fa82e7eea1">default_port</a>;</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;                }</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;            }</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;        }</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    }</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__VHOST_html_ga225c76c246a5cc263c5a2628eb99353e"><div class="ttname"><a href="group__APACHE__CORE__VHOST.html#ga225c76c246a5cc263c5a2628eb99353e">port</a></div><div class="ttdeci">const char apr_port_t port</div><div class="ttdef"><b>Definition:</b> http_vhost.h:111</div></div>
<div class="ttc" id="structproxy__schemes__t_html_a5a8c3d9a6458dd3417ab69fa82e7eea1"><div class="ttname"><a href="structproxy__schemes__t.html#a5a8c3d9a6458dd3417ab69fa82e7eea1">proxy_schemes_t::default_port</a></div><div class="ttdeci">apr_port_t default_port</div><div class="ttdef"><b>Definition:</b> proxy_util.c:3699</div></div>
<div class="ttc" id="structproxy__schemes__t_html_aabe6c40adfd8db23b65d36d687b76f2b"><div class="ttname"><a href="structproxy__schemes__t.html#aabe6c40adfd8db23b65d36d687b76f2b">proxy_schemes_t::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> proxy_util.c:3698</div></div>
<div class="ttc" id="apr__cpystrn_8c_html_a4a00fc29b96a953fed9e0107a9c4548a"><div class="ttname"><a href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a">strcasecmp</a></div><div class="ttdeci">int strcasecmp(const char *a, const char *b)</div><div class="ttdef"><b>Definition:</b> apr_cpystrn.c:248</div></div>
<div class="ttc" id="group__apr__network__io_html_gaa670a71960f6eb4fe0d0de2a1e7aba03"><div class="ttname"><a href="group__apr__network__io.html#gaa670a71960f6eb4fe0d0de2a1e7aba03">apr_port_t</a></div><div class="ttdeci">apr_uint16_t apr_port_t</div><div class="ttdef"><b>Definition:</b> apr_network_io.h:257</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="structproxy__schemes__t_html"><div class="ttname"><a href="structproxy__schemes__t.html">proxy_schemes_t</a></div><div class="ttdef"><b>Definition:</b> proxy_util.c:3697</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="proxy__util_8c_ac3c014c25a18c7216833afbd3e8498c5_cgraph.png" border="0" usemap="#proxy__util_8c_ac3c014c25a18c7216833afbd3e8498c5_cgraph" alt=""/></div>
<map name="proxy__util_8c_ac3c014c25a18c7216833afbd3e8498c5_cgraph" id="proxy__util_8c_ac3c014c25a18c7216833afbd3e8498c5_cgraph">
<area shape="rect" id="node2" href="apr__cpystrn_8c.html#a4a00fc29b96a953fed9e0107a9c4548a" title="strcasecmp" alt="" coords="218,5,309,32"/>
<area shape="rect" id="node3" href="proxy__util_8c.html#ab8b131b879f2da190de9e2d128450143" title="PROXY_DECLARE" alt="" coords="193,56,333,83"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a93b0fcd14bd51e35876e3ed7ec589d85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structapr__global__mutex__t.html">apr_global_mutex_t</a>* proxy_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
