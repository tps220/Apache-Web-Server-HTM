<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: /usr/local/src/github/Codebase/httpd-2.4.29/modules/http2/h2_mplx.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2379abaa7725ab34fabdf9daa508e09.html">Codebase</a></li><li class="navelem"><a class="el" href="dir_db9466b59d24a02e023577068efc5d5d.html">httpd-2.4.29</a></li><li class="navelem"><a class="el" href="dir_04adba3a211bbed5210563c01b5ac160.html">modules</a></li><li class="navelem"><a class="el" href="dir_88c6c0aa9499ad45299b9aa3183f9c31.html">http2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">h2_mplx.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__atomic_8h_source.html">apr_atomic.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__thread__mutex_8h_source.html">apr_thread_mutex.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__thread__cond_8h_source.html">apr_thread_cond.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__strings_8h_source.html">apr_strings.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="apr__time_8h_source.html">apr_time.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="httpd_8h_source.html">httpd.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="http__core_8h_source.html">http_core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="http__log_8h_source.html">http_log.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mpm__common_8h_source.html">mpm_common.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="mod__http2_8h_source.html">mod_http2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2_8h_source.html">h2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__private_8h_source.html">h2_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__bucket__beam_8h_source.html">h2_bucket_beam.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__config_8h_source.html">h2_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__conn_8h_source.html">h2_conn.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__ctx_8h_source.html">h2_ctx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__h2_8h_source.html">h2_h2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__mplx_8h_source.html">h2_mplx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__ngn__shed_8h_source.html">h2_ngn_shed.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__request_8h_source.html">h2_request.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__stream_8h_source.html">h2_stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__session_8h_source.html">h2_session.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__task_8h_source.html">h2_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__workers_8h_source.html">h2_workers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h2__util_8h_source.html">h2_util.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for h2_mplx.c:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c__incl.png" border="0" usemap="#_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2http2_2h2__mplx_8c" alt=""/></div>
<map name="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2http2_2h2__mplx_8c" id="_2usr_2local_2src_2github_2Codebase_2httpd-2_84_829_2modules_2http2_2h2__mplx_8c">
<area shape="rect" id="node5" href="apr__atomic_8h.html" title="APR Atomic Operations. " alt="" coords="2018,483,2115,509"/>
<area shape="rect" id="node12" href="apr__thread__mutex_8h.html" title="APR Thread Mutex Routines. " alt="" coords="318,483,455,509"/>
<area shape="rect" id="node13" href="apr__thread__cond_8h.html" title="APR Condition Variable Routines. " alt="" coords="282,408,411,435"/>
<area shape="rect" id="node14" href="apr__time_8h.html" title="APR Time Library. " alt="" coords="531,483,613,509"/>
<area shape="rect" id="node15" href="apr__strings_8h.html" title="APR Strings library. " alt="" coords="789,483,886,509"/>
<area shape="rect" id="node17" href="httpd_8h.html" title="HTTP Daemon routines. " alt="" coords="1266,333,1329,360"/>
<area shape="rect" id="node29" href="http__core_8h.html" title="CORE HTTP Daemon. " alt="" coords="1006,184,1093,211"/>
<area shape="rect" id="node33" href="http__log_8h.html" title="Apache Logging library. " alt="" coords="538,333,617,360"/>
<area shape="rect" id="node34" href="mpm__common_8h.html" title="Multi&#45;Processing Modules functions. " alt="" coords="693,259,811,285"/>
<area shape="rect" id="node35" href="mod__http2_8h.html" title="mod_http2.h" alt="" coords="891,109,986,136"/>
<area shape="rect" id="node36" href="h2_8h.html" title="h2.h" alt="" coords="2110,184,2157,211"/>
<area shape="rect" id="node37" href="h2__private_8h.html" title="h2_private.h" alt="" coords="384,184,477,211"/>
<area shape="rect" id="node38" href="h2__bucket__beam_8h.html" title="h2_bucket_beam.h" alt="" coords="1165,109,1297,136"/>
<area shape="rect" id="node39" href="h2__config_8h.html" title="h2_config.h" alt="" coords="1321,109,1410,136"/>
<area shape="rect" id="node40" href="h2__conn_8h.html" title="h2_conn.h" alt="" coords="1435,109,1517,136"/>
<area shape="rect" id="node41" href="h2__ctx_8h.html" title="h2_ctx.h" alt="" coords="1541,109,1613,136"/>
<area shape="rect" id="node42" href="h2__h2_8h.html" title="h2_h2.h" alt="" coords="1638,109,1706,136"/>
<area shape="rect" id="node43" href="h2__mplx_8h.html" title="h2_mplx.h" alt="" coords="1731,109,1813,136"/>
<area shape="rect" id="node44" href="h2__ngn__shed_8h.html" title="h2_ngn_shed.h" alt="" coords="1838,109,1949,136"/>
<area shape="rect" id="node45" href="h2__request_8h.html" title="h2_request.h" alt="" coords="2025,109,2122,136"/>
<area shape="rect" id="node46" href="h2__stream_8h.html" title="h2_stream.h" alt="" coords="2146,109,2241,136"/>
<area shape="rect" id="node47" href="h2__session_8h.html" title="h2_session.h" alt="" coords="2265,109,2364,136"/>
<area shape="rect" id="node48" href="h2__task_8h.html" title="h2_task.h" alt="" coords="1010,109,1089,136"/>
<area shape="rect" id="node49" href="h2__workers_8h.html" title="h2_workers.h" alt="" coords="2389,109,2489,136"/>
<area shape="rect" id="node50" href="h2__util_8h.html" title="h2_util.h" alt="" coords="2513,109,2583,136"/>
<area shape="rect" id="node6" href="apr_8h.html" title="APR Platform Definitions. " alt="" coords="1383,781,1433,808"/>
<area shape="rect" id="node7" href="apr__pools_8h.html" title="APR memory allocation. " alt="" coords="1121,557,1210,584"/>
<area shape="rect" id="node8" href="apr__errno_8h.html" title="APR Error Codes. " alt="" coords="979,707,1066,733"/>
<area shape="rect" id="node9" href="apr__general_8h.html" title="APR Miscellaneous library routines. " alt="" coords="1325,632,1425,659"/>
<area shape="rect" id="node10" href="apr__want_8h.html" title="APR Standard Headers Support. " alt="" coords="1162,632,1249,659"/>
<area shape="rect" id="node18" href="ap__config_8h.html" title="Symbol export macros and hook functions. " alt="" coords="741,408,830,435"/>
<area shape="rect" id="node20" href="ap__mmn_8h.html" title="Module Magic Number. " alt="" coords="1057,408,1140,435"/>
<area shape="rect" id="node21" href="ap__release_8h.html" title="Version Release defines. " alt="" coords="1164,408,1260,435"/>
<area shape="rect" id="node22" href="apr__tables_8h.html" title="APR Table library. " alt="" coords="1084,483,1177,509"/>
<area shape="rect" id="node23" href="apr__network__io_8h.html" title="APR Network library. " alt="" coords="1405,483,1526,509"/>
<area shape="rect" id="node24" href="apr__buckets_8h.html" title="APR&#45;UTIL Buckets/Bucket Brigades. " alt="" coords="1636,408,1740,435"/>
<area shape="rect" id="node25" href="apr__poll_8h.html" title="APR Poll interface. " alt="" coords="1335,408,1414,435"/>
<area shape="rect" id="node26" href="apr__thread__proc_8h.html" title="APR Thread and Process Library. " alt="" coords="638,483,765,509"/>
<area shape="rect" id="node27" href="ap__regex_8h.html" title="Apache Regex defines. " alt="" coords="1754,557,1841,584"/>
<area shape="rect" id="node28" href="apr__uri_8h.html" title="APR&#45;UTIL URI Routines. " alt="" coords="1439,408,1511,435"/>
<area shape="rect" id="node30" href="apr__hash_8h.html" title="APR Hash Tables. " alt="" coords="693,333,779,360"/>
<area shape="rect" id="node31" href="apr__optional_8h.html" title="APR&#45;UTIL registration of functions exported by modules. " alt="" coords="1363,259,1466,285"/>
<area shape="rect" id="node32" href="util__filter_8h.html" title="Apache filter library. " alt="" coords="1256,259,1339,285"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstream__iter__ctx.html">stream_iter_ctx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstream__iter__ctx__t.html">stream_iter_ctx_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structngn__update__ctx.html">ngn_update_ctx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af1bd611015d1776f89fe6f7915424b62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:af1bd611015d1776f89fe6f7915424b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add9eec40d5aff64281c31a3184572421"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)&#160;&#160;&#160;apr_thread_mutex_unlock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td></tr>
<tr class="separator:add9eec40d5aff64281c31a3184572421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221ab3905c5c20cbcca9f97b2c8d1375"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a>(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)&#160;&#160;&#160;apr_thread_mutex_lock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td></tr>
<tr class="separator:a221ab3905c5c20cbcca9f97b2c8d1375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda7fad220a33abd794953cdfc01bd11"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#afda7fad220a33abd794953cdfc01bd11">H2_MPLX_ENTER_MAYBE</a>(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>,  <a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)&#160;&#160;&#160;<a class="el" href="util__expr__scan_8c.html#aa1a71763978093648dffef60b56f7447">if</a> (<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>) apr_thread_mutex_lock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td></tr>
<tr class="separator:afda7fad220a33abd794953cdfc01bd11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebffaae9bde240066712b06c981bd3aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#aebffaae9bde240066712b06c981bd3aa">H2_MPLX_LEAVE_MAYBE</a>(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>,  <a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)&#160;&#160;&#160;<a class="el" href="util__expr__scan_8c.html#aa1a71763978093648dffef60b56f7447">if</a> (<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>) apr_thread_mutex_unlock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td></tr>
<tr class="separator:aebffaae9bde240066712b06c981bd3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad78ddeaf1a56fdeda73ed9153cb4843d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#ad78ddeaf1a56fdeda73ed9153cb4843d">h2_mplx_child_init</a> (<a class="el" href="structapr__pool__t.html">apr_pool_t</a> *<a class="el" href="group__APR__XLATE.html#gabb3cd978f04c73d0b763c391e9bfde73">pool</a>, <a class="el" href="structserver__rec.html">server_rec</a> *<a class="el" href="pcretest_8txt.html#a062597889ba244b72877454b1d3adecf">s</a>)</td></tr>
<tr class="separator:ad78ddeaf1a56fdeda73ed9153cb4843d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8b1c4267fc2d42fa947027daf88763"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#ace8b1c4267fc2d42fa947027daf88763">h2_mplx_create</a> (<a class="el" href="structconn__rec.html">conn_rec</a> *<a class="el" href="pcregrep_8txt.html#aef720ae5f62fa015619d00171d917416">c</a>, <a class="el" href="structapr__pool__t.html">apr_pool_t</a> *<a class="el" href="group__apr__pools.html#ga3eb8c52002440da9a3eed11d54d08dd5">parent</a>, const <a class="el" href="structh2__config.html">h2_config</a> *<a class="el" href="group__MOD__PROXY.html#ga4d7edd451c4bb8ed9ce9012e5dea2b14">conf</a>, <a class="el" href="structh2__workers.html">h2_workers</a> *workers)</td></tr>
<tr class="separator:ace8b1c4267fc2d42fa947027daf88763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a644accb999ad3ddab0449ab90e0d725a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a644accb999ad3ddab0449ab90e0d725a">h2_mplx_shutdown</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:a644accb999ad3ddab0449ab90e0d725a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a543f7d3e75d3b0c6772d96d8386294"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a0a543f7d3e75d3b0c6772d96d8386294">h2_mplx_stream_do</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="h2__mplx_8h.html#a0c76c78abf689f5aa1982515e4972c82">h2_mplx_stream_cb</a> *cb, <a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *<a class="el" href="group__APR__Util__Bucket__Brigades.html#ga0525238c5b09cb4ac5067ddec654d09c">ctx</a>)</td></tr>
<tr class="separator:a0a543f7d3e75d3b0c6772d96d8386294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a828b53a81da824e193da25fe9e0accf4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a828b53a81da824e193da25fe9e0accf4">h2_mplx_release_and_join</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="structapr__thread__cond__t.html">apr_thread_cond_t</a> *wait)</td></tr>
<tr class="separator:a828b53a81da824e193da25fe9e0accf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44229c7f9b1de82631ee8f088c000b45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a44229c7f9b1de82631ee8f088c000b45">h2_mplx_stream_cleanup</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="structh2__stream.html">h2_stream</a> *stream)</td></tr>
<tr class="separator:a44229c7f9b1de82631ee8f088c000b45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a337cdba57b715ca7ae976124d5824bfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a337cdba57b715ca7ae976124d5824bfb">h2_mplx_stream_get</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> id)</td></tr>
<tr class="separator:a337cdba57b715ca7ae976124d5824bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e3be4f65fcb2bafc3062f2ea2b0d9d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a6e3be4f65fcb2bafc3062f2ea2b0d9d4">h2_mplx_out_open</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> stream_id, <a class="el" href="structh2__bucket__beam.html">h2_bucket_beam</a> *beam)</td></tr>
<tr class="separator:a6e3be4f65fcb2bafc3062f2ea2b0d9d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dafa503789e4dd6aaa7bdb906905721"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a0dafa503789e4dd6aaa7bdb906905721">h2_mplx_out_trywait</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="group__apr__time.html#gaae2129185a395cc393f76fabf4f43e47">apr_interval_time_t</a> <a class="el" href="group__APR__Util__RL.html#ga9ceb71d3d9fcd18962d16e49bef6153a">timeout</a>, <a class="el" href="structapr__thread__cond__t.html">apr_thread_cond_t</a> *iowait)</td></tr>
<tr class="separator:a0dafa503789e4dd6aaa7bdb906905721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ec6ad53087e52140a02bf7fa4b238e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#ae4ec6ad53087e52140a02bf7fa4b238e">h2_mplx_reprioritize</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="h2_8h.html#a1d0879769f04428fde846585fb8c29d7">h2_stream_pri_cmp</a> *<a class="el" href="group__apr__atomic.html#ga337f72af8c74a9110f79160df3bba5e8">cmp</a>, <a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *<a class="el" href="group__APR__Util__Bucket__Brigades.html#ga0525238c5b09cb4ac5067ddec654d09c">ctx</a>)</td></tr>
<tr class="separator:ae4ec6ad53087e52140a02bf7fa4b238e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c35070795724a55320fd46e77f1ec2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#af6c35070795724a55320fd46e77f1ec2">h2_mplx_process</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, struct <a class="el" href="structh2__stream.html">h2_stream</a> *stream, <a class="el" href="h2_8h.html#a1d0879769f04428fde846585fb8c29d7">h2_stream_pri_cmp</a> *<a class="el" href="group__apr__atomic.html#ga337f72af8c74a9110f79160df3bba5e8">cmp</a>, <a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *<a class="el" href="group__APR__Util__Bucket__Brigades.html#ga0525238c5b09cb4ac5067ddec654d09c">ctx</a>)</td></tr>
<tr class="separator:af6c35070795724a55320fd46e77f1ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac899d0d7155cb6cfb733e3af5542e805"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#ac899d0d7155cb6cfb733e3af5542e805">h2_mplx_pop_task</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="structh2__task.html">h2_task</a> **ptask)</td></tr>
<tr class="separator:ac899d0d7155cb6cfb733e3af5542e805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38878adbc3c68dc97bd5fc9b6334f593"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a38878adbc3c68dc97bd5fc9b6334f593">h2_mplx_task_done</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="structh2__task.html">h2_task</a> *task, <a class="el" href="structh2__task.html">h2_task</a> **ptask)</td></tr>
<tr class="separator:a38878adbc3c68dc97bd5fc9b6334f593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab27042bae0b8cddb8049073f3153d28f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#ab27042bae0b8cddb8049073f3153d28f">h2_mplx_idle</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:ab27042bae0b8cddb8049073f3153d28f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96adfac6a3d6cb5e42814407f068f095"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a96adfac6a3d6cb5e42814407f068f095">h2_mplx_req_engine_push</a> (const char *ngn_type, <a class="el" href="structrequest__rec.html">request_rec</a> *<a class="el" href="pcregrep_8txt.html#a2e9e9438b26c0bb4425367a7e4f75eb3">r</a>, <a class="el" href="mod__http2_8h.html#a4536960c5d69af7cdea3dfd82129242e">http2_req_engine_init</a> *einit)</td></tr>
<tr class="separator:a96adfac6a3d6cb5e42814407f068f095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04be83a28df8fbd218cf5964794fade"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#af04be83a28df8fbd218cf5964794fade">h2_mplx_req_engine_pull</a> (<a class="el" href="structh2__req__engine.html">h2_req_engine</a> *ngn, <a class="el" href="group__APR__Util__Bucket__Brigades.html#ga756973fb6392bd1026c3d96b4519776d">apr_read_type_e</a> <a class="el" href="pcretest_8txt.html#aebde0006968e3c574305c604c927277a">block</a>, <a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> capacity, <a class="el" href="structrequest__rec.html">request_rec</a> **pr)</td></tr>
<tr class="separator:af04be83a28df8fbd218cf5964794fade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a365c5c53bd163b22f065959b3291878b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a365c5c53bd163b22f065959b3291878b">h2_mplx_req_engine_done</a> (<a class="el" href="structh2__req__engine.html">h2_req_engine</a> *ngn, <a class="el" href="structconn__rec.html">conn_rec</a> *r_conn, <a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="el" href="group__apr__thread__proc.html#gae7daf19056dc6ab36e8f2e72e911646d">status</a>)</td></tr>
<tr class="separator:a365c5c53bd163b22f065959b3291878b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d6f882e69d5d35224da320108ae06f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#aa9d6f882e69d5d35224da320108ae06f">h2_mplx_has_master_events</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:aa9d6f882e69d5d35224da320108ae06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca0bf0869ce6462a66107c950eb70f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a3ca0bf0869ce6462a66107c950eb70f2">h2_mplx_dispatch_master_events</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="h2__mplx_8h.html#afc62f0d8bac7a8ca7bf5e28d843c4d7e">stream_ev_callback</a> *on_resume, <a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *on_ctx)</td></tr>
<tr class="separator:a3ca0bf0869ce6462a66107c950eb70f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2635034633242ada1070ca3e4fab411f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#a2635034633242ada1070ca3e4fab411f">h2_mplx_keep_active</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, <a class="el" href="structh2__stream.html">h2_stream</a> *stream)</td></tr>
<tr class="separator:a2635034633242ada1070ca3e4fab411f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e8ad2194fde52c7dd7fe5007a5ac77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h2__mplx_8c.html#aa4e8ad2194fde52c7dd7fe5007a5ac77">h2_mplx_awaits_data</a> (<a class="el" href="structh2__mplx.html">h2_mplx</a> *<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>)</td></tr>
<tr class="separator:aa4e8ad2194fde52c7dd7fe5007a5ac77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af1bd611015d1776f89fe6f7915424b62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define H2_MPLX_ENTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> rv; <span class="keywordflow">if</span> ((rv = apr_thread_mutex_lock(<a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a>-&gt;lock)) != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {\</div><div class="line">        return rv;\</div><div class="line">    } } <span class="keywordflow">while</span>(0)</div><div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1891337ee8668593918a50b9e04be486"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a></div><div class="ttdeci">const module * m</div><div class="ttdef"><b>Definition:</b> http_config.h:516</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a221ab3905c5c20cbcca9f97b2c8d1375"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define H2_MPLX_ENTER_ALWAYS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a></td><td>)</td>
          <td>&#160;&#160;&#160;apr_thread_mutex_lock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afda7fad220a33abd794953cdfc01bd11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define H2_MPLX_ENTER_MAYBE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="util__expr__scan_8c.html#aa1a71763978093648dffef60b56f7447">if</a> (<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>) apr_thread_mutex_lock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="add9eec40d5aff64281c31a3184572421"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define H2_MPLX_LEAVE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a></td><td>)</td>
          <td>&#160;&#160;&#160;apr_thread_mutex_unlock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aebffaae9bde240066712b06c981bd3aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define H2_MPLX_LEAVE_MAYBE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="util__expr__scan_8c.html#aa1a71763978093648dffef60b56f7447">if</a> (<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>) apr_thread_mutex_unlock(<a class="el" href="pcretest_8txt.html#a26e37b17bbd51407fc4163ca327065e4">m</a>-&gt;<a class="el" href="group__APR__Util__RMM.html#ga0353fe7d0bd33c38d9a7a57a73b6407e">lock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa4e8ad2194fde52c7dd7fe5007a5ac77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> h2_mplx_awaits_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;{</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordtype">int</span> waiting = 1;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;     </div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a>(m);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828">h2_ihash_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>)) {</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        waiting = 0;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">tasks_active</a> &amp;&amp; !<a class="code" href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a">h2_ififo_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">readyq</a>)</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;             &amp;&amp; <a class="code" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>)) {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        waiting = 0;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">return</span> waiting;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div><div class="ttc" id="h2__util_8c_html_adca33ffb38ae50b885c3c95080068828"><div class="ttname"><a href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828">h2_ihash_empty</a></div><div class="ttdeci">int h2_ihash_empty(h2_ihash_t *ih)</div><div class="ttdef"><b>Definition:</b> h2_util.c:251</div></div>
<div class="ttc" id="structh2__mplx_html_a8d141fea6adae0c6fc8dcf262fd39803"><div class="ttname"><a href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">h2_mplx::tasks_active</a></div><div class="ttdeci">int tasks_active</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:78</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="h2__util_8c_html_ac040248d0e3bc8b33dcb27d96ad0147a"><div class="ttname"><a href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a">h2_ififo_count</a></div><div class="ttdeci">int h2_ififo_count(h2_ififo *fifo)</div><div class="ttdef"><b>Definition:</b> h2_util.c:960</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="structh2__mplx_html_a7823ff33cb1c7beb23a4ef658402789d"><div class="ttname"><a href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">h2_mplx::readyq</a></div><div class="ttdeci">struct h2_ififo * readyq</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:72</div></div>
<div class="ttc" id="h2__mplx_8c_html_a221ab3905c5c20cbcca9f97b2c8d1375"><div class="ttname"><a href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a></div><div class="ttdeci">#define H2_MPLX_ENTER_ALWAYS(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:71</div></div>
<div class="ttc" id="h2__util_8c_html_a580b0aba0478fc88d0d930222978d5e7"><div class="ttname"><a href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a></div><div class="ttdeci">int h2_iq_empty(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:358</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_cgraph.png" border="0" usemap="#h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_cgraph" alt=""/></div>
<map name="h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_cgraph" id="h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828" title="h2_ihash_empty" alt="" coords="201,5,319,32"/>
<area shape="rect" id="node3" href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a" title="h2_ififo_count" alt="" coords="209,56,311,83"/>
<area shape="rect" id="node4" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="212,107,308,133"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_icgraph.png" border="0" usemap="#h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_icgraph" alt=""/></div>
<map name="h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_icgraph" id="h2__mplx_8c_aa4e8ad2194fde52c7dd7fe5007a5ac77_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="201,29,348,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad78ddeaf1a56fdeda73ed9153cb4843d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_child_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapr__pool__t.html">apr_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structserver__rec.html">server_rec</a> *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div><div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ad78ddeaf1a56fdeda73ed9153cb4843d_icgraph.png" border="0" usemap="#h2__mplx_8c_ad78ddeaf1a56fdeda73ed9153cb4843d_icgraph" alt=""/></div>
<map name="h2__mplx_8c_ad78ddeaf1a56fdeda73ed9153cb4843d_icgraph" id="h2__mplx_8c_ad78ddeaf1a56fdeda73ed9153cb4843d_icgraph">
<area shape="rect" id="node2" href="h2__conn_8h.html#af8d2bc363df1fa1966633e06a98def37" title="h2_conn_child_init" alt="" coords="183,5,312,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace8b1c4267fc2d42fa947027daf88763"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structh2__mplx.html">h2_mplx</a>* h2_mplx_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structconn__rec.html">conn_rec</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapr__pool__t.html">apr_pool_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structh2__config.html">h2_config</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structh2__workers.html">h2_workers</a> *&#160;</td>
          <td class="paramname"><em>workers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A <a class="el" href="structh2__mplx.html">h2_mplx</a> needs to be thread-safe <em>and</em> if will be called by the <a class="el" href="structh2__session.html">h2_session</a> thread <em>and</em> the h2_worker threads. Therefore:</p><ul>
<li>calls are protected by a mutex lock, m-&gt;lock</li>
<li>the pool needs its own allocator, since <a class="el" href="structapr__allocator__t.html">apr_allocator_t</a> are not re-entrant. The separate allocator works without a separate lock since we already protect <a class="el" href="structh2__mplx.html">h2_mplx</a> itself. Since HTTP/2 connections can be expected to live longer than their HTTP/1 cousins, the separate allocator seems to work better than protecting a shared <a class="el" href="structh2__session.html">h2_session</a> one with an own lock. </li>
</ul>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a> = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="structapr__allocator__t.html">apr_allocator_t</a> *<a class="code" href="group__apr__pools.html#ga3d4c7b6ba19a3b46b6fecdee3d867787">allocator</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="structapr__thread__mutex__t.html">apr_thread_mutex_t</a> *<a class="code" href="group__apr__thread__cond.html#ga9b5d997217b2ae4c884c535811cb6e35">mutex</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="structh2__mplx.html">h2_mplx</a> *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="structh2__ctx.html">h2_ctx</a> *<a class="code" href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a> = <a class="code" href="h2__ctx_8c.html#ac4ce31e55232ccac0c4fb72064dad547">h2_ctx_get</a>(c, 0);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="group__APACHE__CORE__DAEMON.html#gace52c7d9cc135b00b6e686236c0095a7">ap_assert</a>(conf);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    m = <a class="code" href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a>(parent, <span class="keyword">sizeof</span>(<a class="code" href="structh2__mplx.html">h2_mplx</a>));</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (m) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a> = c-&gt;<a class="code" href="structconn__rec.html#af90d018c333fca6f3ef0f29375b86dc1">id</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a> = <a class="code" href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a2bd28f0172c08c7d46f740b869b14734">s</a> = (ctx? <a class="code" href="h2__ctx_8c.html#ab94fd99e5442be67ac36ae1174e9424f">h2_ctx_server_get</a>(ctx) : <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structh2__mplx.html#a2bd28f0172c08c7d46f740b869b14734">s</a>) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            m-&gt;<a class="code" href="structh2__mplx.html#a2bd28f0172c08c7d46f740b869b14734">s</a> = c-&gt;<a class="code" href="structconn__rec.html#a1e199eb6e4e1617e94dd03b9cfaa83c8">base_server</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">/* We create a pool with its own allocator to be used for</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">         * processing slave connections. This is the only way to have the</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">         * processing independant of its parent pool in the sense that it</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">         * can work in another thread. Also, the new allocator needs its own</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">         * mutex to synchronize sub-pools.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        status = apr_allocator_create(&amp;allocator);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        apr_allocator_max_free_set(allocator, <a class="code" href="group__APACHE__MPM.html#gaaa1d8831ca72b470dd2b7d43fa8393d6">ap_max_mem_free</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        apr_pool_create_ex(&amp;m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, parent, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>, allocator);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            apr_allocator_destroy(allocator);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        apr_pool_tag(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, <span class="stringliteral">&quot;h2_mplx&quot;</span>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        apr_allocator_owner_set(allocator, m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        status = apr_thread_mutex_create(&amp;mutex, <a class="code" href="group__apr__thread__mutex.html#ga579050872f9aff06e773b084264f7d06">APR_THREAD_MUTEX_DEFAULT</a>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                         m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            apr_pool_destroy(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        apr_allocator_mutex_set(allocator, mutex);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        status = apr_thread_mutex_create(&amp;m-&gt;<a class="code" href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">lock</a>, <a class="code" href="group__apr__thread__mutex.html#ga579050872f9aff06e773b084264f7d06">APR_THREAD_MUTEX_DEFAULT</a>,</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                         m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            apr_pool_destroy(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        </div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        status = apr_thread_cond_create(&amp;m-&gt;<a class="code" href="structh2__mplx.html#adc48b71917bc52918f064f8c3e10ab00">task_thawed</a>, m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            apr_pool_destroy(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    </div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a3e9f0fd33b0cb44fe3b4ca711c6ca2a3">max_streams</a> = <a class="code" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04">h2_config_geti</a>(conf, <a class="code" href="h2__config_8h.html#a9ba9f682e77cb3b39514432a14fce8d4ae0a60d764c909338e3dd7ee9ec114b68">H2_CONF_MAX_STREAMS</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a74f412262a99a27e77aa6a20819657da">stream_max_mem</a> = <a class="code" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04">h2_config_geti</a>(conf, <a class="code" href="h2__config_8h.html#a9ba9f682e77cb3b39514432a14fce8d4adee7ae8373891554947d0e1c34ca70bb">H2_CONF_STREAM_MAX_MEM</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a> = <a class="code" href="h2__util_8c.html#a32c09d1fac1f02a6afc09fc57af5af2f">h2_ihash_create</a>(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, offsetof(<a class="code" href="structh2__stream.html">h2_stream</a>,<span class="keywordtype">id</span>));</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a710245c8890d56e7466a854024f1c4b1">sredo</a> = <a class="code" href="h2__util_8c.html#a32c09d1fac1f02a6afc09fc57af5af2f">h2_ihash_create</a>(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, offsetof(<a class="code" href="structh2__stream.html">h2_stream</a>,<span class="keywordtype">id</span>));</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a> = <a class="code" href="h2__util_8c.html#a32c09d1fac1f02a6afc09fc57af5af2f">h2_ihash_create</a>(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, offsetof(<a class="code" href="structh2__stream.html">h2_stream</a>,<span class="keywordtype">id</span>));</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#aaaab5fe587246e7bf275a317503b067c">spurge</a> = <a class="code" href="h2__util_8c.html#a32c09d1fac1f02a6afc09fc57af5af2f">h2_ihash_create</a>(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, offsetof(<a class="code" href="structh2__stream.html">h2_stream</a>,<span class="keywordtype">id</span>));</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a> = <a class="code" href="h2__util_8c.html#ad6e1bc99310cfb346ba839f3cab33f7b">h2_iq_create</a>(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, m-&gt;<a class="code" href="structh2__mplx.html#a3e9f0fd33b0cb44fe3b4ca711c6ca2a3">max_streams</a>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        status = <a class="code" href="h2__util_8c.html#ad395a9b4a439d3688cb94abda4b60259">h2_ififo_set_create</a>(&amp;m-&gt;<a class="code" href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">readyq</a>, m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, m-&gt;<a class="code" href="structh2__mplx.html#a3e9f0fd33b0cb44fe3b4ca711c6ca2a3">max_streams</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (status != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            apr_pool_destroy(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a58bdd2bc9b732ee0c064c39fc9b75743">workers</a> = workers;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a9a65d22a182d79545427243afc7e4814">max_active</a> = workers-&gt;<a class="code" href="structh2__workers.html#aadaf15dfdd211a908c16876dbe624f83">max_workers</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> = 6; <span class="comment">/* the original h1 max parallel connections */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a8c5573ba81170d83bab259abc5342cdf">last_limit_change</a> = m-&gt;<a class="code" href="structh2__mplx.html#ac8a88f82563b2e86182ce73cb4af9464">last_idle_block</a> = apr_time_now();</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a39a9d7f3ca84f97a0b0f7fa8b0fd37f7">limit_change_interval</a> = <a class="code" href="event_8c.html#a05ce6646c8ba980c843903fc77e9f8a0">apr_time_from_msec</a>(100);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#ace4f37166fa7916c2a75300688a63e51">spare_slaves</a> = apr_array_make(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, 10, <span class="keyword">sizeof</span>(<a class="code" href="structconn__rec.html">conn_rec</a>*));</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        </div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a> = <a class="code" href="h2__ngn__shed_8c.html#a6c8ff3ddf1ac3ddbac59ae65095e2b73">h2_ngn_shed_create</a>(m-&gt;<a class="code" href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">pool</a>, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>, m-&gt;<a class="code" href="structh2__mplx.html#a3e9f0fd33b0cb44fe3b4ca711c6ca2a3">max_streams</a>, </div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                         m-&gt;<a class="code" href="structh2__mplx.html#a74f412262a99a27e77aa6a20819657da">stream_max_mem</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="h2__ngn__shed_8c.html#a88e30717d953a00815fa1acd60a5a74f">h2_ngn_shed_set_ctx</a>(m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a> , m);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="ttc" id="structh2__mplx_html_aaaab5fe587246e7bf275a317503b067c"><div class="ttname"><a href="structh2__mplx.html#aaaab5fe587246e7bf275a317503b067c">h2_mplx::spurge</a></div><div class="ttdeci">struct h2_ihash_t * spurge</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:69</div></div>
<div class="ttc" id="structh2__mplx_html_ace4f37166fa7916c2a75300688a63e51"><div class="ttname"><a href="structh2__mplx.html#ace4f37166fa7916c2a75300688a63e51">h2_mplx::spare_slaves</a></div><div class="ttdeci">apr_array_header_t * spare_slaves</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:94</div></div>
<div class="ttc" id="event_8c_html_a05ce6646c8ba980c843903fc77e9f8a0"><div class="ttname"><a href="event_8c.html#a05ce6646c8ba980c843903fc77e9f8a0">apr_time_from_msec</a></div><div class="ttdeci">#define apr_time_from_msec(x)</div><div class="ttdef"><b>Definition:</b> event.c:146</div></div>
<div class="ttc" id="structh2__mplx_html"><div class="ttname"><a href="structh2__mplx.html">h2_mplx</a></div><div class="ttdef"><b>Definition:</b> h2_mplx.h:56</div></div>
<div class="ttc" id="structapr__thread__mutex__t_html"><div class="ttname"><a href="structapr__thread__mutex__t.html">apr_thread_mutex_t</a></div><div class="ttdef"><b>Definition:</b> apr_arch_thread_mutex.h:28</div></div>
<div class="ttc" id="structh2__mplx_html_ac8a88f82563b2e86182ce73cb4af9464"><div class="ttname"><a href="structh2__mplx.html#ac8a88f82563b2e86182ce73cb4af9464">h2_mplx::last_idle_block</a></div><div class="ttdeci">apr_time_t last_idle_block</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:81</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga7cce37ef8558e46f408cb4d0f555605b"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga7cce37ef8558e46f408cb4d0f555605b">c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> http_core.h:849</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="group__apr__thread__mutex_html_ga579050872f9aff06e773b084264f7d06"><div class="ttname"><a href="group__apr__thread__mutex.html#ga579050872f9aff06e773b084264f7d06">APR_THREAD_MUTEX_DEFAULT</a></div><div class="ttdeci">#define APR_THREAD_MUTEX_DEFAULT</div><div class="ttdef"><b>Definition:</b> apr_thread_mutex.h:43</div></div>
<div class="ttc" id="structh2__mplx_html_a74f412262a99a27e77aa6a20819657da"><div class="ttname"><a href="structh2__mplx.html#a74f412262a99a27e77aa6a20819657da">h2_mplx::stream_max_mem</a></div><div class="ttdeci">apr_size_t stream_max_mem</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:91</div></div>
<div class="ttc" id="structconn__rec_html_a1e199eb6e4e1617e94dd03b9cfaa83c8"><div class="ttname"><a href="structconn__rec.html#a1e199eb6e4e1617e94dd03b9cfaa83c8">conn_rec::base_server</a></div><div class="ttdeci">server_rec * base_server</div><div class="ttdef"><b>Definition:</b> httpd.h:1097</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="h2__util_8c_html_ad6e1bc99310cfb346ba839f3cab33f7b"><div class="ttname"><a href="h2__util_8c.html#ad6e1bc99310cfb346ba839f3cab33f7b">h2_iq_create</a></div><div class="ttdeci">h2_iqueue * h2_iq_create(apr_pool_t *pool, int capacity)</div><div class="ttdef"><b>Definition:</b> h2_util.c:347</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1891337ee8668593918a50b9e04be486"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a></div><div class="ttdeci">const module * m</div><div class="ttdef"><b>Definition:</b> http_config.h:516</div></div>
<div class="ttc" id="structh2__mplx_html_a710245c8890d56e7466a854024f1c4b1"><div class="ttname"><a href="structh2__mplx.html#a710245c8890d56e7466a854024f1c4b1">h2_mplx::sredo</a></div><div class="ttdeci">struct h2_ihash_t * sredo</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:67</div></div>
<div class="ttc" id="structh2__mplx_html_a58bdd2bc9b732ee0c064c39fc9b75743"><div class="ttname"><a href="structh2__mplx.html#a58bdd2bc9b732ee0c064c39fc9b75743">h2_mplx::workers</a></div><div class="ttdeci">struct h2_workers * workers</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:96</div></div>
<div class="ttc" id="structh2__mplx_html_a1546d911db4f2865cac8843812207dfb"><div class="ttname"><a href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">h2_mplx::lock</a></div><div class="ttdeci">apr_thread_mutex_t * lock</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:86</div></div>
<div class="ttc" id="structconn__rec_html"><div class="ttname"><a href="structconn__rec.html">conn_rec</a></div><div class="ttdoc">Structure to store things which are per connection. </div><div class="ttdef"><b>Definition:</b> httpd.h:1093</div></div>
<div class="ttc" id="structh2__mplx_html_a4e1d525e731edba47768b8667f9116ab"><div class="ttname"><a href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">h2_mplx::shold</a></div><div class="ttdeci">struct h2_ihash_t * shold</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:68</div></div>
<div class="ttc" id="h2__config_8c_html_a22d672856fe674becba5e4e07ba0ae04"><div class="ttname"><a href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04">h2_config_geti</a></div><div class="ttdeci">int h2_config_geti(const h2_config *conf, h2_config_var_t var)</div><div class="ttdef"><b>Definition:</b> h2_config.c:164</div></div>
<div class="ttc" id="structapr__allocator__t_html"><div class="ttname"><a href="structapr__allocator__t.html">apr_allocator_t</a></div><div class="ttdef"><b>Definition:</b> apr_pools.c:125</div></div>
<div class="ttc" id="structh2__ctx_html"><div class="ttname"><a href="structh2__ctx.html">h2_ctx</a></div><div class="ttdef"><b>Definition:</b> h2_ctx.h:31</div></div>
<div class="ttc" id="structh2__mplx_html_a81f496a92c5d1825e554c1e24099d276"><div class="ttname"><a href="structh2__mplx.html#a81f496a92c5d1825e554c1e24099d276">h2_mplx::pool</a></div><div class="ttdeci">apr_pool_t * pool</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:59</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_a6c8ff3ddf1ac3ddbac59ae65095e2b73"><div class="ttname"><a href="h2__ngn__shed_8c.html#a6c8ff3ddf1ac3ddbac59ae65095e2b73">h2_ngn_shed_create</a></div><div class="ttdeci">h2_ngn_shed * h2_ngn_shed_create(apr_pool_t *pool, conn_rec *c, int default_capacity, apr_size_t req_buffer_size)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:109</div></div>
<div class="ttc" id="h2__util_8c_html_ad395a9b4a439d3688cb94abda4b60259"><div class="ttname"><a href="h2__util_8c.html#ad395a9b4a439d3688cb94abda4b60259">h2_ififo_set_create</a></div><div class="ttdeci">apr_status_t h2_ififo_set_create(h2_ififo **pfifo, apr_pool_t *pool, int capacity)</div><div class="ttdef"><b>Definition:</b> h2_util.c:934</div></div>
<div class="ttc" id="structconn__rec_html_af90d018c333fca6f3ef0f29375b86dc1"><div class="ttname"><a href="structconn__rec.html#af90d018c333fca6f3ef0f29375b86dc1">conn_rec::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> httpd.h:1128</div></div>
<div class="ttc" id="h2__ctx_8c_html_ac4ce31e55232ccac0c4fb72064dad547"><div class="ttname"><a href="h2__ctx_8c.html#ac4ce31e55232ccac0c4fb72064dad547">h2_ctx_get</a></div><div class="ttdeci">h2_ctx * h2_ctx_get(const conn_rec *c, int create)</div><div class="ttdef"><b>Definition:</b> h2_ctx.c:51</div></div>
<div class="ttc" id="h2__ctx_8c_html_ab94fd99e5442be67ac36ae1174e9424f"><div class="ttname"><a href="h2__ctx_8c.html#ab94fd99e5442be67ac36ae1174e9424f">h2_ctx_server_get</a></div><div class="ttdeci">server_rec * h2_ctx_server_get(h2_ctx *ctx)</div><div class="ttdef"><b>Definition:</b> h2_ctx.c:91</div></div>
<div class="ttc" id="structh2__mplx_html_a9a65d22a182d79545427243afc7e4814"><div class="ttname"><a href="structh2__mplx.html#a9a65d22a182d79545427243afc7e4814">h2_mplx::max_active</a></div><div class="ttdeci">int max_active</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:80</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_gace52c7d9cc135b00b6e686236c0095a7"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#gace52c7d9cc135b00b6e686236c0095a7">ap_assert</a></div><div class="ttdeci">#define ap_assert(exp)</div><div class="ttdef"><b>Definition:</b> httpd.h:2162</div></div>
<div class="ttc" id="structh2__workers_html_aadaf15dfdd211a908c16876dbe624f83"><div class="ttname"><a href="structh2__workers.html#aadaf15dfdd211a908c16876dbe624f83">h2_workers::max_workers</a></div><div class="ttdeci">int max_workers</div><div class="ttdef"><b>Definition:</b> h2_workers.h:42</div></div>
<div class="ttc" id="h2__config_8h_html_a9ba9f682e77cb3b39514432a14fce8d4adee7ae8373891554947d0e1c34ca70bb"><div class="ttname"><a href="h2__config_8h.html#a9ba9f682e77cb3b39514432a14fce8d4adee7ae8373891554947d0e1c34ca70bb">H2_CONF_STREAM_MAX_MEM</a></div><div class="ttdef"><b>Definition:</b> h2_config.h:31</div></div>
<div class="ttc" id="group__apr__pools_html_ga3d4c7b6ba19a3b46b6fecdee3d867787"><div class="ttname"><a href="group__apr__pools.html#ga3d4c7b6ba19a3b46b6fecdee3d867787">allocator</a></div><div class="ttdeci">apr_abortfunc_t apr_allocator_t * allocator</div><div class="ttdef"><b>Definition:</b> apr_pools.h:207</div></div>
<div class="ttc" id="structh2__mplx_html_a2039d8d01c7c604fa3f29ded882763e3"><div class="ttname"><a href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">h2_mplx::limit_active</a></div><div class="ttdeci">int limit_active</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:79</div></div>
<div class="ttc" id="h2__config_8h_html_a9ba9f682e77cb3b39514432a14fce8d4ae0a60d764c909338e3dd7ee9ec114b68"><div class="ttname"><a href="h2__config_8h.html#a9ba9f682e77cb3b39514432a14fce8d4ae0a60d764c909338e3dd7ee9ec114b68">H2_CONF_MAX_STREAMS</a></div><div class="ttdef"><b>Definition:</b> h2_config.h:26</div></div>
<div class="ttc" id="structh2__mplx_html_ab9d2944dc8737d9f6f00c752fc0cef09"><div class="ttname"><a href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">h2_mplx::ngn_shed</a></div><div class="ttdeci">struct h2_ngn_shed * ngn_shed</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:98</div></div>
<div class="ttc" id="group__APACHE__CORE__FILTER_html_ga94af791485570bea922969fef12d6259"><div class="ttname"><a href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> util_filter.h:409</div></div>
<div class="ttc" id="group__APACHE__MPM_html_gaaa1d8831ca72b470dd2b7d43fa8393d6"><div class="ttname"><a href="group__APACHE__MPM.html#gaaa1d8831ca72b470dd2b7d43fa8393d6">ap_max_mem_free</a></div><div class="ttdeci">AP_DECLARE_DATA apr_uint32_t ap_max_mem_free</div><div class="ttdef"><b>Definition:</b> mpm_common.c:151</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="structh2__mplx_html_a39a9d7f3ca84f97a0b0f7fa8b0fd37f7"><div class="ttname"><a href="structh2__mplx.html#a39a9d7f3ca84f97a0b0f7fa8b0fd37f7">h2_mplx::limit_change_interval</a></div><div class="ttdeci">apr_interval_time_t limit_change_interval</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:84</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_a88e30717d953a00815fa1acd60a5a74f"><div class="ttname"><a href="h2__ngn__shed_8c.html#a88e30717d953a00815fa1acd60a5a74f">h2_ngn_shed_set_ctx</a></div><div class="ttdeci">void h2_ngn_shed_set_ctx(h2_ngn_shed *shed, void *user_ctx)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:125</div></div>
<div class="ttc" id="structh2__mplx_html_adc48b71917bc52918f064f8c3e10ab00"><div class="ttname"><a href="structh2__mplx.html#adc48b71917bc52918f064f8c3e10ab00">h2_mplx::task_thawed</a></div><div class="ttdeci">struct apr_thread_cond_t * task_thawed</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:88</div></div>
<div class="ttc" id="group__apr__pools_html_gad214fc0160de3c22b6435e29ea20fce8"><div class="ttname"><a href="group__apr__pools.html#gad214fc0160de3c22b6435e29ea20fce8">apr_pcalloc</a></div><div class="ttdeci">#define apr_pcalloc(p, size)</div><div class="ttdef"><b>Definition:</b> apr_pools.h:465</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="structh2__mplx_html_a7823ff33cb1c7beb23a4ef658402789d"><div class="ttname"><a href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">h2_mplx::readyq</a></div><div class="ttdeci">struct h2_ififo * readyq</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:72</div></div>
<div class="ttc" id="structh2__mplx_html_a3e9f0fd33b0cb44fe3b4ca711c6ca2a3"><div class="ttname"><a href="structh2__mplx.html#a3e9f0fd33b0cb44fe3b4ca711c6ca2a3">h2_mplx::max_streams</a></div><div class="ttdeci">int max_streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:76</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="structh2__mplx_html_a8c5573ba81170d83bab259abc5342cdf"><div class="ttname"><a href="structh2__mplx.html#a8c5573ba81170d83bab259abc5342cdf">h2_mplx::last_limit_change</a></div><div class="ttdeci">apr_time_t last_limit_change</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:83</div></div>
<div class="ttc" id="group__apr__thread__cond_html_ga9b5d997217b2ae4c884c535811cb6e35"><div class="ttname"><a href="group__apr__thread__cond.html#ga9b5d997217b2ae4c884c535811cb6e35">mutex</a></div><div class="ttdeci">apr_thread_mutex_t * mutex</div><div class="ttdef"><b>Definition:</b> apr_thread_cond.h:78</div></div>
<div class="ttc" id="h2__util_8c_html_a32c09d1fac1f02a6afc09fc57af5af2f"><div class="ttname"><a href="h2__util_8c.html#a32c09d1fac1f02a6afc09fc57af5af2f">h2_ihash_create</a></div><div class="ttdeci">h2_ihash_t * h2_ihash_create(apr_pool_t *pool, size_t offset_of_int)</div><div class="ttdef"><b>Definition:</b> h2_util.c:238</div></div>
<div class="ttc" id="structh2__mplx_html_a2bd28f0172c08c7d46f740b869b14734"><div class="ttname"><a href="structh2__mplx.html#a2bd28f0172c08c7d46f740b869b14734">h2_mplx::s</a></div><div class="ttdeci">server_rec * s</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:60</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ace8b1c4267fc2d42fa947027daf88763_cgraph.png" border="0" usemap="#h2__mplx_8c_ace8b1c4267fc2d42fa947027daf88763_cgraph" alt=""/></div>
<map name="h2__mplx_8c_ace8b1c4267fc2d42fa947027daf88763_cgraph" id="h2__mplx_8c_ace8b1c4267fc2d42fa947027daf88763_cgraph">
<area shape="rect" id="node2" href="h2__ctx_8c.html#ac4ce31e55232ccac0c4fb72064dad547" title="h2_ctx_get" alt="" coords="199,5,286,32"/>
<area shape="rect" id="node3" href="h2__ctx_8c.html#ab94fd99e5442be67ac36ae1174e9424f" title="h2_ctx_server_get" alt="" coords="178,56,307,83"/>
<area shape="rect" id="node4" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="189,107,296,133"/>
<area shape="rect" id="node6" href="h2__util_8c.html#a32c09d1fac1f02a6afc09fc57af5af2f" title="h2_ihash_create" alt="" coords="184,157,301,184"/>
<area shape="rect" id="node7" href="h2__util_8c.html#ad6e1bc99310cfb346ba839f3cab33f7b" title="h2_iq_create" alt="" coords="195,208,291,235"/>
<area shape="rect" id="node8" href="h2__util_8c.html#ad395a9b4a439d3688cb94abda4b60259" title="h2_ififo_set_create" alt="" coords="177,259,309,285"/>
<area shape="rect" id="node9" href="h2__ngn__shed_8c.html#a6c8ff3ddf1ac3ddbac59ae65095e2b73" title="h2_ngn_shed_create" alt="" coords="171,309,314,336"/>
<area shape="rect" id="node10" href="h2__ngn__shed_8c.html#a88e30717d953a00815fa1acd60a5a74f" title="h2_ngn_shed_set_ctx" alt="" coords="168,360,317,387"/>
<area shape="rect" id="node5" href="h2__config_8c.html#a51b0c2c10599587f54770a555258d209" title="h2_config_geti64" alt="" coords="365,107,485,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ca0bf0869ce6462a66107c950eb70f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_dispatch_master_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="h2__mplx_8h.html#afc62f0d8bac7a8ca7bf5e28d843c4d7e">stream_ev_callback</a> *&#160;</td>
          <td class="paramname"><em>on_resume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dispatch events for the master connection, such as </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the multiplexer </td></tr>
    <tr><td class="paramname">on_resume</td><td>new output data has arrived for a suspended stream </td></tr>
    <tr><td class="paramname">ctx</td><td>user supplied argument to invocation. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;{</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="structh2__stream.html">h2_stream</a> *stream;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__APACHE__CORE__PROTO.html#gad484edfd58b9127caa8f0f59b4004d09">n</a>, id;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    </div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>, </div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                  <span class="stringliteral">&quot;h2_mplx(%ld): dispatch events&quot;</span>, m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>);        </div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="atomic_8c.html#ac689de9df18c093f66959227359328bb">apr_atomic_set32</a>(&amp;m-&gt;<a class="code" href="structh2__mplx.html#ab1ec614c33e9287114f583de1493dba9">event_pending</a>, 0);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="comment">/* update input windows for streams */</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, report_consumption_iter, m);    </div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    purge_streams(m, 1);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    </div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    n = <a class="code" href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a">h2_ififo_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">readyq</a>);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">while</span> (n &gt; 0 </div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;           &amp;&amp; (<a class="code" href="h2__util_8c.html#ade611cbb8c202f0c969b7a60a16da4ea">h2_ififo_try_pull</a>(m-&gt;<a class="code" href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">readyq</a>, &amp;<span class="keywordtype">id</span>) == <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>)) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        --<a class="code" href="group__APACHE__CORE__PROTO.html#gad484edfd58b9127caa8f0f59b4004d09">n</a>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        stream = <a class="code" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (stream) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            on_resume(on_ctx, stream);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    </div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="h2__util_8c_html_a5d1f2bcbe360015aec7585bb030beffd"><div class="ttname"><a href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a></div><div class="ttdeci">void * h2_ihash_get(h2_ihash_t *ih, int id)</div><div class="ttdef"><b>Definition:</b> h2_util.c:256</div></div>
<div class="ttc" id="h2__util_8c_html_ab0cd94ef263e1753db17e4e1e420a18b"><div class="ttname"><a href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a></div><div class="ttdeci">int h2_ihash_iter(h2_ihash_t *ih, h2_ihash_iter_t *fn, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_util.c:273</div></div>
<div class="ttc" id="h2__util_8c_html_ade611cbb8c202f0c969b7a60a16da4ea"><div class="ttname"><a href="h2__util_8c.html#ade611cbb8c202f0c969b7a60a16da4ea">h2_ififo_try_pull</a></div><div class="ttdeci">apr_status_t h2_ififo_try_pull(h2_ififo *fifo, int *pi)</div><div class="ttdef"><b>Definition:</b> h2_util.c:1076</div></div>
<div class="ttc" id="group__APACHE__CORE__PROTO_html_gad484edfd58b9127caa8f0f59b4004d09"><div class="ttname"><a href="group__APACHE__CORE__PROTO.html#gad484edfd58b9127caa8f0f59b4004d09">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> ap_regex.h:230</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="structh2__mplx_html_ab1ec614c33e9287114f583de1493dba9"><div class="ttname"><a href="structh2__mplx.html#ab1ec614c33e9287114f583de1493dba9">h2_mplx::event_pending</a></div><div class="ttdeci">unsigned int event_pending</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:62</div></div>
<div class="ttc" id="h2__util_8c_html_ac040248d0e3bc8b33dcb27d96ad0147a"><div class="ttname"><a href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a">h2_ififo_count</a></div><div class="ttdeci">int h2_ififo_count(h2_ififo *fifo)</div><div class="ttdef"><b>Definition:</b> h2_util.c:960</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="structh2__mplx_html_a7823ff33cb1c7beb23a4ef658402789d"><div class="ttname"><a href="structh2__mplx.html#a7823ff33cb1c7beb23a4ef658402789d">h2_mplx::readyq</a></div><div class="ttdeci">struct h2_ififo * readyq</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:72</div></div>
<div class="ttc" id="atomic_8c_html_ac689de9df18c093f66959227359328bb"><div class="ttname"><a href="atomic_8c.html#ac689de9df18c093f66959227359328bb">apr_atomic_set32</a></div><div class="ttdeci">void apr_atomic_set32(volatile apr_uint32_t *mem, apr_uint32_t val)</div><div class="ttdef"><b>Definition:</b> atomic.c:71</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gaaa69603638ba4a5d83b8727a1ca5b76a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a></div><div class="ttdeci">#define APLOG_TRACE2</div><div class="ttdef"><b>Definition:</b> http_log.h:52</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_cgraph.png" border="0" usemap="#h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_cgraph" id="h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_cgraph">
<area shape="rect" id="node2" href="atomic_8c.html#ac689de9df18c093f66959227359328bb" title="apr_atomic_set32" alt="" coords="228,5,353,32"/>
<area shape="rect" id="node3" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="241,56,340,83"/>
<area shape="rect" id="node4" href="h2__util_8c.html#ac040248d0e3bc8b33dcb27d96ad0147a" title="h2_ififo_count" alt="" coords="239,107,342,133"/>
<area shape="rect" id="node5" href="h2__util_8c.html#ade611cbb8c202f0c969b7a60a16da4ea" title="h2_ififo_try_pull" alt="" coords="234,157,347,184"/>
<area shape="rect" id="node6" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="241,208,340,235"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_icgraph.png" border="0" usemap="#h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_icgraph" alt=""/></div>
<map name="h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_icgraph" id="h2__mplx_8c_a3ca0bf0869ce6462a66107c950eb70f2_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="228,29,375,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa9d6f882e69d5d35224da320108ae06f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> h2_mplx_has_master_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if the multiplexer has events for the master connection pending. </p><dl class="section return"><dt>Returns</dt><dd>!= 0 iff there are events pending </dd></dl>
<div class="fragment"><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="atomic_8c.html#afba4de90e113d26536cff48418689771">apr_atomic_read32</a>(&amp;m-&gt;<a class="code" href="structh2__mplx.html#ab1ec614c33e9287114f583de1493dba9">event_pending</a>) &gt; 0;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div><div class="ttc" id="atomic_8c_html_afba4de90e113d26536cff48418689771"><div class="ttname"><a href="atomic_8c.html#afba4de90e113d26536cff48418689771">apr_atomic_read32</a></div><div class="ttdeci">apr_uint32_t apr_atomic_read32(volatile apr_uint32_t *mem)</div><div class="ttdef"><b>Definition:</b> atomic.c:66</div></div>
<div class="ttc" id="structh2__mplx_html_ab1ec614c33e9287114f583de1493dba9"><div class="ttname"><a href="structh2__mplx.html#ab1ec614c33e9287114f583de1493dba9">h2_mplx::event_pending</a></div><div class="ttdeci">unsigned int event_pending</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:62</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_cgraph.png" border="0" usemap="#h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_cgraph" alt=""/></div>
<map name="h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_cgraph" id="h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_cgraph">
<area shape="rect" id="node2" href="atomic_8c.html#afba4de90e113d26536cff48418689771" title="apr_atomic_read32" alt="" coords="200,13,332,39"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_icgraph.png" border="0" usemap="#h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_icgraph" alt=""/></div>
<map name="h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_icgraph" id="h2__mplx_8c_aa9d6f882e69d5d35224da320108ae06f_icgraph">
<area shape="rect" id="node2" href="h2__mplx_8h.html#a9b184e01b2dc9794caafdad72227fc2a" title="h2_mplx_out_trywait" alt="" coords="200,31,343,57"/>
<area shape="rect" id="node7" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="208,81,335,108"/>
<area shape="rect" id="node3" href="h2__session_8h.html#a9533cdc782ecc1f1fb81b724fabd9e77" title="h2_session_process" alt="" coords="391,31,532,57"/>
<area shape="rect" id="node4" href="h2__conn_8h.html#ad13eeae0e8121a9c190f729e9904af4b" title="h2_conn_run" alt="" coords="580,31,676,57"/>
<area shape="rect" id="node5" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="724,5,873,32"/>
<area shape="rect" id="node6" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="746,56,851,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab27042bae0b8cddb8049073f3153d28f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Master connection has entered idle mode. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the mplx instance of the master connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>!= SUCCESS iff connection should be terminated </dd></dl>
<div class="fragment"><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;{</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a> = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="group__apr__time.html#gadb4bde16055748190eae190c55aa02bb">apr_time_t</a> <a class="code" href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a>;            </div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> scount;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    </div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    scount = <a class="code" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span> (scount &gt; 0) {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">tasks_active</a>) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="comment">/* If we have streams in connection state &#39;IDLE&#39;, meaning</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">             * all streams are ready to sent data out, but lack</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">             * WINDOW_UPDATEs. </span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">             * </span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">             * This is ok, unless we have streams that still occupy</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">             * h2 workers. As worker threads are a scarce resource, </span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">             * we need to take measures that we do not get DoSed.</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">             * </span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">             * This is what we call an &#39;idle block&#39;. Limit the amount </span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">             * of busy workers we allow for this connection until it</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">             * well behaves.</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            now = apr_time_now();</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            m-&gt;<a class="code" href="structh2__mplx.html#ac8a88f82563b2e86182ce73cb4af9464">last_idle_block</a> = <a class="code" href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> &gt; 2 </div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                &amp;&amp; now - m-&gt;<a class="code" href="structh2__mplx.html#a8c5573ba81170d83bab259abc5342cdf">last_limit_change</a> &gt;= m-&gt;<a class="code" href="structh2__mplx.html#a39a9d7f3ca84f97a0b0f7fa8b0fd37f7">limit_change_interval</a>) {</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> &gt; 16) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                    m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> = 16;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> &gt; 8) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                    m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> = 8;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> &gt; 4) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                    m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> = 4;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> &gt; 2) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                    m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a> = 2;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                m-&gt;<a class="code" href="structh2__mplx.html#a8c5573ba81170d83bab259abc5342cdf">last_limit_change</a> = <a class="code" href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                              <span class="stringliteral">&quot;h2_mplx(%ld): decrease worker limit to %d&quot;</span>,</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                              m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>, m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            }</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            </div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">tasks_active</a> &gt; m-&gt;<a class="code" href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">limit_active</a>) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                status = unschedule_slow_tasks(m);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>)) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                          <span class="stringliteral">&quot;h2_mplx(%ld): idle, but %d streams to process&quot;</span>,</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                          m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>, (<span class="keywordtype">int</span>)<a class="code" href="h2__util_8c.html#af155ca0df68858b7a59389e74e43afa7">h2_iq_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>));</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            status = <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="comment">/* idle, have streams, but no tasks active. what are we waiting for?</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">             * WINDOW_UPDATEs from client? */</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <a class="code" href="structh2__stream.html">h2_stream</a> *stream = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            </div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                          <span class="stringliteral">&quot;h2_mplx(%ld): idle, no tasks ongoing, %d streams&quot;</span>,</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                          m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>, (<span class="keywordtype">int</span>)<a class="code" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>));</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <a class="code" href="h2__util_8c.html#abaadc1445c5689f8dfb1ddaa94b3f8ee">h2_ihash_shift</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, (<span class="keywordtype">void</span>**)&amp;stream, 1);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="keywordflow">if</span> (stream) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                <a class="code" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, stream);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                <span class="keywordflow">if</span> (stream-&gt;<a class="code" href="structh2__stream.html#a1fa0b533ea35ef70065c40ea0b8e93e8">output</a> &amp;&amp; !stream-&gt;<a class="code" href="structh2__stream.html#affbdc6455ec7dd0d36bf7f309739328d">out_checked</a>) {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                    <span class="comment">/* FIXME: this looks like a race between the session thinking</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">                     * it is idle and the EOF on a stream not being sent.</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">                     * Signal to caller to leave IDLE state.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                  <a class="code" href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a>(stream, <span class="stringliteral">&quot;output closed=%d, mplx idle&quot;</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                                              <span class="stringliteral">&quot;, out has %ld bytes buffered&quot;</span>),</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                                  <a class="code" href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304">h2_beam_is_closed</a>(stream-&gt;<a class="code" href="structh2__stream.html#a1fa0b533ea35ef70065c40ea0b8e93e8">output</a>),</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                                  (<span class="keywordtype">long</span>)<a class="code" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d">h2_beam_get_buffered</a>(stream-&gt;<a class="code" href="structh2__stream.html#a1fa0b533ea35ef70065c40ea0b8e93e8">output</a>));</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                    <a class="code" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, stream);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    check_data_for(m, stream, 0);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    stream-&gt;<a class="code" href="structh2__stream.html#affbdc6455ec7dd0d36bf7f309739328d">out_checked</a> = 1;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                    status = <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a>;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            }</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    register_if_needed(m);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div><div class="ttc" id="group__apr__platform_html_gaaa72b2253f6f3032cefea5712a27540e"><div class="ttname"><a href="group__apr__platform.html#gaaa72b2253f6f3032cefea5712a27540e">apr_size_t</a></div><div class="ttdeci">size_t apr_size_t</div><div class="ttdef"><b>Definition:</b> apr.h:357</div></div>
<div class="ttc" id="h2__bucket__beam_8c_html_a1eb7e877b1b6addd67a8d3556728b304"><div class="ttname"><a href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304">h2_beam_is_closed</a></div><div class="ttdeci">int h2_beam_is_closed(h2_bucket_beam *beam)</div><div class="ttdef"><b>Definition:</b> h2_bucket_beam.c:472</div></div>
<div class="ttc" id="structh2__stream_html_a1fa0b533ea35ef70065c40ea0b8e93e8"><div class="ttname"><a href="structh2__stream.html#a1fa0b533ea35ef70065c40ea0b8e93e8">h2_stream::output</a></div><div class="ttdeci">struct h2_bucket_beam * output</div><div class="ttdef"><b>Definition:</b> h2_stream.h:83</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="structh2__mplx_html_ac8a88f82563b2e86182ce73cb4af9464"><div class="ttname"><a href="structh2__mplx.html#ac8a88f82563b2e86182ce73cb4af9464">h2_mplx::last_idle_block</a></div><div class="ttdeci">apr_time_t last_idle_block</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:81</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__util_8c_html_af155ca0df68858b7a59389e74e43afa7"><div class="ttname"><a href="h2__util_8c.html#af155ca0df68858b7a59389e74e43afa7">h2_iq_count</a></div><div class="ttdeci">int h2_iq_count(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:363</div></div>
<div class="ttc" id="h2__util_8c_html_a4348605c0734bb5b773c423f5a687f01"><div class="ttname"><a href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a></div><div class="ttdeci">size_t h2_ihash_count(h2_ihash_t *ih)</div><div class="ttdef"><b>Definition:</b> h2_util.c:246</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="h2__util_8c_html_a0e8808cee68f42516bab06b01d8ebf16"><div class="ttname"><a href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a></div><div class="ttdeci">void h2_ihash_add(h2_ihash_t *ih, void *val)</div><div class="ttdef"><b>Definition:</b> h2_util.c:281</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__MOD__CACHE_html_ga33504014e188d5d7506173cc14fb5801"><div class="ttname"><a href="group__MOD__CACHE.html#ga33504014e188d5d7506173cc14fb5801">now</a></div><div class="ttdeci">const apr_time_t apr_time_t now</div><div class="ttdef"><b>Definition:</b> mod_cache.h:131</div></div>
<div class="ttc" id="structh2__stream_html_affbdc6455ec7dd0d36bf7f309739328d"><div class="ttname"><a href="structh2__stream.html#affbdc6455ec7dd0d36bf7f309739328d">h2_stream::out_checked</a></div><div class="ttdeci">unsigned int out_checked</div><div class="ttdef"><b>Definition:</b> h2_stream.h:92</div></div>
<div class="ttc" id="group__apr__time_html_gadb4bde16055748190eae190c55aa02bb"><div class="ttname"><a href="group__apr__time.html#gadb4bde16055748190eae190c55aa02bb">apr_time_t</a></div><div class="ttdeci">apr_int64_t apr_time_t</div><div class="ttdef"><b>Definition:</b> apr_time.h:46</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="structh2__mplx_html_a8d141fea6adae0c6fc8dcf262fd39803"><div class="ttname"><a href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">h2_mplx::tasks_active</a></div><div class="ttdeci">int tasks_active</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:78</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="structh2__mplx_html_a2039d8d01c7c604fa3f29ded882763e3"><div class="ttname"><a href="structh2__mplx.html#a2039d8d01c7c604fa3f29ded882763e3">h2_mplx::limit_active</a></div><div class="ttdeci">int limit_active</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:79</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="h2__util_8c_html_abaadc1445c5689f8dfb1ddaa94b3f8ee"><div class="ttname"><a href="h2__util_8c.html#abaadc1445c5689f8dfb1ddaa94b3f8ee">h2_ihash_shift</a></div><div class="ttdeci">size_t h2_ihash_shift(h2_ihash_t *ih, void **buffer, size_t max)</div><div class="ttdef"><b>Definition:</b> h2_util.c:320</div></div>
<div class="ttc" id="structh2__mplx_html_a39a9d7f3ca84f97a0b0f7fa8b0fd37f7"><div class="ttname"><a href="structh2__mplx.html#a39a9d7f3ca84f97a0b0f7fa8b0fd37f7">h2_mplx::limit_change_interval</a></div><div class="ttdeci">apr_interval_time_t limit_change_interval</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:84</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="h2__bucket__beam_8c_html_ae5d97b52187376d68acb436f374a0e9d"><div class="ttname"><a href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d">h2_beam_get_buffered</a></div><div class="ttdeci">apr_off_t h2_beam_get_buffered(h2_bucket_beam *beam)</div><div class="ttdef"><b>Definition:</b> h2_bucket_beam.c:1162</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="h2__stream_8h_html_a5d2429e78d1a9c910f654300062147be"><div class="ttname"><a href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a></div><div class="ttdeci">#define H2_STRM_MSG(s, msg)</div><div class="ttdef"><b>Definition:</b> h2_stream.h:309</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="group__APR__Error_html_ga0b2a5ebb819de5ce93d326939b586578"><div class="ttname"><a href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a></div><div class="ttdeci">#define APR_EAGAIN</div><div class="ttdef"><b>Definition:</b> apr_errno.h:730</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gaaa69603638ba4a5d83b8727a1ca5b76a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a></div><div class="ttdeci">#define APLOG_TRACE2</div><div class="ttdef"><b>Definition:</b> http_log.h:52</div></div>
<div class="ttc" id="structh2__mplx_html_a8c5573ba81170d83bab259abc5342cdf"><div class="ttname"><a href="structh2__mplx.html#a8c5573ba81170d83bab259abc5342cdf">h2_mplx::last_limit_change</a></div><div class="ttdeci">apr_time_t last_limit_change</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:83</div></div>
<div class="ttc" id="h2__util_8c_html_a580b0aba0478fc88d0d930222978d5e7"><div class="ttname"><a href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a></div><div class="ttdeci">int h2_iq_empty(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:358</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_cgraph.png" border="0" usemap="#h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_cgraph" alt=""/></div>
<map name="h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_cgraph" id="h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01" title="h2_ihash_count" alt="" coords="173,5,286,32"/>
<area shape="rect" id="node3" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="181,56,277,83"/>
<area shape="rect" id="node4" href="h2__util_8c.html#af155ca0df68858b7a59389e74e43afa7" title="h2_iq_count" alt="" coords="183,107,275,133"/>
<area shape="rect" id="node5" href="h2__util_8c.html#abaadc1445c5689f8dfb1ddaa94b3f8ee" title="h2_ihash_shift" alt="" coords="176,157,283,184"/>
<area shape="rect" id="node8" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="178,208,281,235"/>
<area shape="rect" id="node9" href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304" title="h2_beam_is_closed" alt="" coords="161,259,298,285"/>
<area shape="rect" id="node10" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="152,309,307,336"/>
<area shape="rect" id="node6" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="379,132,478,159"/>
<area shape="rect" id="node7" href="h2__util_8c.html#a44c7ebba8d690ecdaccf908c9c9c9efb" title="h2_ihash_remove_val" alt="" coords="355,183,503,209"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_icgraph.png" border="0" usemap="#h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_icgraph" alt=""/></div>
<map name="h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_icgraph" id="h2__mplx_8c_ab27042bae0b8cddb8049073f3153d28f_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9533cdc782ecc1f1fb81b724fabd9e77" title="h2_session_process" alt="" coords="152,31,293,57"/>
<area shape="rect" id="node3" href="h2__conn_8h.html#ad13eeae0e8121a9c190f729e9904af4b" title="h2_conn_run" alt="" coords="341,31,437,57"/>
<area shape="rect" id="node4" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="485,5,635,32"/>
<area shape="rect" id="node5" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="507,56,613,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2635034633242ada1070ca3e4fab411f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_keep_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;{</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    check_data_for(m, stream, 1);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;}</div><div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a2635034633242ada1070ca3e4fab411f_icgraph.png" border="0" usemap="#h2__mplx_8c_a2635034633242ada1070ca3e4fab411f_icgraph" alt=""/></div>
<map name="h2__mplx_8c_a2635034633242ada1070ca3e4fab411f_icgraph" id="h2__mplx_8c_a2635034633242ada1070ca3e4fab411f_icgraph">
<area shape="rect" id="node2" href="h2__stream_8h.html#a28b2b69f6da28f5fd17c2494e9683588" title="h2_stream_out_prepare" alt="" coords="201,292,360,319"/>
<area shape="rect" id="node3" href="h2__session_8h.html#a9e2e042cb4d3efa0625cc55bbd145a65" title="h2_session_rcreate" alt="" coords="1482,320,1617,347"/>
<area shape="rect" id="node7" href="h2__session_8h.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="408,213,583,240"/>
<area shape="rect" id="node4" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="1687,285,1797,312"/>
<area shape="rect" id="node5" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="1845,200,1995,227"/>
<area shape="rect" id="node6" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="1867,285,1973,312"/>
<area shape="rect" id="node8" href="h2__filter_8h.html#ab3bd5a1630af5762487a01bfb486d198" title="h2_bucket_observer_beam" alt="" coords="1460,27,1639,53"/>
<area shape="rect" id="node9" href="h2__stream_8h.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="631,181,769,208"/>
<area shape="rect" id="node10" href="h2__bucket__eos_8h.html#a7af1686f9a06910c60d7e123ac4e3d86" title="h2_bucket_eos_create" alt="" coords="820,117,973,144"/>
<area shape="rect" id="node12" href="h2__mplx_8h.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="1033,219,1172,245"/>
<area shape="rect" id="node14" href="h2__stream_8h.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="817,55,976,81"/>
<area shape="rect" id="node15" href="h2__stream_8h.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="844,269,949,296"/>
<area shape="rect" id="node18" href="h2__stream_8h.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="1024,168,1181,195"/>
<area shape="rect" id="node11" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="1029,117,1176,144"/>
<area shape="rect" id="node13" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="1257,219,1384,245"/>
<area shape="rect" id="node16" href="h2__stream_8h.html#a87d8887db632345afe5e3881844a1bab" title="h2_stream_recv_frame" alt="" coords="1025,320,1180,347"/>
<area shape="rect" id="node17" href="h2__stream_8h.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="1229,320,1412,347"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e3be4f65fcb2bafc3062f2ea2b0d9d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_out_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>mplx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>stream_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__bucket__beam.html">h2_bucket_beam</a> *&#160;</td>
          <td class="paramname"><em>beam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens the output for the given stream with the specified response. </p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    </div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">aborted</a>) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        status = <a class="code" href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        status = out_open(m, stream_id, beam);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="structh2__mplx_html_aa3ee90da5c50dc1eb7b05832be65abab"><div class="ttname"><a href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">h2_mplx::aborted</a></div><div class="ttdeci">unsigned int aborted</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:63</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__APR__Error_html_ga9458da18e0ee46a5d37c9cdfdc43efd2"><div class="ttname"><a href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a></div><div class="ttdeci">#define APR_ECONNABORTED</div><div class="ttdef"><b>Definition:</b> apr_errno.h:769</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a6e3be4f65fcb2bafc3062f2ea2b0d9d4_cgraph.png" border="0" usemap="#h2__mplx_8c_a6e3be4f65fcb2bafc3062f2ea2b0d9d4_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a6e3be4f65fcb2bafc3062f2ea2b0d9d4_cgraph" id="h2__mplx_8c_a6e3be4f65fcb2bafc3062f2ea2b0d9d4_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="191,5,290,32"/>
<area shape="rect" id="node3" href="h2__bucket__beam_8c.html#a756a84813d57b4df12deb88314374277" title="h2_beam_close" alt="" coords="184,56,297,83"/>
<area shape="rect" id="node4" href="h2__bucket__beam_8c.html#ae7a6de19a8d0034d20cc4d4070f2d7dc" title="h2_beam_log" alt="" coords="191,107,290,133"/>
<area shape="rect" id="node5" href="h2__bucket__beam_8c.html#a4ee1be1e659ba9dfdad0db85d89967fe" title="h2_beam_empty" alt="" coords="363,81,482,108"/>
<area shape="rect" id="node6" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="345,132,500,159"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0dafa503789e4dd6aaa7bdb906905721"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_out_trywait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__time.html#gaae2129185a395cc393f76fabf4f43e47">apr_interval_time_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structapr__thread__cond__t.html">apr_thread_cond_t</a> *&#160;</td>
          <td class="paramname"><em>iowait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Waits on output data from any stream in this session to become available. Returns APR_TIMEUP if no data arrived in the given time. </p>
<div class="fragment"><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    </div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">aborted</a>) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        status = <a class="code" href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h2__mplx_8c.html#aa9d6f882e69d5d35224da320108ae06f">h2_mplx_has_master_events</a>(m)) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        status = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        purge_streams(m, 0);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <a class="code" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, report_consumption_iter, m);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a8b38de7d091e8ce87dc76af576212fb4">added_output</a> = iowait;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        status = apr_thread_cond_timedwait(m-&gt;<a class="code" href="structh2__mplx.html#a8b38de7d091e8ce87dc76af576212fb4">added_output</a>, m-&gt;<a class="code" href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">lock</a>, <a class="code" href="group__APACHE__CORE__DAEMON.html#ga48b7aa88e5841c0fe69f7d9a88646af3">timeout</a>);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__LOG.html#ga3098e6fb9bd91223c970d65f1df64a4b">APLOGctrace2</a>(m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>)) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                          <span class="stringliteral">&quot;h2_mplx(%ld): trywait on data for %f ms)&quot;</span>,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                          m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>, <a class="code" href="group__APACHE__CORE__DAEMON.html#ga48b7aa88e5841c0fe69f7d9a88646af3">timeout</a>/1000.0);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a8b38de7d091e8ce87dc76af576212fb4">added_output</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__util_8c_html_ab0cd94ef263e1753db17e4e1e420a18b"><div class="ttname"><a href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a></div><div class="ttdeci">int h2_ihash_iter(h2_ihash_t *ih, h2_ihash_iter_t *fn, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_util.c:273</div></div>
<div class="ttc" id="structh2__mplx_html_aa3ee90da5c50dc1eb7b05832be65abab"><div class="ttname"><a href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">h2_mplx::aborted</a></div><div class="ttdeci">unsigned int aborted</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:63</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structh2__mplx_html_a1546d911db4f2865cac8843812207dfb"><div class="ttname"><a href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">h2_mplx::lock</a></div><div class="ttdeci">apr_thread_mutex_t * lock</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:86</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="group__APR__Error_html_ga9458da18e0ee46a5d37c9cdfdc43efd2"><div class="ttname"><a href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a></div><div class="ttdeci">#define APR_ECONNABORTED</div><div class="ttdef"><b>Definition:</b> apr_errno.h:769</div></div>
<div class="ttc" id="structh2__mplx_html_a8b38de7d091e8ce87dc76af576212fb4"><div class="ttname"><a href="structh2__mplx.html#a8b38de7d091e8ce87dc76af576212fb4">h2_mplx::added_output</a></div><div class="ttdeci">struct apr_thread_cond_t * added_output</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:87</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_ga48b7aa88e5841c0fe69f7d9a88646af3"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#ga48b7aa88e5841c0fe69f7d9a88646af3">timeout</a></div><div class="ttdeci">apr_interval_time_t * timeout</div><div class="ttdef"><b>Definition:</b> httpd.h:2060</div></div>
<div class="ttc" id="h2__mplx_8c_html_aa9d6f882e69d5d35224da320108ae06f"><div class="ttname"><a href="h2__mplx_8c.html#aa9d6f882e69d5d35224da320108ae06f">h2_mplx_has_master_events</a></div><div class="ttdeci">int h2_mplx_has_master_events(h2_mplx *m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:1215</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gaaa69603638ba4a5d83b8727a1ca5b76a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a></div><div class="ttdeci">#define APLOG_TRACE2</div><div class="ttdef"><b>Definition:</b> http_log.h:52</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga3098e6fb9bd91223c970d65f1df64a4b"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga3098e6fb9bd91223c970d65f1df64a4b">APLOGctrace2</a></div><div class="ttdeci">#define APLOGctrace2(c)</div><div class="ttdef"><b>Definition:</b> http_log.h:258</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_cgraph.png" border="0" usemap="#h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_cgraph" id="h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_cgraph">
<area shape="rect" id="node2" href="h2__mplx_8c.html#aa9d6f882e69d5d35224da320108ae06f" title="h2_mplx_has_master\l_events" alt="" coords="196,5,343,47"/>
<area shape="rect" id="node4" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="220,71,319,98"/>
<area shape="rect" id="node5" href="h2__util_8c.html#ad44c263771a733fc2c474eb48373d368" title="h2_ififo_push" alt="" coords="220,122,319,149"/>
<area shape="rect" id="node6" href="atomic_8c.html#ac689de9df18c093f66959227359328bb" title="apr_atomic_set32" alt="" coords="207,173,332,199"/>
<area shape="rect" id="node3" href="atomic_8c.html#afba4de90e113d26536cff48418689771" title="apr_atomic_read32" alt="" coords="391,13,523,39"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_icgraph.png" border="0" usemap="#h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_icgraph" alt=""/></div>
<map name="h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_icgraph" id="h2__mplx_8c_a0dafa503789e4dd6aaa7bdb906905721_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9533cdc782ecc1f1fb81b724fabd9e77" title="h2_session_process" alt="" coords="196,31,337,57"/>
<area shape="rect" id="node3" href="h2__conn_8h.html#ad13eeae0e8121a9c190f729e9904af4b" title="h2_conn_run" alt="" coords="385,31,481,57"/>
<area shape="rect" id="node4" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="529,5,679,32"/>
<area shape="rect" id="node5" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="551,56,657,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac899d0d7155cb6cfb733e3af5542e805"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_pop_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structh2__task.html">h2_task</a> **&#160;</td>
          <td class="paramname"><em>ptask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;{</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> rv = <a class="code" href="group__APR__Error.html#ga35d9dca2514c522a2840aca0f3e2ebd3">APR_EOF</a>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    </div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    *ptask = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a> != (rv = apr_thread_mutex_lock(m-&gt;<a class="code" href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">lock</a>))) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span> rv;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    </div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">aborted</a>) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        rv = <a class="code" href="group__APR__Error.html#ga35d9dca2514c522a2840aca0f3e2ebd3">APR_EOF</a>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        *ptask = next_stream_task(m);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        rv = (*ptask != <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a> &amp;&amp; !<a class="code" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>))? <a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a> : <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a> != rv) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        m-&gt;<a class="code" href="structh2__mplx.html#a1636f8fa7ff36c2b5994449111967560">is_registered</a> = 0; <span class="comment">/* h2_workers will discard this mplx */</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> rv;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div><div class="ttc" id="structh2__mplx_html_aa3ee90da5c50dc1eb7b05832be65abab"><div class="ttname"><a href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">h2_mplx::aborted</a></div><div class="ttdeci">unsigned int aborted</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:63</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="structh2__mplx_html_a1546d911db4f2865cac8843812207dfb"><div class="ttname"><a href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">h2_mplx::lock</a></div><div class="ttdeci">apr_thread_mutex_t * lock</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:86</div></div>
<div class="ttc" id="structh2__mplx_html_a1636f8fa7ff36c2b5994449111967560"><div class="ttname"><a href="structh2__mplx.html#a1636f8fa7ff36c2b5994449111967560">h2_mplx::is_registered</a></div><div class="ttdeci">unsigned int is_registered</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:64</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="group__APR__Error_html_ga35d9dca2514c522a2840aca0f3e2ebd3"><div class="ttname"><a href="group__APR__Error.html#ga35d9dca2514c522a2840aca0f3e2ebd3">APR_EOF</a></div><div class="ttdeci">#define APR_EOF</div><div class="ttdef"><b>Definition:</b> apr_errno.h:461</div></div>
<div class="ttc" id="group__APR__Error_html_ga0b2a5ebb819de5ce93d326939b586578"><div class="ttname"><a href="group__APR__Error.html#ga0b2a5ebb819de5ce93d326939b586578">APR_EAGAIN</a></div><div class="ttdeci">#define APR_EAGAIN</div><div class="ttdef"><b>Definition:</b> apr_errno.h:730</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="h2__util_8c_html_a580b0aba0478fc88d0d930222978d5e7"><div class="ttname"><a href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a></div><div class="ttdeci">int h2_iq_empty(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:358</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ac899d0d7155cb6cfb733e3af5542e805_cgraph.png" border="0" usemap="#h2__mplx_8c_ac899d0d7155cb6cfb733e3af5542e805_cgraph" alt=""/></div>
<map name="h2__mplx_8c_ac899d0d7155cb6cfb733e3af5542e805_cgraph" id="h2__mplx_8c_ac899d0d7155cb6cfb733e3af5542e805_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="235,5,331,32"/>
<area shape="rect" id="node3" href="h2__task_8c.html#ac271735ace7ded26cc2bc5abd4cdb5f7" title="h2_task_thaw" alt="" coords="232,56,335,83"/>
<area shape="rect" id="node4" href="h2__bucket__beam_8c.html#abd0e8829e808a93cccdec17e06448a80" title="h2_beam_send" alt="" coords="228,107,339,133"/>
<area shape="rect" id="node5" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="206,157,361,184"/>
<area shape="rect" id="node6" href="h2__ngn__shed_8c.html#a38e6e88ce849aa8bb6d700e5bf2a02aa" title="h2_req_engine_out_consumed" alt="" coords="184,208,383,235"/>
<area shape="rect" id="node7" href="h2__ngn__shed_8c.html#a159f2c952b1b9eec4b79dae8f6a94364" title="h2_req_engine_is_shutdown" alt="" coords="190,259,377,285"/>
<area shape="rect" id="node8" href="h2__ngn__shed_8c.html#ada765812a034e97825703145c11f5b03" title="h2_req_engine_get_id" alt="" coords="209,309,357,336"/>
<area shape="rect" id="node9" href="h2__ngn__shed_8c.html#ac223b15a49f204c91c9fa767e5af377c" title="h2_ngn_shed_done_ngn" alt="" coords="202,360,365,387"/>
<area shape="rect" id="node10" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="234,411,333,437"/>
<area shape="rect" id="node11" href="h2__task_8c.html#a1ca0cc863f60acd0d7999be004fa503b" title="h2_task_redo" alt="" coords="233,461,333,488"/>
<area shape="rect" id="node12" href="h2__util_8c.html#a484925742af7f24ebace55ad9be3731a" title="h2_ihash_remove" alt="" coords="221,512,345,539"/>
<area shape="rect" id="node13" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0" title="h2_iq_add" alt="" coords="243,563,324,589"/>
<area shape="rect" id="node20" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="227,613,340,640"/>
<area shape="rect" id="node14" href="h2__util_8c.html#a4bf6bbee2be663a01e97be92bcfbab45" title="h2_iq_contains" alt="" coords="431,537,540,564"/>
<area shape="rect" id="node15" href="util__expr__scan_8c.html#a33e91cd0cef6786e9e3a27ac67707207" title="if" alt="" coords="466,588,505,615"/>
<area shape="rect" id="node16" href="util__expr__scan_8c.html#a073e30a44c0e142fe3d3a1f87bbf6c5e" title="ap_expr_yy_create_buffer" alt="" coords="588,588,760,615"/>
<area shape="rect" id="node17" href="util__expr__scan_8c.html#a3dd61ae214da108171a1bc60b87291d0" title="ap_expr_yyalloc" alt="" coords="808,588,924,615"/>
<area shape="rect" id="node18" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="979,563,1025,589"/>
<area shape="rect" id="node19" href="util__expr__parse_8c.html#a5faf6a2d99f50a4655dd390199a8db7b" title="malloc" alt="" coords="972,613,1032,640"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af6c35070795724a55320fd46e77f1ec2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="h2_8h.html#a1d0879769f04428fde846585fb8c29d7">h2_stream_pri_cmp</a> *&#160;</td>
          <td class="paramname"><em>cmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process a stream request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the multiplexer </td></tr>
    <tr><td class="paramname">stream</td><td>the identifier of the stream </td></tr>
    <tr><td class="paramname">r</td><td>the request to be processed </td></tr>
    <tr><td class="paramname">cmp</td><td>the stream priority compare function </td></tr>
    <tr><td class="paramname">ctx</td><td>context data for the compare function </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;{</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    </div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">aborted</a>) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        status = <a class="code" href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        status = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, stream);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf">h2_stream_is_ready</a>(stream)) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="comment">/* already have a response */</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            check_data_for(m, stream, 0);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                          <a class="code" href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a>(stream, <span class="stringliteral">&quot;process, add to readyq&quot;</span>)); </div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <a class="code" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0">h2_iq_add</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>, stream-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>, <a class="code" href="group__apr__atomic.html#ga337f72af8c74a9110f79160df3bba5e8">cmp</a>, <a class="code" href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            register_if_needed(m);                </div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                          <a class="code" href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a>(stream, <span class="stringliteral">&quot;process, added to q&quot;</span>)); </div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;}</div><div class="ttc" id="structh2__stream_html_a83ccde49eb87a47e7ad897e4a6d86968"><div class="ttname"><a href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">h2_stream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> h2_stream.h:65</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__util_8c_html_a18c62b8d07b5c08ef7e9b142b09ad7d0"><div class="ttname"><a href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0">h2_iq_add</a></div><div class="ttdeci">int h2_iq_add(h2_iqueue *q, int sid, h2_iq_cmp *cmp, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_util.c:369</div></div>
<div class="ttc" id="structh2__mplx_html_aa3ee90da5c50dc1eb7b05832be65abab"><div class="ttname"><a href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">h2_mplx::aborted</a></div><div class="ttdeci">unsigned int aborted</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:63</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="h2__util_8c_html_a0e8808cee68f42516bab06b01d8ebf16"><div class="ttname"><a href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a></div><div class="ttdeci">void h2_ihash_add(h2_ihash_t *ih, void *val)</div><div class="ttdef"><b>Definition:</b> h2_util.c:281</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__apr__atomic_html_ga337f72af8c74a9110f79160df3bba5e8"><div class="ttname"><a href="group__apr__atomic.html#ga337f72af8c74a9110f79160df3bba5e8">cmp</a></div><div class="ttdeci">apr_uint32_t apr_uint32_t cmp</div><div class="ttdef"><b>Definition:</b> apr_atomic.h:105</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="h2__stream_8c_html_aaf384cb883a4e857802183c81dc501bf"><div class="ttname"><a href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf">h2_stream_is_ready</a></div><div class="ttdeci">int h2_stream_is_ready(h2_stream *stream)</div><div class="ttdef"><b>Definition:</b> h2_stream.c:1001</div></div>
<div class="ttc" id="group__APR__Error_html_ga9458da18e0ee46a5d37c9cdfdc43efd2"><div class="ttname"><a href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a></div><div class="ttdeci">#define APR_ECONNABORTED</div><div class="ttdef"><b>Definition:</b> apr_errno.h:769</div></div>
<div class="ttc" id="group__APACHE__CORE__FILTER_html_ga94af791485570bea922969fef12d6259"><div class="ttname"><a href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> util_filter.h:409</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="h2__stream_8h_html_a5d2429e78d1a9c910f654300062147be"><div class="ttname"><a href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a></div><div class="ttdeci">#define H2_STRM_MSG(s, msg)</div><div class="ttdef"><b>Definition:</b> h2_stream.h:309</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_cgraph.png" border="0" usemap="#h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_cgraph" alt=""/></div>
<map name="h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_cgraph" id="h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="207,5,310,32"/>
<area shape="rect" id="node3" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="189,56,328,83"/>
<area shape="rect" id="node4" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0" title="h2_iq_add" alt="" coords="218,107,299,133"/>
<area shape="rect" id="node11" href="h2__util_8c.html#ae4c244854d49bc3a4a3f4b5f14c1b696" title="h2_iq_shift" alt="" coords="216,157,301,184"/>
<area shape="rect" id="node12" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="209,208,308,235"/>
<area shape="rect" id="node13" href="h2__conn_8c.html#a1e38739f4ba1fd9f06d27ee6beadaf3a" title="h2_slave_create" alt="" coords="200,259,317,285"/>
<area shape="rect" id="node14" href="h2__bucket__beam_8c.html#a6d193e70e5d65e51644687e2e0c03762" title="h2_beam_on_consumed" alt="" coords="177,309,340,336"/>
<area shape="rect" id="node15" href="h2__task_8c.html#a864cff0b1216bbe6057dabec78e23b32" title="h2_task_create" alt="" coords="203,360,314,387"/>
<area shape="rect" id="node5" href="h2__util_8c.html#a4bf6bbee2be663a01e97be92bcfbab45" title="h2_iq_contains" alt="" coords="388,81,497,108"/>
<area shape="rect" id="node6" href="util__expr__scan_8c.html#a33e91cd0cef6786e9e3a27ac67707207" title="if" alt="" coords="423,132,462,159"/>
<area shape="rect" id="node7" href="util__expr__scan_8c.html#a073e30a44c0e142fe3d3a1f87bbf6c5e" title="ap_expr_yy_create_buffer" alt="" coords="545,132,717,159"/>
<area shape="rect" id="node8" href="util__expr__scan_8c.html#a3dd61ae214da108171a1bc60b87291d0" title="ap_expr_yyalloc" alt="" coords="765,132,881,159"/>
<area shape="rect" id="node9" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="936,107,983,133"/>
<area shape="rect" id="node10" href="util__expr__parse_8c.html#a5faf6a2d99f50a4655dd390199a8db7b" title="malloc" alt="" coords="929,157,989,184"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_icgraph.png" border="0" usemap="#h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_icgraph" alt=""/></div>
<map name="h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_icgraph" id="h2__mplx_8c_af6c35070795724a55320fd46e77f1ec2_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="177,172,352,199"/>
<area shape="rect" id="node3" href="h2__filter_8h.html#ab3bd5a1630af5762487a01bfb486d198" title="h2_bucket_observer_beam" alt="" coords="1229,5,1408,32"/>
<area shape="rect" id="node5" href="h2__stream_8h.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="400,172,539,199"/>
<area shape="rect" id="node4" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="1615,92,1764,119"/>
<area shape="rect" id="node6" href="h2__bucket__eos_8h.html#a7af1686f9a06910c60d7e123ac4e3d86" title="h2_bucket_eos_create" alt="" coords="589,121,743,148"/>
<area shape="rect" id="node8" href="h2__mplx_8h.html#a0a543f7d3e75d3b0c6772d96d8386294" title="h2_mplx_stream_do" alt="" coords="803,172,941,199"/>
<area shape="rect" id="node10" href="h2__stream_8h.html#a42713cfedfecf1de5ede4387ca0ccfc7" title="h2_stream_recv_DATA" alt="" coords="587,59,745,85"/>
<area shape="rect" id="node11" href="h2__stream_8h.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="613,273,719,300"/>
<area shape="rect" id="node17" href="h2__stream_8h.html#a1813e84cdb5f9e9fa8834b03f0a7bc22" title="h2_stream_add_header" alt="" coords="793,223,951,249"/>
<area shape="rect" id="node7" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="799,121,945,148"/>
<area shape="rect" id="node9" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="1027,223,1153,249"/>
<area shape="rect" id="node12" href="h2__stream_8h.html#a87d8887db632345afe5e3881844a1bab" title="h2_stream_recv_frame" alt="" coords="795,324,949,351"/>
<area shape="rect" id="node13" href="h2__stream_8h.html#a1f93a26960d203f9c03f1e2de7908697" title="h2_stream_set_request_rec" alt="" coords="999,316,1181,343"/>
<area shape="rect" id="node14" href="h2__session_8h.html#a9e2e042cb4d3efa0625cc55bbd145a65" title="h2_session_rcreate" alt="" coords="1251,177,1386,204"/>
<area shape="rect" id="node15" href="h2__conn_8h.html#a584d6a8c239fb922746bf4b2a716a549" title="h2_conn_setup" alt="" coords="1456,160,1567,187"/>
<area shape="rect" id="node16" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="1637,160,1742,187"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a828b53a81da824e193da25fe9e0accf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> h2_mplx_release_and_join </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structapr__thread__cond__t.html">apr_thread_cond_t</a> *&#160;</td>
          <td class="paramname"><em>wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decreases the reference counter of this mplx and waits for it to reached 0, destroy the mplx afterwards. This is to be called from the thread that created the mplx in the first place. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the mplx to be released and destroyed </td></tr>
    <tr><td class="paramname">wait</td><td>condition var to wait on for ref counter == 0 </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>, wait_secs = 60;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">/* How to shut down a h2 connection:</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">     * 0. abort and tell the workers that no more tasks will come from us */</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    m-&gt;<a class="code" href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">aborted</a> = 1;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="h2__workers_8c.html#ae0a105f11ce19edf4db5ca016fe0ed96">h2_workers_unregister</a>(m-&gt;<a class="code" href="structh2__mplx.html#a58bdd2bc9b732ee0c064c39fc9b75743">workers</a>, m);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    </div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a>(m);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">/* How to shut down a h2 connection:</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">     * 1. cancel all streams still active */</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, stream_cancel_iter, m)) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">/* until empty */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    </div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">/* 2. terminate ngn_shed, no more streams</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">     * should be scheduled or in the active set */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="h2__ngn__shed_8c.html#a62642a35c376dbb37bac12d78e253b24">h2_ngn_shed_abort</a>(m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="group__APACHE__CORE__DAEMON.html#gace52c7d9cc135b00b6e686236c0095a7">ap_assert</a>(<a class="code" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828">h2_ihash_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>));</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="group__APACHE__CORE__DAEMON.html#gace52c7d9cc135b00b6e686236c0095a7">ap_assert</a>(<a class="code" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>));</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    </div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">/* 3. while workers are busy on this connection, meaning they</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">     *    are processing tasks from this connection, wait on them finishing</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">     *    in order to wake us and let us check again. </span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">     *    Eventually, this has to succeed. */</span>    </div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    m-&gt;<a class="code" href="structh2__mplx.html#a73aa7f159ac689bf606b7cea6364a2de">join_wait</a> = wait;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">for</span> (i = 0; <a class="code" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a>) &gt; 0; ++<a class="code" href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a>) {        </div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        status = apr_thread_cond_timedwait(wait, m-&gt;<a class="code" href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">lock</a>, <a class="code" href="group__apr__time.html#gaec56c2c03299a750006bfcc08d64ec32">apr_time_from_sec</a>(wait_secs));</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        </div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a>(status)) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="comment">/* This can happen if we have very long running requests</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">             * that do not time out on IO. */</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03198)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                          <span class="stringliteral">&quot;h2_mplx(%ld): waited %d sec for %d tasks&quot;</span>, </div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                          m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>, i*wait_secs, (<span class="keywordtype">int</span>)<a class="code" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a>));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <a class="code" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a>(m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a>, report_stream_iter, m);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    m-&gt;<a class="code" href="structh2__mplx.html#a73aa7f159ac689bf606b7cea6364a2de">join_wait</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    </div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">/* 4. close the h2_req_enginge shed */</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="h2__ngn__shed_8c.html#af9ff23e9852828fe5f3a273110c9f6c8">h2_ngn_shed_destroy</a>(m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    </div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">/* 4. With all workers done, all streams should be in spurge */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828">h2_ihash_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a>)) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga73e14aeff380a8a01c66d528162026fe">APLOG_WARNING</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>, <a class="code" href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a>(03516)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                      <span class="stringliteral">&quot;h2_mplx(%ld): unexpected %d streams in hold&quot;</span>, </div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                      m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>, (<span class="keywordtype">int</span>)<a class="code" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a>(m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a>));</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a>(m-&gt;<a class="code" href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">shold</a>, unexpected_stream_iter, m);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    </div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                  <span class="stringliteral">&quot;h2_mplx(%ld): released&quot;</span>, m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div><div class="ttc" id="structh2__mplx_html_a73aa7f159ac689bf606b7cea6364a2de"><div class="ttname"><a href="structh2__mplx.html#a73aa7f159ac689bf606b7cea6364a2de">h2_mplx::join_wait</a></div><div class="ttdeci">struct apr_thread_cond_t * join_wait</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:89</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_af9ff23e9852828fe5f3a273110c9f6c8"><div class="ttname"><a href="h2__ngn__shed_8c.html#af9ff23e9852828fe5f3a273110c9f6c8">h2_ngn_shed_destroy</a></div><div class="ttdeci">void h2_ngn_shed_destroy(h2_ngn_shed *shed)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:387</div></div>
<div class="ttc" id="group__apr__time_html_gaec56c2c03299a750006bfcc08d64ec32"><div class="ttname"><a href="group__apr__time.html#gaec56c2c03299a750006bfcc08d64ec32">apr_time_from_sec</a></div><div class="ttdeci">#define apr_time_from_sec(sec)</div><div class="ttdef"><b>Definition:</b> apr_time.h:79</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__util_8c_html_ab0cd94ef263e1753db17e4e1e420a18b"><div class="ttname"><a href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a></div><div class="ttdeci">int h2_ihash_iter(h2_ihash_t *ih, h2_ihash_iter_t *fn, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_util.c:273</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gadfcef90537539cf2b7d35cfbbbafeb93"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gadfcef90537539cf2b7d35cfbbbafeb93">APLOG_DEBUG</a></div><div class="ttdeci">#define APLOG_DEBUG</div><div class="ttdef"><b>Definition:</b> http_log.h:50</div></div>
<div class="ttc" id="h2__util_8c_html_a4348605c0734bb5b773c423f5a687f01"><div class="ttname"><a href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01">h2_ihash_count</a></div><div class="ttdeci">size_t h2_ihash_count(h2_ihash_t *ih)</div><div class="ttdef"><b>Definition:</b> h2_util.c:246</div></div>
<div class="ttc" id="structh2__mplx_html_aa3ee90da5c50dc1eb7b05832be65abab"><div class="ttname"><a href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">h2_mplx::aborted</a></div><div class="ttdeci">unsigned int aborted</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:63</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_ga864b207719c86ac4deeba696943262d0"><div class="ttname"><a href="group__APR__STATUS__IS.html#ga864b207719c86ac4deeba696943262d0">APR_STATUS_IS_TIMEUP</a></div><div class="ttdeci">#define APR_STATUS_IS_TIMEUP(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:534</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__MOD__PROXY_html_ga38403a0592eb8018a3ad61aef0f7ca2c"><div class="ttname"><a href="group__MOD__PROXY.html#ga38403a0592eb8018a3ad61aef0f7ca2c">i</a></div><div class="ttdeci">proxy_worker_shared int i</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:718</div></div>
<div class="ttc" id="h2__util_8c_html_adca33ffb38ae50b885c3c95080068828"><div class="ttname"><a href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828">h2_ihash_empty</a></div><div class="ttdeci">int h2_ihash_empty(h2_ihash_t *ih)</div><div class="ttdef"><b>Definition:</b> h2_util.c:251</div></div>
<div class="ttc" id="structh2__mplx_html_a58bdd2bc9b732ee0c064c39fc9b75743"><div class="ttname"><a href="structh2__mplx.html#a58bdd2bc9b732ee0c064c39fc9b75743">h2_mplx::workers</a></div><div class="ttdeci">struct h2_workers * workers</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:96</div></div>
<div class="ttc" id="structh2__mplx_html_a1546d911db4f2865cac8843812207dfb"><div class="ttname"><a href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">h2_mplx::lock</a></div><div class="ttdeci">apr_thread_mutex_t * lock</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:86</div></div>
<div class="ttc" id="structh2__mplx_html_a4e1d525e731edba47768b8667f9116ab"><div class="ttname"><a href="structh2__mplx.html#a4e1d525e731edba47768b8667f9116ab">h2_mplx::shold</a></div><div class="ttdeci">struct h2_ihash_t * shold</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:68</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_a62642a35c376dbb37bac12d78e253b24"><div class="ttname"><a href="h2__ngn__shed_8c.html#a62642a35c376dbb37bac12d78e253b24">h2_ngn_shed_abort</a></div><div class="ttdeci">void h2_ngn_shed_abort(h2_ngn_shed *shed)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:140</div></div>
<div class="ttc" id="h2__workers_8c_html_ae0a105f11ce19edf4db5ca016fe0ed96"><div class="ttname"><a href="h2__workers_8c.html#ae0a105f11ce19edf4db5ca016fe0ed96">h2_workers_unregister</a></div><div class="ttdeci">apr_status_t h2_workers_unregister(h2_workers *workers, struct h2_mplx *m)</div><div class="ttdef"><b>Definition:</b> h2_workers.c:368</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga73e14aeff380a8a01c66d528162026fe"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga73e14aeff380a8a01c66d528162026fe">APLOG_WARNING</a></div><div class="ttdeci">#define APLOG_WARNING</div><div class="ttdef"><b>Definition:</b> http_log.h:47</div></div>
<div class="ttc" id="group__APACHE__CORE__DAEMON_html_gace52c7d9cc135b00b6e686236c0095a7"><div class="ttname"><a href="group__APACHE__CORE__DAEMON.html#gace52c7d9cc135b00b6e686236c0095a7">ap_assert</a></div><div class="ttdeci">#define ap_assert(exp)</div><div class="ttdef"><b>Definition:</b> httpd.h:2162</div></div>
<div class="ttc" id="structh2__mplx_html_ab9d2944dc8737d9f6f00c752fc0cef09"><div class="ttname"><a href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">h2_mplx::ngn_shed</a></div><div class="ttdeci">struct h2_ngn_shed * ngn_shed</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:98</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="h2__mplx_8c_html_a221ab3905c5c20cbcca9f97b2c8d1375"><div class="ttname"><a href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a></div><div class="ttdeci">#define H2_MPLX_ENTER_ALWAYS(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:71</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga1dee8a07e06bc5b3de8b89662c2cd666"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga1dee8a07e06bc5b3de8b89662c2cd666">APLOGNO</a></div><div class="ttdeci">#define APLOGNO(n)</div><div class="ttdef"><b>Definition:</b> http_log.h:117</div></div>
<div class="ttc" id="h2__util_8c_html_a580b0aba0478fc88d0d930222978d5e7"><div class="ttname"><a href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a></div><div class="ttdeci">int h2_iq_empty(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:358</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a828b53a81da824e193da25fe9e0accf4_cgraph.png" border="0" usemap="#h2__mplx_8c_a828b53a81da824e193da25fe9e0accf4_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a828b53a81da824e193da25fe9e0accf4_cgraph" id="h2__mplx_8c_a828b53a81da824e193da25fe9e0accf4_cgraph">
<area shape="rect" id="node2" href="h2__workers_8c.html#ae0a105f11ce19edf4db5ca016fe0ed96" title="h2_workers_unregister" alt="" coords="228,5,381,32"/>
<area shape="rect" id="node4" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="255,56,354,83"/>
<area shape="rect" id="node5" href="h2__ngn__shed_8c.html#a62642a35c376dbb37bac12d78e253b24" title="h2_ngn_shed_abort" alt="" coords="237,107,372,133"/>
<area shape="rect" id="node6" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828" title="h2_ihash_empty" alt="" coords="246,157,363,184"/>
<area shape="rect" id="node7" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="257,208,353,235"/>
<area shape="rect" id="node8" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01" title="h2_ihash_count" alt="" coords="248,259,361,285"/>
<area shape="rect" id="node9" href="h2__ngn__shed_8c.html#af9ff23e9852828fe5f3a273110c9f6c8" title="h2_ngn_shed_destroy" alt="" coords="230,309,379,336"/>
<area shape="rect" id="node3" href="h2__util_8c.html#ac52573d613412f386e15412d8c5f53cd" title="h2_fifo_remove" alt="" coords="429,5,540,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae4ec6ad53087e52140a02bf7fa4b238e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_reprioritize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="h2_8h.html#a1d0879769f04428fde846585fb8c29d7">h2_stream_pri_cmp</a> *&#160;</td>
          <td class="paramname"><em>cmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream priorities have changed, reschedule pending requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the multiplexer </td></tr>
    <tr><td class="paramname">cmp</td><td>the stream priority compare function </td></tr>
    <tr><td class="paramname">ctx</td><td>context data for the compare function </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    </div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">aborted</a>) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        status = <a class="code" href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="h2__util_8c.html#a016e6f92f8adb95b5fc12b9394ce22ca">h2_iq_sort</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>, <a class="code" href="group__apr__atomic.html#ga337f72af8c74a9110f79160df3bba5e8">cmp</a>, <a class="code" href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                      <span class="stringliteral">&quot;h2_mplx(%ld): reprioritize tasks&quot;</span>, m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        status = <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="structh2__mplx_html_aa3ee90da5c50dc1eb7b05832be65abab"><div class="ttname"><a href="structh2__mplx.html#aa3ee90da5c50dc1eb7b05832be65abab">h2_mplx::aborted</a></div><div class="ttdeci">unsigned int aborted</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:63</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="h2__util_8c_html_a016e6f92f8adb95b5fc12b9394ce22ca"><div class="ttname"><a href="h2__util_8c.html#a016e6f92f8adb95b5fc12b9394ce22ca">h2_iq_sort</a></div><div class="ttdeci">void h2_iq_sort(h2_iqueue *q, h2_iq_cmp *cmp, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_util.c:420</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__apr__atomic_html_ga337f72af8c74a9110f79160df3bba5e8"><div class="ttname"><a href="group__apr__atomic.html#ga337f72af8c74a9110f79160df3bba5e8">cmp</a></div><div class="ttdeci">apr_uint32_t apr_uint32_t cmp</div><div class="ttdef"><b>Definition:</b> apr_atomic.h:105</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="group__APR__Error_html_ga9458da18e0ee46a5d37c9cdfdc43efd2"><div class="ttname"><a href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a></div><div class="ttdeci">#define APR_ECONNABORTED</div><div class="ttdef"><b>Definition:</b> apr_errno.h:769</div></div>
<div class="ttc" id="group__APACHE__CORE__FILTER_html_ga94af791485570bea922969fef12d6259"><div class="ttname"><a href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> util_filter.h:409</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_cgraph.png" border="0" usemap="#h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_cgraph" alt=""/></div>
<map name="h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_cgraph" id="h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#a016e6f92f8adb95b5fc12b9394ce22ca" title="h2_iq_sort" alt="" coords="220,33,303,59"/>
<area shape="rect" id="node10" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="213,83,309,110"/>
<area shape="rect" id="node11" href="h2__workers_8c.html#a00fb6329ef8aca683c2a90d5950c31d8" title="h2_workers_register" alt="" coords="192,134,331,161"/>
<area shape="rect" id="node3" href="util__expr__scan_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="401,33,453,59"/>
<area shape="rect" id="node4" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="1088,33,1135,59"/>
<area shape="rect" id="node5" href="util__expr__scan_8c.html#a0a7c4a7733cdb1eb01d004f938def83c" title="ap_expr_yyrealloc" alt="" coords="720,33,847,59"/>
<area shape="rect" id="node6" href="util__expr__scan_8c.html#ae306439b40fb64237eafb4c0b4524aee" title="ap_expr_yyrestart" alt="" coords="523,83,649,110"/>
<area shape="rect" id="node7" href="util__expr__scan_8c.html#a073e30a44c0e142fe3d3a1f87bbf6c5e" title="ap_expr_yy_create_buffer" alt="" coords="697,83,869,110"/>
<area shape="rect" id="node8" href="util__expr__scan_8c.html#a3dd61ae214da108171a1bc60b87291d0" title="ap_expr_yyalloc" alt="" coords="917,83,1033,110"/>
<area shape="rect" id="node9" href="util__expr__parse_8c.html#a5faf6a2d99f50a4655dd390199a8db7b" title="malloc" alt="" coords="1081,83,1141,110"/>
<area shape="rect" id="node12" href="h2__util_8c.html#ac4ea1ec7b996302732577ec411ac4451" title="h2_fifo_push" alt="" coords="379,134,475,161"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_icgraph.png" border="0" usemap="#h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_icgraph" alt=""/></div>
<map name="h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_icgraph" id="h2__mplx_8c_ae4ec6ad53087e52140a02bf7fa4b238e_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9533cdc782ecc1f1fb81b724fabd9e77" title="h2_session_process" alt="" coords="192,31,333,57"/>
<area shape="rect" id="node3" href="h2__conn_8h.html#ad13eeae0e8121a9c190f729e9904af4b" title="h2_conn_run" alt="" coords="381,31,477,57"/>
<area shape="rect" id="node4" href="h2__h2_8h.html#aac14f8417f6f939dc7e7988dc355e364" title="h2_h2_register_hooks" alt="" coords="525,5,675,32"/>
<area shape="rect" id="node5" href="h2__switch_8h.html#a64edb3313e7ec9f83bf05e58815acd9a" title="h2_switch_init" alt="" coords="547,56,653,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a365c5c53bd163b22f065959b3291878b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> h2_mplx_req_engine_done </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__req__engine.html">h2_req_engine</a> *&#160;</td>
          <td class="paramname"><em>ngn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structconn__rec.html">conn_rec</a> *&#160;</td>
          <td class="paramname"><em>r_conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;{</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="structh2__task.html">h2_task</a> *task = <a class="code" href="h2__ctx_8c.html#a307964e6b63b90efb5f5874b3b985b08">h2_ctx_cget_task</a>(r_conn);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    </div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">if</span> (task) {</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <a class="code" href="structh2__mplx.html">h2_mplx</a> *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a> = task-&gt;<a class="code" href="structh2__task.html#a01c334a460577a071ad2c6c76ff55373">mplx</a>;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="structh2__stream.html">h2_stream</a> *stream;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a>(m);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        stream = <a class="code" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, task-&gt;<a class="code" href="structh2__task.html#a09e7e9f9e5fdb61206c344f2272d9f20">stream_id</a>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        </div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        ngn_out_update_windows(m, ngn);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <a class="code" href="h2__ngn__shed_8c.html#a0214ef5304677f2db1fd07e08a02d79d">h2_ngn_shed_done_task</a>(m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a>, ngn, task);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        </div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a> != <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a> &amp;&amp; stream </div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            &amp;&amp; <a class="code" href="h2__task_8c.html#ac78ebf568d2a302ef95cb1f36b338c94">h2_task_can_redo</a>(task) </div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            &amp;&amp; !<a class="code" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a>(m-&gt;<a class="code" href="structh2__mplx.html#a710245c8890d56e7466a854024f1c4b1">sredo</a>, stream-&gt;<a class="code" href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">id</a>)) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <a class="code" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a>(m-&gt;<a class="code" href="structh2__mplx.html#a710245c8890d56e7466a854024f1c4b1">sredo</a>, stream);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span> (task-&gt;<a class="code" href="structh2__task.html#a79899299fec2d024b6d30c63af12daf9">engine</a>) { </div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="comment">/* cannot report that as done until engine returns */</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            task_done(m, task, ngn);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div><div class="ttc" id="structh2__stream_html_a83ccde49eb87a47e7ad897e4a6d86968"><div class="ttname"><a href="structh2__stream.html#a83ccde49eb87a47e7ad897e4a6d86968">h2_stream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> h2_stream.h:65</div></div>
<div class="ttc" id="structh2__task_html_a79899299fec2d024b6d30c63af12daf9"><div class="ttname"><a href="structh2__task.html#a79899299fec2d024b6d30c63af12daf9">h2_task::engine</a></div><div class="ttdeci">struct h2_req_engine * engine</div><div class="ttdef"><b>Definition:</b> h2_task.h:91</div></div>
<div class="ttc" id="structh2__task_html"><div class="ttname"><a href="structh2__task.html">h2_task</a></div><div class="ttdef"><b>Definition:</b> h2_task.h:52</div></div>
<div class="ttc" id="structh2__mplx_html"><div class="ttname"><a href="structh2__mplx.html">h2_mplx</a></div><div class="ttdef"><b>Definition:</b> h2_mplx.h:56</div></div>
<div class="ttc" id="h2__util_8c_html_a5d1f2bcbe360015aec7585bb030beffd"><div class="ttname"><a href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a></div><div class="ttdeci">void * h2_ihash_get(h2_ihash_t *ih, int id)</div><div class="ttdef"><b>Definition:</b> h2_util.c:256</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__util_8c_html_a0e8808cee68f42516bab06b01d8ebf16"><div class="ttname"><a href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16">h2_ihash_add</a></div><div class="ttdeci">void h2_ihash_add(h2_ihash_t *ih, void *val)</div><div class="ttdef"><b>Definition:</b> h2_util.c:281</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1891337ee8668593918a50b9e04be486"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a></div><div class="ttdeci">const module * m</div><div class="ttdef"><b>Definition:</b> http_config.h:516</div></div>
<div class="ttc" id="structh2__task_html_a01c334a460577a071ad2c6c76ff55373"><div class="ttname"><a href="structh2__task.html#a01c334a460577a071ad2c6c76ff55373">h2_task::mplx</a></div><div class="ttdeci">struct h2_mplx * mplx</div><div class="ttdef"><b>Definition:</b> h2_task.h:79</div></div>
<div class="ttc" id="structh2__task_html_a09e7e9f9e5fdb61206c344f2272d9f20"><div class="ttname"><a href="structh2__task.html#a09e7e9f9e5fdb61206c344f2272d9f20">h2_task::stream_id</a></div><div class="ttdeci">int stream_id</div><div class="ttdef"><b>Definition:</b> h2_task.h:54</div></div>
<div class="ttc" id="structh2__mplx_html_a710245c8890d56e7466a854024f1c4b1"><div class="ttname"><a href="structh2__mplx.html#a710245c8890d56e7466a854024f1c4b1">h2_mplx::sredo</a></div><div class="ttdeci">struct h2_ihash_t * sredo</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:67</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="h2__task_8c_html_ac78ebf568d2a302ef95cb1f36b338c94"><div class="ttname"><a href="h2__task_8c.html#ac78ebf568d2a302ef95cb1f36b338c94">h2_task_can_redo</a></div><div class="ttdeci">int h2_task_can_redo(h2_task *task)</div><div class="ttdef"><b>Definition:</b> h2_task.c:417</div></div>
<div class="ttc" id="structh2__mplx_html_ab9d2944dc8737d9f6f00c752fc0cef09"><div class="ttname"><a href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">h2_mplx::ngn_shed</a></div><div class="ttdeci">struct h2_ngn_shed * ngn_shed</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:98</div></div>
<div class="ttc" id="h2__ctx_8c_html_a307964e6b63b90efb5f5874b3b985b08"><div class="ttname"><a href="h2__ctx_8c.html#a307964e6b63b90efb5f5874b3b985b08">h2_ctx_cget_task</a></div><div class="ttdeci">h2_task * h2_ctx_cget_task(conn_rec *c)</div><div class="ttdef"><b>Definition:</b> h2_ctx.c:112</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_a0214ef5304677f2db1fd07e08a02d79d"><div class="ttname"><a href="h2__ngn__shed_8c.html#a0214ef5304677f2db1fd07e08a02d79d">h2_ngn_shed_done_task</a></div><div class="ttdeci">apr_status_t h2_ngn_shed_done_task(h2_ngn_shed *shed, struct h2_req_engine *ngn, h2_task *task)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:335</div></div>
<div class="ttc" id="h2__mplx_8c_html_a221ab3905c5c20cbcca9f97b2c8d1375"><div class="ttname"><a href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a></div><div class="ttdeci">#define H2_MPLX_ENTER_ALWAYS(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:71</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a365c5c53bd163b22f065959b3291878b_cgraph.png" border="0" usemap="#h2__mplx_8c_a365c5c53bd163b22f065959b3291878b_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a365c5c53bd163b22f065959b3291878b_cgraph" id="h2__mplx_8c_a365c5c53bd163b22f065959b3291878b_cgraph">
<area shape="rect" id="node2" href="h2__ctx_8c.html#a307964e6b63b90efb5f5874b3b985b08" title="h2_ctx_cget_task" alt="" coords="250,31,375,57"/>
<area shape="rect" id="node5" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="263,81,362,108"/>
<area shape="rect" id="node6" href="h2__ngn__shed_8c.html#a0214ef5304677f2db1fd07e08a02d79d" title="h2_ngn_shed_done_task" alt="" coords="229,132,396,159"/>
<area shape="rect" id="node7" href="h2__task_8c.html#ac78ebf568d2a302ef95cb1f36b338c94" title="h2_task_can_redo" alt="" coords="249,183,377,209"/>
<area shape="rect" id="node9" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="261,233,364,260"/>
<area shape="rect" id="node3" href="h2__ctx_8c.html#a73f299fd602fd387e0c2df6ac6bcc129" title="h2_ctx_get_task" alt="" coords="466,5,585,32"/>
<area shape="rect" id="node4" href="h2__ctx_8c.html#ac4ce31e55232ccac0c4fb72064dad547" title="h2_ctx_get" alt="" coords="482,56,569,83"/>
<area shape="rect" id="node8" href="h2__bucket__beam_8c.html#ac875e00e9dd5bf2a8cb64b5241f646b8" title="h2_beam_was_received" alt="" coords="444,183,607,209"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af04be83a28df8fbd218cf5964794fade"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_req_engine_pull </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__req__engine.html">h2_req_engine</a> *&#160;</td>
          <td class="paramname"><em>ngn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__APR__Util__Bucket__Brigades.html#ga756973fb6392bd1026c3d96b4519776d">apr_read_type_e</a>&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrequest__rec.html">request_rec</a> **&#160;</td>
          <td class="paramname"><em>pr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;{   </div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <a class="code" href="structh2__ngn__shed.html">h2_ngn_shed</a> *shed = <a class="code" href="h2__ngn__shed_8c.html#ae0bf9bfdf6ae608305be2c4905339734">h2_ngn_shed_get_shed</a>(ngn);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="structh2__mplx.html">h2_mplx</a> *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a> = <a class="code" href="h2__ngn__shed_8c.html#aaa422761ee11bef3236047b13d886c9c">h2_ngn_shed_get_ctx</a>(shed);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordtype">int</span> want_shutdown;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    </div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    want_shutdown = (<a class="code" href="group__APACHE__CORE__FILTER.html#gafe0ebf200b97a61a45c0513334da9ab6">block</a> == <a class="code" href="group__APR__Util__Bucket__Brigades.html#gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8">APR_BLOCK_READ</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">/* Take this opportunity to update output consummation </span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">     * for this engine */</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    ngn_out_update_windows(m, ngn);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    </div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">if</span> (want_shutdown &amp;&amp; !<a class="code" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>)) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">/* For a blocking read, check first if requests are to be</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">         * had and, if not, wait a short while before doing the</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">         * blocking, and if unsuccessful, terminating read.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        status = <a class="code" href="h2__ngn__shed_8c.html#a5ffba0f4f39a4034a6dc6a0920279d0f">h2_ngn_shed_pull_request</a>(shed, ngn, capacity, 1, pr);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__APR__STATUS__IS.html#ga9dd578bfcd76a2d997395608ae5b3a4e">APR_STATUS_IS_EAGAIN</a>(status)) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>,</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                          <span class="stringliteral">&quot;h2_mplx(%ld): start block engine pull&quot;</span>, m-&gt;<a class="code" href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">id</a>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            apr_thread_cond_timedwait(m-&gt;<a class="code" href="structh2__mplx.html#adc48b71917bc52918f064f8c3e10ab00">task_thawed</a>, m-&gt;<a class="code" href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">lock</a>, </div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                      <a class="code" href="event_8c.html#a05ce6646c8ba980c843903fc77e9f8a0">apr_time_from_msec</a>(20));</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            status = <a class="code" href="h2__ngn__shed_8c.html#a5ffba0f4f39a4034a6dc6a0920279d0f">h2_ngn_shed_pull_request</a>(shed, ngn, capacity, 1, pr);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        status = <a class="code" href="h2__ngn__shed_8c.html#a5ffba0f4f39a4034a6dc6a0920279d0f">h2_ngn_shed_pull_request</a>(shed, ngn, capacity,</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                          want_shutdown, pr);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div><div class="ttc" id="h2__ngn__shed_8c_html_a5ffba0f4f39a4034a6dc6a0920279d0f"><div class="ttname"><a href="h2__ngn__shed_8c.html#a5ffba0f4f39a4034a6dc6a0920279d0f">h2_ngn_shed_pull_request</a></div><div class="ttdeci">apr_status_t h2_ngn_shed_pull_request(h2_ngn_shed *shed, h2_req_engine *ngn, int capacity, int want_shutdown, request_rec **pr)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:258</div></div>
<div class="ttc" id="group__APACHE__CORE__FILTER_html_gafe0ebf200b97a61a45c0513334da9ab6"><div class="ttname"><a href="group__APACHE__CORE__FILTER.html#gafe0ebf200b97a61a45c0513334da9ab6">block</a></div><div class="ttdeci">apr_bucket_brigade ap_input_mode_t apr_read_type_e block</div><div class="ttdef"><b>Definition:</b> util_filter.h:297</div></div>
<div class="ttc" id="event_8c_html_a05ce6646c8ba980c843903fc77e9f8a0"><div class="ttname"><a href="event_8c.html#a05ce6646c8ba980c843903fc77e9f8a0">apr_time_from_msec</a></div><div class="ttdeci">#define apr_time_from_msec(x)</div><div class="ttdef"><b>Definition:</b> event.c:146</div></div>
<div class="ttc" id="structh2__mplx_html"><div class="ttname"><a href="structh2__mplx.html">h2_mplx</a></div><div class="ttdef"><b>Definition:</b> h2_mplx.h:56</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_aaa422761ee11bef3236047b13d886c9c"><div class="ttname"><a href="h2__ngn__shed_8c.html#aaa422761ee11bef3236047b13d886c9c">h2_ngn_shed_get_ctx</a></div><div class="ttdeci">void * h2_ngn_shed_get_ctx(h2_ngn_shed *shed)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:130</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gab08ab6d0e9ab24707ce7baeaecf1f551"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gab08ab6d0e9ab24707ce7baeaecf1f551">APLOG_TRACE1</a></div><div class="ttdeci">#define APLOG_TRACE1</div><div class="ttdef"><b>Definition:</b> http_log.h:51</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1891337ee8668593918a50b9e04be486"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a></div><div class="ttdeci">const module * m</div><div class="ttdef"><b>Definition:</b> http_config.h:516</div></div>
<div class="ttc" id="structh2__mplx_html_a1546d911db4f2865cac8843812207dfb"><div class="ttname"><a href="structh2__mplx.html#a1546d911db4f2865cac8843812207dfb">h2_mplx::lock</a></div><div class="ttdeci">apr_thread_mutex_t * lock</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:86</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="structh2__ngn__shed_html"><div class="ttname"><a href="structh2__ngn__shed.html">h2_ngn_shed</a></div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.h:23</div></div>
<div class="ttc" id="group__APR__Util__Bucket__Brigades_html_gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8"><div class="ttname"><a href="group__APR__Util__Bucket__Brigades.html#gga756973fb6392bd1026c3d96b4519776da2d983f5b7fd996434e0dded171c261d8">APR_BLOCK_READ</a></div><div class="ttdef"><b>Definition:</b> apr_buckets.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="structh2__mplx_html_adc48b71917bc52918f064f8c3e10ab00"><div class="ttname"><a href="structh2__mplx.html#adc48b71917bc52918f064f8c3e10ab00">h2_mplx::task_thawed</a></div><div class="ttdeci">struct apr_thread_cond_t * task_thawed</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:88</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="structh2__mplx_html_ad4333b2349dfe7ad35e42ca15dd51eb7"><div class="ttname"><a href="structh2__mplx.html#ad4333b2349dfe7ad35e42ca15dd51eb7">h2_mplx::id</a></div><div class="ttdeci">long id</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:57</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_ae0bf9bfdf6ae608305be2c4905339734"><div class="ttname"><a href="h2__ngn__shed_8c.html#ae0bf9bfdf6ae608305be2c4905339734">h2_ngn_shed_get_shed</a></div><div class="ttdeci">h2_ngn_shed * h2_ngn_shed_get_shed(h2_req_engine *ngn)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:135</div></div>
<div class="ttc" id="h2__util_8c_html_a580b0aba0478fc88d0d930222978d5e7"><div class="ttname"><a href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7">h2_iq_empty</a></div><div class="ttdeci">int h2_iq_empty(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:358</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
<div class="ttc" id="group__APR__STATUS__IS_html_ga9dd578bfcd76a2d997395608ae5b3a4e"><div class="ttname"><a href="group__APR__STATUS__IS.html#ga9dd578bfcd76a2d997395608ae5b3a4e">APR_STATUS_IS_EAGAIN</a></div><div class="ttdeci">#define APR_STATUS_IS_EAGAIN(s)</div><div class="ttdef"><b>Definition:</b> apr_errno.h:1272</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_af04be83a28df8fbd218cf5964794fade_cgraph.png" border="0" usemap="#h2__mplx_8c_af04be83a28df8fbd218cf5964794fade_cgraph" alt=""/></div>
<map name="h2__mplx_8c_af04be83a28df8fbd218cf5964794fade_cgraph" id="h2__mplx_8c_af04be83a28df8fbd218cf5964794fade_cgraph">
<area shape="rect" id="node2" href="h2__ngn__shed_8c.html#ae0bf9bfdf6ae608305be2c4905339734" title="h2_ngn_shed_get_shed" alt="" coords="230,5,389,32"/>
<area shape="rect" id="node3" href="h2__ngn__shed_8c.html#aaa422761ee11bef3236047b13d886c9c" title="h2_ngn_shed_get_ctx" alt="" coords="235,56,384,83"/>
<area shape="rect" id="node4" href="h2__util_8c.html#a580b0aba0478fc88d0d930222978d5e7" title="h2_iq_empty" alt="" coords="261,107,357,133"/>
<area shape="rect" id="node5" href="h2__ngn__shed_8c.html#a5ffba0f4f39a4034a6dc6a0920279d0f" title="h2_ngn_shed_pull_request" alt="" coords="221,157,397,184"/>
<area shape="rect" id="node6" href="h2__task_8c.html#ac271735ace7ded26cc2bc5abd4cdb5f7" title="h2_task_thaw" alt="" coords="445,157,548,184"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a96adfac6a3d6cb5e42814407f068f095"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_req_engine_push </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ngn_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrequest__rec.html">request_rec</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mod__http2_8h.html#a4536960c5d69af7cdea3dfd82129242e">http2_req_engine_init</a> *&#160;</td>
          <td class="paramname"><em>einit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <a class="code" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="structh2__mplx.html">h2_mplx</a> *<a class="code" href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="structh2__task.html">h2_task</a> *task;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="structh2__stream.html">h2_stream</a> *stream;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    </div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    task = <a class="code" href="h2__ctx_8c.html#ac49063adb1fe588e8c4225660712e85b">h2_ctx_rget_task</a>(r);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">if</span> (!task) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    m = task-&gt;<a class="code" href="structh2__task.html#a01c334a460577a071ad2c6c76ff55373">mplx</a>;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    </div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    stream = <a class="code" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, task-&gt;<a class="code" href="structh2__task.html#a09e7e9f9e5fdb61206c344f2272d9f20">stream_id</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span> (stream) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        status = <a class="code" href="h2__ngn__shed_8c.html#a733dcc7a4e7fd256c6f340e592c525f0">h2_ngn_shed_push_request</a>(m-&gt;<a class="code" href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">ngn_shed</a>, ngn_type, r, einit);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        status = <a class="code" href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div><div class="ttc" id="structh2__task_html"><div class="ttname"><a href="structh2__task.html">h2_task</a></div><div class="ttdef"><b>Definition:</b> h2_task.h:52</div></div>
<div class="ttc" id="structh2__mplx_html"><div class="ttname"><a href="structh2__mplx.html">h2_mplx</a></div><div class="ttdef"><b>Definition:</b> h2_mplx.h:56</div></div>
<div class="ttc" id="h2__util_8c_html_a5d1f2bcbe360015aec7585bb030beffd"><div class="ttname"><a href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a></div><div class="ttdeci">void * h2_ihash_get(h2_ihash_t *ih, int id)</div><div class="ttdef"><b>Definition:</b> h2_util.c:256</div></div>
<div class="ttc" id="group__APACHE__CORE__HTTPD_html_ga6e27f49150e9a14580fb313cc2777e00"><div class="ttname"><a href="group__APACHE__CORE__HTTPD.html#ga6e27f49150e9a14580fb313cc2777e00">status</a></div><div class="ttdeci">int status</div><div class="ttdef"><b>Definition:</b> http_core.h:277</div></div>
<div class="ttc" id="group__apr__errno_html_gaa5105fa83cc322f09382292db8b47593"><div class="ttname"><a href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a></div><div class="ttdeci">int apr_status_t</div><div class="ttdef"><b>Definition:</b> apr_errno.h:44</div></div>
<div class="ttc" id="group__APACHE__CORE__CONFIG_html_ga1891337ee8668593918a50b9e04be486"><div class="ttname"><a href="group__APACHE__CORE__CONFIG.html#ga1891337ee8668593918a50b9e04be486">m</a></div><div class="ttdeci">const module * m</div><div class="ttdef"><b>Definition:</b> http_config.h:516</div></div>
<div class="ttc" id="structh2__task_html_a01c334a460577a071ad2c6c76ff55373"><div class="ttname"><a href="structh2__task.html#a01c334a460577a071ad2c6c76ff55373">h2_task::mplx</a></div><div class="ttdeci">struct h2_mplx * mplx</div><div class="ttdef"><b>Definition:</b> h2_task.h:79</div></div>
<div class="ttc" id="structh2__task_html_a09e7e9f9e5fdb61206c344f2272d9f20"><div class="ttname"><a href="structh2__task.html#a09e7e9f9e5fdb61206c344f2272d9f20">h2_task::stream_id</a></div><div class="ttdeci">int stream_id</div><div class="ttdef"><b>Definition:</b> h2_task.h:54</div></div>
<div class="ttc" id="group__APR__Error_html_ga9458da18e0ee46a5d37c9cdfdc43efd2"><div class="ttname"><a href="group__APR__Error.html#ga9458da18e0ee46a5d37c9cdfdc43efd2">APR_ECONNABORTED</a></div><div class="ttdeci">#define APR_ECONNABORTED</div><div class="ttdef"><b>Definition:</b> apr_errno.h:769</div></div>
<div class="ttc" id="h2__ngn__shed_8c_html_a733dcc7a4e7fd256c6f340e592c525f0"><div class="ttname"><a href="h2__ngn__shed_8c.html#a733dcc7a4e7fd256c6f340e592c525f0">h2_ngn_shed_push_request</a></div><div class="ttdeci">apr_status_t h2_ngn_shed_push_request(h2_ngn_shed *shed, const char *ngn_type, request_rec *r, http2_req_engine_init *einit)</div><div class="ttdef"><b>Definition:</b> h2_ngn_shed.c:158</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="structh2__mplx_html_ab9d2944dc8737d9f6f00c752fc0cef09"><div class="ttname"><a href="structh2__mplx.html#ab9d2944dc8737d9f6f00c752fc0cef09">h2_mplx::ngn_shed</a></div><div class="ttdeci">struct h2_ngn_shed * ngn_shed</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:98</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="h2__ctx_8c_html_ac49063adb1fe588e8c4225660712e85b"><div class="ttname"><a href="h2__ctx_8c.html#ac49063adb1fe588e8c4225660712e85b">h2_ctx_rget_task</a></div><div class="ttdeci">h2_task * h2_ctx_rget_task(request_rec *r)</div><div class="ttdef"><b>Definition:</b> h2_ctx.c:117</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a96adfac6a3d6cb5e42814407f068f095_cgraph.png" border="0" usemap="#h2__mplx_8c_a96adfac6a3d6cb5e42814407f068f095_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a96adfac6a3d6cb5e42814407f068f095_cgraph" id="h2__mplx_8c_a96adfac6a3d6cb5e42814407f068f095_cgraph">
<area shape="rect" id="node2" href="h2__ctx_8c.html#ac49063adb1fe588e8c4225660712e85b" title="h2_ctx_rget_task" alt="" coords="473,31,595,57"/>
<area shape="rect" id="node6" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="272,68,371,95"/>
<area shape="rect" id="node7" href="h2__ngn__shed_8c.html#a733dcc7a4e7fd256c6f340e592c525f0" title="h2_ngn_shed_push_request" alt="" coords="229,119,413,145"/>
<area shape="rect" id="node3" href="h2__ctx_8c.html#a73f299fd602fd387e0c2df6ac6bcc129" title="h2_ctx_get_task" alt="" coords="655,5,773,32"/>
<area shape="rect" id="node4" href="h2__ctx_8c.html#a9741b69c92e54de3445c285c42840da2" title="h2_ctx_rget" alt="" coords="669,56,759,83"/>
<area shape="rect" id="node5" href="h2__ctx_8c.html#ac4ce31e55232ccac0c4fb72064dad547" title="h2_ctx_get" alt="" coords="821,56,908,83"/>
<area shape="rect" id="node8" href="h2__task_8c.html#a9d193d0549613d13db960961d371bbdf" title="h2_task_has_thawed" alt="" coords="461,93,607,120"/>
<area shape="rect" id="node9" href="h2__task_8c.html#a4226c76b03850608adeebbbb3085ed97" title="h2_task_freeze" alt="" coords="479,144,589,171"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a644accb999ad3ddab0449ab90e0d725a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a> h2_mplx_shutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Shut down the multiplexer gracefully. Will no longer schedule new streams but let the ongoing ones finish normally. </p><dl class="section return"><dt>Returns</dt><dd>the highest stream id being/been processed </dd></dl>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> max_stream_started = 0;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    </div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    max_stream_started = m-&gt;<a class="code" href="structh2__mplx.html#a8ca4248d31d38a65be9c4d78b53d1c5c">max_stream_started</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">/* Clear schedule queue, disabling existing streams from starting */</span> </div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="h2__util_8c.html#adc7376b44e6aa98352ab8644c33db894">h2_iq_clear</a>(m-&gt;<a class="code" href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">q</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> max_stream_started;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="ttc" id="structh2__mplx_html_a8ca4248d31d38a65be9c4d78b53d1c5c"><div class="ttname"><a href="structh2__mplx.html#a8ca4248d31d38a65be9c4d78b53d1c5c">h2_mplx::max_stream_started</a></div><div class="ttdeci">int max_stream_started</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:77</div></div>
<div class="ttc" id="h2__util_8c_html_adc7376b44e6aa98352ab8644c33db894"><div class="ttname"><a href="h2__util_8c.html#adc7376b44e6aa98352ab8644c33db894">h2_iq_clear</a></div><div class="ttdeci">void h2_iq_clear(h2_iqueue *q)</div><div class="ttdef"><b>Definition:</b> h2_util.c:415</div></div>
<div class="ttc" id="structh2__mplx_html_ad17f6957099ada646931069bda0239db"><div class="ttname"><a href="structh2__mplx.html#ad17f6957099ada646931069bda0239db">h2_mplx::q</a></div><div class="ttdeci">struct h2_iqueue * q</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:71</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a644accb999ad3ddab0449ab90e0d725a_cgraph.png" border="0" usemap="#h2__mplx_8c_a644accb999ad3ddab0449ab90e0d725a_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a644accb999ad3ddab0449ab90e0d725a_cgraph" id="h2__mplx_8c_a644accb999ad3ddab0449ab90e0d725a_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#adc7376b44e6aa98352ab8644c33db894" title="h2_iq_clear" alt="" coords="242,5,330,32"/>
<area shape="rect" id="node3" href="h2__bucket__beam_8c.html#ad8499c5012a3e58019ad2ac3e1b1d905" title="h2_beam_report_consumption" alt="" coords="188,56,384,83"/>
<area shape="rect" id="node4" href="h2__bucket__beam_8c.html#ae7a6de19a8d0034d20cc4d4070f2d7dc" title="h2_beam_log" alt="" coords="445,132,544,159"/>
<area shape="rect" id="node7" href="h2__task_8c.html#a1996faff0e08b474d1e2106d232dabc2" title="h2_task_destroy" alt="" coords="227,157,345,184"/>
<area shape="rect" id="node8" href="h2__bucket__beam_8c.html#aa25b2453ef8424ed4ca4d0596608c1ec" title="h2_beam_destroy" alt="" coords="432,195,557,221"/>
<area shape="rect" id="node9" href="h2__conn_8c.html#a0e096c2944414bec2df50f380399c6ad" title="h2_slave_destroy" alt="" coords="224,259,348,285"/>
<area shape="rect" id="node10" href="h2__util_8c.html#a484925742af7f24ebace55ad9be3731a" title="h2_ihash_remove" alt="" coords="224,309,348,336"/>
<area shape="rect" id="node11" href="h2__stream_8c.html#a6d1a3cc7c3b12d0754d3c53633898768" title="h2_stream_destroy" alt="" coords="219,360,353,387"/>
<area shape="rect" id="node12" href="h2__util_8c.html#adca33ffb38ae50b885c3c95080068828" title="h2_ihash_empty" alt="" coords="227,411,345,437"/>
<area shape="rect" id="node13" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="237,461,335,488"/>
<area shape="rect" id="node5" href="h2__bucket__beam_8c.html#a4ee1be1e659ba9dfdad0db85d89967fe" title="h2_beam_empty" alt="" coords="623,107,742,133"/>
<area shape="rect" id="node6" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="605,157,760,184"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a44229c7f9b1de82631ee8f088c000b45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_stream_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structh2__stream.html">h2_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies mplx that a stream has been completely handled on the main connection and is ready for cleanup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the mplx itself </td></tr>
    <tr><td class="paramname">stream</td><td>the stream ready for cleanup </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    </div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a>(<a class="code" href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a>, <a class="code" href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a>, 0, m-&gt;<a class="code" href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">c</a>, </div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                  <a class="code" href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a>(stream, <span class="stringliteral">&quot;cleanup&quot;</span>));</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    stream_cleanup(m, stream);        </div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    </div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="ttc" id="group__APACHE__CORE__LOG_html_ga655e126996849bcb82e4e5a14c616f4a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga655e126996849bcb82e4e5a14c616f4a">APLOG_MARK</a></div><div class="ttdeci">#define APLOG_MARK</div><div class="ttdef"><b>Definition:</b> http_log.h:283</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_ga60ef6919b8e1b691b0c1ac4d67c9449f"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#ga60ef6919b8e1b691b0c1ac4d67c9449f">ap_log_cerror</a></div><div class="ttdeci">#define ap_log_cerror</div><div class="ttdef"><b>Definition:</b> http_log.h:498</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="h2__stream_8h_html_a5d2429e78d1a9c910f654300062147be"><div class="ttname"><a href="h2__stream_8h.html#a5d2429e78d1a9c910f654300062147be">H2_STRM_MSG</a></div><div class="ttdeci">#define H2_STRM_MSG(s, msg)</div><div class="ttdef"><b>Definition:</b> h2_stream.h:309</div></div>
<div class="ttc" id="structh2__mplx_html_ac63918b573f120f457787754cd79f263"><div class="ttname"><a href="structh2__mplx.html#ac63918b573f120f457787754cd79f263">h2_mplx::c</a></div><div class="ttdeci">conn_rec * c</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:58</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="group__APACHE__CORE__LOG_html_gaaa69603638ba4a5d83b8727a1ca5b76a"><div class="ttname"><a href="group__APACHE__CORE__LOG.html#gaaa69603638ba4a5d83b8727a1ca5b76a">APLOG_TRACE2</a></div><div class="ttdeci">#define APLOG_TRACE2</div><div class="ttdef"><b>Definition:</b> http_log.h:52</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a44229c7f9b1de82631ee8f088c000b45_icgraph.png" border="0" usemap="#h2__mplx_8c_a44229c7f9b1de82631ee8f088c000b45_icgraph" alt=""/></div>
<map name="h2__mplx_8c_a44229c7f9b1de82631ee8f088c000b45_icgraph" id="h2__mplx_8c_a44229c7f9b1de82631ee8f088c000b45_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a9d9a44308b54a90de8859bb96e30e81f" title="h2_session_state_str" alt="" coords="224,29,371,56"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0a543f7d3e75d3b0c6772d96d8386294"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaa5105fa83cc322f09382292db8b47593">apr_status_t</a> h2_mplx_stream_do </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="h2__mplx_8h.html#a0c76c78abf689f5aa1982515e4972c82">h2_mplx_stream_cb</a> *&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="structstream__iter__ctx__t.html">stream_iter_ctx_t</a> <a class="code" href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    </div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a>(m);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    x.<a class="code" href="structstream__iter__ctx__t.html#a9f0181dbf78d5fd135ea7aad23d68b28">cb</a> = cb;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    x.<a class="code" href="structstream__iter__ctx__t.html#a61ab967d8e105632d81c6931b11a29cc">ctx</a> = <a class="code" href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, stream_iter_wrap, &amp;x);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        </div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="ttc" id="group__MOD__PROXY_html_gaa51afdb6d96b938b938dc9439be201be"><div class="ttname"><a href="group__MOD__PROXY.html#gaa51afdb6d96b938b938dc9439be201be">x</a></div><div class="ttdeci">char * x</div><div class="ttdef"><b>Definition:</b> mod_proxy.h:619</div></div>
<div class="ttc" id="h2__util_8c_html_ab0cd94ef263e1753db17e4e1e420a18b"><div class="ttname"><a href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b">h2_ihash_iter</a></div><div class="ttdeci">int h2_ihash_iter(h2_ihash_t *ih, h2_ihash_iter_t *fn, void *ctx)</div><div class="ttdef"><b>Definition:</b> h2_util.c:273</div></div>
<div class="ttc" id="structstream__iter__ctx__t_html"><div class="ttname"><a href="structstream__iter__ctx__t.html">stream_iter_ctx_t</a></div><div class="ttdef"><b>Definition:</b> h2_mplx.c:351</div></div>
<div class="ttc" id="group__APACHE__CORE__FILTER_html_ga94af791485570bea922969fef12d6259"><div class="ttname"><a href="group__APACHE__CORE__FILTER.html#ga94af791485570bea922969fef12d6259">ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> util_filter.h:409</div></div>
<div class="ttc" id="structstream__iter__ctx__t_html_a61ab967d8e105632d81c6931b11a29cc"><div class="ttname"><a href="structstream__iter__ctx__t.html#a61ab967d8e105632d81c6931b11a29cc">stream_iter_ctx_t::ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:353</div></div>
<div class="ttc" id="h2__mplx_8c_html_af1bd611015d1776f89fe6f7915424b62"><div class="ttname"><a href="h2__mplx_8c.html#af1bd611015d1776f89fe6f7915424b62">H2_MPLX_ENTER</a></div><div class="ttdeci">#define H2_MPLX_ENTER(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:63</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="group__apr__errno_html_ga9ee311b7bf1c691dc521d721339ee2a6"><div class="ttname"><a href="group__apr__errno.html#ga9ee311b7bf1c691dc521d721339ee2a6">APR_SUCCESS</a></div><div class="ttdeci">#define APR_SUCCESS</div><div class="ttdef"><b>Definition:</b> apr_errno.h:225</div></div>
<div class="ttc" id="structstream__iter__ctx__t_html_a9f0181dbf78d5fd135ea7aad23d68b28"><div class="ttname"><a href="structstream__iter__ctx__t.html#a9f0181dbf78d5fd135ea7aad23d68b28">stream_iter_ctx_t::cb</a></div><div class="ttdeci">h2_mplx_stream_cb * cb</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:352</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_cgraph.png" border="0" usemap="#h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_cgraph" id="h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="222,5,321,32"/>
<area shape="rect" id="node3" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="1488,259,1627,285"/>
<area shape="rect" id="node4" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="194,107,349,133"/>
<area shape="rect" id="node5" href="h2__bucket__beam_8c.html#a6d193e70e5d65e51644687e2e0c03762" title="h2_beam_on_consumed" alt="" coords="1043,107,1205,133"/>
<area shape="rect" id="node6" href="h2__stream_8c.html#a72e8d2062416e6e7f289eca09126f2e3" title="h2_stream_set_monitor" alt="" coords="192,208,351,235"/>
<area shape="rect" id="node7" href="h2__stream_8c.html#a94fdcb6bf200da876a894ac3433fc7ee" title="h2_stream_rst" alt="" coords="219,588,324,615"/>
<area shape="rect" id="node10" href="h2__stream_8c.html#a22d5c24fab201d82288c066488fc4151" title="h2_stream_dispatch" alt="" coords="399,689,537,716"/>
<area shape="rect" id="node8" href="h2__bucket__beam_8c.html#a18fcdf460f20b412ce76dd68c93cdbe2" title="h2_beam_abort" alt="" coords="413,537,523,564"/>
<area shape="rect" id="node9" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="411,588,525,615"/>
<area shape="rect" id="node11" href="h2__session_8c.html#a2827fca84388460b3e2859326a00a3c9" title="h2_session_push_enabled" alt="" coords="586,664,761,691"/>
<area shape="rect" id="node12" href="h2__config_8c.html#a22d672856fe674becba5e4e07ba0ae04" title="h2_config_geti" alt="" coords="849,1069,955,1096"/>
<area shape="rect" id="node50" href="h2__util_8c.html#ac28f57757be5e96803c3300e2caf94f4" title="h2_push_policy_determine" alt="" coords="585,765,761,792"/>
<area shape="rect" id="node14" href="unix_2sockopt_8c.html#aa32313b54afed590367c8571075d2bc1" title="apr_socket_timeout_get" alt="" coords="821,461,983,488"/>
<area shape="rect" id="node15" href="unix_2sockopt_8c.html#a945bdbe807ec5635d65a6fd9ddb78c29" title="apr_socket_timeout_set" alt="" coords="821,512,983,539"/>
<area shape="rect" id="node16" href="h2__util_8c.html#a6b44f7b0518d2c540d313e528994d1f0" title="h2_res_create_ngtrailer" alt="" coords="823,563,981,589"/>
<area shape="rect" id="node17" href="h2__stream_8c.html#ad399f3b4e86a01910ee4b0e39de95509" title="h2_stream_submit_pushes" alt="" coords="813,664,991,691"/>
<area shape="rect" id="node24" href="h2__session_8c.html#a8f2507556c255cdde8cf388d0008ee88" title="h2_session_set_prio" alt="" coords="1276,664,1417,691"/>
<area shape="rect" id="node27" href="h2__stream_8c.html#aa12615c37d60f4cbc50ef3455eb4b77b" title="h2_stream_get_priority" alt="" coords="825,765,979,792"/>
<area shape="rect" id="node30" href="h2__headers_8c.html#a09ef8b60a6dcb5092fbf6c5b436fb00b" title="h2_headers_copy" alt="" coords="840,917,964,944"/>
<area shape="rect" id="node32" href="h2__util_8c.html#a1f8a1d013fda7e98be914213de199edf" title="h2_res_create_ngheader" alt="" coords="820,816,984,843"/>
<area shape="rect" id="node33" href="h2__headers_8c.html#ac241e59095a6600f7a10ddb103ecbe04" title="h2_headers_are_response" alt="" coords="815,867,989,893"/>
<area shape="rect" id="node34" href="h2__stream_8c.html#ab0939d34133abdcf905f5e8879e63cc1" title="h2_stream_out_prepare" alt="" coords="823,968,981,995"/>
<area shape="rect" id="node37" href="h2__util_8c.html#ae4c244854d49bc3a4a3f4b5f14c1b696" title="h2_iq_shift" alt="" coords="1081,613,1167,640"/>
<area shape="rect" id="node38" href="h2__session_8c.html#ad1d4897f2aa846843b8de9c00e1c75b3" title="h2_session_stream_get" alt="" coords="822,1019,982,1045"/>
<area shape="rect" id="node39" href="h2__stream_8c.html#a15066acf068a7b151f01f384d517ebdc" title="h2_stream_prep_processing" alt="" coords="809,284,995,311"/>
<area shape="rect" id="node40" href="h2__mplx_8c.html#af6c35070795724a55320fd46e77f1ec2" title="h2_mplx_process" alt="" coords="840,335,964,361"/>
<area shape="rect" id="node46" href="h2__stream_8c.html#abe2b7cf31575b9058feb0abb4f19f657" title="h2_stream_flush_input" alt="" coords="825,411,979,437"/>
<area shape="rect" id="node13" href="h2__config_8c.html#a51b0c2c10599587f54770a555258d209" title="h2_config_geti64" alt="" coords="1064,1069,1184,1096"/>
<area shape="rect" id="node18" href="h2__push_8c.html#a472b2fcc2974feb81969d04dd1aa07cf" title="h2_push_collect_update" alt="" coords="1043,765,1205,792"/>
<area shape="rect" id="node22" href="h2__session_8c.html#a963d3784514be3ea425a0cc87cf3aa42" title="h2_session_push" alt="" coords="1063,664,1185,691"/>
<area shape="rect" id="node19" href="h2__push_8c.html#a3acefab6eecc2c75624d6bec56424929" title="h2_push_diary_digest64_set" alt="" coords="1253,765,1440,792"/>
<area shape="rect" id="node20" href="h2__push_8c.html#a59d6a4f024f9bad56b3023de17d5137d" title="h2_push_collect" alt="" coords="1289,816,1405,843"/>
<area shape="rect" id="node21" href="h2__push_8c.html#a84db00b607fb6e1ef26ffa022282ee1f" title="h2_push_diary_update" alt="" coords="1271,715,1423,741"/>
<area shape="rect" id="node23" href="h2__util_8c.html#abfea8ee29c3a402209ad4f92b215b989" title="h2_req_create_ngheader" alt="" coords="1265,613,1429,640"/>
<area shape="rect" id="node26" href="h2__stream_8c.html#a2c7058536130c66cfa5f104cd2e27ccc" title="h2_stream_set_request" alt="" coords="1267,436,1426,463"/>
<area shape="rect" id="node25" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6" title="void" alt="" coords="1534,791,1581,817"/>
<area shape="rect" id="node28" href="h2__config_8c.html#a0c867c8f46306da65aab3a5112f27c4a" title="h2_config_get_priority" alt="" coords="1049,867,1199,893"/>
<area shape="rect" id="node29" href="h2__config_8c.html#a0c0f1e9706b7426cb14a63a08420e03d" title="h2_config_sget" alt="" coords="1291,867,1402,893"/>
<area shape="rect" id="node31" href="h2__headers_8c.html#a374f6ee5d97690b7613c76be360eb970" title="h2_headers_create" alt="" coords="1058,917,1190,944"/>
<area shape="rect" id="node35" href="h2__mplx_8c.html#a2635034633242ada1070ca3e4fab411f" title="h2_mplx_keep_active" alt="" coords="1050,968,1198,995"/>
<area shape="rect" id="node36" href="h2__bucket__beam_8c.html#afb11867e565237b6b2e7797444e445d7" title="h2_beam_receive" alt="" coords="1062,1019,1186,1045"/>
<area shape="rect" id="node41" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="1073,309,1175,336"/>
<area shape="rect" id="node42" href="h2__util_8c.html#a18c62b8d07b5c08ef7e9b142b09ad7d0" title="h2_iq_add" alt="" coords="1083,360,1165,387"/>
<area shape="rect" id="node43" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="1075,411,1173,437"/>
<area shape="rect" id="node44" href="h2__conn_8c.html#a1e38739f4ba1fd9f06d27ee6beadaf3a" title="h2_slave_create" alt="" coords="1065,157,1183,184"/>
<area shape="rect" id="node45" href="h2__task_8c.html#a864cff0b1216bbe6057dabec78e23b32" title="h2_task_create" alt="" coords="1069,208,1179,235"/>
<area shape="rect" id="node47" href="h2__bucket__beam_8c.html#abd0e8829e808a93cccdec17e06448a80" title="h2_beam_send" alt="" coords="1069,563,1179,589"/>
<area shape="rect" id="node48" href="h2__bucket__beam_8c.html#a1eb7e877b1b6addd67a8d3556728b304" title="h2_beam_is_closed" alt="" coords="1055,461,1193,488"/>
<area shape="rect" id="node49" href="h2__bucket__beam_8c.html#a756a84813d57b4df12deb88314374277" title="h2_beam_close" alt="" coords="1067,512,1181,539"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_icgraph.png" border="0" usemap="#h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_icgraph" alt=""/></div>
<map name="h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_icgraph" id="h2__mplx_8c_a0a543f7d3e75d3b0c6772d96d8386294_icgraph">
<area shape="rect" id="node2" href="h2__session_8h.html#a5584e45f2ba9a38c876f3ea1c59ee703" title="h2_session_event" alt="" coords="192,5,319,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a337cdba57b715ca7ae976124d5824bfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structh2__stream.html">h2_stream</a>* h2_mplx_stream_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcre_8txt.html#a42dfa4ff673c82d8efe7144098fbc198">int</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="structh2__stream.html">h2_stream</a> *<a class="code" href="group__APACHE__CORE__LISTEN.html#ga9359ed159c8b295541e3770172d34550">s</a> = <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    </div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a>(m);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    s = <a class="code" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a>(m-&gt;<a class="code" href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">streams</a>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__APACHE__CORE__LISTEN.html#ga9359ed159c8b295541e3770172d34550">s</a>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="ttc" id="h2__util_8c_html_a5d1f2bcbe360015aec7585bb030beffd"><div class="ttname"><a href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd">h2_ihash_get</a></div><div class="ttdeci">void * h2_ihash_get(h2_ihash_t *ih, int id)</div><div class="ttdef"><b>Definition:</b> h2_util.c:256</div></div>
<div class="ttc" id="structh2__stream_html"><div class="ttname"><a href="structh2__stream.html">h2_stream</a></div><div class="ttdef"><b>Definition:</b> h2_stream.h:64</div></div>
<div class="ttc" id="group__APACHE__CORE__LISTEN_html_ga9359ed159c8b295541e3770172d34550"><div class="ttname"><a href="group__APACHE__CORE__LISTEN.html#ga9359ed159c8b295541e3770172d34550">s</a></div><div class="ttdeci">server_rec * s</div><div class="ttdef"><b>Definition:</b> ap_listen.h:109</div></div>
<div class="ttc" id="structh2__mplx_html_a8b34fc7de9f06e5915dfec5e978bf57d"><div class="ttname"><a href="structh2__mplx.html#a8b34fc7de9f06e5915dfec5e978bf57d">h2_mplx::streams</a></div><div class="ttdeci">struct h2_ihash_t * streams</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:66</div></div>
<div class="ttc" id="h2__mplx_8c_html_a221ab3905c5c20cbcca9f97b2c8d1375"><div class="ttname"><a href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a></div><div class="ttdeci">#define H2_MPLX_ENTER_ALWAYS(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:71</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a337cdba57b715ca7ae976124d5824bfb_cgraph.png" border="0" usemap="#h2__mplx_8c_a337cdba57b715ca7ae976124d5824bfb_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a337cdba57b715ca7ae976124d5824bfb_cgraph" id="h2__mplx_8c_a337cdba57b715ca7ae976124d5824bfb_cgraph">
<area shape="rect" id="node2" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="228,5,327,32"/>
<area shape="rect" id="node3" href="h2__bucket__beam_8c.html#ae7a6de19a8d0034d20cc4d4070f2d7dc" title="h2_beam_log" alt="" coords="228,56,327,83"/>
<area shape="rect" id="node6" href="h2__bucket__beam_8c.html#a6d193e70e5d65e51644687e2e0c03762" title="h2_beam_on_consumed" alt="" coords="196,107,359,133"/>
<area shape="rect" id="node7" href="h2__bucket__beam_8c.html#a7560e429dd9cd2848dbada8944ee3330" title="h2_beam_on_produced" alt="" coords="199,157,355,184"/>
<area shape="rect" id="node8" href="h2__bucket__beam_8c.html#acfc556b8668153697599d43ffe51dce5" title="h2_beam_on_file_beam" alt="" coords="198,208,357,235"/>
<area shape="rect" id="node9" href="h2__bucket__beam_8c.html#a13ae5b7721fe30348905ff5ae3836aaa" title="h2_beam_no_files" alt="" coords="214,259,341,285"/>
<area shape="rect" id="node4" href="h2__bucket__beam_8c.html#a4ee1be1e659ba9dfdad0db85d89967fe" title="h2_beam_empty" alt="" coords="425,31,543,57"/>
<area shape="rect" id="node5" href="h2__bucket__beam_8c.html#ae5d97b52187376d68acb436f374a0e9d" title="h2_beam_get_buffered" alt="" coords="407,81,561,108"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38878adbc3c68dc97bd5fc9b6334f593"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MOD__ISAPI.html#gacd6cdbf73df3d9eed42fa493d9b621a6">void</a> h2_mplx_task_done </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structh2__mplx.html">h2_mplx</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structh2__task.html">h2_task</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structh2__task.html">h2_task</a> **&#160;</td>
          <td class="paramname"><em>ptask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;{</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a>(m);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    task_done(m, task, <a class="code" href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    --m-&gt;<a class="code" href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">tasks_active</a>;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    </div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structh2__mplx.html#a73aa7f159ac689bf606b7cea6364a2de">join_wait</a>) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        apr_thread_cond_signal(m-&gt;<a class="code" href="structh2__mplx.html#a73aa7f159ac689bf606b7cea6364a2de">join_wait</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (ptask) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="comment">/* caller wants another task */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        *ptask = next_stream_task(m);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    register_if_needed(m);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a>(m);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div><div class="ttc" id="structh2__mplx_html_a73aa7f159ac689bf606b7cea6364a2de"><div class="ttname"><a href="structh2__mplx.html#a73aa7f159ac689bf606b7cea6364a2de">h2_mplx::join_wait</a></div><div class="ttdeci">struct apr_thread_cond_t * join_wait</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:89</div></div>
<div class="ttc" id="structh2__mplx_html_a8d141fea6adae0c6fc8dcf262fd39803"><div class="ttname"><a href="structh2__mplx.html#a8d141fea6adae0c6fc8dcf262fd39803">h2_mplx::tasks_active</a></div><div class="ttdeci">int tasks_active</div><div class="ttdef"><b>Definition:</b> h2_mplx.h:78</div></div>
<div class="ttc" id="h2__mplx_8c_html_a221ab3905c5c20cbcca9f97b2c8d1375"><div class="ttname"><a href="h2__mplx_8c.html#a221ab3905c5c20cbcca9f97b2c8d1375">H2_MPLX_ENTER_ALWAYS</a></div><div class="ttdeci">#define H2_MPLX_ENTER_ALWAYS(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:71</div></div>
<div class="ttc" id="pcre_8txt_html_ad7f989d16aa8ca809a36bc392c07fba1"><div class="ttname"><a href="pcre_8txt.html#ad7f989d16aa8ca809a36bc392c07fba1">NULL</a></div><div class="ttdeci">this is a typedef for a structure whose contents are not externally defined It is up to the caller to free the that it does not depend on memory the complete pcre data block is not fully because it may contain a copy of the tableptr argu which is an those that are compatible with but some others as well can also be set and unset from within the the contents of the options argument specifies their settings at the start of compilation and execution The and PCRE_NO_START_OPTIMIZE options can be set at the time of matching as well as at compile time If errptr is NULL</div><div class="ttdef"><b>Definition:</b> pcre.txt:2065</div></div>
<div class="ttc" id="h2__mplx_8c_html_add9eec40d5aff64281c31a3184572421"><div class="ttname"><a href="h2__mplx_8c.html#add9eec40d5aff64281c31a3184572421">H2_MPLX_LEAVE</a></div><div class="ttdeci">#define H2_MPLX_LEAVE(m)</div><div class="ttdef"><b>Definition:</b> h2_mplx.c:68</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="h2__mplx_8c_a38878adbc3c68dc97bd5fc9b6334f593_cgraph.png" border="0" usemap="#h2__mplx_8c_a38878adbc3c68dc97bd5fc9b6334f593_cgraph" alt=""/></div>
<map name="h2__mplx_8c_a38878adbc3c68dc97bd5fc9b6334f593_cgraph" id="h2__mplx_8c_a38878adbc3c68dc97bd5fc9b6334f593_cgraph">
<area shape="rect" id="node2" href="h2__task_8c.html#ac78ebf568d2a302ef95cb1f36b338c94" title="h2_task_can_redo" alt="" coords="197,5,325,32"/>
<area shape="rect" id="node4" href="h2__util_8c.html#a5d1f2bcbe360015aec7585bb030beffd" title="h2_ihash_get" alt="" coords="212,56,311,83"/>
<area shape="rect" id="node5" href="h2__stream_8c.html#aaf384cb883a4e857802183c81dc501bf" title="h2_stream_is_ready" alt="" coords="192,107,331,133"/>
<area shape="rect" id="node6" href="h2__util_8c.html#ab0cd94ef263e1753db17e4e1e420a18b" title="h2_ihash_iter" alt="" coords="212,157,311,184"/>
<area shape="rect" id="node7" href="h2__util_8c.html#a4348605c0734bb5b773c423f5a687f01" title="h2_ihash_count" alt="" coords="205,208,318,235"/>
<area shape="rect" id="node8" href="h2__task_8c.html#ac793362a59fb8ec08e7d60dd0ca950e6" title="h2_task_rst" alt="" coords="216,259,307,285"/>
<area shape="rect" id="node11" href="h2__util_8c.html#a0e8808cee68f42516bab06b01d8ebf16" title="h2_ihash_add" alt="" coords="210,309,313,336"/>
<area shape="rect" id="node3" href="h2__bucket__beam_8c.html#ac875e00e9dd5bf2a8cb64b5241f646b8" title="h2_beam_was_received" alt="" coords="379,5,541,32"/>
<area shape="rect" id="node9" href="h2__bucket__beam_8c.html#a9c8148804ab779b45238332b594d8de8" title="h2_beam_leave" alt="" coords="403,233,517,260"/>
<area shape="rect" id="node10" href="h2__bucket__beam_8c.html#a18fcdf460f20b412ce76dd68c93cdbe2" title="h2_beam_abort" alt="" coords="405,284,515,311"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
